<div dir="ltr">Thank you George. This is very informative. <div><br></div><div>Is it possible to pass the option in runtime rather setting up in the config file?</div><div><br></div><div>Thank you</div><div>Saliya</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Jun 30, 2015 at 7:20 PM, George Bosilca <span dir="ltr">&lt;<a href="mailto:bosilca@icl.utk.edu" target="_blank">bosilca@icl.utk.edu</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Saliya,<span class=""><div><br></div><div>On Tue, Jun 30, 2015 at 10:50 AM, Saliya Ekanayake <span dir="ltr">&lt;<a href="mailto:esaliya@gmail.com" target="_blank">esaliya@gmail.com</a>&gt;</span> wrote:<br></div></span><div class="gmail_extra"><div class="gmail_quote"><span class=""><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr">Hi,<div><br></div><div>I am experiencing some bottleneck with allgatherv routine in one of our programs and wonder how it works internally. Could you please share some details on this?</div></div></blockquote><div><br></div></span><div>Open MPI has a tunable approach to all the collective algorithms. In case you have the tuned collective enabled (--mca coll tuned,inter,self,basic as an example) you do have access to the pipelined ring version you made reference to. However, in addition to that particular version you also have access to other, sometimes faster, algorithms such as Bruck. </div><div><br></div><div>Do a quick &quot;ompi_info --param coll tuned -l 9&quot; to see all the tuned collective options. You can alter the selection of a particular AllgatherV algorithm in Open MPI by adding the 2 following lines in yout ${HOME}/.openmpi/mca-params.conf file.</div><div><div>coll_tuned_use_dynamic_rules = 1</div><div>coll_tuned_allgatherv_algorithm = 3</div></div><div>With the above 2 lines I force the Bruck algorithm (which has ID 3 in the output of ompi_info) for all allgathev collectives.</div><div><br></div><div>You can benchmark the MPI_Allgatherv for your particular case and then force the selection of the right algorithm.<br><br></div><div>  George.</div><div><br></div><div class="gmail_extra"><br></div><div> </div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><span class=""><div dir="ltr"><div><br></div><div>I found this [1] paper from Gropp discussing an efficient implementation. Is this similar to what we get in OpenMPI?</div><div><br></div><div><div><br></div><div><br></div><div>[1] <a href="http://www.researchgate.net/profile/William_Gropp/publication/221597354_A_Simple_Pipelined_Algorithm_for_Large_Irregular_All-gather_Problems/links/00b49525d291830c67000000.pdf" target="_blank">http://www.researchgate.net/profile/William_Gropp/publication/221597354_A_Simple_Pipelined_Algorithm_for_Large_Irregular_All-gather_Problems/links/00b49525d291830c67000000.pdf</a></div><div><br></div><div><br></div><div><br></div><div><div>Thank you,</div><div>Saliya</div></div><span><font color="#888888">-- <br><div><div dir="ltr"><div><div dir="ltr"><div><div dir="ltr"><span style="color:rgb(136,136,136)">Saliya Ekanayake</span></div><div dir="ltr">Ph.D. Candidate | Research Assistant</div><div dir="ltr">School of Informatics and Computing | Digital Science Center</div><div dir="ltr">Indiana University, Bloomington<br><span style="color:rgb(136,136,136)">Cell <a href="tel:812-391-4914" value="+18123914914" target="_blank">812-391-4914</a></span><br style="color:rgb(136,136,136)"><font color="#888888"><a href="http://saliya.org" target="_blank">http://saliya.org</a></font></div></div></div></div></div></div>
</font></span></div></div>
<br></span>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/06/27229.php" rel="noreferrer" target="_blank">http://www.open-mpi.org/community/lists/users/2015/06/27229.php</a><br></blockquote></div><br></div></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/06/27232.php" rel="noreferrer" target="_blank">http://www.open-mpi.org/community/lists/users/2015/06/27232.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><div dir="ltr"><div><div dir="ltr"><span style="color:rgb(136,136,136)">Saliya Ekanayake</span></div><div dir="ltr">Ph.D. Candidate | Research Assistant</div><div dir="ltr">School of Informatics and Computing | Digital Science Center</div><div dir="ltr">Indiana University, Bloomington<br><span style="color:rgb(136,136,136)">Cell 812-391-4914</span><br style="color:rgb(136,136,136)"><font color="#888888"><a href="http://saliya.org" target="_blank">http://saliya.org</a></font></div></div></div></div></div></div>
</div>

