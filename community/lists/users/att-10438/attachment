<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Hi Tomek,<div><br></div><div>I'm using 10.5.7, and just went through a painful process that we thought was library related (but it wasn't), so I'll give my less-than-learned response, and if you sill have difficulties hopefully others will chime in:</div><div><br></div><div>What is the result of "which mpicc" (or whatever you are using for your compiling/linking? &nbsp;I'm pretty sure that's where the library paths get set, and if you are calling /usr/bin/mpicc you will get the wrong library paths in the executable. &nbsp;</div><div><br></div><div><div><div>On Aug 19, 2009, at &nbsp;10:57 AM, tomek wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div>1. Using&nbsp;<span class="Apple-style-span" style="font-family: monospace, arial, helvetica; font-size: 12px; ">DYLD_LIBRARY_PATH</span></div><div><font class="Apple-style-span" face="monospace, arial, helvetica"><span class="Apple-style-span" style="font-family: Helvetica; ">2. passing some&nbsp;<span class="Apple-style-span" style="font-family: monospace, arial, helvetica; font-size: 12px; white-space: pre; ">./configure --with-wrapper-ldflags="-L/opt/openmpi/lib"</span></span></font></div><div><font class="Apple-style-span" face="monospace, arial, helvetica"><span class="Apple-style-span" style="white-space: pre;"><span class="Apple-style-span" style="font-family: Helvetica, arial, helvetica; white-space: normal; ">3. passing some&nbsp;<span class="Apple-style-span" style="font-family: monospace, arial, helvetica; font-size: 12px; white-space: pre; ">./configure --with-wrapper-ldflags="-rpath /opt/openmpi/lib"</span></span></span></font></div><div><font class="Apple-style-span" face="monospace, arial, helvetica"><span class="Apple-style-span" style="white-space: pre;"><span class="Apple-style-span" style="font-family: Helvetica, arial, helvetica; white-space: normal; ">4. hand compilation with cc -L/opt/openmpi/lib -lmpi</span></span></font></div><div><font class="Apple-style-span" face="Helvetica, arial, helvetica"><br></font></div><div><font class="Apple-style-span" face="Helvetica, arial, helvetica">2 and 3 did not work (ld error=22)</font></div><div><font class="Apple-style-span" face="Helvetica, arial, helvetica"><br></font></div><div><font class="Apple-style-span" face="Helvetica, arial, helvetica">With 1 and 2&nbsp;my code still gets linked with /usr/lib/libmpi...</font></div><div><font class="Apple-style-span" face="Helvetica, arial, helvetica"><br></font></div><div><font class="Apple-style-span" face="Helvetica, arial, helvetica">Note, that the /opt/openmpi/bin path is properly set and ompi_info does outputs the right info.</font></div></div></blockquote><div><br></div><div>You do not need to set DYLD_LIBRARY_PATH. &nbsp;I don't have it set and my mpi applications run fine.</div><div><br></div><div>Did 4 work? &nbsp;</div><div><br></div><div>Cheers, &nbsp;Jody</div><div><br></div><div><br></div></div><div apple-content-edited="true"><span class="Apple-style-span" style="border-collapse: separate; border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Lucida Sans Typewriter; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: 0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; white-space: normal; widows: 2; word-spacing: 0px; "><div style="word-wrap: break-word; -khtml-nbsp-mode: space; -khtml-line-break: after-white-space; "><span class="Apple-style-span" style="border-collapse: separate; border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Lucida Sans Typewriter; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: 0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; white-space: normal; widows: 2; word-spacing: 0px; "><div>--</div><div>Jody Klymak &nbsp; &nbsp;</div><div><a href="http://web.uvic.ca/~jklymak/">http://web.uvic.ca/~jklymak/</a></div><div><br class="khtml-block-placeholder"></div><div><br class="khtml-block-placeholder"></div><br class="Apple-interchange-newline"></span></div></span> </div><br></div></body></html>
