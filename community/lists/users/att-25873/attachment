<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">We should probably create an MPI extension that exposes the internal database so you can just get the info as it is already present, and it seems a shame to execute a collective operation just to re-create it. I’ll put it on my “to-do” list.<div class=""><br class=""></div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Nov 25, 2014, at 4:14 PM, Teranishi, Keita &lt;<a href="mailto:knteran@sandia.gov" class="">knteran@sandia.gov</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><div class="">Adam,</div><div class=""><br class=""></div><div class="">Thanks for the suggestion. &nbsp;I was using my own tokenizer (or those from boost) to extract node ID numbers, but your approach is more generic and serves my own purpose. &nbsp;For the time being I will try to leverage the SCR source, and will ask you if I need any further assistance.</div><div class="">&nbsp;</div><div class="">Best Regards,</div><div class=""><div class=""><div class="">-----------------------------------------------------------------------------</div><div class="">Keita Teranishi</div></div><div class="">Principal Member of Technical Staff</div><div class="">Scalable Modeling and Analysis Systems</div><div class="">Sandia National Laboratories</div><div class="">Livermore, CA 94551</div><div class="">+1 (925) 294-3738</div><div class=""><br class=""></div></div></div><div style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><br class=""></div><span id="OLK_SRC_BODY_SECTION" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><div style="font-family: Calibri; font-size: 11pt; text-align: left; border-width: 1pt medium medium; border-style: solid none none; padding: 3pt 0in 0in; border-top-color: rgb(181, 196, 223);" class=""><span style="font-weight: bold;" class="">From:<span class="Apple-converted-space">&nbsp;</span></span>&lt;Moody&gt;, "Adam T." &lt;<a href="mailto:moody20@llnl.gov" class="">moody20@llnl.gov</a>&gt;<br class=""><span style="font-weight: bold;" class="">Reply-To:<span class="Apple-converted-space">&nbsp;</span></span>Open MPI Users &lt;<a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a>&gt;<br class=""><span style="font-weight: bold;" class="">Date:<span class="Apple-converted-space">&nbsp;</span></span>Tuesday, November 25, 2014 at 3:09 PM<br class=""><span style="font-weight: bold;" class="">To:<span class="Apple-converted-space">&nbsp;</span></span>Open MPI Users &lt;<a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a>&gt;<br class=""><span style="font-weight: bold;" class="">Subject:<span class="Apple-converted-space">&nbsp;</span></span>[EXTERNAL] Re: [OMPI users] How to find MPI ranks located in remote nodes?<br class=""></div><div class=""><br class=""></div><div dir="ltr" class=""><div ocsi="0" fpstyle="1" class="" style="word-wrap: break-word;"><div style="direction: ltr; font-family: Tahoma; font-size: 10pt;" class="">Hi Keita,<br class="">There is no MPI API to do this from within an MPI application.&nbsp; One method I have used for this purpose is to create a function that executes an MPI_Comm_split operation using a string as a color value.&nbsp; As output, it returns a communicator containing all procs that specified the same string as the calling proc.&nbsp; To get a comm of all procs on the same node on a Linux system, I pass in the value of gethostname().<br class=""><br class="">As an example, see scr_split.h/c from the SCR library at<span class="Apple-converted-space">&nbsp;</span><a href="https://github.com/hpc/scr." target="_blank" class="">https://github.com/hpc/scr</a>&nbsp; That implementation uses a bitonic sort along with scan operations to execute the split.&nbsp; You can also accomplish this with hashing.&nbsp; If you need this type of functionality, I have a cleaned-up copy that I could send you without all of the SCR related code.<br class="">-Adam<br class=""><br class=""><br class=""><div style="font-family: 'Times New Roman'; font-size: 16px;" class=""><hr tabindex="-1" class=""><div id="divRpF446819" style="direction: ltr;" class=""><font face="Tahoma" size="2" class=""><b class="">From:</b><span class="Apple-converted-space">&nbsp;</span>users [<a href="mailto:users-bounces@open-mpi.org" class="">users-bounces@open-mpi.org</a>] on behalf of Ralph Castain [<a href="mailto:rhc@open-mpi.org" class="">rhc@open-mpi.org</a>]<br class=""><b class="">Sent:</b><span class="Apple-converted-space">&nbsp;</span>Tuesday, November 25, 2014 2:38 PM<br class=""><b class="">To:</b><span class="Apple-converted-space">&nbsp;</span>Open MPI Users<br class=""><b class="">Subject:</b><span class="Apple-converted-space">&nbsp;</span>Re: [OMPI users] How to find MPI ranks located in remote nodes?<br class=""></font><br class=""></div><div class=""></div><div class="">Every process has a complete map of where every process in the job is located - not sure if there is an MPI API for accessing it, though.<div class=""><br class=""></div><div class=""><br class=""><div class=""><blockquote type="cite" class=""><div class="">On Nov 25, 2014, at 2:32 PM, Teranishi, Keita &lt;<a href="mailto:knteran@sandia.gov" class="" target="_blank">knteran@sandia.gov</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;">Hi,</div><div class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><br class=""></div><div class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;">I am trying &nbsp;to figure out a way for each local MPI rank to identify the ranks located in physically remote nodes (just different nodes) of cluster or MPPs such as Cray. &nbsp;I am using MPI_Get_processor_name to get the node ID, but it requires some processing to map MPI rank to the node ID. &nbsp;Is there any better ways doing this using MPI-2.2 (or earlier) capabilities? &nbsp; It will be great if I can easily get a list of MPI ranks in the same physical node. &nbsp;</div><div class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><br class=""></div><div class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;">Thanks,</div><div class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><div class=""><div class="">-----------------------------------------------------------------------------</div><div class="">Keita Teranishi</div></div><div class="">Principal Member of Technical Staff</div><div class="">Scalable Modeling and Analysis Systems</div><div class="">Sandia National Laboratories</div><div class="">Livermore, CA 94551</div><div class="">+1 (925) 294-3738</div><div class=""><br class=""></div></div><span class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; float: none; display: inline !important;">_______________________________________________</span><br class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><span class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; float: none; display: inline !important;">users mailing list</span><br class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><a href="mailto:users@open-mpi.org" class="" target="_blank" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;">users@open-mpi.org</a><br class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><span class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; float: none; display: inline !important;">Subscription:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" class="" target="_blank" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><span class="" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; float: none; display: inline !important;">Link to this post:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/community/lists/users/2014/11/25868.php" class="" target="_blank" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;">http://www.open-mpi.org/community/lists/users/2014/11/25868.php</a></div></blockquote></div><br class=""></div></div></div></div></div></div></span><span style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class=""></span><span style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">_______________________________________________</span><br style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">users mailing list</span><br style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><a href="mailto:users@open-mpi.org" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">users@open-mpi.org</a><br style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Subscription:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Link to this post:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/community/lists/users/2014/11/25872.php" style="font-family: Calibri, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/community/lists/users/2014/11/25872.php</a></div></blockquote></div><br class=""></div></body></html>
