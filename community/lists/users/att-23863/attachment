<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">If you are running on a Slurm-managed cluster, it won't be happy without configuring --with-slurm - you won't see the allocation, for one.<div><br></div><div>Is it just the --with-slurm option that causes the problem? In other words, if you remove the rest of those options (starting --with-hcoll and going down that config line) and leave --with-slurm, does it build?</div><div><br><div><div>On Mar 16, 2014, at 8:22 AM, Filippo Spiga &lt;<a href="mailto:spiga.filippo@gmail.com">spiga.filippo@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div style="font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Hi Jeff, Hi Ake,<br><br>removing --with-slurm and keeping --with-hcoll seems to work. The error disappears at compile time, I have not yet tried to run a job. I can copy config.log and the make.log is needed.<br><br>Cheers,<br>F<br><br>On Mar 11, 2014, at 4:48 PM, Jeff Squyres (jsquyres) &lt;<a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt; wrote:<br><blockquote type="cite">On Mar 11, 2014, at 11:22 AM, Åke Sandgren &lt;<a href="mailto:ake.sandgren@hpc2n.umu.se">ake.sandgren@hpc2n.umu.se</a>&gt; wrote:<br><br><blockquote type="cite"><blockquote type="cite"><blockquote type="cite">../configure &nbsp;CC=pgcc CXX=pgCC FC=pgf90 F90=pgf90 --prefix=/usr/local/Cluster-Users/fs395/openmpi-1.7.4/pgi-14.2_cuda-6.0RC &nbsp;--enable-mpirun-prefix-by-default --with-hcoll=$HCOLL_DIR --with-fca=$FCA_DIR --with-mxm=$MXM_DIR --with-knem=$KNEM_DIR --with-slurm=/usr/local/Cluster-Apps/slurm &nbsp;--with-cuda=$CUDA_INSTALL_PATH<br><br><br>At some point the compile process fails with this error:<br><br>make[2]: Leaving directory `/home/fs395/archive/openmpi-1.7.4/build/ompi/mca/coll/hierarch'<br>Making all in mca/coll/hcoll<br>make[2]: Entering directory `/home/fs395/archive/openmpi-1.7.4/build/ompi/mca/coll/hcoll'<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coll_hcoll_module.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coll_hcoll_component.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coll_hcoll_rte.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coll_hcoll_ops.lo<br>CCLD &nbsp;&nbsp;&nbsp;&nbsp;mca_coll_hcoll.la<br>pgcc-Error-Unknown switch: -pthread<br></blockquote></blockquote><br>You have to remove the -pthread from inherited_linker_flags=<br>in libpmi.la libslurm.la from your slurm build.<br></blockquote><br>With the configure line given above, I don't think he should be linking against libslurm.<br><br>But I wonder if the underlying issue is actually correct: perhaps the inherited_linker_flags from libhcoll.la has -pthreads in it.<br></blockquote><br><br>--<br>Mr. Filippo SPIGA, M.Sc.<br><a href="http://www.linkedin.com/in/filippospiga">http://www.linkedin.com/in/filippospiga</a><span class="Apple-converted-space">&nbsp;</span>~ skype: filippo.spiga<br><br>«Nobody will drive us out of Cantor's paradise.» ~ David Hilbert<br><br>*****<br>Disclaimer: "Please note this message and any attachments are CONFIDENTIAL and may be privileged or otherwise protected from disclosure. The contents are not to be disclosed to anyone other than the addressee. Unauthorized recipients are requested to preserve this confidentiality and to advise the sender immediately of any error in transmission."<br><br><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></div></blockquote></div><br></div></body></html>
