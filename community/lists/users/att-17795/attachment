<html><body><div style="color:#000; background-color:#fff; font-family:times new roman, new york, times, serif;font-size:10pt"><div><span><br></span></div><div>What if two processes Pi and Pj send message to each other at the same time ? Will both block in your suggested code ? <br><br>if not then I can go for that.&nbsp; BTW, I have tried that before.<br><br>regards,<br><br></div><div><br></div>  <div style="font-family: times new roman, new york, times, serif; font-size: 10pt;"> <div style="font-family: times new roman, new york, times, serif; font-size: 12pt;"> <font face="Arial" size="2"> <hr size="1">  <b><span style="font-weight:bold;">From:</span></b> Lukas Razik &lt;linux@razik.name&gt;<br> <b><span style="font-weight: bold;">To:</span></b> Mudassar Majeed &lt;mudassarm30@yahoo.com&gt;; "users@open-mpi.org" &lt;users@open-mpi.org&gt; <br> <b><span style="font-weight: bold;">Sent:</span></b> Sunday, November 20, 2011 3:22 PM<br> <b><span
 style="font-weight: bold;">Subject:</span></b> Re: [OMPI users] MPI_Irecv, MPI_Wait and MPI_Iprobe<br> </font> <br>
Hello Mudassar!<br><br><br><br>&gt;Dear people, <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I have a scenario as shown below, please tell me if it is possible or not<br>&gt;<br>&gt;<br>&gt;------------------------------------------------------------------<br>&gt;while(!IsDone)<br>&gt;{<br>&gt;<br>&gt;// some code here<br>&gt;<br>&gt;MPI_Irecv( .......... );<br>&gt;<br>&gt;// some code here<br>&gt;<br>&gt;MPI_Iprobe( ........., &amp;is_there_a_message);<br>&gt;<br>&gt;if(is_there_a_message)<br>&gt;&nbsp;&nbsp;&nbsp; MPI_Wait( ....... );<br>&gt;<br>&gt;// move forward ... some other code here....<br>&gt;<br>&gt;}<br>&gt;--------------------------------------------------------------------<br>&gt;<br>&gt;My scenario is an <br>asynchronous communication where some other process may or may not send a<br> message to this<br>&gt; process, will MPI_Iprobe find out
 whether it is necessary to call MPI_Wait()&nbsp; or not ?<br><br><br>Sorry, but this conveys no sense to me...<br>1.You don't need to call MPI_Irecv() before MPI_Iprobe() to get the information if there's a new message... :)<br><br>2. If MPI_Iprobe() returns that there's a message then you don't need to call MPI_Wait() anymore.<br>Just receive it by MPI_Recv()... :)<br><br><br><br>&gt; because if we do not do this the process may start waiting for a message that may not come and will block. <br><br><br>Wouldn't this fit?<br>---<br>while(!isDone) {<br>&nbsp; &nbsp; // some code here<br><br><br>&nbsp; &nbsp; MPI_Iprobe(...,there_is_a_message,...); // never blocks<br><br>&nbsp; &nbsp; if( there_is_a_message ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // doesn't block because there's a message:<br><br>&nbsp; &nbsp; &nbsp; &nbsp; MPI_Recv(message,...);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // here you can use your message:<br>&nbsp;&nbsp;
 &nbsp; &nbsp;&nbsp; process(message);<br><br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; process(other_work); // we have no new message so we do another work<br><br>}<br>---<br><br><br>Here the process will receive the message if there's one.<br><br>It won't block if there's no message.<br><br>If I haven't understood your problem in the right way - please write more systematically<br>- how receiver should react if there's a message (e.g. receive it or what else?)<br><br>- how receiver should react if there's no message (e.g. block or continue with another work?)<br><br><br>Best regards,<br>Lukas<br><br><br><br> </div> </div>  </div></body></html>
