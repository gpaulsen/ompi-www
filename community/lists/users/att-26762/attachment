<div dir="ltr">cool, progress!<div><br></div><div>&gt;&gt;<span style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">1429676565.124664]         sys.c:719  MXM  WARN  Conflicting CPU frequencies detected, using: 2601.00</span></div><div><span style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"><br></span></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px">means that cpu governor on your machine is not on &quot;performance&quot; mode </span></font></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px"><br></span></font></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px">&gt;&gt;</span></font><span style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"> MXM  ERROR ibv_query_device() returned 38: Function not implemented</span></div><div><span style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"><br></span></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px">indicates that ofed installed on your nodes is not indeed 2.4.-1.0.0 or there is a mismatch between ofed kernel drivers version and ofed userspace libraries version.</span></font></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px">or you have multiple ofed libraries installed on your node and use incorrect one.</span></font></div><div><span style="font-size:12.8000001907349px">could you please check that ofed_info -s indeed prints mofed 2.4-1.0.0?</span><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px"><br></span></font></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px"> </span></font></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px"><br></span></font></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px"><br></span></font></div><div><font color="#000000" face="HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><span style="font-size:12px"> </span></font></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Wed, Apr 22, 2015 at 7:59 AM, Subhra Mazumdar <span dir="ltr">&lt;<a href="mailto:subhramazumdar1@gmail.com" target="_blank">subhramazumdar1@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Hi,<div><br></div><div>I compiled the openmpi that comes inside the mellanox hpcx package with mxm support instead of separately downloaded openmpi. I also used the environment as in the README so that no LD_PRELOAD (except our own library which is unrelated) is needed. Now it runs fine (no segfault) but we get same errors as before (saying initialization of MXM library failed). Is it using MXM successfully?</div><div><br></div><div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[root@JARVICE hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5]# mpirun --allow-run-as-root  --mca mtl mxm -n 1 /root/backend  localhost : -x LD_PRELOAD=/root/libci.so -n 1 /root/app2 </div><span class=""><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">--------------------------------------------------------------------------</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">WARNING: a request was made to bind a process. While the system</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">supports binding the process itself, at least one node does NOT</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">support binding memory to the process location.</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"><br clear="none"></div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">  Node:  JARVICE</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"><br clear="none"></div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">This usually is due to not having the required NUMA support installed</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">on the node. In some Linux distributions, the required support is</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">contained in the libnumactl and libnumactl-devel packages.</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">This is a warning only; your job will continue, though performance may be degraded.</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">--------------------------------------------------------------------------</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"> i am backend</div></span><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.121218]         sys.c:719  MXM  WARN  Conflicting CPU frequencies detected, using: 2601.00</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.122937] [JARVICE:14767:0]      ib_dev.c:445  MXM  WARN  failed call to ibv_exp_use_priv_env(): Function not implemented</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.122950] [JARVICE:14767:0]      ib_dev.c:456  MXM  ERROR ibv_query_device() returned 38: Function not implemented</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.123535] [JARVICE:14767:0]      ib_dev.c:445  MXM  WARN  failed call to ibv_exp_use_priv_env(): Function not implemented</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.123543] [JARVICE:14767:0]      ib_dev.c:456  MXM  ERROR ibv_query_device() returned 38: Function not implemented</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.124664]         sys.c:719  MXM  WARN  Conflicting CPU frequencies detected, using: 2601.00</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.126264] [JARVICE:14768:0]      ib_dev.c:445  MXM  WARN  failed call to ibv_exp_use_priv_env(): Function not implemented</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.126276] [JARVICE:14768:0]      ib_dev.c:456  MXM  ERROR ibv_query_device() returned 38: Function not implemented</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.126812] [JARVICE:14768:0]      ib_dev.c:445  MXM  WARN  failed call to ibv_exp_use_priv_env(): Function not implemented</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">[1429676565.126821] [JARVICE:14768:0]      ib_dev.c:456  MXM  ERROR ibv_query_device() returned 38: Function not implemented</div><span class=""><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">--------------------------------------------------------------------------</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">Initialization of MXM library failed.</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"><br clear="none"></div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">  Error: Input/output error</div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"><br clear="none"></div><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">--------------------------------------------------------------------------</div><div style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px"><br clear="none"></div></span><div dir="ltr" style="color:rgb(0,0,0);font-family:HelveticaNeue,&#39;Helvetica Neue&#39;,Helvetica,Arial,&#39;Lucida Grande&#39;,sans-serif;font-size:12px">&lt;application runs fine&gt;</div><div><br></div><div><br></div><div>Thanks,</div><div>Subhra.</div><div><br></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div class="h5">On Sat, Apr 18, 2015 at 12:28 AM, Mike Dubman <span dir="ltr">&lt;<a href="mailto:miked@dev.mellanox.co.il" target="_blank">miked@dev.mellanox.co.il</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div><div class="h5"><div dir="ltr">could you please check that ofed_info -s indeed prints mofed 2.4-1.0.0?<div>why LD_PRELOAD needed in your command line? Can you try </div><div><br></div><div>module load hpcx</div><div>mpirun -np $np test.exe</div><div>?</div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>On Sat, Apr 18, 2015 at 8:39 AM, Subhra Mazumdar <span dir="ltr">&lt;<a href="mailto:subhramazumdar1@gmail.com" target="_blank">subhramazumdar1@gmail.com</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div><div><div dir="ltr">I followed the instructions as in the README, now getting a different error:<div><br></div><div><span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[root@JARVICE hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5]# ../openmpi-1.8.4/openmpinstall/bin/mpirun --allow-run-as-root --mca mtl mxm -x LD_PRELOAD=&quot;../openmpi-1.8.4/openmpinstall/lib/libmpi.so.1 ./mxm/lib/libmxm.so.2&quot; -n 1 ../backend localhost : -x LD_PRELOAD=&quot;../openmpi-1.8.4/openmpinstall/lib/libmpi.so.1 ./mxm/lib/libmxm.so.2 ../libci.so&quot; -n 1 ../app2</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">--------------------------------------------------------------------------</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WARNING: a request was made to bind a process. While the system</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">supports binding the process itself, at least one node does NOT</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">support binding memory to the process location.</span></p><br><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">  Node:  JARVICE</span></p><br><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This usually is due to not having the required NUMA support installed</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">on the node. In some Linux distributions, the required support is</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">contained in the libnumactl and libnumactl-devel packages.</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This is a warning only; your job will continue, though performance may be degraded.</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">--------------------------------------------------------------------------</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> i am backend</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[1429334876.139452] [JARVICE:449  :0]  </span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><span style="white-space:pre-wrap">	</span></span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ib_dev.c:445  MXM  WARN  failed call to ibv_exp_use_priv_env(): Function not implemented</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[1429334876.139464] [JARVICE:449  :0]  </span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><span style="white-space:pre-wrap">	</span></span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ib_dev.c:456  MXM  ERROR ibv_query_device() returned 38: Function not implemented</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[1429334876.139982] [JARVICE:449  :0]  </span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><span style="white-space:pre-wrap">	</span></span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ib_dev.c:445  MXM  WARN  failed call to ibv_exp_use_priv_env(): Function not implemented</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[1429334876.139990] [JARVICE:449  :0]  </span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><span style="white-space:pre-wrap">	</span></span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ib_dev.c:456  MXM  ERROR ibv_query_device() returned 38: Function not implemented</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[1429334876.142649] [JARVICE:450  :0]  </span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><span style="white-space:pre-wrap">	</span></span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ib_dev.c:445  MXM  WARN  failed call to ibv_exp_use_priv_env(): Function not implemented</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[1429334876.142666] [JARVICE:450  :0]  </span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><span style="white-space:pre-wrap">	</span></span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ib_dev.c:456  MXM  ERROR ibv_query_device() returned 38: Function not implemented</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[1429334876.143235] [JARVICE:450  :0]  </span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><span style="white-space:pre-wrap">	</span></span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ib_dev.c:445  MXM  WARN  failed call to ibv_exp_use_priv_env(): Function not implemented</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[1429334876.143243] [JARVICE:450  :0]  </span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><span style="white-space:pre-wrap">	</span></span><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ib_dev.c:456  MXM  ERROR ibv_query_device() returned 38: Function not implemented</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">--------------------------------------------------------------------------</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Initialization of MXM library failed.</span></p><br><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">  Error: Input/output error</span></p><br><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">--------------------------------------------------------------------------</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[JARVICE:449  :0] Caught signal 11 (Segmentation fault)</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[JARVICE:450  :0] Caught signal 11 (Segmentation fault)</span></p><span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">==== backtrace ====</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 2 0x000000000005640c mxm_handle_error()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/mxm-v3.2/src/mxm/util/debug/debug.c:641</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 3 0x000000000005657c mxm_error_signal_handler()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/mxm-v3.2/src/mxm/util/debug/debug.c:616</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 4 0x00000000000329a0 killpg()  ??:0</span></p></span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 5 0x000000000004812c _IO_vfprintf()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 6 0x000000000006f6da vasprintf()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 7 0x0000000000059b3b opal_show_help_vstring()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 8 0x0000000000026630 orte_show_help()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 9 0x0000000000001a3f mca_bml_r2_add_procs()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/ompi-mellanox-v1.8/ompi/mca/bml/r2/bml_r2.c:409</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">10 0x0000000000004475 mca_pml_ob1_add_procs()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/ompi-mellanox-v1.8/ompi/mca/pml/ob1/pml_ob1.c:332</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">11 0x00000000000442f3 ompi_mpi_init()  ??:0</span></p><span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">12 0x0000000000067cb0 PMPI_Init_thread()  ??:0</span></p></span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">13 0x000000000000d0ca l_getLocalFromConfig()  /root/rain_ib/interposer/libciutils.c:83</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">14 0x000000000000c7b4 __cudaRegisterFatBinary()  /root/rain_ib/interposer/libci.c:4055</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">15 0x0000000000402b59 _ZL70__sti____cudaRegisterAll_39_tmpxft_00000703_00000000_6_app2_cpp1_ii_hwv()  tmpxft_00000703_00000000-3_app2.cudafe1.cpp:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">16 0x0000000000402dd6 __do_global_ctors_aux()  crtstuff.c:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">===================</span></p><span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">==== backtrace ====</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 2 0x000000000005640c mxm_handle_error()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/mxm-v3.2/src/mxm/util/debug/debug.c:641</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 3 0x000000000005657c mxm_error_signal_handler()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/mxm-v3.2/src/mxm/util/debug/debug.c:616</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 4 0x00000000000329a0 killpg()  ??:0</span></p></span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 5 0x000000000004812c _IO_vfprintf()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 6 0x000000000006f6da vasprintf()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 7 0x0000000000059b3b opal_show_help_vstring()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 8 0x0000000000026630 orte_show_help()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> 9 0x0000000000001a3f mca_bml_r2_add_procs()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/ompi-mellanox-v1.8/ompi/mca/bml/r2/bml_r2.c:409</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">10 0x0000000000004475 mca_pml_ob1_add_procs()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/ompi-mellanox-v1.8/ompi/mca/pml/ob1/pml_ob1.c:332</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">11 0x00000000000442f3 ompi_mpi_init()  ??:0</span></p><span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">12 0x0000000000067cb0 PMPI_Init_thread()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">13 0x0000000000404fdf main()  /root/rain_ib/backend/backend.c:1237</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">14 0x000000000001ed1d __libc_start_main()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">15 0x0000000000402db9 _start()  ??:0</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">===================</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">--------------------------------------------------------------------------</span></p></span><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">mpirun noticed that process rank 1 with PID 450 on node JARVICE exited on signal 11 (Segmentation fault).</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">--------------------------------------------------------------------------</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[JARVICE:00447] 1 more process has sent help message help-mtl-mxm.txt / mxm init</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[JARVICE:00447] Set MCA parameter &quot;orte_base_help_aggregate&quot; to 0 to see all help / error messages</span></p><p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">[root@JARVICE hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5]#</span></p><div><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><br></span></div><div><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><br></span></div><div><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Subhra.</span></div><div><span style="font-size:15px;font-family:Arial;color:rgb(0,0,0);background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><br></span></div></span></div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>On Mon, Apr 13, 2015 at 10:58 PM, Mike Dubman <span dir="ltr">&lt;<a href="mailto:miked@dev.mellanox.co.il" target="_blank">miked@dev.mellanox.co.il</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div><div><div dir="ltr">Have you followed installation steps from README (Also here for reference <a href="http://bgate.mellanox.com/products/hpcx/README.txt" target="_blank">http://bgate.mellanox.com/products/hpcx/README.txt</a>)<div><br></div><div>...</div><div><pre style="color:rgb(0,0,0);word-wrap:break-word;white-space:pre-wrap">* Load OpenMPI/OpenSHMEM v1.8 based package:

    % source $HPCX_HOME/hpcx-init.sh
    % hpcx_load
    % env | grep HPCX
    % mpirun -np 2 $HPCX_MPI_TESTS_DIR/examples/hello_usempi
    % oshrun -np 2 $HPCX_MPI_TESTS_DIR/examples/hello_oshmem
    % hpcx_unload

3. Load HPCX environment from modules

* Load OpenMPI/OpenSHMEM based package:

    % module use $HPCX_HOME/modulefiles
    % module load hpcx
    % mpirun -np 2 $HPCX_MPI_TESTS_DIR/examples/hello_c
    % oshrun -np 2 $HPCX_MPI_TESTS_DIR/examples/hello_oshmem
    % module unload hpcx
</pre></div><div>...</div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>On Tue, Apr 14, 2015 at 5:42 AM, Subhra Mazumdar <span dir="ltr">&lt;<a href="mailto:subhramazumdar1@gmail.com" target="_blank">subhramazumdar1@gmail.com</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div><div><div dir="ltr"><div>I am using 2.4-1.0.0 mellanox ofed.<br><br>I downloaded mofed tarball hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5.tar and extracted it. It has mxm directory.<br><br>hpcx-v1.2.0-325-[root@JARVICE ~]# ls hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5<br>archive      fca    <a href="http://hpcx-init-ompi-mellanox-v1.8.sh" target="_blank">hpcx-init-ompi-mellanox-v1.8.sh</a>  ibprof  modulefiles  ompi-mellanox-v1.8  sources  VERSION<br>bupc-master  hcoll  hpcx-init.sh                     knem    mxm          README.txt          utils<br><br></div>I tried using LD_PRELOAD for libmxm, but getting a different error stack now as following <br><br>[root@JARVICE ~]# ./openmpi-1.8.4/openmpinstall/bin/mpirun --allow-run-as-root --mca mtl mxm -x LD_PRELOAD=&quot;./openmpi-1.8.4/openmpinstall/lib/libmpi.so.1 ./hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/mxm/lib/libmxm.so.2&quot; -n 1 ./backend  localhost : -x LD_PRELOAD=&quot;./openmpi-1.8.4/openmpinstall/lib/libmpi.so.1 ./hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/mxm/lib/libmxm.so.2 ./libci.so&quot; -n 1 ./app2<br> i am backend<br>[JARVICE:00564] mca: base: components_open: component pml / cm open function failed<br>[JARVICE:564  :0] Caught signal 11 (Segmentation fault)<br>[JARVICE:00565] mca: base: components_open: component pml / cm open function failed<br>[JARVICE:565  :0] Caught signal 11 (Segmentation fault)<br>==== backtrace ====<br> 2 0x000000000005640c mxm_handle_error()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/mxm-v3.2/src/mxm/util/debug/debug.c:641<br> 3 0x000000000005657c mxm_error_signal_handler()  /scrap/jenkins/workspace/hpc-power-pack/label/r-vmb-rhel6-u5-x86-64-MOFED-CHECKER/hpcx_root/src/hpcx-v1.2.0-325-gcc-MLNX_OFED_LINUX-2.4-1.0.0-redhat6.5/mxm-v3.2/src/mxm/util/debug/debug.c:616<br> 4 0x00000000000329a0 killpg()  ??:0<br> 5 0x0000000000045491 mca_base_components_close()  ??:0<br> 6 0x000000000004e99a mca_base_framework_close()  ??:0<br> 7 0x0000000000045431 mca_base_component_close()  ??:0<br> 8 0x000000000004515c mca_base_framework_components_open()  ??:0<br> 9 0x00000000000a0de9 mca_pml_base_open()  pml_base_frame.c:0<br>10 0x000000000004eb1c mca_base_framework_open()  ??:0<br>11 0x0000000000043eb3 ompi_mpi_init()  ??:0<br>12 0x0000000000067cb0 PMPI_Init_thread()  ??:0<br>13 0x0000000000404fdf main()  /root/rain_ib/backend/backend.c:1237<br>14 0x000000000001ed1d __libc_start_main()  ??:0<br>15 0x0000000000402db9 _start()  ??:0<br>===================<span><br>--------------------------------------------------------------------------<br>A requested component was not found, or was unable to be opened.  This<br>means that this component is either not installed or is unable to be<br>used on your system (e.g., sometimes this means that shared libraries<br>that the component requires are unable to be found/loaded).  Note that<br>Open MPI stopped checking at the first component that it did not find.<br><br>Host:      JARVICE<br>Framework: mtl<br>Component: mxm<br>--------------------------------------------------------------------------<br>--------------------------------------------------------------------------<br></span>mpirun noticed that process rank 0 with PID 564 on node JARVICE exited on signal 11 (Segmentation fault).<br>--------------------------------------------------------------------------<br>[JARVICE:00562] 1 more process has sent help message help-mca-base.txt / find-available:not-valid<br>[JARVICE:00562] Set MCA parameter &quot;orte_base_help_aggregate&quot; to 0 to see all help / error messages<br><br><br><div><div>Subhra<br><br><br></div><div><div><div class="gmail_extra"><div class="gmail_quote"><div><div>On Sun, Apr 12, 2015 at 10:48 PM, Mike Dubman <span dir="ltr">&lt;<a href="mailto:miked@dev.mellanox.co.il" target="_blank">miked@dev.mellanox.co.il</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"><div><div><div dir="ltr">seems like mxm was not found in your ld_library_path.<div><br></div><div>what mofed version do you use?</div><div>does it have /opt/mellanox/mxm in it?</div><div>You could just run mpirun from HPCX package which looks for mxm internally and recompile ompi as mentioned in README.</div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>On Mon, Apr 13, 2015 at 3:24 AM, Subhra Mazumdar <span dir="ltr">&lt;<a href="mailto:subhramazumdar1@gmail.com" target="_blank">subhramazumdar1@gmail.com</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"><div><div><div dir="ltr"><div>Hi,</div><div><br></div><div>I used mxm mtl as follows but getting segfault. It says mxm component not found but I have compiled openmpi with mxm. Any idea what I might be missing?</div><div><br></div><div>[root@JARVICE ~]# ./openmpi-1.8.4/openmpinstall/bin/mpirun --allow-run-as-root --mca pml cm --mca mtl mxm -n 1 -x LD_PRELOAD=./openmpi-1.8.4/openmpinstall/lib/libmpi.so.1 ./backend localhosst : -n 1 -x LD_PRELOAD=&quot;./libci.so ./openmpi-1.8.4/openmpinstall/lib/libmpi.so.1&quot; ./app2</div><div> i am backend</div><div>[JARVICE:08398] *** Process received signal ***</div><div>[JARVICE:08398] Signal: Segmentation fault (11)</div><div>[JARVICE:08398] Signal code: Address not mapped (1)</div><div>[JARVICE:08398] Failing at address: 0x10</div><div>[JARVICE:08398] [ 0] /lib64/libpthread.so.0(+0xf710)[0x7ff8d0ddb710]</div><div>[JARVICE:08398] [ 1] /root/openmpi-1.8.4/openmpinstall/lib/libopen-pal.so.6(mca_base_components_close+0x21)[0x7ff8cf9ae491]</div><div>[JARVICE:08398] [ 2] /root/openmpi-1.8.4/openmpinstall/lib/libopen-pal.so.6(mca_base_framework_close+0x6a)[0x7ff8cf9b799a]</div><div>[JARVICE:08398] [ 3] /root/openmpi-1.8.4/openmpinstall/lib/libopen-pal.so.6(mca_base_component_close+0x21)[0x7ff8cf9ae431]</div><div>[JARVICE:08398] [ 4] /root/openmpi-1.8.4/openmpinstall/lib/libopen-pal.so.6(mca_base_framework_components_open+0x11c)[0x7ff8cf9ae15c]</div><div>[JARVICE:08398] [ 5] ./openmpi-1.8.4/openmpinstall/lib/libmpi.so.1(+0xa0de9)[0x7ff8d1089de9]</div><div>[JARVICE:08398] [ 6] /root/openmpi-1.8.4/openmpinstall/lib/libopen-pal.so.6(mca_base_framework_open+0x7c)[0x7ff8cf9b7b1c]</div><div>[JARVICE:08398] [ 7] [JARVICE:08398] mca: base: components_open: component pml / cm open function failed</div><div>./openmpi-1.8.4/openmpinstall/lib/libmpi.so.1(ompi_mpi_init+0x4b3)[0x7ff8d102ceb3]</div><div>[JARVICE:08398] [ 8] ./openmpi-1.8.4/openmpinstall/lib/libmpi.so.1(PMPI_Init_thread+0x100)[0x7ff8d1050cb0]</div><div>[JARVICE:08398] [ 9] ./backend[0x404fdf]</div><div>[JARVICE:08398] [10] /lib64/libc.so.6(__libc_start_main+0xfd)[0x7ff8cfeded1d]</div><div>[JARVICE:08398] [11] ./backend[0x402db9]</div><div>[JARVICE:08398] *** End of error message ***</div><div>--------------------------------------------------------------------------</div><div>A requested component was not found, or was unable to be opened.  This</div><div>means that this component is either not installed or is unable to be</div><div>used on your system (e.g., sometimes this means that shared libraries</div><div>that the component requires are unable to be found/loaded).  Note that</div><div>Open MPI stopped checking at the first component that it did not find.</div><div><br></div><div>Host:      JARVICE</div><div>Framework: mtl</div><div>Component: mxm</div><div>--------------------------------------------------------------------------</div><div>--------------------------------------------------------------------------</div><div>mpirun noticed that process rank 0 with PID 8398 on node JARVICE exited on signal 11 (Segmentation fault).</div><div>--------------------------------------------------------------------------</div><div><br></div><div><br></div><div>Subhra.</div><div><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Fri, Apr 10, 2015 at 12:12 AM, Mike Dubman <span dir="ltr">&lt;<a href="mailto:miked@dev.mellanox.co.il" target="_blank">miked@dev.mellanox.co.il</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"><div dir="ltr">no need IPoIB, mxm uses native IB.<div><br></div><div>Please see HPCX (pre-compiled ompi, integrated with MXM and FCA) README file for details how to compile/select.</div><div><br></div><div>The default transport is UD for internode communication and shared-memory for intra-node.</div><div><br></div><div><a href="http://bgate" target="_blank">http://bgate</a>,<a href="http://mellanox.com/products/hpcx/" target="_blank">mellanox.com/products/hpcx/</a></div><div><br></div><div>Also, mxm included in the Mellanox OFED.</div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>On Fri, Apr 10, 2015 at 5:26 AM, Subhra Mazumdar <span dir="ltr">&lt;<a href="mailto:subhramazumdar1@gmail.com" target="_blank">subhramazumdar1@gmail.com</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"><div><div><div dir="ltr"><div><div><div>Hi,<br><br></div>Does ipoib need to be configured on the ib cards for mxm (I have a separate ethernet connection too)? Also are there special flags in mpirun to select from UD/RC/DC? What is the default?<br><br></div>Thanks,<br></div>Subhra.<br><br></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Mar 31, 2015 at 9:46 AM, Mike Dubman <span dir="ltr">&lt;<a href="mailto:miked@dev.mellanox.co.il" target="_blank">miked@dev.mellanox.co.il</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"><div dir="ltr">Hi,<div>mxm uses IB rdma/roce technologies. Once can select UD/RC/DC transports to be used in mxm.</div><div><br></div><div>By selecting mxm, all MPI p2p routines will be mapped to appropriate mxm functions.</div><div><br></div><div>M</div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>On Mon, Mar 30, 2015 at 7:32 PM, Subhra Mazumdar <span dir="ltr">&lt;<a href="mailto:subhramazumdar1@gmail.com" target="_blank">subhramazumdar1@gmail.com</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"><div><div><div dir="ltr">Hi MIke,<div><br></div><div>Does the mxm mtl use infiniband rdma? Also from programming perspective, do I need to use anything else other than MPI_Send/MPI_Recv?</div><div><br></div><div>Thanks,</div><div>Subhra.</div><div><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Sun, Mar 29, 2015 at 11:14 PM, Mike Dubman <span dir="ltr">&lt;<a href="mailto:miked@dev.mellanox.co.il" target="_blank">miked@dev.mellanox.co.il</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"><div dir="ltr">Hi,<div>openib btl does not support this thread model. </div><div>You can use OMPI w/ mxm (-mca mtl mxm) and multiple thread mode lin 1.8 x series or (-mca pml yalla) in the master branch.</div><div><br></div><div>M</div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>On Mon, Mar 30, 2015 at 9:09 AM, Subhra Mazumdar <span dir="ltr">&lt;<a href="mailto:subhramazumdar1@gmail.com" target="_blank">subhramazumdar1@gmail.com</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"><div><div><div dir="ltr">Hi,<div><br></div><div>Can <span style="font-family:&#39;Helvetica Neue&#39;,Arial,sans-serif;font-size:15px;line-height:20px">MPI_THREAD_MULTIPLE and openib btl work together in open mpi 1.8.4? If so are there any command line options needed during run time?</span></div><div><span style="font-family:&#39;Helvetica Neue&#39;,Arial,sans-serif;font-size:15px;line-height:20px"><br></span></div><div><span style="font-family:&#39;Helvetica Neue&#39;,Arial,sans-serif;font-size:15px;line-height:20px">Thanks,</span></div><div><span style="font-family:&#39;Helvetica Neue&#39;,Arial,sans-serif;font-size:15px;line-height:20px">Subhra.</span></div></div>
<br></div></div>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26574.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/03/26574.php</a><span><font color="#888888"><br></font></span></blockquote></div><span><font color="#888888"><br><br clear="all"><span><font color="#888888"><div><br></div>-- <br><div><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</font></span></font></span></div><span><font color="#888888">
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26575.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/03/26575.php</a><br></font></span></blockquote></div><br></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26580.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/03/26580.php</a><span><font color="#888888"><br></font></span></blockquote></div><span><font color="#888888"><br><br clear="all"><span><font color="#888888"><div><br></div>-- <br><div><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</font></span></font></span></div><span><font color="#888888">
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26584.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/03/26584.php</a><br></font></span></blockquote></div><br></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26663.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26663.php</a><span><font color="#888888"><br></font></span></blockquote></div><span><font color="#888888"><br><br clear="all"><span><font color="#888888"><div><br></div>-- <br><div><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</font></span></font></span></div><span><font color="#888888">
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26665.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26665.php</a><br></font></span></blockquote></div><br></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26686.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26686.php</a><span><font color="#888888"><br></font></span></blockquote></div><span><font color="#888888"><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</font></span></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26688.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26688.php</a><br></blockquote></div><br></div></div></div></div></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26711.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26711.php</a><span><font color="#888888"><br></font></span></blockquote></div><span><font color="#888888"><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</font></span></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26712.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26712.php</a><br></blockquote></div><br></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26752.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26752.php</a><span><font color="#888888"><br></font></span></blockquote></div><span><font color="#888888"><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</font></span></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26754.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26754.php</a><br></blockquote></div><br></div></div></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26761.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26761.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</div>

