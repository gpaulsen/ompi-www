<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">Khalid,<div class=""><br class=""></div><div class="">The decision is rechecked every time we create a new communicator. So, you might create a solution that force the algorithm to whatever you think it is best (using the environment variables you mentioned), then create a communicator, and free it once you’re done.</div><div class=""><br class=""></div><div class="">I have no idea what you’re trying to achieve, but be aware there is a burden associated with the creation of a communicator, so this approach might outweigh the benefits.</div><div class=""><br class=""></div><div class="">&nbsp; George.</div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Mar 10, 2015, at 10:31 , Gilles Gouaillardet &lt;<a href="mailto:gilles.gouaillardet@gmail.com" class="">gilles.gouaillardet@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Khalid,<div class=""><br class=""></div><div class="">i am not aware of such a mechanism.</div><div class=""><br class=""></div><div class="">/* there might be a way to use MPI_T_* mechanisms to force the algorithm,</div><div class="">and i will let other folks comment on that */</div><div class=""><br class=""></div><div class="">you definetly cannot directly invoke&nbsp;<span style="font-family: verdana, arial, helvetica; font-size: 12px;" class="">ompi_coll_tuned_bcast_intra_</span><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class="">binomial</span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class="">(abstraction violation, non portable, and you miss the some parameters)</span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class=""><br class=""></span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class="">out of curiosity, what do you have in mind for (some_condition) ?</span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class="">/* since it seems implicit (some_condition) is independant of communicator size, and message size */</span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class=""><br class=""></span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class="">Cheers,</span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class=""><br class=""></span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px;" class="">Gilles</span></div><div class="gmail_extra"><br class=""><div class="gmail_quote">On Tue, Mar 10, 2015 at 10:04 PM, Khalid Hasanov <span dir="ltr" class="">&lt;<a href="mailto:xalid.h@gmail.com" target="_blank" class="">xalid.h@gmail.com</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr" class=""><div class=""><div class=""><div class=""><div class=""><div class=""><div class=""><div class=""><div class=""><div class=""><div class=""><div class=""><div class="">Hello,<br class=""><br class=""></div>I would like to know if Open MPI provides some kind of mechanism to select collective algorithms such as MPI broadcast during run time depending on some logic. For example, I would like to<br class=""></div></div>use something like this:<br class=""><br class=""></div>if (some_condition)&nbsp; ompi_binomial_broadcast(...);<br class=""></div>else&nbsp;&nbsp; ompi_pipeline_broadcast(...);<br class=""><br class=""></div>I know it is possible to use some fixed algorithm by <span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class="">coll_tuned_use_dynamic_rules or </span>to define a custom selection rule using <span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class="">coll_tuned_dynamic_rules_filename<span class="">. But<br class=""></span></span></div><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class="">I think it is not suitable in this situation as the dynamic rules mainly based on the message size, segment size and communicator size.<br class=""><br class=""></span></span></div><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class="">Another option could be using Open MPI internal APIS like <br class=""><br class="">ompi_coll_tuned_bcast_intra_binomial( buf, count, dtype, root, comm, module, segsize);<br class=""><br class=""></span></span></div><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class="">But it highly depends on Open MPI internals as it uses mca_coll_base_module_t . <br class=""><br class=""></span></span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class="">Is there any better option? (except using my own implementation of collectives)<br class=""></span></span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class=""><br class=""></span></span></div><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class="">Any suggestion highly appreciated.<br class=""><br class=""></span></span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class="">Thanks<br class=""></span></span></div><div class=""><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class=""><br class=""></span></span></div><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class="">Regards,<br class=""></span></span></div><span style="font-family: verdana, arial, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; float: none; background-color: rgb(255, 255, 255); display: inline !important;" class=""><span class="">Khalid<br class=""></span></span></div>
<br class="">_______________________________________________<br class="">
users mailing list<br class="">
<a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26446.php" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2015/03/26446.php</a><br class=""></blockquote></div><br class=""></div></div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/users<br class="">Link to this post: http://www.open-mpi.org/community/lists/users/2015/03/26447.php</div></blockquote></div><br class=""></div></body></html>
