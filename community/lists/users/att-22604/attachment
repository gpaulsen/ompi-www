<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Small messages, i.e. their length is under&nbsp;btl_sm_eager_limit, always use normal SM. KNEM usage is restricted only for messages over either the eager size or the btl_sm_knem_dma_min (if KNEM supports DMA).<div><br></div><div>&nbsp; George.</div><div><br></div><div><br><div><div>On Sep 4, 2013, at 12:47 , Alina Sklarevich &lt;<a href="mailto:alinas@dev.mellanox.co.il">alinas@dev.mellanox.co.il</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div dir="ltr"><div><span style="white-space:nowrap;font-family:arial,sans-serif">Hi,</span><br></div><div><font face="arial, sans-serif"><span style="white-space:nowrap"><br></span></font></div><div><font face="arial, sans-serif"><span style="white-space:nowrap">I am building ompi v1.6 with knem support and I see that when knem is enabed from the command line&nbsp;</span></font></div>
<div><font face="arial, sans-serif"><span style="white-space:nowrap">it is used for all message sizes in SM btl. There is no threshold for when to start using knem - starting&nbsp;</span></font></div><div><font face="arial, sans-serif"><span style="white-space:nowrap">which message size.</span></font></div>
<div><font face="arial, sans-serif"><span style="white-space:nowrap">This makes the performance of small messages worse since it also uses knem.</span></font></div><div><font face="arial, sans-serif"><span style="white-space:nowrap">Maybe a certain "knem threshold" should be added to specify when to use SM btl's send and when to start using knem.</span></font></div>
<div><font face="arial, sans-serif"><span style="white-space:nowrap"><br></span></font></div><div><font face="arial, sans-serif"><span style="white-space:nowrap">What do you think?</span></font></div><div><font face="arial, sans-serif"><span style="white-space:nowrap"><br>
</span></font></div><div><font face="arial, sans-serif"><span style="white-space:nowrap">Alina.</span></font></div></div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/users</blockquote></div><br></div></body></html>
