Hi,<br>I had compiled and installed Open MPI with C/R support in the way Josh said. When finished, Open MPI had support and tools for C/R: ompi-checkpoint, ompi-restart.<br>And I try an example ( hello_c.c in examples folder, but I edit it with a for loop to print out &quot;Hello...&quot; 1,000,000 times)
<br>But I get this error: <br>Error: The application (PID = 23573) failed to checkpoint properly.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returned -1.<br><br>The steps what I had do:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # mpicc hello_c.c -o hello<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # mpirun -np 4 -am ft-enable-cr hello
<br><br>&nbsp;&nbsp;&nbsp; I get PID of this mpirun with another shell and do:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # ompi-checkpoint 23573<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Error: The application (PID = 23573) failed to checkpoint properly.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returned -1.<br><br>
What&#39;s wrong with this error?<br>Could you help me an example about using C/R in Open MPI?<br>Hiep<br><br>hello_c.c<br>#include &lt;stdio.h&gt;<br>#include &quot;mpi.h&quot;<br>int main(int argc, char* argv[])<br>{<br>
&nbsp;&nbsp;&nbsp; int rank, size, i;<br>&nbsp;&nbsp;&nbsp; MPI_Init(&amp;argc, &amp;argv);<br>&nbsp;&nbsp;&nbsp; MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);<br>&nbsp;&nbsp;&nbsp; MPI_Comm_size(MPI_COMM_WORLD, &amp;size);<br>&nbsp;&nbsp;&nbsp; for(i=0; i&lt;1000000; i++){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf(&quot;%d Hello, world, I am %d of %d\n&quot;,i,rank, size);
<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; MPI_Barrier(MPI_COMM_WORLD);<br>&nbsp;&nbsp;&nbsp; MPI_Finalize();<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br><br><br><br><div><span class="gmail_quote">On 8/22/07, <b class="gmail_sendername">Josh Hursey</b> &lt;<a href="mailto:jjhursey@open-mpi.org">
jjhursey@open-mpi.org</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">Hello,<br><br>There are a few things you need to do to build Open MPI with
<br>Checkpoint/Restart support. By default Open MPI is configured without<br>checkpoint/restart support.<br>1) Make sure you have BLCR successfully installed and loaded on your<br>system(s)<br>2) configure Open MPI with the &quot;--with-ft=cr&quot; option, which enables
<br>checkpoint/restart fault tolerance<br>&nbsp;&nbsp;Note: you may also have to specify the install directory of BLCR<br>with the &quot;--with-blcr=/path/to/blcr&quot;<br>3) make and make install<br><br>The resultant build will have support for checkpoint/restart and the
<br>tools (e.g., ompi-checkpoint, ompi-restart) will become available.<br><br>Looking at the documentation it doesn&#39;t seem to include these steps.<br>I&#39;ll fix that later today, and post and updated file to the wiki.
<br>Sorry about that. :(<br><br>Hope this helps,<br>Josh<br><br>On Aug 21, 2007, at 1:09 PM, Hiep Bui Hoang wrote:<br><br>&gt; Hello,<br>&gt; I&#39;m Hiep, I&#39;m trying to use checkpoint/restart feature in Open MPI.<br>
&gt; I had read information about this feature in&nbsp;&nbsp;<a href="https://svn.open-">https://svn.open-</a><br>&gt; <a href="http://mpi.org/trac/ompi/wiki/ProcessFT_CR">mpi.org/trac/ompi/wiki/ProcessFT_CR</a> and Open-MPI-FT-CR-Draft-
<br>&gt; v1.pdf. I had built Open MPI from &quot;trunk&quot; which gotten by Subversion.<br>&gt; But I don&#39;t know how to enable checkpoint/restart fault tolerance<br>&gt; in Open MPI.<br>&gt; So that, I get this error when I try this command: ompi-checkpoint.
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bash: ompi-checkpoint: command not found<br>&gt; I want to ask you how to build and use checkpoint/restart feature<br>&gt; in Open MPI.<br>&gt; Please tell me in details, I&#39;m a new user.<br>&gt; Thanks!
<br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users
</a><br><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users
</a><br></blockquote></div><br>

