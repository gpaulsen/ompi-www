<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">Could you please tell us what version of OpenMPI you are using, and the cmd line you used to execute the job?<div class=""><br class=""></div><div class="">Thanks</div><div class="">Ralph</div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Nov 23, 2015, at 11:05 PM, 김건홍(KIM GEON HONG) &lt;<a href="mailto:geonhong.kim@hhi.co.kr" class="">geonhong.kim@hhi.co.kr</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div class="WordSection1" style="page: WordSection1; font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">Hello,<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">I tried to run a parallel computation (OpenFOAM) using Open MPI on a HPC connected with infiniband.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">When I ran a job using mpirun over a couple of nodes (20 cpus per node), the computation was not accelerated as I expected.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">For example, I ran the job over 40 cpus on 2 nodes, and I checked cpu usages and processes via top command.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">I expected 20 processes would be running on each node but I found that only 19 processes were running and a cpu was in idle while others were used.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">Following is a capture of top result.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">As you can see, Cpu1 is in idle and there are only 19 simpleFoam processes!<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><span id="cid:image002.png@01D126AB.FA0798C0">&lt;image002.png&gt;</span></span><span lang="EN-US" class=""><o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">I have no idea why this is happened.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">Sometimes, a cpu is in idle while 20 processes are running but, in that case two processes running with 50% of cpu usage.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">That is, those two different processes are assigned to the same cpu.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">Please refer to the attached file for required information of the cluster and its environment.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">The output of “ulimit –l</span>“<span lang="EN-US" class=""><span class="Apple-converted-space">&nbsp;</span>command on both nodes is “unlimited”.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">Additional information for OpenFabrics-based network is as following:<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt 38pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕'; text-indent: -18pt;" class=""><span lang="EN-US" class=""><span class="">1.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';" class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="Apple-converted-space">&nbsp;</span></span></span></span><span lang="EN-US" class="">OpenFabrics version : MLNX_OFED_LINUX-2.4.1.0.0<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt 38pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕'; text-indent: -18pt;" class=""><span lang="EN-US" class=""><span class="">2.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';" class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="Apple-converted-space">&nbsp;</span></span></span></span><span lang="EN-US" class="">Linux/kernel info: RHEL6.5 2.6.32-431.el6.x86_64<br class="">- Linux distro/version : Red hat Enterprise Linux Server release 6.5 (Santiago)<br class="">- Kernel version : 2.6.32-431.el6.x86_64<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt 38pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕'; text-indent: -18pt;" class=""><span lang="EN-US" class=""><span class="">3.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';" class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="Apple-converted-space">&nbsp;</span></span></span></span><span lang="EN-US" class="">Subnet manager : infiniband B class<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">Thank you.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">Best regards,<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class="">Geon-Hong Kim.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><b class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif;" class="">-----------------------------------<o:p class=""></o:p></span></b></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><b class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif;" class=""><span id="cid:image001.png@01D126AA.AC080E80">&lt;image001.png&gt;</span><o:p class=""></o:p></span></b></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><b class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class="">Geon-Hong Kim<o:p class=""></o:p></span></b></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class="">Engineer, Ph.D.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class="">Performance Evaluation Research Department<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class="">Hyundai Maritime Research Institute<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class="">Hyundai Heavy Industries Co., Ltd.<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class=""><o:p class="">&nbsp;</o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class="">Office +82-52-203-8053<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class="">Fax +82-52-250-9675<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif; color: rgb(31, 73, 125);" class="">Mobile +82-10-3084-1357<o:p class=""></o:p></span></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><b class=""><span lang="EN-US" style="font-family: Tahoma, sans-serif;" class="">-----------------------------------<o:p class=""></o:p></span></b></div><div style="margin: 0cm 0cm 0.0001pt; text-align: justify; font-size: 10pt; font-family: '맑은 고딕';" class=""><span lang="EN-US" class=""><o:p class="">&nbsp;</o:p></span></div></div><span id="cid:F3577078-D5D6-43F3-87C1-C887D6F86A27">&lt;system_info.tar.bz2&gt;</span><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">_______________________________________________</span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">users mailing list</span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><a href="mailto:users@open-mpi.org" style="color: purple; text-decoration: underline; font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">users@open-mpi.org</a><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Subscription:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" style="color: purple; text-decoration: underline; font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Link to this post:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/community/lists/users/2015/11/28100.php" style="color: purple; text-decoration: underline; font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/community/lists/users/2015/11/28100.php</a></div></blockquote></div><br class=""></div></body></html>
