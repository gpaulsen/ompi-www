<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><p style="margin: 0.0px 0.0px 12.0px 0.0px"></p><p style="margin: 0.0px 0.0px 12.0px 0.0px"><blockquote type="cite"><p style="margin: 0.0px 0.0px 12.0px 0.0px"><font face="Verdana" size="3" style="font: 12.0px Verdana"></font></p></blockquote><br><blockquote type="cite"><p style="margin: 0.0px 0.0px 12.0px 0.0px"><font face="Verdana" size="3" style="font: 12.0px Verdana">Hi Hugh </font></p><p style="margin: 0.0px 0.0px 12.0px 0.0px"><font face="Verdana" size="3" style="font: 12.0px Verdana">Just to make sure: <br> You have installed Open-MPI on all your nodes? <br> Same version everywhere? </font></p><p style="margin: 0.0px 0.0px 12.0px 0.0px"><font face="Verdana" size="3" style="font: 12.0px Verdana">Jody </font></p><p style="margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Verdana; min-height: 15.0px"><br></p><p style="margin: 0.0px 0.0px 12.0px 0.0px"><font face="Verdana" size="3" style="font: 12.0px Verdana">On Tue, Apr 28, 2009 at 12:57 PM, Hugh Dickinson <br> &lt;h.j.dickinson_at_[hidden]> wrote: <br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> Hi all, </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> First of all let me make it perfectly clear that I'm a complete beginner as </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> far as MPI is concerned, so this may well be a trivial problem! </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> I've tried to set up Open MPI to use SSH to communicate between nodes on a </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> heterogeneous cluster. I've set up passwordless SSH and it seems to be </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> working fine. For example by hand I can do: </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> ssh nodename uptime </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> and it returns the appropriate information for each node. </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> I then tried running a non-MPI program on all the nodes at the same time: </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> mpirun -np 10 --hostfile hostfile uptime </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> Where hostfile is a list of the 10 cluster node names with slots=1 after </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> each one i.e </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> nodename1 slots=1 </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> nodename2 slots=2 </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> etc... </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> Nothing happens! The process just seems to hang. If I interrupt the process </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> with Ctrl-C I get: </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> " </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> mpirun: killing job... </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> [gamma2.phyastcl.dur.ac.uk:18124] [0,0,0] ORTE_ERROR_LOG: Timeout in file </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> base/pls_base_orted_cmds.c at line 275 </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> [gamma2.phyastcl.dur.ac.uk:18124] [0,0,0] ORTE_ERROR_LOG: Timeout in file </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> pls_rsh_module.c at line 1166 </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> -------------------------------------------------------------------------- </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> WARNING: mpirun has exited before it received notification that all </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> started processes had terminated.  You should double check and ensure </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> that there are no runaway processes still executing. </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> -------------------------------------------------------------------------- </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> " </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> If, instead of using the hostfile, I specify on the command line the host </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> from which I'm running mpirun, e.g.: </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> mpirun -np 1 --host nodename uptime </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> then it works (i.e. if it doesn't need to communicate with other nodes). Do </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> I need to tell Open MPI it should be using SSH to communicate? If so, how do </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> I do this? To be honest I think it's trying to do so, because before I set </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> up passwordless SSH it challenged me for lots of passwords. </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> I'm running Open MPI 1.2.5 installed with Scientific Linux 5.2. Let me </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> reiterate, it's very likely that I've done something stupid, so all </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> suggestions are welcome. </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> Cheers, </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> Hugh </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> _______________________________________________ </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> users mailing list </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> users_at_[hidden] </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users"><font color="#551a8b" style="color: #551a8b"><u>http://www.open-mpi.org/mailman/listinfo.cgi/users</u></font></a> </font><font face="Verdana" size="3" style="font: 12.0px Verdana"><br> </font><font face="Verdana" size="3" color="#990099" style="font: 12.0px Verdana; color: #990099">> </font></p></blockquote></p>
</body></html>
