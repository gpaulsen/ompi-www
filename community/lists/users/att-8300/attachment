<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Terry,<div><br></div><div>Is there a libnuma.a on your system. If not the -static flag to ifort won't do any thing because there isn't a static library for it to link against.</div><div><br></div><div>Doug Reeder<br><div><div>On Mar 4, 2009, at 6:06 PM, Terry Frankcombe wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div><br>Thanks to everyone who contributed.<br><br>I no longer think this is Open MPI's problem. &nbsp;This system is just<br>stupid. &nbsp;Everything's 64 bit (which various probes with file confirm).<br><br>There's no icc, so I can't test with that. &nbsp;gcc finds libnuma without<br>-L. &nbsp;(Though a simple gcc -lnuma -Wl,-t reports that libnuma is found<br>through the rather convoluted<br>path /usr/lib64/gcc-lib/x86_64-suse-linux/3.3.4/../../../../lib64/libnuma.so.)<br><br>ifort -lnuma can't find libnuma.so, but then ifort -L/usr/lib64 -lnuma<br>can't find it either! &nbsp;While everything else points to some mix up with<br>linking search paths, that last result confuses me greatly. &nbsp;(Unless<br>there's some subtlety with libnuma.so being a link to libnuma.so.1.)<br><br>I can compile my app by replicating mpif90's --showme output directly on<br>the command line, with -lnuma replaced explicitly<br>with /usr/lib64/libnuma.so. &nbsp;Then, even though I've told ifort -static,<br>ldd gives the three lines:<br><br><span class="Apple-tab-span" style="white-space:pre">	</span>libnuma.so.1 => /usr/lib64/libnuma.so.1 (0x00002b3f58a3c000)<br><span class="Apple-tab-span" style="white-space:pre">	</span>libc.so.6 => /lib64/tls/libc.so.6 (0x00002b3f58b42000)<br><span class="Apple-tab-span" style="white-space:pre">	</span>/lib/ld64.so.1 => /lib/ld64.so.1 (0x00002b3f58925000)<br><br>While I don't understand what's going on here, I now have a working<br>binary. &nbsp;It's the only app I use on this machine, so I'm no longer<br>concerned. &nbsp;All other machines on which I use Open MPI work as expected<br>out of the box. &nbsp;My workaround here is sufficient.<br><br>Once more, thanks for the suggestions. &nbsp;I think this machine is just<br>pathological.<br><br>Ciao<br>Terry<br><br><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></blockquote></div><br></div></body></html>
