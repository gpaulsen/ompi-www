<html><body><div style="color:#000; background-color:#fff; font-family:verdana, helvetica, sans-serif;font-size:12pt"><div>Hello Community,</div><div><br></div><div>I
 just finished building an OpenMPI version with custom configuration 
(1.4.4) on a server. I do not have root privileges on the server. <br></div><div><br></div><div>The server already had a "default" version on OpenMPI, which seemed to be single-threaded:</div><div><br></div><div style="color:rgb(0, 0, 191);">ompi_info | grep Thread yields&nbsp; Thread support: posix (mpi: no, progress: no)</div><div><br></div><div>For my custom build, I have MPI thread support (precisely, support for MPI_THREAD_MULTIPLE):</div><div><br></div><div style="color:rgb(0, 0, 191);">/path/to/Custom/OpenMPI/bin/ompi_info | grep Thread yields Thread support: posix (mpi: yes, progress: no)</div><div><br></div><div><br></div><div>Thus, I run my application as:</div><div><br></div><div style="color:rgb(0, 0,
 255);">/path/to/Custom/OpenMPI/bin/mpirun [options]...</div><div><br></div><div>In my application, I do make a check for whether I am getting MPI_THREAD_MULTIPLE support or not:</div><div><br></div><div style="color:rgb(0, 0, 191);">MPI_Init_thread(&amp;argc, &amp;argv, desired_thread_support,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;provided_thread_support);/*Need provided_thread_support = desired_thread_support*/<br><br>&nbsp; printf ("MPI: Requested thread support: %d, MPI thread support received: %d\n", MPI_THREAD_MULTIPLE, provided_thread_support);</div><div><br></div><div><br></div><div>When I run the application, I get:</div><div><br></div><div style="color:rgb(0, 0, 191);">MPI: Requested thread support: 3, MPI thread support received: 0</div><div><br></div><div><br></div><div>I have tried lot of things, and I am not sure why this is the case.</div><div><br></div><div><br></div><div>At the beginning of the shell script which contains
 /path/to/Custom/OpenMPI/bin/mpirun [options]..., I set the paths, and LD_LIBRARY_PATH:</div><div><br></div><div><span style="color:rgb(0, 0, 191);">PATH=/home/raid/private/Customizations_NODELETE/OpenMPI-1.4.4/bin:$PATH</span><span style="color:rgb(0, 0, 191);"></span><br style="color:rgb(0, 0, 191);"><span style="color:rgb(0, 0, 191);">export
 
LD_LIBRARY_PATH=/home/raid/private/Customizations_NODELETE/gcc-4.6/lib64:/home/Morpheus/.CustomInstalledPrograms/OpenMPI-1.4.4/lib:/home/raid/private/Customizations_NODELETE/gcc-4.6/lib32</span><br></div><div><br></div><div>So, I think that the correct version of mpirun is being used. <br></div><div><br></div><div>Can someone tell me why I cannot get MPI_THREAD_MULTIPLE support?</div><div><br></div><div>I have the same OpenMPI version on my notebook, which does provide me with MPI_THREAD_MULTIPLE. <br></div><div><br></div><div>Thanks a
 lot.</div><div><br></div><div>Best,</div><div><br></div>Devendra</div></body></html>
