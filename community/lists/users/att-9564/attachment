<html><head><style type="text/css"><!-- DIV {margin:0px;} --></style></head><body><div style="font-family:'times new roman', 'new york', times, serif;font-size:12pt"><div>Hi,&nbsp;</div><div>Would you please tell me how did you do the experiment by calling MPI_Test in</div><div>little more details?&nbsp;</div><div><br></div><div>Thanks!</div><div><br></div><div><br></div><div style="font-family:times new roman, new york, times, serif;font-size:12pt"><br><div style="font-family:arial, helvetica, sans-serif;font-size:13px"><font size="2" face="Tahoma"><hr size="1"><b><span style="font-weight: bold;">From:</span></b> Lars Andersson &lt;larsand@gmail.com&gt;<br><b><span style="font-weight: bold;">To:</span></b> users@open-mpi.org<br><b><span style="font-weight: bold;">Sent:</span></b> Tuesday, June 9, 2009 6:11:11 AM<br><b><span style="font-weight: bold;">Subject:</span></b> Re: [OMPI users] "Re: Best way to overlap computation and transfer using MPI over
 TCP/Ethernet?"<br></font><br>
On Mon, Jun 8, 2009 at 11:07 PM, Lars Andersson&lt;<a ymailto="mailto:larsand@gmail.com" href="mailto:larsand@gmail.com">larsand@gmail.com</a>&gt; wrote:<br>&gt; I'd say that your own workaround here is to intersperse MPI_TEST's<br>&gt; periodically. This will trigger OMPI's pipelined protocol for large<br>&gt; messages, and should allow partial bursts of progress while you're<br>&gt; assumedly off doing useful work. If this is difficult because the<br>&gt; work is being done in library code that you can't change, then perhaps<br>&gt; a pre-spawned "work" through could be used to call MPI_TEST<br>&gt; periodically. That way, it won't steal huge ammounts of CPU cycles<br>&gt; (like MPI_WAIT would). You still might get some cache thrashing,<br>&gt; context switching, etc. -- YMMV.<br><br>Thanks Jeff, it's good to hear that this is a valid workaround. I've<br>done a few small experiments, and by calling MPI_Test in a while loop<br>with an usleep(1000) I'm
 able to get almost full bandwidth for large<br>messages with less than 5% CPU utilization.<br><br>/Lars<br>_______________________________________________<br>users mailing list<br><a ymailto="mailto:users@open-mpi.org" href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><span><a target="_blank" href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></span><br></div></div><div style="position:fixed"></div></div><br>

      </body></html>
