<HTML dir=ltr><HEAD>
<META content="text/html; charset=unicode" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 8.00.6001.18943"></HEAD>
<BODY>
<P>I need to do some performance tests on my mpi app.&nbsp; I simply want to determine how long it takes for my sends from one process to be received by another process.&nbsp; </P>
<P><BR>Here is the code I used as my example for non-blocking send/receive...</P>
<P><FONT face="Courier New">&nbsp;if( myrank == 0 ) {<BR>&nbsp;&nbsp;/* Post a receive, send a message, then wait */<BR>&nbsp;&nbsp;MPI_Irecv( b, 100, MPI_DOUBLE, 1, 19, MPI_COMM_WORLD, &amp;request );<BR>&nbsp;&nbsp;MPI_Isend( a, 100, MPI_DOUBLE, 1, 17, MPI_COMM_WORLD );<BR>&nbsp;&nbsp;MPI_Wait( &amp;request, &amp;status );<BR>&nbsp;}<BR>&nbsp;else if( myrank == 1 ) {<BR>&nbsp;&nbsp;/* Post a receive, send a message, then wait */<BR>&nbsp;&nbsp;MPI_Irecv( b, 100, MPI_DOUBLE, 0, 17, MPI_COMM_WORLD, &amp;request );&nbsp;&nbsp; <BR>&nbsp;&nbsp;MPI_Isend( a, 100, MPI_DOUBLE, 0, 19, MPI_COMM_WORLD );<BR>&nbsp;&nbsp;MPI_Wait( &amp;request, &amp;status );<BR>&nbsp;}</FONT></P>
<P>I originally thought to just put a timer call before affer the rank=0 receive, but that doesn't seem to capture the complete time... see the following code.</P>
<P><FONT face="Courier New">&nbsp;if( myrank == 0 ) {</FONT></P>
<P><FONT face="Courier New">&nbsp;&nbsp;timer.start();<BR>&nbsp;&nbsp;/* Post a receive, send a message, then wait */<BR>&nbsp;&nbsp;MPI_Irecv( b, 100, MPI_DOUBLE, 1, 19, MPI_COMM_WORLD, &amp;request );<BR>&nbsp;&nbsp;MPI_Isend( a, 100, MPI_DOUBLE, 1, 17, MPI_COMM_WORLD );<BR>&nbsp;&nbsp;MPI_Wait( &amp;request, &amp;status );<BR>&nbsp;&nbsp;timer.stop();<BR>&nbsp;&nbsp;elapsedTime = getElapsedTime();<BR>&nbsp;}<BR>&nbsp;else if( myrank == 1 ) {<BR>&nbsp;&nbsp;/* Post a receive, send a message, then wait */<BR>&nbsp;&nbsp;MPI_Irecv( b, 100, MPI_DOUBLE, 0, 17, MPI_COMM_WORLD, &amp;request );&nbsp;&nbsp; <BR>&nbsp;&nbsp;MPI_Isend( a, 100, MPI_DOUBLE, 0, 19, MPI_COMM_WORLD );<BR>&nbsp;&nbsp;MPI_Wait( &amp;request, &amp;status );<BR>&nbsp;}</FONT></P>
<P>How do others time this process?&nbsp; Should I send a msg from one app to the other to initiate timing, send the data I want to time?</P>
<P><BR><FONT face="Courier New">&nbsp;if( myrank == 0 ) {</FONT></P>
<P><FONT face="Courier New">&nbsp;&nbsp;MPI_Irecv( b, 100, MPI_DOUBLE, 1, startTimeTag, MPI_COMM_WORLD, &amp;request );<BR>&nbsp;&nbsp;MPI_Wait( &amp;request, &amp;status );<BR>&nbsp;&nbsp;timer.start();<BR>&nbsp;&nbsp;MPI_Irecv( b, 100, MPI_DOUBLE, 1, dataTag, MPI_COMM_WORLD, &amp;request );<BR>&nbsp;&nbsp;MPI_Wait( &amp;request, &amp;status );<BR>&nbsp;&nbsp;timer.stop();<BR>&nbsp;&nbsp;elapsedTime = getElapsedTime();<BR>&nbsp;}<BR>&nbsp;else if( myrank == 1 ) {</FONT></P>
<P><FONT face="Courier New">&nbsp;&nbsp;MPI_Isend( a, 100, MPI_DOUBLE, 0, startTimerTag, MPI_COMM_WORLD );<BR>&nbsp;&nbsp;MPI_Wait( &amp;request, &amp;status );<BR>&nbsp;&nbsp;MPI_Isend( b, 100, MPI_DOUBLE, 0, dataTag , MPI_COMM_WORLD, &amp;request );&nbsp;&nbsp; <BR>&nbsp;&nbsp;MPI_Wait( &amp;request, &amp;status );<BR>&nbsp;}</FONT></P>
<P>Ed<BR></P></BODY></HTML>
