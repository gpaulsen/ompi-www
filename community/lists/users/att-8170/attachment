<table cellspacing="0" cellpadding="0" border="0" ><tr><td valign="top" style="font: inherit;"><DIV>Jeff:</DIV>
<DIV>That patch didn't work. However, I hacked the configure file and got it to work by forcing OMPI_PTRDIFF_TYPE to be long:</DIV>
<DIV>line 65040 of configure</DIV>
<DIV>#define OMPI_PTRDIFF_TYPE long</DIV>
<DIV>&nbsp;</DIV>
<DIV>It compiled just fine after this.</DIV>
<DIV>&nbsp;</DIV>
<DIV>Thanks for all your efforts<BR><BR>--- On <B>Fri, 2/20/09, Jeff Squyres <I>&lt;jsquyres@cisco.com&gt;</I></B> wrote:<BR></DIV>
<BLOCKQUOTE style="BORDER-LEFT: rgb(16,16,255) 2px solid; PADDING-LEFT: 5px; MARGIN-LEFT: 5px">From: Jeff Squyres &lt;jsquyres@cisco.com&gt;<BR>Subject: Re: [OMPI users] ptrdiff_t undefined error on intel 64bit machine with intel compilers<BR>To: "Open MPI Users" &lt;users@open-mpi.org&gt;<BR>Date: Friday, February 20, 2009, 6:18 PM<BR><BR><PRE>Does applying the following patch fix the problem?

Index: ompi/datatype/dt_args.c
===================================================================
--- ompi/datatype/dt_args.c	(revision 20616)
+++ ompi/datatype/dt_args.c	(working copy)
@@ -18,6 +18,9 @@
  */

 #include "ompi_config.h"
+
+#include &lt;malloc.h&gt;
+
 #include "opal/util/arch.h"
 #include "opal/include/opal/align.h"
 #include "ompi/constants.h"



On Feb 20, 2009, at 4:33 PM, Tamara Rogers wrote:

&gt; Jeff:
&gt; See attached.I'm using the 9.0 version of the intel compilers.
Interestngly I have no problems on a 32bit intel machine using these same
compilers. There only seems to be a problem on the 64bit machine.
&gt; 
&gt; --- On Fri, 2/20/09, Jeff Squyres &lt;jsquyres@cisco.com&gt; wrote:
&gt; From: Jeff Squyres &lt;jsquyres@cisco.com&gt;
&gt; Subject: Re: [OMPI users] ptrdiff_t undefined error on intel 64bit machine
with intel compilers
&gt; To: "Open MPI Users" &lt;users@open-mpi.org&gt;
&gt; Date: Friday, February 20, 2009, 8:37 AM
&gt; 
&gt; Can you also send a copy of your mpi.h? (OMPI's mpi.h is generated by
&gt; configure; I want to see what was put into your mpi.h)
&gt; 
&gt; Finally, what version of icc are you using?  I test regularly with icc
9.0,
&gt; 9.1, 10.0, and 10.1 with no problems.  Are you using newer or older?  (I
&gt; don't have immediate access to 11.x or 8.x)
&gt; 
&gt; 
&gt; On Feb 20, 2009, at 8:09 AM, Jeff Squyres wrote:
&gt; 
&gt; &gt; Can you send your config.log as well?
&gt; &gt;
&gt; &gt; It looks like you forgot to specify FC=ifort on your configure line
(i.e.,
&gt; you need to specify F77=ifort for the Fortran 77 *and* FC=ifort for the
Fortran
&gt; 90 compiler -- this is an Autoconf thing; we didn't make it up).
&gt; &gt;
&gt; &gt; That shouldn't be the problem here, but I thought I'd mention
it.
&gt; &gt;
&gt; &gt;
&gt; &gt; On Feb 19, 2009, at 12:00 PM, Tamara Rogers wrote:
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Jeff:
&gt; &gt;&gt; You're correct. That was the incorrect config file. I've
&gt; attached the correct one as per the recommendations in the help page.
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks for your help
&gt; &gt;&gt;
&gt; &gt;&gt; --- On Thu, 2/19/09, Jeff Squyres &lt;jsquyres@cisco.com&gt;
wrote:
&gt; &gt;&gt; From: Jeff Squyres &lt;jsquyres@cisco.com&gt;
&gt; &gt;&gt; Subject: Re: [OMPI users] ptrdiff_t undefined error on intel
64bit
&gt; machine with intel compilers
&gt; &gt;&gt; To: talmesha_r@yahoo.com, "Open MPI Users"
&gt; &lt;users@open-mpi.org&gt;
&gt; &gt;&gt; Date: Thursday, February 19, 2009, 8:32 AM
&gt; &gt;&gt;
&gt; &gt;&gt; Your config.log looks incomplete -- it failed saying that your C
and
&gt; C++
&gt; &gt;&gt; compilers were incompatible with each other.
&gt; &gt;&gt;
&gt; &gt;&gt; This does not seem related to what you described -- are you sure
&gt; you're
&gt; &gt;&gt; sending the right config.log?
&gt; &gt;&gt;
&gt; &gt;&gt; Specifically, can you send all the information listed here:
&gt; &gt;&gt;
&gt; &gt;&gt;    http://www.open-mpi.org/community/help/
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; On Feb 17, 2009, at 5:10 PM, Tamara Rogers wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; &gt; Hello all:
&gt; &gt;&gt; &gt; I was unable to compile the latest version (1.3) on my intel
&gt; 64bit system
&gt; &gt;&gt; with the intel compilers (version 9.0). Configuration goes fine,
but I
&gt; get this
&gt; &gt;&gt; error when running make:
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; ../../ompi/include/mpi.h(203): error: identifier
&gt; "ptrdiff_t" is
&gt; &gt;&gt; undefined
&gt; &gt;&gt; &gt;      typedef OMPI_PTRDIFF_TYPE MPI_Aint;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; compilation aborted for dt_args.c (cod 21)
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; My config line was:
&gt; &gt;&gt; &gt; ./configure CC=icc CXX=icpc F77=ifort FC=ifort --prefix=xxx
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; I've attached my config.log file. Has anyone encourtered
&gt; this? I was
&gt; &gt;&gt; able to build openmpi on this exact system using the gcc/g++
&gt; compilers, however
&gt; &gt;&gt; the intel compilers are substantially faster on our system.
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Thanks!
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&lt;config.log&gt;_______________________________________________
&gt; &gt;&gt; &gt; users mailing list
&gt; &gt;&gt; &gt; users@open-mpi.org
&gt; &gt;&gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; --Jeff Squyres
&gt; &gt;&gt; Cisco Systems
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt;
&lt;openmp-1.3_output.tar.gz&gt;_______________________________________________
&gt; &gt;&gt; users mailing list
&gt; &gt;&gt; users@open-mpi.org
&gt; &gt;&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users
&gt; &gt;
&gt; &gt;
&gt; &gt; --Jeff Squyres
&gt; &gt; Cisco Systems
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; users mailing list
&gt; &gt; users@open-mpi.org
&gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users
&gt; 
&gt; 
&gt; --Jeff Squyres
&gt; Cisco Systems
&gt; 
&gt; _______________________________________________
&gt; users mailing list
&gt; users@open-mpi.org
&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users
&gt; 
&gt;
&lt;openmpi-1.3_64_output.tar.gz&gt;_______________________________________________
&gt; users mailing list
&gt; users@open-mpi.org
&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users


--Jeff Squyres
Cisco Systems

_______________________________________________
users mailing list
users@open-mpi.org
http://www.open-mpi.org/mailman/listinfo.cgi/users
</PRE></BLOCKQUOTE></td></tr></table><br>

      
