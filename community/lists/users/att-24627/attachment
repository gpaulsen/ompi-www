<div dir="ltr">btw, the output comes from ompi`s libevent and not from slurm itself (sorry about confusion and thanks to Yossi for catching this)<div><br><div><br></div><div><div>opal/mca/event/libevent2021/libevent/epoll.c:                           event_warn(&quot;Epoll %s(%d) on fd %d failed.  Old events were %d; read change was %d (%s); write change was %d (%s)&quot;,</div>
<div>opal/mca/event/libevent2021/libevent/epoll.c:                   event_debug((&quot;Epoll %s(%d) on fd %d okay. [old events were %d; read change was %d; write change was %d]&quot;,</div></div><div><br></div></div></div>
<div class="gmail_extra"><br><br><div class="gmail_quote">On Fri, Jun 6, 2014 at 3:38 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<div style="word-wrap:break-word">Possible - honestly don&#39;t know<div><div class="h5"><div><br><div><div>On Jun 6, 2014, at 12:16 AM, Timur Ismagilov &lt;<a href="mailto:tismagilov@mail.ru" target="_blank">tismagilov@mail.ru</a>&gt; wrote:</div>
<br><blockquote type="cite"><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px">
Sometimes,  after termination of the program, launched with the command &quot;sbatch ... -o myprogram.out .....&quot;,  no file &quot;myprogram.out&quot;  is being produced. Could this be due to the above mentioned problem?<br>
<br><br>Thu, 5 Jun 2014 07:45:01 -0700 от Ralph Castain &lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;:<br><blockquote style="border-left-width:1px;border-left-style:solid;border-left-color:rgb(8,87,166);margin:10px;padding:0px 0px 0px 10px">
<div><div><div>FWIW: support for the --resv-ports option was deprecated and removed on the OMPI side a long time ago.<div><br></div><div>I&#39;m not familiar enough with &quot;oshrun&quot; to know if it is doing anything unusual - I believe it is just a renaming of our usual &quot;mpirun&quot;. I suspect this is some interaction with sbatch, but I&#39;ll take a look. I haven&#39;t see that warning. Mike indicated he thought it is due to both slurm and OMPI trying to control stdin/stdout, in which case it shouldn&#39;t be happening but you can safely ignore it</div>
<div><br></div><div><br><div><div><div>On Jun 5, 2014, at 3:04 AM, Timur Ismagilov &lt;<a>tismagilov@mail.ru</a>&gt; wrote:</div><br><blockquote type="cite"><div style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px">
<p>I use cmd line</p><p>$sbatch -p test --exclusive -N 2 -o hello_oshmem.out -e hello_oshmem.err shrun_mxm3.0 ./hello_oshmem<br><br>where script shrun_mxm3.0:</p><p>$cat shrun_mxm3.0<br></p><p>  #!/bin/sh</p><p>  #srun --resv-ports &quot;$@&quot;<br>
  #exit $?</p><p>  [ x&quot;$TMPDIR&quot; == x&quot;&quot; ] &amp;&amp; TMPDIR=/tmp<br>  HOSTFILE=${TMPDIR}/hostfile.${SLURM_JOB_ID}<br>  srun hostname -s|sort|uniq -c|awk &#39;{print $2&quot; slots=&quot;$1}&#39; &gt; $HOSTFILE || { rm -f $HOSTFILE; exit 255; }<br>
  LD_PRELOAD=/mnt/data/users/dm2/vol3/semenov/_scratch/mxm/mxm-3.0/lib/libmxm.so oshrun -x LD_PRELOAD -x MXM_SHM_KCOPY_MODE=off --hostfile $HOSTFILE &quot;$@&quot;<br><br>  rc=$?<br>  rm -f $HOSTFILE</p><p>  exit $rc</p><p>
I configured openmpi using</p><p>./configure CC=icc CXX=icpc F77=ifort FC=ifort --prefix=/mnt/data/users/dm2/vol3/semenov/_scratch/openmpi-1.8.1_mxm-3.0 --with-mxm=/mnt/data/users/dm2/vol3/semenov/_scratch/mxm/mxm-3.0/ --with-              slurm --with-platform=contrib/platform/mellanox/optimized<br>
<br><br>Fri, 30 May 2014 07:09:54 -0700 от Ralph Castain &lt;<a>rhc@open-mpi.org</a>&gt;:<br></p><blockquote style="border-left-width:1px;border-left-style:solid;border-left-color:rgb(8,87,166);margin:10px;padding:0px 0px 0px 10px">
Can you pass along the cmd line that generated that output, and how OMPI was configured?<div><br><div><div>On May 30, 2014, at 5:11 AM, Тимур Исмагилов &lt;<a>tismagilov@mail.ru</a>&gt; wrote:</div><br><blockquote type="cite">
<div><p>Hello!</p><p><span style="font-family:Arial,Tahoma,Verdana,sans-serif;font-size:13px;line-height:18.200000762939453px">I am using Open MPI v1.8.1 and slurm 2.5.6.</span></p><p><span style="font-family:Arial,Tahoma,Verdana,sans-serif;font-size:13px;line-height:18.200000762939453px">I got this messages when i try to run example (hello_oshmem.cpp) program:</span></p>
<p>[warn] Epoll ADD(1) on fd 0 failed. Old events were 0; read change was 1 (add); write change was 0 (none): Operation not permitted<br>[warn] Epoll ADD(4) on fd 1 failed. Old events were 0; read change was 0 (none); write change was 1 (add): Operation not permitted<br>
Hello, world, I am 0 of 2<br>Hello, world, I am 1 of 2</p><p>What does this warnings mean?</p><p>I lunch this job using sbatch and mpirun with hostfile (got it from :  $srun hostname -s|sort|uniq -c|awk &#39;{print $2&quot; slots=&quot;$1}&#39; &gt; $HOSTFILE)<br>
</p><p>Regards,<br>Timur<span style="font-family:Arial,Tahoma,Verdana,sans-serif;font-size:13px;line-height:18.200000762939453px"><br></span></p></div>_______________________________________________<br>users mailing list<br>
<a>users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></blockquote></div><br></div></blockquote><br><br> </div></blockquote>
</div><br></div></div></div><div>_______________________________________________<br>users mailing list<br><a>users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
</div></div></div></blockquote><br><br> <br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></div>
</blockquote></div><br></div></div></div></div><br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
<a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></blockquote></div><br></div>

