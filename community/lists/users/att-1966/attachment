Hello all,<br><br>I recently switched to OpenMP from LAM-MPI for my code. I'm trying to run my test code with a PBS scheduler on our local cluster. The PBS script is shown below. When the job is executed however, only one CPU is used for running the 
test.exe. Another more confusing aspect is the fact that the following three lines highlighted in the code below. Even if I set the OMP_NUM_THREADS = 2, the print statement in the next line says it's value is 1.<br><br>Any ideas where I could be going wrong?
<br><br>Thank you all for your help in advance!<br>~Amane<br><br>#!/bin/sh<br><br>#PBS -e job.err<br>#PBS -o job.log<br>#PBS -m ae<br>#PBS -q debug<br>#PBS -l nodes=2 <br><br><br>cd $PBS_O_WORKDIR<br>##################################################
<br>setenv OMP_NUM_THREADS 2<br>echo I hope you find the correct number of processors<br>echo $OMP_NUM_THREADS<br>##################################################<br>######### above 3 lines produce the following output --
<br># I hope you find the correct number of processors<br># 1<br>##################################################<br>/usr/local/openmp-1.1.1/bin/mpirun -np 2 ../source/test.exe&nbsp; &lt; input.dat&gt;Output<br><br>

