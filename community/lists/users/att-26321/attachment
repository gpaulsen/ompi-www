<html><body><div style="font-family: Arial; font-size: 12pt; color: #000000"><div>Hi all,<br></div><div><br></div><div>Here is my problem (see attached file for more details).<br></div><div><br></div><div>I create a window using <em>MPI_Win_allocate_share</em>d.<br></div><div>The rank 0 is then in charge to fill iteratively the shared buffers using the <em>MPI_Put</em> function.</div><div><br></div><div>At each iteration, I use also <em>MPI_Lock</em> and <em>MPI_Unlock</em> function as follows:<br></div><div><br></div><div><strong><em>MPI_Win_lock(MPI_LOCK_EXCLUSIVE, rank, MPI_MODE_NOCHECK, win);</em></strong><br><strong><em>MPI_Put(&amp;i, buffer_size, MPI_BYTE, rank, position, buffer_size, MPI_BYTE, win);</em></strong><br><strong><em>MPI_Win_unlock(wid, win);</em></strong></div><div><br></div><div>Surprisingly, at the second iteration, I get the following error:<br></div><div><br></div><div><em>Open MPI v1.8.4, package: Open MPI Distribution, ident: 1.8.4, repo rev: v1.8.3-330-g0344f04, Dec 19, 2014</em><br></div><div><em><br></em></div><div><em>*** An error occurred in MPI_Win_lock</em><br><em>*** reported by process [140394923687937,140393890971648]</em><br><em>*** on win </em><br><em>*** MPI_ERR_RMA_SYNC: error executing rma sync</em><br><em>*** MPI_ERRORS_ARE_FATAL (processes in this win will now abort,</em><br><em>***&nbsp;&nbsp;&nbsp; and potentially your MPI job)</em></div><div><br></div><div>I observed the same behaviour when allocating the window using <em>MPI_Win_allocate</em> function.<br></div><div><br></div><div>On the other hand, everything works well with <em>MPI_Win_Create</em>.<br></div><div><br></div><div>Am I wrong somewhere, any idea would be great :-) !<br></div><div><br></div><div>Cheers,<br></div><div><br></div><div>Thibaud Kloczko.<br></div><div><br></div><div><span name="x"></span>-------------------------------------------------<br>Ingénieur d'Expérimentation et de Développement<br>Inria CRISAM<br>2004, route des lucioles<br>06902 Sophia Antipolis<br>+33 4 92 38 50 03<span name="x"></span><br></div><div><br></div></div></body></html>
