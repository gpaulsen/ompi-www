<div dir="ltr"><div><div><div><div><div>Hello,<br></div>  I have recently built a cluster that uses the 64-bit indexing feature of OpenMPI following the directions at<br><a href="http://wiki.chem.vu.nl/dirac/index.php/How_to_build_MPI_libraries_for_64-bit_integers">http://wiki.chem.vu.nl/dirac/index.php/How_to_build_MPI_libraries_for_64-bit_integers</a><br>
<br></div>My question is what are the new prototypes for the MPI calls ?<br></div>specifically<br></div>MPI_RECV<br></div><div>MPI_Allgathterv<br><br></div><div>I&#39;m curious because some off my local variables get killed (set to null) upon my first call to MPI_RECV.  Typically, this is due (in Fortran) to someone not setting the &#39;status&#39; variable to an appropriate array size.<br>
<br></div><div>However, my declaration for status is<br></div><div>integer (kind=mpi_int_kind) :: status(MPI_STATUS_SIZE)<br><br>A typical call to MPI_Recv is<br></div><div>call MPI_RECV(num_array, length, MPI_INTEGER, 0,0,MPI_COMM_WORLD, status, mpierr)<br>
</div><div><br>where the following definitions are used,<br></div><div>mpi_int_kind=8 (for gcc/gfortran compiler)  <br><br></div><div><div>integer,parameter :: length = &lt;some-value&gt;<br></div>integer :: num_array(length)<br>
</div>integer :: mpierr<br><div><br></div><div>My review of mpif.h and mpi.h seem to indicate that the functions are defined as C int types and therefore , I assume, the coercion during the compile makes the library support 64-bit indexing.  ie. int -&gt; long int<br>
<br></div><div>The documentation on MPI_Recv just mentions the prototype for ints (32-bit) , I can&#39;t find anything for 64-bit<br><a href="http://www.open-mpi.org/doc/v1.6/">http://www.open-mpi.org/doc/v1.6/</a><br><br>
</div><div>Any help would be appreciated.<br></div><div>The output from ompi_info --all is attached.<br><br></div><div>Cheers,<br></div><div>--Jim Parker<br></div><div><br></div><div>BTW, the code works fine when linked against a 32-bit MPI library.  <br>
</div></div>

