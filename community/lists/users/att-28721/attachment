<div dir="ltr"><div><div>Hello all<br></div>I have a simple test setup, consisting of two Dell workstation nodes with similar hardware profile.<br><br></div>Both the nodes have (identical)<br><div><div><div><div><div>1. Qlogic 4x DDR infiniband<br></div><div>2. Chelsio C310 iWARP ethernet.<br><br></div><div>Both of these cards are connected back to back, without a switch.<br><br></div><div>With this setup, I can run OpenMPI over TCP and openib BTL. However, if I try to use the PSM MTL (excluding the Chelsio NIC, of course, since it does not support PSM), I get an error from one of the nodes (details below), which makes me think that a required library or package is not installed, but I can&#39;t figure out what it might be.<br><br></div><div>Note that the test program is a simple &#39;hello world&#39; program.<br></div><div><br></div><div>The following work:<br>  mpirun -np 2 --hostfile ~/hostfile -mca btl tcp,self ./mpitest<br>mpirun -np 2 --hostfile ~/hostfile -mca btl self,openib -mca btl_openib_if_exclude cxgb3_0 ./mpitest<br><br></div><div>(I had to exclude the Chelsio card because of this issue:<br><a href="https://www.open-mpi.org/community/lists/users/2016/03/28661.php">https://www.open-mpi.org/community/lists/users/2016/03/28661.php</a>  )<br><br></div><div>Here is what does NOT work:<br>mpirun -np 2 --hostfile ~/hostfile -mca mtl psm -mca btl_openib_if_exclude cxgb3_0 ./mpitest<br><br></div><div>The error (from both nodes) is: <br> mca: base: components_open: component pml / cm open function failed<br><br></div><div>However, I still see the &quot;Hello, world&quot; output indicating that the program ran to completion.<br><br></div><div>Here is also another command that does NOT work:<br><br>mpirun -np 2 --hostfile ~/hostfile -mca pml cm -mca btl_openib_if_exclude cxgb3_0 ./mpitest<br><br></div><div>The error is: (from the root node)<br>PML cm cannot be selected<br><br></div><div>However, this time, I see no output from the program, indicating it did not run.<br><br></div><div>The following command also fails in a similar way:<br> mpirun -np 2 --hostfile ~/hostfile -mca pml cm -mca mtl psm -mca btl_openib_if_exclude cxgb3_0 ./mpitest<br><br></div><div>I have verified that infinipath-psm is installed on both nodes. Both nodes run identical CentOS 7 and the libraries were installed from the CentOS repositories (i.e. were not compiled from source)<br><br></div><div>Both nodes run OMPI 1.10.2, compiled from the source RPM.<br></div><div><br></div><div>What am I doing wrong?<br><br></div><div>Thanks<br></div><div>Durga<br></div><div><br></div><div><br><br></div><div><br clear="all"><div><div class="gmail_signature">Life is complex. It has real and imaginary parts.</div></div>
</div></div></div></div></div></div>

