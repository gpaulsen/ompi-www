<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body >Much appreciated, guys. &nbsp;I am a middle man in a discussion over whether MPI should be handled by apps people or system people and there was some confusion when we saw RHEL6 had an RPM for OpenMpi. Your comments make it clear that there is a pretty strong &nbsp;preference to build OpenMpi on the system to be used, with the compilers that match your apps compiler. Just a prereq for supporting a development environment<br><br><br>-------- Original message --------<br>From: Tim Prince &lt;n8tm@aol.com&gt; <br>Date:  <br>To: users@open-mpi.org <br>Subject: Re: [OMPI users] EXTERNAL: Re: basic questions about compiling	OpenMPI <br> <br><br>On 5/25/2013 8:26 AM, Jeff Squyres (jsquyres) wrote:<br>&gt; On May 23, 2013, at 9:50 AM, "Blosch, Edwin L" &lt;edwin.l.blosch@lmco.com&gt; wrote:<br>&gt;<br>&gt;&gt; Excellent.&nbsp; Now I've read the FAQ and noticed that it doesn't mention the issue with the Fortran 90 .mod signatures.&nbsp; Our applications are Fortran.&nbsp; So your replies are very helpful -- now I know it really isn't practical for us to use the default OpenMPI shipped with RHEL6 since we use both Intel and PGI compilers and have several applications to accommodate.&nbsp; Presumably if all the applications did INCLUDE 'mpif.h'&nbsp; instead of 'USE MPI' then we could get things working, but it's not a great workaround.<br>&gt; No, not even if they use mpif.h.&nbsp; Here's a chunk of text from the v1.6 README:<br>&gt;<br>&gt; - While it is possible -- on some platforms -- to configure and build<br>&gt;&nbsp;&nbsp;&nbsp; Open MPI with one Fortran compiler and then build MPI applications<br>&gt;&nbsp;&nbsp;&nbsp; with a different Fortran compiler, this is not recommended.&nbsp; Subtle<br>&gt;&nbsp;&nbsp;&nbsp; problems can arise at run time, even if the MPI application<br>&gt;&nbsp;&nbsp;&nbsp; compiled and linked successfully.<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp; Specifically, the following two cases may not be portable between<br>&gt;&nbsp;&nbsp;&nbsp; different Fortran compilers:<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp; 1. The C constants MPI_F_STATUS_IGNORE and MPI_F_STATUSES_IGNORE<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; will only compare properly to Fortran applications that were<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; created with Fortran compilers that that use the same<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name-mangling scheme as the Fortran compiler with which Open MPI<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; was configured.<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp; 2. Fortran compilers may have different values for the logical<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .TRUE. constant.&nbsp; As such, any MPI function that uses the Fortran<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LOGICAL type may only get .TRUE. values back that correspond to<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the the .TRUE. value of the Fortran compiler with which Open MPI<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; was configured.&nbsp; Note that some Fortran compilers allow forcing<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .TRUE. to be 1 and .FALSE. to be 0.&nbsp; For example, the Portland<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Group compilers provide the "-Munixlogical" option, and Intel<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; compilers (version &gt;= 8.) provide the "-fpscomp logicals" option.<br>&gt;<br>&gt;&nbsp;&nbsp;&nbsp; You can use the ompi_info command to see the Fortran compiler with<br>&gt;&nbsp;&nbsp;&nbsp; which Open MPI was configured.<br>&gt;<br>&gt;<br>Even when the name mangling obstacle doesn't arise (it shouldn't for the <br>cited case of gfortran vs. ifort), run-time library function usage is <br>likely to conflict between the compiler used to build the MPI Fortran <br>library and the compiler used to build the application. So there really <br>isn't a good incentive to retrogress away from the USE files simply to <br>avoid one aspect of mixing incompatible compilers.<br><br>-- <br>Tim Prince<br><br>_______________________________________________<br>users mailing list<br>users@open-mpi.org<br>http://www.open-mpi.org/mailman/listinfo.cgi/users<br></body>