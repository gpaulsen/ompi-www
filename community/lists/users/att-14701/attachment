<div class="gmail_quote">On Sat, Nov 6, 2010 at 18:00, Jack Bryan <span dir="ltr">&lt;<a href="mailto:dtustudy68@hotmail.com">dtustudy68@hotmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;">




<div>
<div><font face="Tahoma" size="4"><span style="font-size:16px">Thanks,</span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px"><br></span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px">About my MPI program bugs: </span></font></div>
<div><font face="Tahoma" size="4"><span style="font-size:16px"><br></span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px">I used GDB and got the error:</span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px"><br>
</span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px">Program received signal SIGSEGV, Segmentation fault.</span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px">0:  0x0000003a31c62184 in fwrite () from /lib64/libc.so.6</span></font></div>
</div></blockquote><div><br></div><div>Clearly fwrite was called with invalid parameters, but you don&#39;t give enough information for anyone to explain why.  Compile your program with debugging symbols and print the whole stack trace, e.g. with &quot;backtrace full&quot;.  Also try valgrind.</div>
<div> </div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"><div><div></div><div><font face="Tahoma" size="4"><span style="font-size:16px">class CNSGA2</span></font></div>
<div><font face="Tahoma" size="4"><span style="font-size:16px">{</span></font></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">allocate mem for var;</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">some deallocate statement;</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">some pointers;</span></font></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">evaluate(); // it is a function</span></font></div>
<div><font face="Tahoma" size="4"><span style="font-size:16px">}</span></font></div></div></blockquote><div><br></div><div>This isn&#39;t even close to valid code since you can&#39;t have statements in the suggested scope.</div>
<div><br></div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"><div><div><font face="Tahoma" size="4"><span style="font-size:16px">main()</span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px">{</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">CNSGA2* nsga2a = new CNSGA2(true); // true or false are only for different constructors</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">CNSGA2* nsga2b = new CNSGA2(false);</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">if (myRank == 0) // scope1</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">{</span></font></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">		</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">initialize the objects of nsga2a or nsga2b;</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">			</span></font></span></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">}</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">broadcast some parameters, which are got from scope1. </span></font></div>
<div><font face="Tahoma" size="4"><span style="font-size:16px"><br></span></font></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">According to the parameters, define a datatype (myData) so that all workers use that to do <span style="white-space:pre-wrap">	</span>recv and send. </span></font></div>
<div><font face="Tahoma" size="4"><span style="font-size:16px"><br></span></font></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">if (myRank == 0) // scope2</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">{</span></font></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">		</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">send out myData to workers by the datatype defined above;<span style="white-space:pre-wrap">	</span></span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">}</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">if (myRank != 0) </span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">{</span></font></div><div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">		</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">newCNSGA2 myNsga2;</span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">		</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">recv data from master and work on the recved data; </span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">		</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">myNsga2.evaluate(recv data); </span></font></div>
<div><span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">		</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">send back results;</span></font></div><div>
<span style="white-space:pre-wrap"><font face="Tahoma" size="4"><span style="font-size:16px">	</span></font></span><font face="Tahoma" size="4"><span style="font-size:16px">}</span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px"><br>
</span></font></div><div><font face="Tahoma" size="4"><span style="font-size:16px">}</span></font></div></div></blockquote><div><br></div><div>According to the above, rank 0 never receives the results from before.  You should paste valid code.</div>
<div><br></div><div>Jed</div></div>

