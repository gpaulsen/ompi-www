<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 12pt;
font-family:Calibri
}
--></style></head>
<body class='hmmessage'><div dir='ltr'><font face="Times New Roman" size="3" style="font-size:12pt;">Hello,</font><div><font face="Times New Roman" size="3" style="font-size:12pt;">I am using OpenMPI v1.6.1 on Windows 7, and some time i am looking for any solution to send a struct with vector or using dynamics arrays.</font></div><div><font face="Times New Roman" size="3" style="font-size:12pt;">I know send structs with differents datatypes, like int, double, struct. But i have some problem sending vector or dynamics arrays.</font></div><div><font face="Times New Roman" size="3" style="font-size:12pt;"><br></font></div><div><font face="Times New Roman">Using MPI_Type_vector, MPI_Type_continuous or MPI_Type_extend i dont resolve....</font></div><div><br></div><div><font face="Times New Roman">Code:&nbsp;</font></div><div><font face="Times New Roman"><br></font></div><div><font face="Times New Roman"><div>#include "mpi.h"</div><div>#include &lt;iostream&gt;</div><div>#include &lt;time.h&gt; &nbsp;</div><div>#include &lt;vector&gt;</div><div><br></div><div>using namespace std;</div><div><br></div><div>struct Teste6{</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>vector&lt;int&gt; t6;</div><div>};</div><div><br></div><div>int main(int argc, char** argv)</div><div>{<span class="Apple-tab-span" style="font-size: 12pt; white-space: pre;">	</span></div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Datatype struTeste6, oldTTeste6[1], newTTeste6;</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>int<span class="Apple-tab-span" style="white-space:pre">	</span>blcklensTeste6[1];</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Aint<span class="Apple-tab-span" style="white-space:pre">	</span>offsTeste6[1], extTeste6;</div><div><br></div><div><span class="Apple-tab-span" style="white-space:pre">	</span>Teste6 tst6;</div><div><span class="Apple-tab-span" style="white-space:pre">	</span></div><div><span class="Apple-tab-span" style="white-space:pre">	</span>int max;</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>int myRank;</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Status status;</div><div><span class="Apple-tab-span" style="white-space:pre">	</span></div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Init(&amp;argc, &amp;argv);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Comm_rank(MPI_COMM_WORLD, &amp;myRank);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Comm_size(MPI_COMM_WORLD, &amp;max);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span></div><div><span class="Apple-tab-span" style="white-space:pre">	</span>// Teste6</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>//MPI_Type_vector(2,1,1,MPI_INT, &amp;newTTeste6);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Type_contiguous(2, MPI_INT, &amp;newTTeste6);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>offsTeste6[0] = 0;</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>oldTTeste6[0] = newTTeste6;</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>blcklensTeste6[0] = 1;</div><div><span class="Apple-tab-span" style="white-space:pre">	</span></div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Type_struct(1, blcklensTeste6, offsTeste6, oldTTeste6, &amp;struTeste6);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Type_commit(&amp;struTeste6);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>//</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>if(myRank == 0)</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>{<span class="Apple-tab-span" style="font-size: 12pt; white-space: pre;">		</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Add element 5 and element 10 to vector on struct</div><div><span class="Apple-tab-span" style="white-space:pre">		</span>tst6.t6.push_back(5);</div><div><span class="Apple-tab-span" style="white-space:pre">		</span>tst6.t6.push_back(10);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Print elements to look before send</div><div><span class="Apple-tab-span" style="white-space:pre">		</span>printf("\n myRank: %d - tst6.t6[0]: %d - tst6.t6[1]: %d", myRank, tst6.t6[0], tst6.t6[1]);</div><div><span class="Apple-tab-span" style="white-space:pre">		</span>//Send to Process 1</div><div><span class="Apple-tab-span" style="white-space:pre">		</span>MPI_Send(&amp;tst6, 1, struTeste6, 1, 1, MPI_COMM_WORLD);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>}</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>else</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>{</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Receive from Process 0</div><div><span class="Apple-tab-span" style="white-space:pre">		</span>MPI_Recv(&amp;tst6, 1, struTeste6, 0, 1, MPI_COMM_WORLD, &amp;status);</div><div><span class="Apple-tab-span" style="white-space:pre">		</span>//This code dont print received struct, some problem here, process die.</div><div><span class="Apple-tab-span" style="white-space:pre">		</span>printf("\n Slave 1 - myRank: %d - tst6.t6[0]: %d - tst6.t6[1]: %d", myRank, tst6.t6[0], tst6.t6[1]);</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>}</div><div><br></div><div><span class="Apple-tab-span" style="white-space:pre">	</span>MPI_Finalize();</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>return 0;</div><div>}</div></font></div><div><font face="Times New Roman" size="3" style="font-size:12pt;"><br></font></div><div><font face="Times New Roman" size="3" style="font-size:12pt;">--</font></div><div>Thanks</div><div><br></div><div><font face="Times New Roman">Atenciosamente,</font><div><font face="Times New Roman">Jéferson Fernandes da Silva</font></div></div> 		 	   		  </div></body>
</html>
