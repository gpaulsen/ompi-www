<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html>
<head>
  <meta name="Generator" content="Zarafa WebAccess v7.0.4-31235">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>RE: [OMPI users] sge tight intregration leads to bad allocation</title>
  <style type="text/css">
      body
      {
        font-family: Arial, Verdana, Sans-Serif ! important;
        font-size: 12px;
        padding: 5px 5px 5px 5px;
        margin: 0px;
        border-style: none;
        background-color: #ffffff;
      }

      p, ul, li
      {
        margin-top: 0px;
        margin-bottom: 0px;
      }
  </style>
</head>
<body>
<blockquote style="border-left: 2px solid #325FBA; padding-left: 5px;margin-left:5px;"><br />&gt;&gt; Here are the allocation info retrieved from `qstat -g t` for the related job:<br />&gt; <br />&gt; For me the output of `qstat -g t` shows MASTER and SLAVE entries but no variables. Is there any wrapper defined for `qstat` to reformat the output (or a ~/.sge_qstat defined)?<br />&gt; <br />&gt; [eg: ] sorry, i forgot about sge_qstat being defined. As I don&#39;t have any slot available right now, I cannot relaunch the job to get the output updated.</blockquote><p>Reuti, here is the output you asked two days ago.</p><p>It was produced with another &quot;bad&quot; run for which 3 processes are running on nodes charlie and carl... but we should have only 2 processes on carl and 4 on charlie...</p><p>&nbsp;</p><p>Output from qstat -g t:</p><p>------------------------------------</p><p>queuename&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; qtype resv/used/tot. load_avg arch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; states<br />---------------------------------------------------------------------------------<br />smp4.q@carl.fft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BIP&nbsp;&nbsp; 0/2/4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.14&nbsp;&nbsp;&nbsp;&nbsp; lx-amd64<br />&nbsp; hc:mem_available=1.715G<br />&nbsp;&nbsp; 1391 0.57643 semi_green jj&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; r&nbsp;&nbsp;&nbsp;&nbsp; 04/05/2012 15:41:04 SLAVE<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SLAVE<br />---------------------------------------------------------------------------------<br />smp8.q@charlie.fft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BIP&nbsp;&nbsp; 0/4/8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.73&nbsp;&nbsp;&nbsp;&nbsp; lx-amd64<br />&nbsp; hc:mem_available=4.018G<br />&nbsp;&nbsp; 1391 0.57643 semi_green jj&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; r&nbsp;&nbsp;&nbsp;&nbsp; 04/05/2012 15:41:04 MASTER<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SLAVE<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SLAVE<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SLAVE<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SLAVE</p><p>&nbsp;</p><p>Debug output from orterun:</p><p>------------------------------------<br />[charlie:08194] ras:gridengine: JOB_ID: 1391<br />[charlie:08194] ras:gridengine: PE_HOSTFILE: /opt/sge/default/spool/charlie/active_jobs/1391.1/pe_hostfile<br />[charlie:08194] ras:gridengine: charlie.fft: PE_HOSTFILE shows slots=4<br />[charlie:08194] ras:gridengine: carl.fft: PE_HOSTFILE shows slots=2<br /><br />======================&nbsp;&nbsp; ALLOCATED NODES&nbsp;&nbsp; ======================<br /><br />&nbsp;Data for node: Name: charlie&nbsp;&nbsp; Launch id: -1 Arch: ffc91200&nbsp; State: 2<br />&nbsp; Num boards: 1 Num sockets/board: 2&nbsp; Num cores/socket: 4<br />&nbsp; Daemon: [[57575,0],0] Daemon launched: True<br />&nbsp; Num slots: 4&nbsp; Slots in use: 0<br />&nbsp; Num slots allocated: 4&nbsp; Max slots: 0<br />&nbsp; Username on node: NULL<br />&nbsp; Num procs: 0&nbsp; Next node_rank: 0<br />&nbsp;Data for node: Name: carl.fft&nbsp;&nbsp;&nbsp; Launch id: -1 Arch: 0 State: 2<br />&nbsp; Num boards: 1 Num sockets/board: 2&nbsp; Num cores/socket: 4<br />&nbsp; Daemon: Not defined Daemon launched: False<br />&nbsp; Num slots: 2&nbsp; Slots in use: 0<br />&nbsp; Num slots allocated: 2&nbsp; Max slots: 0<br />&nbsp; Username on node: NULL<br />&nbsp; Num procs: 0&nbsp; Next node_rank: 0<br /><br />=================================================================<br /><br />&nbsp;Map generated by mapping policy: 0200<br />&nbsp; Npernode: 0 Oversubscribe allowed: TRUE CPU Lists: FALSE<br />&nbsp; Num new daemons: 1&nbsp; New daemon starting vpid 1<br />&nbsp; Num nodes: 2<br /><br />&nbsp;Data for node: Name: charlie&nbsp;&nbsp; Launch id: -1 Arch: ffc91200&nbsp; State: 2<br />&nbsp; Num boards: 1 Num sockets/board: 2&nbsp; Num cores/socket: 4<br />&nbsp; Daemon: [[57575,0],0] Daemon launched: True<br />&nbsp; Num slots: 4&nbsp; Slots in use: 3<br />&nbsp; Num slots allocated: 4&nbsp; Max slots: 0<br />&nbsp; Username on node: NULL<br />&nbsp; Num procs: 3&nbsp; Next node_rank: 3<br />&nbsp; Data for proc: [[57575,1],0]<br />&nbsp;&nbsp;&nbsp; Pid: 0&nbsp; Local rank: 0 Node rank: 0<br />&nbsp;&nbsp;&nbsp; State: 0&nbsp; App_context: 0&nbsp; Slot list: NULL<br />&nbsp; Data for proc: [[57575,1],2]<br />&nbsp;&nbsp;&nbsp; Pid: 0&nbsp; Local rank: 1 Node rank: 1<br />&nbsp;&nbsp;&nbsp; State: 0&nbsp; App_context: 0&nbsp; Slot list: NULL<br />&nbsp; Data for proc: [[57575,1],4]<br />&nbsp;&nbsp;&nbsp; Pid: 0&nbsp; Local rank: 2 Node rank: 2<br />&nbsp;&nbsp;&nbsp; State: 0&nbsp; App_context: 0&nbsp; Slot list: NULL<br /><br />&nbsp;Data for node: Name: carl.fft&nbsp;&nbsp;&nbsp; Launch id: -1 Arch: 0 State: 2<br />&nbsp; Num boards: 1 Num sockets/board: 2&nbsp; Num cores/socket: 4<br />&nbsp; Daemon: [[57575,0],1] Daemon launched: False<br />&nbsp; Num slots: 2&nbsp; Slots in use: 3<br />&nbsp; Num slots allocated: 2&nbsp; Max slots: 0<br />&nbsp; Username on node: NULL<br />&nbsp; Num procs: 3&nbsp; Next node_rank: 3<br />&nbsp; Data for proc: [[57575,1],1]<br />&nbsp;&nbsp;&nbsp; Pid: 0&nbsp; Local rank: 0 Node rank: 0<br />&nbsp;&nbsp;&nbsp; State: 0&nbsp; App_context: 0&nbsp; Slot list: NULL<br />&nbsp; Data for proc: [[57575,1],3]<br />&nbsp;&nbsp;&nbsp; Pid: 0&nbsp; Local rank: 1 Node rank: 1<br />&nbsp;&nbsp;&nbsp; State: 0&nbsp; App_context: 0&nbsp; Slot list: NULL<br />&nbsp; Data for proc: [[57575,1],5]<br />&nbsp;&nbsp;&nbsp; Pid: 0&nbsp; Local rank: 2 Node rank: 2<br />&nbsp;&nbsp;&nbsp; State: 0&nbsp; App_context: 0&nbsp; Slot list: NULL<br /><br />&nbsp;</p><p>&nbsp;</p><p>Regards,</p><p>Eloi</p>
</body>
</html>
