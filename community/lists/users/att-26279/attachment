<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 12pt;
font-family:Calibri
}
--></style></head>
<body class='hmmessage'><div dir='ltr'>Jeff and Nick,<div><br></div><div>Thanks very much for your help. In fact the first thing I did is to join the mailing list of Abinit and I posted in the community; however I only got one reply nothing since yesterday morning. I know it is a short period of time and people are busy doing their work but I don't want to stay long trying to figure out how to configure the code; this is when i decided to e-mail you guys. In fact you shed light on the problem. I am trying to find that path of the ifort compiler but in vain. In fact I was looking at the make.sys of my quantum espresso code and I found:</div><div><br></div><div><div># Compilers: fortran-90, fortran-77, C</div><div># If a parallel compilation is desired, MPIF90 should be a fortran-90</div><div># compiler that produces executables for parallel execution using MPI</div><div># (such as for instance mpif90, mpf90, mpxlf90,...);</div><div># otherwise, an ordinary fortran-90 compiler (f90, g95, xlf90, ifort,...)</div><div># If you have a parallel machine but no suitable candidate for MPIF90,</div><div># try to specify the directory containing "mpif.h" in IFLAGS</div><div># and to specify the location of MPI libraries in MPI_LIBS</div><div><br></div><div>MPIF90 &nbsp; &nbsp; &nbsp; &nbsp; = mpiifort</div><div>#F90 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = ifort</div><div>CC &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = icc</div><div>F77 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= ifort</div><div>&nbsp;and also the sbatch.srm file where I execute mpirun :</div><div><br></div><div><div>if [ "${MPI}" == "INTEL" ]; then</div><div>&nbsp; &nbsp; source /opt/intel/Compiler/11.1/069/bin/iccvars.sh intel64</div><div>&nbsp; &nbsp; source /opt/intel/Compiler/11.1/069/bin/ifortvars.sh intel64</div><div>&nbsp; &nbsp; source /opt/intel/impi/4.0.0.028/intel64/bin/mpivars.sh</div><div>&nbsp; &nbsp; export I_MPI_PMI_LIBRARY=/usr/lib64/libpmi.so</div><div>&nbsp; &nbsp; export I_MPI_FABRICS=shm:dapl</div></div><div><br></div><div>I tried to put these paths in the --with-mpi-prefix but there was still a reference to the gcc mpi!</div><div><br></div><div>Regards</div><div><br></div><div>Elio</div><div><br></div><div>&nbsp;</div><br><div><hr id="stopSpelling">From: nickpapior@gmail.com<br>Date: Tue, 3 Feb 2015 19:26:13 +0000<br>To: users@open-mpi.org<br>Subject: Re: [OMPI users] configuring a code with MPI/OPENMPI<br><br><div dir="ltr">I also concur with Jeff about asking software specific questions at the software-site, abinit already has a pretty active forum: <a href="http://forum.abinit.org/" target="_blank">http://forum.abinit.org/</a><div>So any questions can also be directed there.</div></div><div class="ecxgmail_extra"><br><div class="ecxgmail_quote">2015-02-03 19:20 GMT+00:00 Nick Papior Andersen <span dir="ltr">&lt;<a href="mailto:nickpapior@gmail.com" target="_blank">nickpapior@gmail.com</a>&gt;</span>:<br><blockquote class="ecxgmail_quote" style="border-left:1px #ccc solid;padding-left:1ex;"><div dir="ltr"><br><div class="ecxgmail_extra"><br><div class="ecxgmail_quote"><span>2015-02-03 19:12 GMT+00:00 Elio Physics <span dir="ltr">&lt;<a href="mailto:elio-physics@live.com" target="_blank">elio-physics@live.com</a>&gt;</span>:<br><blockquote class="ecxgmail_quote" style="border-left:1px #ccc solid;padding-left:1ex;">


<div><div dir="ltr">Hello,<div><br></div><div>thanks for your help. I have tried:</div><div><br></div><div><div>./configure &nbsp;--with-mpi-prefix=/usr FC=ifort CC=icc</div><div><br></div><div>But i still get the same error.&nbsp; Mind you if I compile it serially, that is&nbsp;./configure &nbsp; FC=ifort CC=icc</div><div><br></div><div>It works perfectly fine.</div><div><br></div><div>We do have MPI installed.. I am using Quantum Espresso code with mpirun.</div></div></div></div></blockquote></span><div>Sorry I thought you where also compiling your own MPI.&nbsp;</div><span><blockquote class="ecxgmail_quote" style="border-left:1px #ccc solid;padding-left:1ex;"><div><div dir="ltr"><div><div><br></div><div>I am attaching the config.log file. I appreciate your help.</div></div></div></div></blockquote></span><div>I see you are trying to install abinit, I would highly recommend you to utilize their <a href="http://build.ac" target="_blank">build.ac</a> module method.</div><div>Instead of then passing arguments to the command line you create a <a href="http://build.ac" target="_blank">build.ac</a> file and configure like this:</div><div>./configure --with-config-file&nbsp;</div><div>(I would recommend you to build abinit in a sub-folder)</div><div><br></div><div>However, your problem is that your used MPI version is compiled against gcc (the 4.1) so that will never work, even if you specify FC/CC</div><div>Either:</div><div>A) Use an MPI version installed using the intel compiler (if not provided by your cluster administrator you need to install it)</div><div>B) Get a new gcc compiler</div><blockquote class="ecxgmail_quote" style="border-left:1px #ccc solid;padding-left:1ex;"><div><div class="h5"><div><div dir="ltr"><div><div><br></div><div>Regards</div><div><br></div><div>Elio</div><div><span style="font-size:12pt;"><br></span></div><br><div><hr>From: <a href="mailto:nickpapior@gmail.com" target="_blank">nickpapior@gmail.com</a><br>Date: Tue, 3 Feb 2015 17:21:51 +0000<br>To: <a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>Subject: Re: [OMPI users] configuring a code with MPI/OPENMPI<div><div><br><br><div dir="ltr">First try and correct your compilation by using the intel c-compiler AND the fortran compiler. You should not mix compilers.&nbsp;<div>CC=icc FC=ifort</div><div>Else the config.log is going to be necessary to debug it further.</div><div><br></div><div>PS: You could also try and convince your cluster administrator to provide a more recent compiler</div><div>PPS: Do your cluster not have an MPI installation already present?</div><div><br></div></div><div><br><div>2015-02-03 17:13 GMT+00:00 Elio Physics <span dir="ltr">&lt;<a href="mailto:elio-physics@live.com" target="_blank">elio-physics@live.com</a>&gt;</span>:<br><blockquote style="border-left:1px #ccc solid;padding-left:1ex;">


<div><div dir="ltr">Dear all,<div><br></div><div>II am trying to configure a code &nbsp;with mpi (for parallel processing) &nbsp;to do some calculations so basically I type:</div><div><br></div><div>./configure&nbsp;</div><div><br></div><div>and I get:</div><div><br></div><div><span style="color:rgb(51,51,51);font-family:'Lucida Grande','Trebuchet MS',Verdana,Helvetica,Arial,sans-serif;font-size:13px;line-height:18.2000007629395px;background-color:rgb(225,235,242);">configure: error: Fortran compiler does not provide iso_c_binding module. Use a more recent version or a different compiler</span></div><div><br></div><div><br></div><div>which means that my GCC 4.1 compiler is too old to build the code (something i do not have control over..It is a cluster of the Uni where I work). so I tried another compiler ifort:</div><div><br></div><div><div>./configure &nbsp;--enable-mpi=yes &nbsp;FC=ifort</div></div><div>&nbsp;but now I get another error:</div><div><br></div><div><div>&nbsp;==============================================================================</div><div>&nbsp;=== Multicore architecture support &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===</div><div>&nbsp;==============================================================================</div><div><br></div><div>checking whether to enable OpenMP support... no</div><div>checking whether to build MPI code... yes</div><div>checking whether the C compiler supports MPI... no</div><div>checking whether the C++ compiler supports MPI... no</div><div>checking whether the Fortran Compiler supports MPI... no</div><div>checking whether MPI is usable... no</div><div>configure: error: MPI support is broken - please fix your config parameters and/or MPI installation</div></div><div><br></div><div>Agaiin, I tried ti give a path for the mpi compiler:</div><div><br></div><div><div>&nbsp;./configure &nbsp;--enable-mpi &nbsp;--with-mpi-prefix=/usr FC=ifort</div></div><div><br></div><div>WHICH APPARENTLY SOLVED THE PREVIOUS ERROR:</div><div><div>&nbsp;==============================================================================</div><div>&nbsp;=== Multicore architecture startup &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===</div><div>&nbsp;==============================================================================</div><div><br></div><div>configure: Initializing MPI support</div><div>configure: looking for MPI in /usr</div><div>checking for a MPI C compiler... /usr/bin/mpicc</div><div>checking for a MPI C++ compiler... /usr/bin/mpicxx</div><div>checking for a MPI Fortran compiler... /usr/bin/mpif90</div><div>configure: creating wrapper for MPI Fortran compiler</div><div>configure: GPU support disabled from command-line</div></div><div>&nbsp;</div><div>But stranegly enough got me back to the furst error although I am using ifort!!</div><div><br></div><div><div>checking whether the Fortran compiler provides the iso_c_binding module... configure: error: Fortran compiler does not provide iso_c_binding module. Use a more recent version or a different compiler</div></div><div><br></div><div>so what is going on?? please can anyone help me on this..Thank youu</div><div><br></div><div>Elio</div><div>University of Rondonia</div><div>Brazil</div><div><br></div><div><br></div> 		 	   		  </div></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/02/26268.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/02/26268.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><div>Kind regards Nick</div></div></div>
</div>
<br></div></div>_______________________________________________
users mailing list
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/02/26270.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/02/26270.php</a></div></div> 		 	   		  </div></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/02/26273.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/02/26273.php</a><span class="ecxHOEnZb"><font color="#888888"><br></font></span></blockquote></div><span class="ecxHOEnZb"><font color="#888888"><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><div>Kind regards Nick</div></div></div>
</font></span></div></div>
</blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="ecxgmail_signature"><div dir="ltr"><div>Kind regards Nick</div></div></div>
</div>
<br>_______________________________________________
users mailing list
users@open-mpi.org
Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/users
Link to this post: http://www.open-mpi.org/community/lists/users/2015/02/26276.php</div></div> 		 	   		  </div></body>
</html>
