<div dir="ltr"><div><div><div><div><div>To run a hybrid MPI/OpenMP code on a hyperthreaded machine with 24 virtual cores, I&#39;ve been using -n 12 --cpus-per-proc 2 so I can use OMP_NUM_THREADS=2<br><br></div>I now see that --cpus-per-proc is deprecated in favour of --map-by, but I&#39;ve been struggling to find a conversion as the --map-by documentation is not very clear.<br><br></div>What should I use to bind 2 virtual cores to each process?<br><br></div>After I use -n 12 --cpus-per-proc 2 I get<br><br>A request was made to bind to that would result in binding more<br>processes than cpus on a resource:<br><br>   Bind to:     CORE<br>   Node:        mic1<br>   #processes:  2<br>   #cpus:       1<br><br></div><div>and suggests I need an override option<br></div><div><br></div>But this doesn&#39;t to match my request for 2 cores  per process, almost the reverse, having 2 processes per core. I don&#39;t think I&#39;m overloading my virtual cores anyway<br><br></div>John<br></div>

