<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Verdana
}
--></style>
</head>
<body class='hmmessage'>
thanks for your reply.&nbsp;<div><br></div><div>The message size is 72 bytes.&nbsp;</div><div><br></div><div>The master sends out the message package to each 51 nodes.&nbsp;</div><div><br></div><div>Then, after doing their local work, the worker node send back the same-size message to the master.&nbsp;</div><div><br></div><div>Master use vector.push_back(new messageType) to receive each message from workers.&nbsp;</div><div><br></div><div>Master use the</div><div>mpi_irecv(workerNodeID, messageTag, bufferVector[row][column])<br>to receive the worker message.&nbsp;</div><div><br></div><div>the row is the rankID of each worker, the column is index for &nbsp;message from worker.</div><div>Each worker may send multiple messages to master.&nbsp;</div><div><br></div><div>when the worker node size is large, i got MPI_ERR_TRUNCATE error.</div><div><br></div><div>Any help is appreciated.&nbsp;</div><div><br></div><div>JACK</div><div><br></div><div>July 10 &nbsp;2010</div><div><br></div><div><br><hr id="stopSpelling">Date: Sat, 10 Jul 2010 23:12:49 -0700<br>From: eugene.loh@oracle.com<br>To: users@open-mpi.org<br>Subject: Re: [OMPI users] OpenMPI how large its buffer size ?<br><br>




  
  <title></title>


Jack Bryan wrote:
<blockquote cite="midSNT134-w645689305D8453B0910B1BCBB70@phx.gbl">
  <style>
.ExternalClass .ecxhmmessage P
{padding:0px;}
.ExternalClass body.ecxhmmessage
{font-size:10pt;font-family:Verdana;}
</style>
  <div>The master node can receive message ( the same size) &nbsp;from 50
worker nodes.&nbsp;</div>
  <div>But, it cannot receive message from 51 nodes. It caused
"truncate error".</div>
</blockquote>
How big was the buffer that the program specified in the receive call?&nbsp;
How big was the message that was sent?<br>
<br>
MPI_ERR_TRUNCATE means that you posted a receive with an application
buffer that turned out to be too small to hold the message that was
received.&nbsp; It's a user application error that has nothing to do with
MPI's internal buffers.&nbsp; MPI's internal buffers don't need to be big
enough to hold that message.&nbsp; MPI could require the sender and receiver
to coordinate so that only part of the message is moved at a time.<br>
<blockquote cite="midSNT134-w645689305D8453B0910B1BCBB70@phx.gbl">
  <div><br>
  </div>
  <div>I used the same buffer to get the message in 50 node case.&nbsp;</div>
  <div><br>
  </div>
  <div>About ""rendezvous" protocol", what is the meaning of "the
sender sends a short portion "?</div>
  <div>What is the "short portion", is it a small mart of the message
of the sender ?</div>
</blockquote>
It's at least the message header (communicator, tag, etc.) so that the
receiver can figure out if this is the expected message or not.&nbsp; In
practice, there is probably also some data in there as well.&nbsp; The
amount of that portion depends on the MPI implementation and, in
practice, the interconnect the message traveled over,
MPI-implementation-dependent environment variables set by the user,
etc.&nbsp; E.g., with OMPI over shared memory by default it's about 4Kbytes
(if I remember correctly).<br>
<blockquote cite="midSNT134-w645689305D8453B0910B1BCBB70@phx.gbl">
  <div>This "rendezvous" protocol" can work automatically in background
without programmer</div>
  <div>indicates in his program ?</div>
</blockquote>
Right.&nbsp; MPI actually allows you to force such synchronization with
MPI_Ssend, but typically MPI implementations use it automatically for
"plain" long sends as well even if the user didn't not use MPI_Ssend.<br>
<blockquote cite="midSNT134-w645689305D8453B0910B1BCBB70@phx.gbl">
  <div>The "acknowledgement " can be generated by the receiver only
when the</div>
  <div>corresponding mpi_irecv is posted by the receiver ?&nbsp;</div>
</blockquote>
Right.<br></div> 		 	   		  <br /><hr />The New Busy think 9 to 5 is a cute idea. Combine multiple calendars with Hotmail.  <a href='http://www.windowslive.com/campaign/thenewbusy?tile=multicalendar&ocid=PID28326::T:WLMTAGL:ON:WL:en-US:WM_HMP:042010_5' target='_new'>Get busy.</a></body>
</html>
