Hi Marco and Jeff,<br><br>&nbsp; My own knowledge of OpenMPI&#39;s internals is limited, but I thought I&#39;d add my less-than-two-cents...<br><br><div class="gmail_quote"><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
<div class="Ih2E3d">&gt; I&#39;ve found only a way in order to have tcp connections binded only to<br>&gt; the eth1 interface, using both the following MCA directives in the<br>&gt; command line:<br>&gt;<br>&gt; mpirun .... --mca oob_tcp_include eth1 --mca oob_tcp_include
<br>&gt; lo,eth0,ib0,ib1 .....<br>&gt;<br>&gt; This sounds me as bug.<br><br></div>Yes, it does. &nbsp;Specifying the MCA same param twice on the command line<br>results in undefined behavior -- it will only take one of them, and I
<br>assume it&#39;ll take the first (but I&#39;d have to check the code to be sure).</blockquote><div><br>&nbsp; I <i>think</i> that Marco intended to write:<br>&nbsp; mpirun .... --mca oob_tcp_include eth1 --mca oob_tcp_exclude lo,eth0,ib0,ib1 ...
<br><br>&nbsp; Is this correct?&nbsp; So you&#39;re not specifying include twice, you&#39;re specifying include <i>and</i> exclude, so each interface is explicitly stated in one list or the other.&nbsp; I remember encountering this behaviour as well, in a slightly different format, but I can&#39;t seem to reproduce it now either.&nbsp; That said, with these options, won&#39;t the MPI traffic (as opposed to the OOB traffic) still use the eth1,ib0 and ib1 interfaces?&nbsp; You&#39;d need to add &#39;-mca btl_tcp_include eth1&#39; in order to say it should only go over that NIC, I think.
<br><br>&nbsp; As for the &#39;connection errors&#39;, two bizarre things to check are, first, that all of your nodes using eth1 actually have correct /etc/hosts mappings to the other nodes.&nbsp; One system I ran on had this problem when some nodes had an IP address for node002 as one thing, and another node had node002&#39;s IP address as something different.&nbsp;&nbsp; This should be easy enough by trying to run on one node first, then two nodes that you&#39;re sure have the correct addresses.
<br><br>&nbsp; .. The second situation is if you&#39;re launching an MPMD program.&nbsp; Here, you need to use &#39;-gmca &lt;whatever&gt;&#39; instead of &#39;-mca &lt;whatever&gt;&#39;.<br><br>&nbsp; Hope some of that is at least a tad useful.&nbsp; :)
<br><br>&nbsp; Cheers,<br>&nbsp; - Brian<br></div></div>

