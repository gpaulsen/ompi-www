<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Ethan,<div><br></div><div>It looks likesome of the object files that you are trying to link to the malloc.o and malloc-stats.o were compiled as 64 bit objects. Are you using the 32 bit compiler flag for the compile step as well as the link step.</div><div><br></div><div>Doug Reeder<br><div><div>On Mar 20, 2009, at 10:49 AM, Ethan Mallove wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div>Hi,<br><br>Has anyone successfully compiled Open MPI with the PGI compilers in<br>32-bit mode (e.g., using -tp=k8-32 flag)? &nbsp;I am getting the following<br>error with 32-bit:<br><br> &nbsp;&nbsp;$ cd opal/mca/memory/ptmalloc2<br> &nbsp;&nbsp;$ make<br> &nbsp;&nbsp;/bin/sh ../../../../libtool --tag=CC --mode=link pgcc -O -DNDEBUG -tp=k8-32 -export-dynamic -o libopenmpi-malloc.la -rpath /opt/SUNWhpc/HPC8.2/pgi/lib malloc.lo malloc-stats.lo -lnsl -lutil -lpthread<br> &nbsp;&nbsp;libtool: link: pgcc -shared -fpic -DPIC .libs/malloc.o .libs/malloc-stats.o -lnsl -lutil -lpthread -lc -Wl,-soname -Wl,libopenmpi-malloc.so.0 -o .libs/libopenmpi-malloc.so.0.0.0<br> &nbsp;/usr/bin/ld: warning: i386 architecture of input file `.libs/malloc.o' is incompatible with i386:x86-64 output<br> &nbsp;/usr/bin/ld: warning: i386 architecture of input file `.libs/malloc-stats.o' is incompatible with i386:x86-64 output<br> &nbsp;.libs/malloc.o(.text+0xcb3): In function `realloc_check':<br> &nbsp;: undefined reference to `opal_memcpy_base_module'<br> &nbsp;.libs/malloc.o(.text+0x14e3): In function `munmap_chunk':<br> &nbsp;: undefined reference to `opal_mem_free_ptmalloc2_munmap'<br> &nbsp;.libs/malloc.o(.text+0x1560): In function `mremap_chunk':<br> &nbsp;: undefined reference to `opal_mem_hooks_release_hook'<br> &nbsp;.libs/malloc.o(.text+0x2be2): In function `_int_free':<br> &nbsp;: undefined reference to `opal_mem_free_ptmalloc2_munmap'<br> &nbsp;.libs/malloc.o(.text+0x30ae): In function `_int_realloc':<br> &nbsp;: undefined reference to `opal_mem_hooks_release_hook'<br> &nbsp;.libs/malloc.o(.text+0x3c2a): In function `opal_mem_free_ptmalloc2_sbrk':<br> &nbsp;: undefined reference to `opal_mem_hooks_release_hook'<br> &nbsp;.libs/malloc.o(.text+0x3fab): In function `ptmalloc_init':<br> &nbsp;: undefined reference to `opal_mem_hooks_set_support'<br> &nbsp;.libs/malloc.o(.text+0x40ad): In function `new_heap':<br> &nbsp;: undefined reference to `opal_mem_free_ptmalloc2_munmap'<br> &nbsp;.libs/malloc.o(.text+0x40d5): In function `new_heap':<br> &nbsp;: undefined reference to `opal_mem_free_ptmalloc2_munmap'<br> &nbsp;.libs/malloc.o(.text+0x414f): In function `new_heap':<br> &nbsp;: undefined reference to `opal_mem_free_ptmalloc2_munmap'<br> &nbsp;.libs/malloc.o(.text+0x4198): In function `new_heap':<br> &nbsp;: undefined reference to `opal_mem_free_ptmalloc2_munmap'<br> &nbsp;.libs/malloc.o(.text+0x4282): In function `heap_trim':<br> &nbsp;: undefined reference to `opal_mem_free_ptmalloc2_munmap'<br> &nbsp;.libs/malloc.o(.text+0x44aa): In function `arena_get2':<br> &nbsp;: undefined reference to `opal_atomic_wmb'<br> &nbsp;make: *** [libopenmpi-malloc.la] Error 2<br><br>-Ethan<br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></blockquote></div><br></div></body></html>
