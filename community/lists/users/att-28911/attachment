Dave,<div><br></div><div>gettimeofday() uses (seconds, microseconds) to represent the time, and hence, the resolution is hardcoded to 1 microsecond</div><div>clock_gettine() uses (seconds, nanoseconds) and hence the resolution is hard coded to 1 nanosecond.</div><div>this is the max resolution, and it could be lower than that depending on what gettimeofday() does under the hood.</div><div>/* I remember there was an issue with the first software stack of MPSS, the Xeon phi o/s, and once in a while, the effective time resolution dropped to 100 Hz, and the MPI application has no way to be made aware of that */</div><div><br></div><div>bottom line, in OpenMPI, you should not expect a resolution higher than MPI_Wtick(),</div><div>and yes, it might be (way) worst than that</div><div><br></div><div>Cheers,</div><div><br></div><div>Gilles</div><div><br>On Friday, April 8, 2016, Dave Love &lt;<a href="mailto:d.love@liverpool.ac.uk">d.love@liverpool.ac.uk</a>&gt; wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">George Bosilca &lt;<a href="javascript:;" onclick="_e(event, &#39;cvml&#39;, &#39;bosilca@icl.utk.edu&#39;)">bosilca@icl.utk.edu</a>&gt; writes:<br>
<br>
&gt;&gt; Other implementations of MPI have very accurate counters.<br>
&gt;&gt;<br>
&gt;<br>
&gt; This might be a discutable topic. A quick survey of some of the MPI<br>
&gt; libraries available on a Linux cluster give the following precision for<br>
&gt; MPI_Wtime implementation :<br>
&gt;<br>
&gt; mpich-3.1.4: wtick = 1.000000e-06<br>
&gt; Intel(R) MPI Library 5.1.1 for Linux*: wtick = 1.000000e-06<br>
&gt; ompi-1.10.2: wtick = 1.000000e-06<br>
&gt; ompi-master: wtick = 1.000000e-09<br>
<br>
Can you trust wtick anyhow?  OMPI 1.10 says it&#39;s always 10⁻⁶, which<br>
isn&#39;t necessarily realistic even if it uses gettimeofday with a nominal<br>
1μs resolution.  At least with some (older?) Linuxes, and possibly other<br>
kernels, gettimeofday is limited to the kernel tick rate -- a few 100 Hz<br>
if I recall correctly.  I&#39;d need convincing about 1ns generally for the<br>
real time clock too.<br>
<br>
Anyhow, experimentally, RHEL6-packaged mpich 3.1&#39;s wtime calls<br>
gettimeofday and not clock_gettime; likewise impi 4.1.<br>
<br>
Thanks for fixing ompi, by the way.<br>
_______________________________________________<br>
users mailing list<br>
<a href="javascript:;" onclick="_e(event, &#39;cvml&#39;, &#39;users@open-mpi.org&#39;)">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2016/04/28910.php" target="_blank">http://www.open-mpi.org/community/lists/users/2016/04/28910.php</a></blockquote></div>

