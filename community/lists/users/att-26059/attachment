<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">Sure:<div class=""><br class=""></div><div class="">$&nbsp;<span style="font-family: Menlo; font-size: 11px; background-color: rgb(254, 244, 156);" class="">ompi_info --param hwloc all -l 9</span></div><div class=""><font face="Menlo" class=""><span style="background-color: rgb(254, 244, 156);" class=""><span style="font-size: 11px;" class="">…..</span></span></font></div><div class=""><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);" class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MCA hwloc: parameter "hwloc_base_cpu_set" (current value: "",</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);" class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data source: default, level: 9 dev/all, type:</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);" class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);" class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Comma-separated list of ranges specifying logical</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);" class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cpus allocated to this job [default: none]</div><div class=""><br class=""></div><div class=""><br class=""></div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Dec 22, 2014, at 1:29 PM, Saliya Ekanayake &lt;<a href="mailto:esaliya@gmail.com" class="">esaliya@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Thank you and one last question. Is it possible to avoid a core and instruct OMPI to use only the other cores?</div><div class="gmail_extra"><br class=""><div class="gmail_quote">On Mon, Dec 22, 2014 at 2:08 PM, Ralph Castain <span dir="ltr" class="">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word" class=""><br class=""><div class=""><span class=""><blockquote type="cite" class=""><div class="">On Dec 22, 2014, at 10:45 AM, Saliya Ekanayake &lt;<a href="mailto:esaliya@gmail.com" target="_blank" class="">esaliya@gmail.com</a>&gt; wrote:</div><br class=""><div class=""><div dir="ltr" class="">Hi Ralph,<div class=""><br class=""></div><div class="">Yes the report bindings show the correct binding as expected for the processes. The doubt I am having is, say I spawn a thread within my process. If I don't specify affinity for it, is it possible for it to get scheduled to run in a core outside that of the process?&nbsp;</div></div></div></blockquote><div class=""><br class=""></div></span>It shouldn’t, unless you deliberately unbind it.</div><div class=""><span class=""><br class=""><blockquote type="cite" class=""><div class=""><div dir="ltr" class=""><div class=""><br class=""></div><div class="">Second question is, does MPI provides an API such that I can retrieve the binding info from program to take decisions on setting thread affinity?</div></div></div></blockquote><div class=""><br class=""></div></span>Nothing specifically in the standard, no. There has been some discussion on this list about ways of getting the info, though they all involve a collective operation. I’m working on an MPI extension for OMPI to access it as each proc already has binding/location info for every proc in the job - just no MPI standard way of providing it to you.</div><div class=""><br class=""></div><div class=""><br class=""><blockquote type="cite" class=""><div class=""><div class=""><div class="h5"><div dir="ltr" class=""><div class=""><br class=""></div><div class="">Thank you,<br class="">Saliya</div></div><div class="gmail_extra"><br class=""><div class="gmail_quote">On Mon, Dec 22, 2014 at 1:18 PM, Ralph Castain <span dir="ltr" class="">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word" class="">FWIW: it looks like we are indeed binding to core if PE is set, so if you are seeing something different, then we may have a bug somewhere.<div class=""><br class=""></div><div class="">If you add —report-bindings to your cmd line, you should see where we bound the procs - does that look correct?</div><div class=""><div class=""><div class=""><br class=""></div><div class=""><br class=""><div class=""><blockquote type="cite" class=""><div class="">On Dec 22, 2014, at 9:49 AM, Ralph Castain &lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt; wrote:</div><br class=""><div class=""><div style="word-wrap:break-word" class="">They will be bound to whatever level you specified - I believe by default we bind to socket when mapping by socket. If you want them bound to core, you might need to add —bind-to core.<div class=""><br class=""></div><div class="">I can take a look at it - I *thought* we had reset that to bind-to core when PE=N was specified, but maybe that got lost.</div><div class=""><br class=""><div class=""><br class=""><div class=""><blockquote type="cite" class=""><div class="">On Dec 22, 2014, at 8:32 AM, Saliya Ekanayake &lt;<a href="mailto:esaliya@gmail.com" target="_blank" class="">esaliya@gmail.com</a>&gt; wrote:</div><br class=""><div class=""><div dir="ltr" class="">Hi,<div class=""><br class=""></div><div class="">I've been using --map-by socket:PE=N, where N is used to control the number of cores a proc gets mapped to. Does this also guarantee that a proc is bound to N cores in the socket? I am asking this because I see some threads spawned by the process run outside the given N cores in the socket.</div><div class=""><br class=""></div><div class="">Is this expected or I guess I am missing some binding parameter here? Also, is there some documentation on these different choices? Are the options in [1] available in current release?</div><div class=""><br class=""></div><div class="">[1]&nbsp;<a href="http://www.slideshare.net/jsquyres/open-mpi-explorations-in-process-affinity-eurompi13-presentation" target="_blank" class="">http://www.slideshare.net/jsquyres/open-mpi-explorations-in-process-affinity-eurompi13-presentation</a></div><div class=""><br class=""></div><div class="">Thank you,<br class="">Saliya<br clear="all" class=""><div class=""><br class=""></div>-- <br class=""><div class=""><div dir="ltr" class=""><div class=""><div dir="ltr" class=""><div class=""><div dir="ltr" class=""><span style="color:rgb(136,136,136)" class="">Saliya Ekanayake</span></div><div dir="ltr" class="">Ph.D. Candidate | Research Assistant</div><div dir="ltr" class="">School of Informatics and Computing | Digital Science Center</div><div dir="ltr" class="">Indiana University, Bloomington<br class=""><span style="color:rgb(136,136,136)" class="">Cell <a href="tel:812-391-4914" value="+18123914914" target="_blank" class="">812-391-4914</a></span><br style="color:rgb(136,136,136)" class=""><font color="#888888" class=""><a href="http://saliya.org/" target="_blank" class="">http://saliya.org</a></font></div></div></div></div></div></div>
</div></div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" target="_blank" class="">users@open-mpi.org</a><br class="">Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2014/12/26051.php" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2014/12/26051.php</a></div></blockquote></div><br class=""></div></div></div></div></blockquote></div><br class=""></div></div></div></div><br class="">_______________________________________________<br class="">
users mailing list<br class="">
<a href="mailto:users@open-mpi.org" target="_blank" class="">users@open-mpi.org</a><br class="">
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2014/12/26054.php" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2014/12/26054.php</a><br class=""></blockquote></div><br class=""><br clear="all" class=""><div class=""><br class=""></div>-- <br class=""><div class=""><div dir="ltr" class=""><div class=""><div dir="ltr" class=""><div class=""><div dir="ltr" class=""><span style="color:rgb(136,136,136)" class="">Saliya Ekanayake</span></div><div dir="ltr" class="">Ph.D. Candidate | Research Assistant</div><div dir="ltr" class="">School of Informatics and Computing | Digital Science Center</div><div dir="ltr" class="">Indiana University, Bloomington<br class=""><span style="color:rgb(136,136,136)" class="">Cell <a href="tel:812-391-4914" value="+18123914914" target="_blank" class="">812-391-4914</a></span><br style="color:rgb(136,136,136)" class=""><font color="#888888" class=""><a href="http://saliya.org/" target="_blank" class="">http://saliya.org</a></font></div></div></div></div></div></div>
</div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" target="_blank" class="">users@open-mpi.org</a><br class="">Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class=""></div></div>Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2014/12/26056.php" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2014/12/26056.php</a></div></blockquote></div><br class=""></div><br class="">_______________________________________________<br class="">
users mailing list<br class="">
<a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2014/12/26057.php" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2014/12/26057.php</a><br class=""></blockquote></div><br class=""><br clear="all" class=""><div class=""><br class=""></div>-- <br class=""><div class="gmail_signature"><div dir="ltr" class=""><div class=""><div dir="ltr" class=""><div class=""><div dir="ltr" class=""><span style="color:rgb(136,136,136)" class="">Saliya Ekanayake</span></div><div dir="ltr" class="">Ph.D. Candidate | Research Assistant</div><div dir="ltr" class="">School of Informatics and Computing | Digital Science Center</div><div dir="ltr" class="">Indiana University, Bloomington<br class=""><span style="color:rgb(136,136,136)" class="">Cell 812-391-4914</span><br style="color:rgb(136,136,136)" class=""><font color="#888888" class=""><a href="http://saliya.org/" target="_blank" class="">http://saliya.org</a></font></div></div></div></div></div></div>
</div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/users<br class="">Link to this post: http://www.open-mpi.org/community/lists/users/2014/12/26058.php</div></blockquote></div><br class=""></div></div></body></html>
