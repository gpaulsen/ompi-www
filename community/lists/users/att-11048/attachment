<table cellspacing="0" cellpadding="0" border="0" ><tr><td valign="top" style="font: inherit;">I am having the same problem when I want to checkpoint manually: "HNP with PID xxxx Not found!", though I am sure I put the right PID <br><br>--- On <b>Mon, 11/2/09, Sergio Díaz <i>&lt;sdiaz@cesga.es&gt;</i></b> wrote:<br><blockquote style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: 5px;"><br>From: Sergio Díaz &lt;sdiaz@cesga.es&gt;<br>Subject: Re: [OMPI users] checkpoint opempi-1.3.3+sge62<br>To: "Open MPI Users" &lt;users@open-mpi.org&gt;<br>Date: Monday, November 2, 2009, 6:43 PM<br><br><div class="plainMail">Hi again,<br><br>I found a C program to test ompi-checkpoint/restart an it works fine. The program was written by Alan Woodland and shared in the following distribution list: <a ymailto="mailto:debian-bugs-dist@lists.debian.org"
 href="/mc/compose?to=debian-bugs-dist@lists.debian.org">debian-bugs-dist@lists.debian.org</a><br>This program starts a countdown from 10 to 0 and when the countdown is 6, do a checkpoint, kill the process and restart the process.<br><br>However, I still have the problem when I try to do (by hand) checkpointing directly into a node<br><br>Any ideas? :-(<br><br>Best regards<br>Sergio<br><br><br><br>Sergio Díaz escribió:<br>&gt; Hello,<br>&gt; <br>&gt; I have achieved the checkpoint of an easy program without SGE. Now, I'm trying to do the integration openmpi+sge but I have some problems... When I try to do checkpoint of the mpirun PID, I got an error similar to the error gotten when the PID doesn't exit. The example below.<br>&gt; <br>&gt; Any ideas?<br>&gt; Somebody have a script to do it automatic with SGE?. For example I have one to do checkpoint each X seconds with BLCR and non-mpi jobs. It is launched by SGE if you have configured the queue and the
 ckpt environment.<br>&gt; <br>&gt; Is it possible choose the name of the ckpt folder when you do the ompi-checkpoint? I can't find the option to do it.<br>&gt; <br>&gt; <br>&gt; Regards,<br>&gt; Sergio<br>&gt; <br>&gt; <br>&gt; --------------------------------<br>&gt; <br>&gt; [sdiaz@compute-3-17 ~]$ ps auxf<br>&gt; ....<br>&gt; root&nbsp; &nbsp;&nbsp;&nbsp;20044&nbsp; 0.0&nbsp; 0.0&nbsp; 4468 1224 ?&nbsp; &nbsp; &nbsp; &nbsp; S&nbsp; &nbsp; 13:28&nbsp;&nbsp;&nbsp;0:00&nbsp; \_ sge_shepherd-2645150 -bg<br>&gt; sdiaz&nbsp; &nbsp; 20072&nbsp; 0.0&nbsp; 0.0 53172 1212 ?&nbsp; &nbsp; &nbsp; &nbsp; Ss&nbsp;&nbsp;&nbsp;13:28&nbsp;&nbsp;&nbsp;0:00&nbsp; &nbsp; &nbsp; \_ -bash /opt/cesga/sge62/default/spool/compute-3-17/job_scripts/2645150<br>&gt; sdiaz&nbsp; &nbsp; 20112&nbsp; 0.2&nbsp; 0.0 41028 2480 ?&nbsp; &nbsp; &nbsp; &nbsp; S&nbsp; &nbsp; 13:28&nbsp;&nbsp;&nbsp;0:00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \_ mpirun -np 2 -am ft-enable-cr pi3<br>&gt;
 sdiaz&nbsp; &nbsp; 20113&nbsp; 0.0&nbsp; 0.0 36484 1824 ?&nbsp; &nbsp; &nbsp; &nbsp; Sl&nbsp;&nbsp;&nbsp;13:28&nbsp;&nbsp;&nbsp;0:00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \_ /opt/cesga/sge62/bin/lx24-x86/qrsh -inherit -nostdin -V compute-3-18..........<br>&gt; sdiaz&nbsp; &nbsp; 20116&nbsp; 1.2&nbsp; 0.0 99464 4616 ?&nbsp; &nbsp; &nbsp; &nbsp; Sl&nbsp;&nbsp;&nbsp;13:28&nbsp;&nbsp;&nbsp;0:00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \_ pi3<br>&gt; <br>&gt; <br>&gt; [sdiaz@compute-3-17 ~]$ ompi-checkpoint 20112<br>&gt; [compute-3-17.local:20124] HNP with PID 20112 Not found!<br>&gt; <br>&gt; [sdiaz@compute-3-17 ~]$ ompi-checkpoint -s 20112<br>&gt; [compute-3-17.local:20135] HNP with PID 20112 Not found!<br>&gt; <br>&gt; [sdiaz@compute-3-17 ~]$ ompi-checkpoint -s --term 20112<br>&gt; [compute-3-17.local:20136] HNP with PID 20112 Not found!<br>&gt; <br>&gt; [sdiaz@compute-3-17 ~]$ ompi-checkpoint --hnp-pid 20112<br>&gt;
 --------------------------------------------------------------------------<br>&gt; ompi-checkpoint PID_OF_MPIRUN<br>&gt;&nbsp;&nbsp;&nbsp;Open MPI Checkpoint Tool<br>&gt; <br>&gt;&nbsp; &nbsp; -am &lt;arg0&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Aggregate MCA parameter set file list<br>&gt;&nbsp; &nbsp; -gmca|--gmca &lt;arg0&gt; &lt;arg1&gt;<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Pass global MCA parameters that are applicable to<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; all contexts (arg0 is the parameter name; arg1 is<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the parameter value)<br>&gt; -h|--help&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This help message<br>&gt;&nbsp; &nbsp; --hnp-jobid &lt;arg0&gt;&nbsp; &nbsp; This should be the jobid of the HNP
 whose<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; applications you wish to checkpoint.<br>&gt;&nbsp; &nbsp; --hnp-pid &lt;arg0&gt;&nbsp; &nbsp; &nbsp; This should be the pid of the mpirun whose<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; applications you wish to checkpoint.<br>&gt;&nbsp; &nbsp; -mca|--mca &lt;arg0&gt; &lt;arg1&gt;<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Pass context-specific MCA parameters; they are<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; considered global if --gmca is not used and only<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; one context is specified (arg0 is the parameter<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; name; arg1 is the parameter value)<br>&gt; -s|--status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Display status messages describing the progression<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; of the checkpoint<br>&gt;&nbsp; &nbsp; --term&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Terminate the application after checkpoint<br>&gt; -v|--verbose&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;Be Verbose<br>&gt; -w|--nowait&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Do not wait for the application to finish<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; checkpointing before returning<br>&gt; <br>&gt; --------------------------------------------------------------------------<br>&gt; [sdiaz@compute-3-17 ~]$ exit<br>&gt; logout<br>&gt; Connection to c3-17 closed.<br>&gt; [sdiaz@svgd mpi_test]$ ssh c3-18<br>&gt; Last
 login: Wed Oct 28 13:24:12 2009 from svgd.local<br>&gt; -bash-3.00$ ps auxf |grep sdiaz<br>&gt; <br>&gt; sdiaz&nbsp; &nbsp; 14412&nbsp; 0.0&nbsp; 0.0&nbsp; 1888&nbsp; 560 ?&nbsp; &nbsp; &nbsp; &nbsp; Ss&nbsp;&nbsp;&nbsp;13:28&nbsp;&nbsp;&nbsp;0:00&nbsp; &nbsp; &nbsp; \_ /opt/cesga/sge62/utilbin/lx24-x86/qrsh_starter /opt/cesga/sge62/default/spool/compute-3-18/active_jobs/2645150.1/1.compute-3-18<br>&gt; sdiaz&nbsp; &nbsp; 14419&nbsp; 0.0&nbsp; 0.0 35728 2260 ?&nbsp; &nbsp; &nbsp; &nbsp; S&nbsp; &nbsp; 13:28&nbsp;&nbsp;&nbsp;0:00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \_ orted -mca ess env -mca orte_ess_jobid 2295267328 -mca orte_ess_vpid 1 -mca orte_ess_num_procs 2 --hnp-uri 2295267328.0;tcp://192.168.4.144:36596 -mca mca_base_param_file_prefix ft-enable-cr -mca mca_base_param_file_path /opt/cesga/openmpi-1.3.3/share/openmpi/amca-param-sets:/home_no_usc/cesga/sdiaz/mpi_test -mca mca_base_param_file_path_force /home_no_usc/cesga/sdiaz/mpi_test<br>&gt;
 sdiaz&nbsp; &nbsp; 14420&nbsp; 0.0&nbsp; 0.0 99452 4596 ?&nbsp; &nbsp; &nbsp; &nbsp; Sl&nbsp;&nbsp;&nbsp;13:28&nbsp;&nbsp;&nbsp;0:00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \_ pi3<br>&gt; <br>&gt; <br>&gt; <br>&gt; <br>&gt; <br>&gt; -- Sergio Díaz Montes<br>&gt; Centro de Supercomputacion de Galicia<br>&gt; Avda. de Vigo. s/n (Campus Sur) 15706 Santiago de Compostela (Spain)<br>&gt; Tel: +34 981 56 98 10 ; Fax: +34 981 59 46 16<br>&gt; email: <a ymailto="mailto:sdiaz@cesga.es" href="/mc/compose?to=sdiaz@cesga.es">sdiaz@cesga.es</a> ; <a href="http://www.cesga.es/" target="_blank">http://www.cesga.es/</a><br>&gt; <br>&gt; ------------------------------------------------<br>&gt; ------------------------------------------------------------------------<br>&gt; <br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; <a ymailto="mailto:users@open-mpi.org"
 href="/mc/compose?to=users@open-mpi.org">users@open-mpi.org</a><br>&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br><br><br>-- Sergio Díaz Montes<br>Centro de Supercomputacion de Galicia<br>Avda. de Vigo. s/n (Campus Sur) 15706 Santiago de Compostela (Spain)<br>Tel: +34 981 56 98 10 ; Fax: +34 981 59 46 16<br>email: <a ymailto="mailto:sdiaz@cesga.es" href="/mc/compose?to=sdiaz@cesga.es">sdiaz@cesga.es</a> ; <a href="http://www.cesga.es/" target="_blank">http://www.cesga.es/</a><br><br>------------------------------------------------<br>_______________________________________________<br>users mailing list<br><a ymailto="mailto:users@open-mpi.org" href="/mc/compose?to=users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users"
 target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></blockquote></td></tr></table><br>

      
