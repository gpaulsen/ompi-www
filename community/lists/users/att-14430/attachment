<div><div>Note that this is an out-of-source build.</div><div><br></div><div>$ ../configure --enable-debug --enable-mem-debug --prefix=/home/jed/usr/ompi-1.5-clang CC=clang CXX=clang++</div><div>$ make</div><div>[...]</div>

<div>  CXXLD  vtunify-mpi</div><div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Abort&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:63: undefined reference to `MPI_Abort&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Address&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:74: undefined reference to `MPI_Address&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Barrier&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:86: undefined reference to `MPI_Barrier&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Bcast&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:101: undefined reference to `MPI_Bcast&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Comm_size&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:115: undefined reference to `MPI_Comm_size&#39;</div>

</div><div><div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Comm_rank&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:127: undefined reference to `MPI_Comm_rank&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Finalize&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:138: undefined reference to `MPI_Finalize&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Init&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:149: undefined reference to `MPI_Init&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Pack&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:165: undefined reference to `MPI_Pack&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Pack_size&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:180: undefined reference to `MPI_Pack_size&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Recv&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:197: undefined reference to `MPI_Recv&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Send&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:218: undefined reference to `MPI_Send&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Type_commit&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:230: undefined reference to `MPI_Type_commit&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Type_free&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:242: undefined reference to `MPI_Type_free&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Type_struct&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:270: undefined reference to `MPI_Type_struct&#39;</div>

<div>vtunify_mpi-vt_unify_mpi.o: In function `VTUnify_MPI_Unpack&#39;:</div><div>/home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/tools/vtunify/mpi/../../../../../../../../ompi/contrib/vt/vt/tools/vtunify/mpi/vt_unify_mpi.c:300: undefined reference to `MPI_Unpack&#39;</div>

<div>collect2: ld returned 1 exit status</div><div>clang: error: linker (via gcc) command failed with exit code 1 (use -v to see invocation)</div><div>make[7]: *** [vtunify-mpi] Error 1</div></div><div><br></div><div><br>
</div><div>Leaving out the debugging flags gets me further (no compilation error, just this link error):</div><div><br></div><div>$ ../configure --prefix=/home/jed/usr/ompi-1.5-clang CC=clang CXX=clang++</div><div>$ make</div>
<div>[...]</div><div><div>  CCLD   <a href="http://libutil.la">libutil.la</a></div><div>ar: /home/jed/src/openmpi-1.5/bclang/ompi/contrib/vt/vt/util/.libs/libutil.a: No such file or directory</div><div>make[5]: *** [<a href="http://libutil.la">libutil.la</a>] Error 9</div>
</div><div><br></div><div>I also get this last failure with gcc-4.5.1, but only with the debug flags:</div><div><br></div><div>$ ../configure --enable-debug --enable-mem-debug --prefix=/home/jed/usr/ompi-1.5-gcc CC=gcc CXX=g++</div>
<div>$ make</div><div>[...]</div><div><div>Making all in util</div><div>  CC     libutil_la-installdirs.lo</div><div>  CCLD   <a href="http://libutil.la">libutil.la</a></div><div>ar: /home/jed/src/openmpi-1.5/bgcc/ompi/contrib/vt/vt/util/.libs/libutil.a: No such file or directory</div>
<div>make[5]: *** [<a href="http://libutil.la">libutil.la</a>] Error 9</div><div>make[4]: *** [all-recursive] Error 1</div><div>make[3]: *** [all] Error 2</div><div>make[2]: *** [all-recursive] Error 1</div><div>make[1]: *** [all-recursive] Error 1</div>
<div>make: *** [all-recursive] Error 1</div></div><div><br></div><div><br>
</div><div>There are also lots of these warnings (almost every compilation unit).</div><div><br></div>../../../../../../../../opal/include/opal/sys/atomic_impl.h:124:7: warning: indirection of non-volatile null pointer will be deleted, not trap<br>

      *(int*)(0) = 0;<br>      ^~~~~~~~~~<br>../../../../../../../../opal/include/opal/sys/atomic_impl.h:124:7: note: consider using __builtin_trap() or qualifying pointer with &#39;volatile&#39;
<div><br></div><div><br></div><div>Trunk became unbuildable for me a couple months ago, but it was written off (could find the bug number) as being the fault of my autotools being too new, thus I haven&#39;t built from mercurial recently.  Otherwise I might have been able to point these out prior to the release.</div>
<div><br></div><div>Jed</div>

