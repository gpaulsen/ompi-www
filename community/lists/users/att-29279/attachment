<html><head></head><body><div style="color:#000; background-color:#fff; font-family:verdana, helvetica, sans-serif;font-size:16px"><div id="yui_3_16_0_ym19_1_1463993679754_10012">Hi,</div><div id="yui_3_16_0_ym19_1_1463993679754_10010"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">I am using 2 software, one is called Open Foam and the other called EMPIRE that need to run together at the same time.</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">Open Foam uses &nbsp;Open MPI implementation and EMPIRE uses either MPICH or intel mpi.</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">The version of Open MPI that comes with Open Foam is 1.6.5.</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">I am using Intel (R) MPI Library for linux * OS, version 5.1.3 and MPICH 3.0.4.</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">My problem is when I have the environment variables of &nbsp;either mpich or Intel MPI &nbsp;sourced to bashrc, I fail to run a case of Open Foam with parallel processing ( You find attached a picture of the error I got )&nbsp;</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">This is an example of a command line I use to run Open Foam</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">mpirun -np 4 interFoam -parallel</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">Once I keep the environment variable of OpenFoam only, the parallel processing works without any problem, so I won't be able to run EMPIRE.</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">I am sourcing the environment variables in this way:</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">For Open Foam:</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">source /opt/openfoam30/etc/bashrc</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">For MPICH 3.0.4</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">export PATH=/home/islem/Desktop/mpich/bin:$PATH</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">export LD_LIBRARY_PATH="/home/islem/Desktop/mpich/lib/:$LD_LIBRARY_PATH"</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">export MPICH_F90=gfortran</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">export MPICH_CC=/opt/intel/bin/icc</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">export MPICH_CXX=/opt/intel/bin/icpc</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">export MPICH-LINK_CXX="-L/home/islem/Desktop/mpich/lib/ -Wl,-rpath -Wl,/home/islem/Desktop/mpich/lib -lmpichcxx -lmpich -lopa -lmpl -lrt -lpthread"</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">For intel</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">export PATH=$PATH:/opt/intel/bin/</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">LD_LIBRARY_PATH="/opt/intel/lib/intel64:$LD_LIBRARY_PATH"</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">export LD_LIBRARY_PATH</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">source /opt/intel/compilers_and_libraries_2016.3.210/linux/mpi/intel64/bin/mpivars.sh intel64</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">If Only Open Foam is sourced, mpirun --version gives OPEN MPI (1.6.5)</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">If Open Foam and MPICH are sourced, mpirun --version gives mpich 3.0.1</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">If Open Foam and intel MPI are sourced, mpirun --version gives intel (R) MPI libarary for linux, version 5.1.3&nbsp;</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">My question is why I can't have two MPI implementation installed and sourced together. How can I solve the problem ?</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">Regards,</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr">Islem Megdiche</div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div><div id="yui_3_16_0_ym19_1_1463993679754_10008" dir="ltr"><br></div></div></body></html>
