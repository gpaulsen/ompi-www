<div dir="ltr">Khalid,<div><br></div><div>i am not aware of such a mechanism.</div><div><br></div><div>/* there might be a way to use MPI_T_* mechanisms to force the algorithm,</div><div>and i will let other folks comment on that */</div><div><br></div><div>you definetly cannot directly invoke <span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">ompi_coll_tuned_bcast_intra_</span><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">binomial</span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">(abstraction violation, non portable, and you miss the some parameters)</span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"><br></span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">out of curiosity, what do you have in mind for (some_condition) ?</span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">/* since it seems implicit (some_condition) is independant of communicator size, and message size */</span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"><br></span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">Cheers,</span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"><br></span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">Gilles</span></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Mar 10, 2015 at 10:04 PM, Khalid Hasanov <span dir="ltr">&lt;<a href="mailto:xalid.h@gmail.com" target="_blank">xalid.h@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><div><div><div><div><div><div><div><div><div><div><div><div>Hello,<br><br></div>I would like to know if Open MPI provides some kind of mechanism to select collective algorithms such as MPI broadcast during run time depending on some logic. For example, I would like to<br></div></div>use something like this:<br><br></div>if (some_condition)  ompi_binomial_broadcast(...);<br></div>else   ompi_pipeline_broadcast(...);<br><br></div>I know it is possible to use some fixed algorithm by <span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)">coll_tuned_use_dynamic_rules or </span>to define a custom selection rule using <span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)">coll_tuned_dynamic_rules_filename<span>. But<br></span></span></div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span>I think it is not suitable in this situation as the dynamic rules mainly based on the message size, segment size and communicator size.<br><br></span></span></div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span>Another option could be using Open MPI internal APIS like <br><br>ompi_coll_tuned_bcast_intra_binomial( buf, count, dtype, root, comm, module, segsize);<br><br></span></span></div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span>But it highly depends on Open MPI internals as it uses mca_coll_base_module_t . <br><br></span></span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span>Is there any better option? (except using my own implementation of collectives)<br></span></span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span><br></span></span></div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span>Any suggestion highly appreciated.<br><br></span></span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span>Thanks<br></span></span></div><div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span><br></span></span></div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span>Regards,<br></span></span></div><span style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important;background-color:rgb(255,255,255)"><span>Khalid<br></span></span></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26446.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/03/26446.php</a><br></blockquote></div><br></div></div>

