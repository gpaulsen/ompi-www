<div dir="ltr"><div><div><div><div><div><div>Hi,<br><br></div>This has been bothering me for a while but I never got a chance to identify the root cause. I know this issue could be due to misconfig of network or ssh in many cases. But I&#39;m pretty sure that we don&#39;t fall into that category at all. Proof? This issue doesn&#39;t happen in 1.6.x and earlier releases, but only in 1.8+ including the 1.10.0 which was released today.<br><br>[yqin@n0009.scs00 ~]$ mpirun -V<br>mpirun (Open MPI) 1.6.5<br><br>[yqin@n0009.scs00 ~]$ mpirun -np 3 -H n0189.mako0,n0233.mako0,n0198.mako0 hostname<br>n0233.mako0<br>n0189.mako0<br>n0198.mako0<br><br>[yqin@n0009.scs00 ~]$ mpirun -V<br>mpirun (Open MPI) 1.8.8<br><br>[yqin@n0009.scs00 ~]$ mpirun -np 3 -H n0189.mako0,n0233.mako0,n0198.mako0 hostname<br>ssh: Could not resolve hostname n0198: Name or service not known<br>--------------------------------------------------------------------------<br>ORTE was unable to reliably start one or more daemons.<br>This usually is caused by:<br><br>* not finding the required libraries and/or binaries on<br>  one or more nodes. Please check your PATH and LD_LIBRARY_PATH<br>  settings, or configure OMPI with --enable-orterun-prefix-by-default<br><br>* lack of authority to execute on one or more specified nodes.<br>  Please verify your allocation and authorities.<br><br>* the inability to write startup files into /tmp (--tmpdir/orte_tmpdir_base).<br>  Please check with your sys admin to determine the correct location to use.<br><br>*  compilation of the orted with dynamic libraries when static are required<br>  (e.g., on Cray). Please check your configure cmd line and consider using<br>  one of the contrib/platform definitions for your system type.<br><br>* an inability to create a connection back to mpirun due to a<br>  lack of common network interfaces and/or no route found between<br>  them. Please check network connectivity (including firewalls<br>  and network routing requirements).<br>--------------------------------------------------------------------------<br><br>[yqin@n0009.scs00 ~]$ mpirun -V<br>mpirun (Open MPI) 1.10.0<br><br>[yqin@n0009.scs00 ~]$ mpirun -np 3 -H n0189.mako0,n0233.mako0,n0198.mako0 hostname<br>ssh: Could not resolve hostname n0198: Name or service not known<br>--------------------------------------------------------------------------<br>ORTE was unable to reliably start one or more daemons.<br>This usually is caused by:<br><br>* not finding the required libraries and/or binaries on<br>  one or more nodes. Please check your PATH and LD_LIBRARY_PATH<br>  settings, or configure OMPI with --enable-orterun-prefix-by-default<br><br>* lack of authority to execute on one or more specified nodes.<br>  Please verify your allocation and authorities.<br><br>* the inability to write startup files into /tmp (--tmpdir/orte_tmpdir_base).<br>  Please check with your sys admin to determine the correct location to use.<br><br>*  compilation of the orted with dynamic libraries when static are required<br>  (e.g., on Cray). Please check your configure cmd line and consider using<br>  one of the contrib/platform definitions for your system type.<br><br>* an inability to create a connection back to mpirun due to a<br>  lack of common network interfaces and/or no route found between<br>  them. Please check network connectivity (including firewalls<br>  and network routing requirements).<br>--------------------------------------------------------------------------<br><br><br></div>Note that I was running the mpirun from &quot;n0009.scs00&quot;. If I ran it from a native &quot;mako0&quot; node, it would pass as well.<br><br>[yqin@n0198.mako0 ~]$ mpirun -V<br>mpirun (Open MPI) 1.10.0<br><br>[yqin@n0198.mako0 ~]$ mpirun -np 3 -H n0189.mako0,n0233.mako0,n0198.mako0 hostname<br>n0189.mako0<br>n0198.mako0<br>n0233.mako0<br><br></div>The network connection between n0009.scs00 and all the &quot;mako0&quot; nodes are clear and no firewall at all, and all on the same subnet. The only thing that I can think of is the hostname itself. From the error message mpirun was trying to resolve n0198, etc., even though the proper hostname that&#39;s passed to it was n0198.mako0. &quot;n0198&quot; by itself would not resolve because we have multiple clusters configured within the same subnet and we do need the cluster name suffix as identifier. But this is also not always true, for example, if I only have two nodes involved than it would pass as well.<br><br>[yqin@n0009.scs00 ~]$ mpirun -V<br>mpirun (Open MPI) 1.10.0<br><br>[yqin@n0009.scs00 ~]$ mpirun -np 2 -H n0189.mako0,n0233.mako0 hostname<br>n0189.mako0<br>n0233.mako0<br><br></div><div>The issue only exposes itself when more than 2 nodes are involved. Any thoughts?<br></div><br></div>Thanks,<br><br></div>Yong Qin<br></div>

