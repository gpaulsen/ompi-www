which network are your VMs using for communications ?<div>if this is tcp, then you also have to specify a restricted set of allowed ports for the tcp btl</div><div><br></div><div>that would be something like</div><div>mpirun --mca btl_tcp_dynamic_ports 49990-50010 ...</div><div><br></div><div>please double check the Open MPI 1.6.5 parameter and syntax with</div><div>ompi_info --all</div><div>(or check the archives, I think I posted the correct command line a few weeks ago)</div><div><br></div><div>Cheers,</div><div><br></div><div>Gilles<br><br>On Wednesday, June 1, 2016, Ping Wang &lt;<a href="mailto:ping.wang@asc-s.de">ping.wang@asc-s.de</a>&gt; wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">

<div lang="DE" link="blue" vlink="purple"><div><p class="MsoNormal"><span lang="EN-US" style="color:#222222;background:white">I&#39;m using Open MPI 1.6.5 to run OpenFOAM in parallel on several VMs on a cloud. mpirun hangs without any error messages. I think this is a firewall issue. Because when I open all the TCP ports(1-65535) in the security group of VMs, mpirun works well. However I was suggested to open as less ports as possible. So I have to limit MPI to run on a range of ports. I opened the port range 49990-50010 for MPI communication. And use command<u></u><u></u></span></p><p class="MsoNormal"><span lang="EN-US" style="color:#222222;background:white"><u></u> <u></u></span></p><p class="MsoNormal"><span lang="EN-US" style="color:#4f81bd;background:white">mpirun --mca oob_tcp_dynamic_ports 49990-50010 -np 4 --hostfile machines simpleFoam –parallel</span><span lang="EN-US" style="color:#222222;background:white">. <u></u><u></u></span></p><p class="MsoNormal"><span lang="EN-US" style="color:#222222;background:white"><u></u> <u></u></span></p><p class="MsoNormal"><span lang="EN-US" style="color:#222222;background:white">But it still hangs. How can I specify a port range that OpenMPI will use? I appreciate any help you can provide.<u></u><u></u></span></p><p class="MsoNormal"><span lang="EN-US"><u></u> <u></u></span></p><p class="MsoNormal"><span lang="EN-US">Best,<u></u><u></u></span></p><p class="MsoNormal"><span lang="EN-US">Ping Wang</span><span lang="EN-US"><u></u><u></u></span></p><p class="MsoNormal"><span lang="EN-US"><u></u> <u></u></span></p><p class="MsoNormal"><span style="color:black"><img width="195" height="57" src="cid:image001.png@01D1BC07.970F2480" alt="ascs_logo_300dpi"></span><span><u></u><u></u></span></p><p class="MsoNormal"><b><span style="color:#4f81bd">------------------------------------------------------<u></u><u></u></span></b></p><p class="MsoNormal"><span style="color:gray">Ping Wang<u></u><u></u></span></p><p class="MsoNormal"><b><span style="color:#758eb7">Automotive Simulation Center Stuttgart e.V.<u></u><u></u></span></b></p><p class="MsoNormal"><span style="color:#7f7f7f">Nobelstraße 15<u></u><u></u></span></p><p class="MsoNormal"><span style="color:#7f7f7f">D-70569 Stuttgart<u></u><u></u></span></p><p class="MsoNormal"><span style="color:#7f7f7f">Telefon: +49 711 699659-14<u></u><u></u></span></p><p class="MsoNormal"><span style="color:#7f7f7f">Fax: +49 711 699659-29<u></u><u></u></span></p><p class="MsoNormal"><span style="color:#7f7f7f">E-Mail: <a href="javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;ping.wang@asc-s.de&#39;);" target="_blank"><span style="color:blue">ping.wang@asc-s.de</span></a><u></u><u></u></span></p><p class="MsoNormal"><span style="color:#7f7f7f">Web: <a href="http://www.asc-s.de/" target="_blank"><span style="color:#7f7f7f;text-decoration:none">http://www.asc-s.de</span></a><u></u><u></u></span></p><p class="MsoNormal"><span style="color:#7f7f7f">Social Media: </span><span lang="EN-US" style="color:gray"><a href="http://www.facebook.com/asc.stuttgart" target="_blank"><span lang="DE" style="color:gray;text-decoration:none"><img border="0" width="14" height="15" src="cid:image002.gif@01D1BC07.970F2480" alt="facebook"></span><span lang="DE" style="color:gray;text-decoration:none">/asc.stuttgart</span></a></span><span style="color:#7f7f7f"><u></u><u></u></span></p><p class="MsoNormal"><b><span style="color:#4f81bd">------------------------------------------------------<u></u><u></u></span></b></p><p class="MsoNormal"><span style="color:#1f497d"><u></u> <u></u></span></p><p class="MsoNormal"><u></u> <u></u></p></div></div>
</blockquote></div>

