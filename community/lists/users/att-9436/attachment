<html>
<head>
<style>
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Verdana
}
</style>
</head>
<body class='hmmessage'>
<br>Thank to you also Gus for replying.<div>All of your tips helped.</div><div><br></div><div>Thanks</div><div><br></div><div>Trent<br>&gt; Date: Tue, 26 May 2009 20:50:38 -0400<br>&gt; From: gus@ldeo.columbia.edu<br>&gt; To: users@open-mpi.org<br>&gt; Subject: Re: [OMPI users] MPI_COMM_WORLD Error<br>&gt; <br>&gt; Hi Trent, list<br>&gt; <br>&gt; mtcreekmore@broncs.utpa.edu wrote:<br>&gt; &gt; Thanks for your reply Eugene.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; Here is the result of the mpif90 -showme<br>&gt; &gt; <br>&gt; &gt;  <br>&gt; &gt; /state/partition1/apps/intel/fce/10.1.015/bin/ifort <br>&gt; &gt; -I/share/apps/openmpi-1.2.6-intel/include -pthread <br>&gt; &gt; -I/share/apps/openmpi-1.2.6-intel/lib -L/usr/pbs/lib <br>&gt; &gt; -L/share/apps/openmpi-1.2.6-intel/lib -lmpi_f90 -lmpi_f77 -lmpi <br>&gt; &gt; -lopen-rte -lopen-pal -lrt -lpbs -lnuma -ldl -Wl,--export-dynamic -lnsl <br>&gt; &gt; -lutil<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; The mpif.h file I got off the site. I used the Google "site: mcs.anl.gov <br>&gt; &gt; &lt;http://www.mcs.anl.gov/research/projects/mpi/usingmpi/examples/simplempi/main.htm&gt;  mpif.h" <br>&gt; &gt; search and placed it into the same directory as the main program.<br>&gt; &gt; <br>&gt; <br>&gt; <br>&gt; Then you are using the MPICH mpif.h file, not the OpenMPI one,<br>&gt; and the mix is probably the reason for the error.<br>&gt; You can/should remove it from the directory where your pi.f program is.<br>&gt; <br>&gt; Actually, if you use the OpenMPI wrappers to compile,<br>&gt; they know exactly where to find the right mpif.h,<br>&gt; i.e., to compile pi.f just do "mpif90 pi.f".<br>&gt; <br>&gt; Make sure your PATH is points to the OpenMPI executables (mpif90, <br>&gt; mpiexec, etc) ahead of other flavors of MPI that may be installed on<br>&gt; your system.  Or simply use the full path names to the OpenMPI mpif90<br>&gt; and to mpiexec.  Inadvertent mix of these executables<br>&gt; from different MPIs is a common source of frustration too.<br>&gt; <br>&gt; I hope this helps,<br>&gt; Gus Correa<br>&gt; ---------------------------------------------------------------------<br>&gt; Gustavo Correa<br>&gt; Lamont-Doherty Earth Observatory - Columbia University<br>&gt; Palisades, NY, 10964-8000 - USA<br>&gt; ---------------------------------------------------------------------<br>&gt; <br>&gt; <br>&gt; <br>&gt; &gt; So if it is the correct one, I am not sure.<br>&gt; &gt; <br>&gt; &gt; Trent<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; Date: Tue, 26 May 2009 16:54:02 -0700<br>&gt; &gt; From: Eugene.Loh@Sun.COM<br>&gt; &gt; To: users@open-mpi.org<br>&gt; &gt; Subject: Re: [OMPI users] MPI_COMM_WORLD Error<br>&gt; &gt; <br>&gt; &gt; mtcreekmore@broncs.utpa.edu &lt;mailto:mtcreekmore@broncs.utpa.edu&gt; wrote:<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt;     I and new to OpenMPI and  have looked for this, but not getting<br>&gt; &gt;     anywhere.<br>&gt; &gt; <br>&gt; &gt;     I got an example program off this site:<br>&gt; &gt; <br>&gt; &gt;     The compute PI in Fortran example. <br>&gt; &gt;     http://www.mcs.anl.gov/research/projects/mpi/usingmpi/examples/simplempi/main.htm<br>&gt; &gt; <br>&gt; &gt;     Compiled it with "mpif90" and no errors.<br>&gt; &gt;     Then used the qsub -I and tried both executing directly and "mpirun"<br>&gt; &gt;     and still receive these errors:<br>&gt; &gt; <br>&gt; &gt;     [MGT-2-1:02994] *** An error occurred in MPI_Comm_rank<br>&gt; &gt;     [MGT-2-1:02994] *** on communicator MPI_COMM_WORLD<br>&gt; &gt;     [MGT-2-1:02994] *** MPI_ERR_COMM: invalid communicator<br>&gt; &gt;     [MGT-2-1:02994] *** MPI_ERRORS_ARE_FATAL (goodbye)<br>&gt; &gt; <br>&gt; &gt;     Any guidance in the right direction would be appreciated.<br>&gt; &gt; <br>&gt; &gt; First, the example works fine for me.<br>&gt; &gt; <br>&gt; &gt; You seem to be bombing in MPI_Comm_rank and before it asks you for any <br>&gt; &gt; input.  I guess it's having problems with the MPI_COMM_WORLD <br>&gt; &gt; communicator being passed to MPI_Comm_rank?  Maybe it's having problems <br>&gt; &gt; finding the mpif.h include file?  It's finding *some* mpif.h include <br>&gt; &gt; file, but presumably not the right one.  Make sure the mpif90 and mpirun <br>&gt; &gt; commands are the ones you think you should be getting and, if they are, <br>&gt; &gt; try adding -showme to the mpif90 line to see where it's looking for the <br>&gt; &gt; mpif.h include file.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; <br>&gt; &gt; _______________________________________________<br>&gt; &gt; users mailing list<br>&gt; &gt; users@open-mpi.org<br>&gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; <br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; users@open-mpi.org<br>&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br></div></body>
</html>
