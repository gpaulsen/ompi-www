<html><body><div style="color:#000; background-color:#fff; font-family:times new roman, new york, times, serif;font-size:12pt"><div><span>Interesting, the&nbsp;</span><span style="font-size: 13.888888359069824px; line-height: 12.991898536682129px; ">log_num_mtt and&nbsp;</span><span style="font-size: 13.888888359069824px; line-height: 12.991898536682129px; ">log_mtts_per_seg params where not set.</span></div><div style="color: rgb(0, 0, 0); font-size: 13.888888359069824px; font-family: 'times new roman', 'new york', times, serif; background-color: transparent; font-style: normal; "><span style="font-size: 13.888888359069824px; line-height: 12.991898536682129px; ">Setting them to utilise 2*8G of my RAM resulted in no change to the stalls or run time ie; (19,3) (20,2) (21,1) or (</span><span style="font-size: 13.888888359069824px; line-height: 12.991898536682129px; background-color: transparent; ">6,16).&nbsp;</span></div><div style="color: rgb(0, 0, 0);
 font-size: 13.888888359069824px; font-family: 'times new roman', 'new york', times, serif; background-color: transparent; font-style: normal; "><span style="font-size: 13.888888359069824px; line-height: 12.991898536682129px; ">In all cases, OpenIB runs in twice the time it takes TCP,except if I push the small message max to 64K and force short messages. &nbsp;Then the openib times are the same as TCP and no faster.</span></div><div style="color: rgb(0, 0, 0); font-size: 13.888888359069824px; font-family: 'times new roman', 'new york', times, serif; background-color: transparent; font-style: normal; "><span style="font-size: 13.888888359069824px; line-height: 12.991898536682129px; "><br></span></div><div style="color: rgb(0, 0, 0); font-size: 14.166666030883789px; font-family: 'times new roman', 'new york', times, serif; background-color: transparent; font-style: normal; "><span style="font-size: 13.888888359069824px; line-height: 12.991898536682129px;
 ">I'ms till at a loss as to why...</span></div><div><br></div>  <div style="font-family: 'times new roman', 'new york', times, serif; font-size: 12pt; "> <div style="font-family: 'times new roman', 'new york', times, serif; font-size: 12pt; "> <div dir="ltr"> <font size="2" face="Arial"> <hr size="1">  <b><span style="font-weight:bold;">From:</span></b> Paul Kapinos &lt;kapinos@rz.rwth-aachen.de&gt;<br> <b><span style="font-weight: bold;">To:</span></b> Randolph Pullen &lt;randolph_pullen@yahoo.com.au&gt;; Open MPI Users &lt;users@open-mpi.org&gt; <br> <b><span style="font-weight: bold;">Sent:</span></b> Tuesday, 28 August 2012 6:13 PM<br> <b><span style="font-weight: bold;">Subject:</span></b> Re: [OMPI users] Infiniband performance Problem and stalling<br> </font> </div> <br>Randolph,<br>after reading this:<br><br>On 08/28/12 04:26, Randolph Pullen wrote:<br>&gt; - On occasions it seems to stall indefinately, waiting on a single receive.<br><br>... I
 would make a blind guess: are you aware about IB card parameters for registered memory?<br><a href="http://www.open-mpi.org/faq/?category=openfabrics#ib-low-reg-mem" target="_blank">http://www.open-mpi.org/faq/?category=openfabrics#ib-low-reg-mem</a><br><br>"Waiting forever" for a single operation is one of symptoms of the problem especially in 1.5.3.<br><br><br>best,<br>Paul<br><br>P.S. the lower performance with 'big' chinks is known phenomenon, cf.<br><a href="http://www.scl.ameslab.gov/netpipe/" target="_blank">http://www.scl.ameslab.gov/netpipe/</a><br>(image on bottom of the page). But the chunk size of 64k is fairly small<br><br><br><br><br>-- Dipl.-Inform. Paul Kapinos&nbsp;  -&nbsp;  High Performance Computing,<br>RWTH Aachen University, Center for Computing and Communication<br>Seffenter Weg 23,&nbsp; D 52074&nbsp; Aachen (Germany)<br>Tel: +49 241/80-24915<br><br><br><br> </div> </div>  </div></body></html>
