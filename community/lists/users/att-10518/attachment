<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">I'm afraid the rank-file mapper in 1.3.3 has several known problems that have been described on the list by users. We hopefully have those fixed in the upcoming 1.3.4 release.<div><br></div><div><br><div><div>On Aug 31, 2009, at 10:01 AM, Sacerdoti, Federico wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"> <div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009">Hi,</span></font></div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009"></span></font>&nbsp;</div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009">I am trying to use the rankmap to bind a 4-proc mpi job to one socket of a two-socket, 8 core machine. However I'm getting a strange error.</span></font></div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009"></span></font>&nbsp;</div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2">CMDS USED<br>orterun --hostfile hostlist.1 -n 4&nbsp; --mca rmaps_rank_file_path ./rankmap.1 desres-netscan&nbsp; -o $OUTDIR</font></div> <div>&nbsp;</div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2">$ cat rankmap.1<br>rank 0=drdb0235.en slot=0:0<br>rank 1=drdb0235.en slot=0:1<br>rank 2=drdb0235.en slot=0:2<br>rank 3=drdb0235.en slot=0:3</font></div> <div><font face="Arial" color="#0000ff" size="2"></font>&nbsp;</div> <div><font face="Arial" color="#0000ff" size="2">$ cat hostlist.1<br>drdb0235.en slots=8<br></font><font face="Arial" color="#0000ff" size="2"></font></div><font face="Arial" color="#0000ff" size="2"></font> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2">ERROR SEEN<br>--------------------------------------------------------------------------<br>Rankfile claimed host drdb0235.en that was not allocated or oversubscribed it's slots:<br>--------------------------------------------------------------------------<br>[drdb0235.en.desres.deshaw.com:14242] [[37407,0],0] ORTE_ERROR_LOG: Bad parameter in file rmaps_rank_file.c at line 108<br>[drdb0235.en.desres.deshaw.com:14242] [[37407,0],0] ORTE_ERROR_LOG: Bad parameter in file base/rmaps_base_map_job.c at line 87<br>[drdb0235.en.desres.deshaw.com:14242] [[37407,0],0] ORTE_ERROR_LOG: Bad parameter in file base/plm_base_launch_support.c at line 77<br>[drdb0235.en.desres.deshaw.com:14242] [[37407,0],0] ORTE_ERROR_LOG: Bad parameter in file plm_rsh_module.c at line 985 </font></div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"></font>&nbsp;</div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009">From looking at the code in rmaps_rank_file.c it seems the error occurs when the node-gathering code wraps twice around the hostlist. However I dont see why that is happening.</span></font></div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009"></span></font>&nbsp;</div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009">If I specify 8 slots in the rankmap, I see a different error: Error, invalid rank (4) in the rankfile (./rankmap.1)</span></font></div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009"></span></font>&nbsp;</div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009">Thanks,</span></font></div> <div dir="ltr" align="left"><font face="Arial" color="#0000ff" size="2"><span class="964465215-31082009">Federico</span></font></div> <div class="gmail_quote"> <blockquote class="gmail_quote" style="PADDING-LEFT: 1ex; MARGIN: 0pt 0pt 0pt 0.8ex; BORDER-LEFT: rgb(204,204,204) 1px solid"><font face="Arial" color="#0000ff" size="2"></font>&nbsp;</blockquote></div><br></div> _______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/users</blockquote></div><br></div></body></html>
