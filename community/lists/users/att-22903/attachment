<html><head><meta http-equiv="Content-Type" content="text/html charset=us-ascii"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">I'll check into it - that shouldn't be happening and is probably an error in our configure logic somewhere.<div><br><div><div>On Nov 3, 2013, at 7:15 AM, Dominique Orban &lt;<a href="mailto:dominique.orban@gmail.com">dominique.orban@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div style="font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Thanks for the quick reply. That doesn't seem to be it though. Homebrew only uses the configure flags<br><br><span class="Apple-tab-span" style="white-space: pre;">	</span>--prefix=... \<br><span class="Apple-tab-span" style="white-space: pre;">	</span>--disable-dependency-tracking \<br><span class="Apple-tab-span" style="white-space: pre;">	</span>--disable-silent-rules \<br><span class="Apple-tab-span" style="white-space: pre;">	</span>--enable-ipv6<br><br>If requested, it will also add<br><br><span class="Apple-tab-span" style="white-space: pre;">	</span>--enable-mpi-thread-multiple<br><br>I just tried compiling Open-MPI 1.7.3 by hand using<br><br>./configure --prefix=/tmp/ompi_install --disable-dependency-tracking --disable-silent-rules --enable-ipv6 --enable-mpi-thread-multiple --without-devel-headers<br><br>and the 'event2' headers are still under /tmp/ompi_install/include. As far as I can tell, the conflict is still there.<br><br><br>On 3 November, 2013 at 9:44:46 AM, Ralph Castain (<a href="mailto:rhc@open-mpi.org">rhc@open-mpi.org</a>) wrote:<br><blockquote type="cite"><br>I'm unfamiliar with Homebrew, but it sounds like they created &nbsp;<br>the OMPI package --with-devel-headers for some reason. That &nbsp;<br>doesn't make a lot of sense for a distribution as it is only used &nbsp;<br>by OMPI developers who want access to OMPI internal functions &nbsp;<br>from inside a test suite.<br><br>We unfortunately have no control over how 3rd party packagers &nbsp;<br>decide to build OMPI, which is why we generally advise building &nbsp;<br>it from source instead. In this case, nothing changed between &nbsp;<br>1.6 and 1.7 - except that the packager decided to build it with &nbsp;<br>a different configure option.<br><br>We include libevent in a completely "hidden" manner for one simple &nbsp;<br>reason - OMPI uses functions in libevent that are not present &nbsp;<br>in older versions of libevent that are typically the ones provided &nbsp;<br>by quite a few packagers (e.g., CentOS and Mac). Users of those &nbsp;<br>systems would find them unable to execute OMPI if we didn't, or &nbsp;<br>we'd have bizarre levels of code protection/branches throughout &nbsp;<br>OMPI to resolve all the use-cases for the wide range of libevent &nbsp;<br>versions out there.<br><br>I'd suggest you "uninstall" the Homebrew package, and simply &nbsp;<br>download/build OMPI from the source code tarball. The problem &nbsp;<br>will then disappear.<br><br><br>On Nov 3, 2013, at 6:03 AM, Dominique Orban &nbsp;<br>wrote:<br><br><blockquote type="cite">Dear list,<br><br>I'm a humble indirect user of Open-MPI. On OSX, my Open-MPI installation &nbsp;<br></blockquote>is supplied by the Homebrew package manager [1]. Another package &nbsp;<br>supplied by Homebrew is libevent.<br><blockquote type="cite"><br>I recently read on the dev list [2] a discussion about libevent &nbsp;<br></blockquote>having always been part of Open-MPI but being more apparent in &nbsp;<br>1.7.3.<br><blockquote type="cite"><br>At least on OSX, this causes unfortunate header file conflicts. &nbsp;<br></blockquote>If a user were to install both libevent and Open-MPI by hand to &nbsp;<br>/usr/local (which is essentially what Homebrew does), one of &nbsp;<br>the two would obliterate the 'event2' header files of the other. &nbsp;<br>As far as I can tell, the 'event2' header files in Open-MPI differ &nbsp;<br>from those in libevent 2.0.21 (the version currently distributed &nbsp;<br>in Homebrew). This kind of conflict was absent from Open-MPI &nbsp;<br>1.6.<br><blockquote type="cite"><br>Homebrew supplies Open-MPI 1.7.3 by default because the compilers &nbsp;<br></blockquote>shipped with the latest OSX development environment (Xcode &nbsp;<br>5.0) fail to build Open-MPI 1.6.5 correctly (I do not use those &nbsp;<br>compilers myself, but I am told `make check` fails) [3].<br><blockquote type="cite"><br>In view of the header file conflict, I'm wondering if there is &nbsp;<br></blockquote>a strong argument for not keeping the libevent-related header &nbsp;<br>files of Open-MPI private. Stashing libevent-related stuff &nbsp;<br>to a private location could probably be done more easily than &nbsp;<br>adding logic to build Open-MPI against an external libevent. &nbsp;<br>It's unfortunate for Open-MPI to conflict in this way with seemingly &nbsp;<br>unrelated software packages that rely on libevent (e.g., tmux). &nbsp;<br><blockquote type="cite"><br>Thanks.<br><br>--<br>Dominique<br><br>[1]<span class="Apple-converted-space">&nbsp;</span><a href="http://brew.sh/">http://brew.sh</a><br>[2]<span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/community/lists/devel/2013/04/12273.php">http://www.open-mpi.org/community/lists/devel/2013/04/12273.php</a><span class="Apple-converted-space">&nbsp;</span>&nbsp;<br>[3]<span class="Apple-converted-space">&nbsp;</span><a href="https://github.com/mxcl/homebrew/issues/23642">https://github.com/mxcl/homebrew/issues/23642</a><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><span class="Apple-converted-space">&nbsp;</span>&nbsp;<br></blockquote><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br><br></blockquote><br>--&nbsp;<br>Dominique</div></blockquote></div><br></div></body></html>
