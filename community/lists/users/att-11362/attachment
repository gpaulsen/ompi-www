<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Verdana
}
--></style>
</head>
<body class='hmmessage'>
&gt;PBS loves to read the nodes' list backwards.<br>&gt; If you want to start with WN1,<br>&gt; put it last on the Torque/PBS "nodes" file.<br>Nice to know. Thanks Gus for the tip!<br><br>Best Regards.<br>~Belaid.<br><br>&gt; <br>&gt; Gus Correa<br>&gt; ---------------------------------------------------------------------<br>&gt; Gustavo Correa<br>&gt; Lamont-Doherty Earth Observatory - Columbia University<br>&gt; Palisades, NY, 10964-8000 - USA<br>&gt; ---------------------------------------------------------------------<br>&gt; <br>&gt; <br>&gt; Belaid MOA wrote:<br>&gt; &gt; I actually tried both:<br>&gt; &gt; -- in the interactive mode, as soon as I hit enter, the PBS sends me to <br>&gt; &gt; a worker node (WN2) that does not have tm support.<br>&gt; &gt;     I guess if I added the head node to the list of PBS nodes, I would <br>&gt; &gt; not run into the problem. However, I am glad I did run into<br>&gt; &gt;     the problem. You guys helped me understand how mpirun interacts with <br>&gt; &gt; PBS.<br>&gt; &gt; -- in the batch mode, the PBS chooses WN2 as the root node (rank 0) to <br>&gt; &gt; run mpirun.<br>&gt; &gt; So, Both behaved in the same in my case.<br>&gt; &gt; <br>&gt; &gt; With many thanks Ralph for the clarification. I am now getting into the <br>&gt; &gt; openMPI spirit. By the way, I love it :)<br>&gt; &gt; <br>&gt; &gt; ~Belaid.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt;  <br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; From: rhc@open-mpi.org<br>&gt; &gt; Date: Tue, 1 Dec 2009 19:44:38 -0700<br>&gt; &gt; To: users@open-mpi.org<br>&gt; &gt; Subject: Re: [OMPI users] mpirun is using one PBS node only<br>&gt; &gt; <br>&gt; &gt; Just to further show my confusion (since I wrote much of the TM support):<br>&gt; &gt; <br>&gt; &gt; If you get an interactive allocation and then type "mpirun ....", mpirun <br>&gt; &gt; will execute on the node upon which you are sitting. Jeff's statement is <br>&gt; &gt; -only- true if you "qsub" the job - i.e., you run it in batch mode.<br>&gt; &gt; <br>&gt; &gt;  From your prior notes, I was under the impression you were running <br>&gt; &gt; interactively. If this is true, then you only need OMPI to be built with <br>&gt; &gt; TM support on the node which you are interactively working on.<br>&gt; &gt; <br>&gt; &gt; If you are running it in batch mode, then Jeff is correct - you will <br>&gt; &gt; need OMPI built with TM support on all nodes since you (in general) <br>&gt; &gt; cannot know which node PBS will launch you on.<br>&gt; &gt; <br>&gt; &gt; Hope that is clear<br>&gt; &gt; Ralph<br>&gt; &gt; <br>&gt; &gt; On Dec 1, 2009, at 7:35 PM, Belaid MOA wrote:<br>&gt; &gt; <br>&gt; &gt;     &gt;  Yes, this page is definitely incorrect if you want to run with PBS/TM <br>&gt; &gt;     &gt;  support -- you definitely need to install with TM support on all<br>&gt; &gt;     nodes.<br>&gt; &gt;     &gt; <br>&gt; &gt;     &gt;  The reason is that PBS will launch your script (and therefore <br>&gt; &gt;     &gt;  "mpirun") on the first node of the job. This node must have an Open <br>&gt; &gt;     &gt;  MPI mpirun with TM support so that it can query PBS to get the nodes <br>&gt; &gt;     &gt;  to launch on, use the TM API to launch processes on the nodes <br>&gt; &gt;     &gt;  allocated to the job, etc.<br>&gt; &gt;     That's exactly the sound logic I understood from OpenMPI<br>&gt; &gt;     documentation but<br>&gt; &gt;     I thought the website is reliable in the sense it configured the<br>&gt; &gt;     server node with<br>&gt; &gt;     tm support.<br>&gt; &gt; <br>&gt; &gt;     I am very grateful to subscribe to this list. It is one of the most<br>&gt; &gt;     active list I ever saw.<br>&gt; &gt; <br>&gt; &gt;     Thanks a lot Jeff.<br>&gt; &gt; <br>&gt; &gt;     With Best Regards.<br>&gt; &gt;     ~Belaid.<br>&gt; &gt; <br>&gt; &gt;     ------------------------------------------------------------------------<br>&gt; &gt;     Get a great deal on Windows 7 and see how it works the way you<br>&gt; &gt;     want. See the Windows 7 offers now.<br>&gt; &gt;     &lt;http://go.microsoft.com/?linkid=9691813&gt;_______________________________________________<br>&gt; &gt;     users mailing list<br>&gt; &gt;     users@open-mpi.org &lt;mailto:users@open-mpi.org&gt;<br>&gt; &gt;     http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; Get a great deal on Windows 7 and see how it works the way you want. See <br>&gt; &gt; the Windows 7 offers now. &lt;http://go.microsoft.com/?linkid=9691813&gt;<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; <br>&gt; &gt; _______________________________________________<br>&gt; &gt; users mailing list<br>&gt; &gt; users@open-mpi.org<br>&gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; <br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; users@open-mpi.org<br>&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br> 		 	   		  <br /><hr />Get Windows 7 for only $39.99-CDN College or University students only. <a href='http://go.microsoft.com/?linkid=9691814' target='_new'>This offer ends Jan 3-upgrade now!</a></body>
</html>
