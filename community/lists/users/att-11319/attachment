<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Verdana
}
--></style>
</head>
<body class='hmmessage'>
Thanks a lot Gus for your help. Although I used stage_in/stage_out features before, I found NFS mounting much better and cleaner.<br><br>Best Regards.<br>~Belaid.<br><br>&gt; Date: Tue, 1 Dec 2009 14:55:53 -0500<br>&gt; From: gus@ldeo.columbia.edu<br>&gt; To: users@open-mpi.org<br>&gt; Subject: Re: [OMPI users] Elementary question on openMPI application location when using PBS submission<br>&gt; <br>&gt; Hi Belaid Moa<br>&gt; <br>&gt; Belaid MOA wrote:<br>&gt; &gt; Thank you very very much Gus. Does this mean that OpenMPI does not copy <br>&gt; &gt; the executable from the master node to the worker nodes?<br>&gt; <br>&gt; Not that I know.<br>&gt; Making the executable available on the nodes, and any<br>&gt; input files the program may need, is the user's responsibility,<br>&gt; not of mpiexec.<br>&gt; <br>&gt; On the other hand,<br>&gt; Torque/PBS has a "stage_in/stage_out" feature that is supposed to<br>&gt; copy files over to the nodes, if you want to give it a shot.<br>&gt; See "man qsub" and look into the (numerous) "-W" option under<br>&gt; the "stage[in,out]=file_list" sub-options.<br>&gt; This is a relic from the old days where everything had to be on<br>&gt; local disks on the nodes, and NFS ran over Ethernet 10/100,<br>&gt; but it is still used by people that<br>&gt; run MPI programs with heavy I/O, to avoid pounding on NFS or<br>&gt; even on parallel file systems.<br>&gt; I tried the stage_in/out feature a loooong time ago,<br>&gt; (old PBS before Torque), but it had issues.<br>&gt; It probably works now with the newer/better<br>&gt; versions of Torque.<br>&gt; <br>&gt; However, the easy way to get this right is just to use an NFS mounted<br>&gt; directory.<br>&gt; <br>&gt; &gt; If that's case, I will go ahead and NFS mount my working directory.<br>&gt; &gt; <br>&gt; <br>&gt; This would make your life much easier.<br>&gt; <br>&gt; My $0.02.<br>&gt; Gus Correa<br>&gt; ---------------------------------------------------------------------<br>&gt; Gustavo Correa<br>&gt; Lamont-Doherty Earth Observatory - Columbia University<br>&gt; Palisades, NY, 10964-8000 - USA<br>&gt; ---------------------------------------------------------------------<br>&gt; <br>&gt; <br>&gt; <br>&gt; <br>&gt; &gt; ~Belaid.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt;  &gt; Date: Tue, 1 Dec 2009 13:50:57 -0500<br>&gt; &gt;  &gt; From: gus@ldeo.columbia.edu<br>&gt; &gt;  &gt; To: users@open-mpi.org<br>&gt; &gt;  &gt; Subject: Re: [OMPI users] Elementary question on openMPI application <br>&gt; &gt; location when using PBS submission<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; Hi Belaid MOA<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; See this FAQ:<br>&gt; &gt;  &gt; <br>&gt; &gt; http://www.open-mpi.org/faq/?category=running#do-i-need-a-common-filesystem<br>&gt; &gt;  &gt; http://www.open-mpi.org/faq/?category=building#where-to-install<br>&gt; &gt;  &gt; http://www.open-mpi.org/faq/?category=tm#tm-obtain-host<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; Your executable needs to be on a directory that is accessible<br>&gt; &gt;  &gt; by all nodes in your node pool.<br>&gt; &gt;  &gt; An easy way to achieve this is to put it in a directory that<br>&gt; &gt;  &gt; is NFS mounted on all nodes, and launch your pbs script from there.<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; A less convenient alternative, if no NFS directory is available,<br>&gt; &gt;  &gt; is to copy the executable over to the nodes.<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; I also find it easier to write a PBS script instead of putting<br>&gt; &gt;  &gt; all the PBS directives in the command line.<br>&gt; &gt;  &gt; In this case you can put the lines below in your PBS script,<br>&gt; &gt;  &gt; to ensure all nodes will be on your work directory (cd $PBS_O_WORKDIR):<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; ########<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; #PBS ... (PBS directives)<br>&gt; &gt;  &gt; ...<br>&gt; &gt;  &gt; cd $PBS_O_WORKDIR<br>&gt; &gt;  &gt; mpiexec -n ....<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; ########<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; IIRR, by default Torque/PBS puts you in your home directory on<br>&gt; &gt;  &gt; the nodes, which may or may not be the location of your executable.<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; I hope this helps,<br>&gt; &gt;  &gt; Gus Correa<br>&gt; &gt;  &gt; ---------------------------------------------------------------------<br>&gt; &gt;  &gt; Gustavo Correa<br>&gt; &gt;  &gt; Lamont-Doherty Earth Observatory - Columbia University<br>&gt; &gt;  &gt; Palisades, NY, 10964-8000 - USA<br>&gt; &gt;  &gt; ---------------------------------------------------------------------<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; Belaid MOA wrote:<br>&gt; &gt;  &gt; &gt; Hello everyone,<br>&gt; &gt;  &gt; &gt; I am new to this list and I have a very elementary question: <br>&gt; &gt; suppose we<br>&gt; &gt;  &gt; &gt; have three machines, HN (Head Node hosting the pbs server), WN1 (A<br>&gt; &gt;  &gt; &gt; worker node) and WN (another worker node). The PBS nodefile has WN1 <br>&gt; &gt; and<br>&gt; &gt;  &gt; &gt; WN2 in it (DOES NOT HAVE HN).<br>&gt; &gt;  &gt; &gt; My openMPI program (hello) and PBS script(my_script.sh) reside on the<br>&gt; &gt;  &gt; &gt; HN. When I submit my PBS script using qsub -l nodes=2 my_script.sh, I<br>&gt; &gt;  &gt; &gt; get the following error:<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; <br>&gt; &gt; --------------------------------------------------------------------------<br>&gt; &gt;  &gt; &gt; mpirun was unable to launch the specified application as it could not<br>&gt; &gt;  &gt; &gt; find an executable:<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; Executable: hello<br>&gt; &gt;  &gt; &gt; Node: WN2<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; while attempting to start process rank 0.<br>&gt; &gt;  &gt; &gt; <br>&gt; &gt; --------------------------------------------------------------------------<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; How come my hello program is not copied automatically to the worker<br>&gt; &gt;  &gt; &gt; nodes? This leads to my elementary question:<br>&gt; &gt;  &gt; &gt; where the application should be when using a PBS submission?<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; Note that when I run mpirun from HN with machinefile containing WN1 <br>&gt; &gt; and<br>&gt; &gt;  &gt; &gt; WN2, I get the right output.<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; Any help on this is very appreciated.<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; ~Belaid.<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt;  &gt; &gt; Windows Live: Keep your friends up to date with what you do online.<br>&gt; &gt;  &gt; &gt; &lt;http://go.microsoft.com/?linkid=9691810&gt;<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt;  &gt; &gt;<br>&gt; &gt;  &gt; &gt; _______________________________________________<br>&gt; &gt;  &gt; &gt; users mailing list<br>&gt; &gt;  &gt; &gt; users@open-mpi.org<br>&gt; &gt;  &gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt;  &gt;<br>&gt; &gt;  &gt; _______________________________________________<br>&gt; &gt;  &gt; users mailing list<br>&gt; &gt;  &gt; users@open-mpi.org<br>&gt; &gt;  &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; Windows Live: Make it easier for your friends to see what you’re up to <br>&gt; &gt; on Facebook. &lt;http://go.microsoft.com/?linkid=9691811&gt;<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; <br>&gt; &gt; _______________________________________________<br>&gt; &gt; users mailing list<br>&gt; &gt; users@open-mpi.org<br>&gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; <br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; users@open-mpi.org<br>&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br> 		 	   		  <br /><hr />Windows Live: Keep your friends up to date <a href='http://go.microsoft.com/?linkid=9691810' target='_new'>with what you do online.</a></body>
</html>
