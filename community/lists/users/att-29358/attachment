<div dir="ltr"><div class="gmail_extra"><div style="font-size:medium"><div><div style="font-size:12.8px"><div><div dir="ltr">Thanks, Ralph. I&#39;m not sure I explained the problem clearly. Salt and JupyterHub are distractions, sorry.<div><br></div><div>I have code which &quot;wires up&quot; a cluster for MPI. What I need is scheduler that allows users to:</div><div><br></div><div>* Select which Docker image they&#39;d like to wire up</div><div>* Request a number of nodes/cores</div><div>* Understands that clusters can be dynamically created</div><div>* Invokes an external command to create the cluster</div><div><br></div><div>Here&#39;s what I&#39;d like the user be able to do:</div><div><br></div><div>$ queue-job --image=radiasoft/beamsim --cores=5000 my-script.sh</div><div><br></div><div>queue-job would then have to be able to call a 3rd-party module to get the user:</div><div><br></div><div># 3rd-party-environ-collector</div><div><br></div><div>This command would return a logical user and a network-accessible directory. This info would be added to the queue, and then when the scheduler decided to start the job, it would call:</div><div><br></div><div># 3rd-party-start --image=radiasoft/beamsim --cores=5000 --user=robnagler --mount=nfs://<a href="http://intra.server.com/var/nfs/bla/robnagler/foo/bar:/home/docker-user/run" target="_blank">intra.server.com/var/nfs/bla/robnagler/foo/bar:/home/docker-user/run</a>Â my-script.sh</div><div><br></div><div>The bit that I need is the scheduling. For example, the scheduler would have give the user a maximum number of core hours. It would maybe give the job a unique group id (a la Grid Engine) to manage disk quotas. These constraints would need to be passed to the 3rd-party programs so they could constrain the doctor container.</div><div><br></div><div>What I have now is 3rd-party-environ-collector (JupyterHub) and 3rd-party-start (Salt). What I need is a scheduler that has an architecture that supports dynamic clusters and users who have no local credentials (non-Unix user -- just a name and a home directory).</div><div><br></div><div>TIA,</div><div>Rob<div></div></div></div></div></div><div></div></div><div></div></div><div style="font-size:12.8px;background-color:rgb(255,255,255)"><div><div></div></div></div></div></div>

