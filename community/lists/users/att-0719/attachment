<br>Mmmh I don't understand you:<br><br>My (slave) call is:<br>MPI_Recv(&amp;work, 1, MPI_INT, 0, MPI_ANY_TAG,&nbsp;&nbsp;&nbsp;&nbsp;MPI_COMM_WORLD, &amp;status);<br><br>And MPI_Recv signature is:<br>int MPI_Recv( void *buf, int count, MPI_Datatype datatype, int source,              int tag, MPI_Comm comm, MPI_Status *status )
<br><br>So:<br>void *buf -&gt; work<br>int count -&gt; 1<br>MPI_Datatype datatype -&gt; MPI_INT<br>int source -&gt; 0,<br>...<br><br>I think I'm waiting to receive incoming messages from the master (source id =0). In fact the only sender is the master and the only slave is the only receiver. Maybe I'm doing something else wrong?
<br><br>Thank you<br><br><br><div><span class="gmail_quote">On 2/28/06, <b class="gmail_sendername">John Robinson</b> &lt;<a href="mailto:jr@vertica.com">jr@vertica.com</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
Your MPI_Recv is trying to receive from the slave(1), not the master (0).<br><br>Jose Pedro Garcia Mahedero wrote:<br>&gt; Hello everybody.<br>&gt;<br>&gt; I'm new to MPI and I'm having some problems while runnig a simple
<br>&gt; pingpong program in more than one node.<br>&gt;<br>&gt; 1.- I followed all the instructions and installed open MPI without<br>&gt; problems in&nbsp;&nbsp;a Beowulf cluster.<br>&gt; 2.-&nbsp;&nbsp;Ths cluster is working OK and ssh keys are set for not password
<br>&gt; prompting<br>&gt; 3.- miexec seems to run OK.<br>&gt; 4.- Now I'm using just 2 nodes: I've tried a simple ping-pong<br>&gt; application but my master only sends one request!!<br>&gt; 5.- I reduced the problem by trying to send just two mesages to the same
<br>&gt; node:<br>&gt;<br>&gt; int main(int argc, char **argv){<br>&gt;&nbsp;&nbsp; int myrank;<br>&gt;<br>&gt;&nbsp;&nbsp; /* Initialize MPI */<br>&gt;<br>&gt;&nbsp;&nbsp; MPI_Init(&amp;argc, &amp;argv);<br>&gt;<br>&gt;&nbsp;&nbsp; /* Find out my identity in the default communicator */
<br>&gt;<br>&gt;&nbsp;&nbsp; MPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank);<br>&gt;&nbsp;&nbsp; if (myrank == 0) {<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; int work = 100;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; int count=0;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; for (int i =0; i &lt; 10; i++){<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt; &quot;MASTER IS SLEEPING...&quot; &lt;&lt; endl;
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep(3);<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt; &quot;MASTER AWAKE WILL SEND[&quot;&lt;&lt; count++ &lt;&lt; &quot;]:&quot; &lt;&lt; work &lt;&lt; endl;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_Send(&amp;work, 1, MPI_INT, 1, WORKTAG,&nbsp;&nbsp; MPI_COMM_WORLD);
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&gt;&nbsp;&nbsp; } else {<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int count =0;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int work;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Status status;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (true){<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Recv(&amp;work, 1, MPI_INT, 0, MPI_ANY_TAG,&nbsp;&nbsp;&nbsp;&nbsp;MPI_COMM_WORLD,
<br>&gt; &amp;status);<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout &lt;&lt; &quot;SLAVE[&quot; &lt;&lt; myrank &lt;&lt; &quot;] RECEIVED[&quot; &lt;&lt; count++ &lt;&lt; &quot;]:&quot;<br>&gt; &lt;&lt; work &lt;&lt;endl;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (status.MPI_TAG
 == DIETAG) {<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; }// while<br>&gt;&nbsp;&nbsp; }<br>&gt;&nbsp;&nbsp; MPI_Finalize();<br>&gt;<br>&gt;<br>&gt;<br>&gt; 6a.- RESULTS&nbsp;&nbsp;(if I put more than one machine in my mpihostsfile), my<br>
&gt; master sends the first message&nbsp;&nbsp;and my slave receives it perfectly. But<br>&gt; my master doesnt send its second .<br>&gt; message:<br>&gt;<br>&gt;<br>&gt;<br>&gt; Here's my output<br>&gt;<br>&gt; MASTER IS SLEEPING...
<br>&gt; MASTER AWAKE WILL SEND[0]:100<br>&gt; MASTER IS SLEEPING...<br>&gt; SLAVE[1] RECEIVED[0]:100MPI_STATUS.MPI_ERROR:0<br>&gt; MASTER AWAKE WILL SEND[1]:100<br>&gt;<br>&gt; 6b.- RESULTS (if I put ONLY&nbsp;&nbsp;1 machine in my mpihostsfile), everything
<br>&gt; is OK until iteration 9!!!<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[0]:100<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[1]:100<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[2]:100
<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[3]:100<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[4]:100<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[5]:100<br>&gt; MASTER IS SLEEPING...
<br>&gt; MASTER AWAKE WILL SEND[6]:100<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[7]:100<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[8]:100<br>&gt; MASTER IS SLEEPING...<br>&gt; MASTER AWAKE WILL SEND[9]:100
<br>&gt; SLAVE[1] RECEIVED[0]:100MPI_STATUS.MPI_ERROR:0<br>&gt; SLAVE[1] RECEIVED[1]:100MPI_STATUS.MPI_ERROR:0<br>&gt; SLAVE[1] RECEIVED[2]:100MPI_STATUS.MPI_ERROR:0<br>&gt; SLAVE[1] RECEIVED[3]:100MPI_STATUS.MPI_ERROR:0<br>
&gt; SLAVE[1] RECEIVED[4]:100MPI_STATUS.MPI_ERROR:0<br>&gt; SLAVE[1] RECEIVED[5]:100MPI_STATUS.MPI_ERROR:0<br>&gt; SLAVE[1] RECEIVED[6]:100MPI_STATUS.MPI_ERROR:0<br>&gt; SLAVE[1] RECEIVED[7]:100MPI_STATUS.MPI_ERROR:0<br>&gt; SLAVE[1] RECEIVED[8]:100MPI_STATUS.MPI_ERROR:0
<br>&gt; SLAVE[1] RECEIVED[9]:100MPI_STATUS.MPI_ERROR:0<br>&gt; --------------------------------<br>&gt;<br>&gt; I know this is a lot of text, but I wanted to give a mamixum detailed<br>&gt; question. I've been search in FAQ, but still don't know what (and why)
<br>&gt; is going on...<br>&gt;<br>&gt; Anyone can help please :-)&nbsp;&nbsp;?<br>&gt;<br>&gt;<br>&gt; ------------------------------------------------------------------------<br>&gt;<br>&gt; _______________________________________________
<br>&gt; users mailing list<br>&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users
</a><br></blockquote></div><br>

