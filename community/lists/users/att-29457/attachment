<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">Oh sure - just not shared memory<div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Jun 15, 2016, at 8:29 AM, Louis Williams &lt;<a href="mailto:louis.williams@gatech.edu" class="">louis.williams@gatech.edu</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Ralph, thanks for the quick reply. Is cross-job fast transport like InfiniBand supported?&nbsp;<div class=""><br class=""></div><div class="">Louis&nbsp;<br class=""><br class=""><div class="gmail_quote"><div dir="ltr" class="">On Tue, Jun 14, 2016 at 3:53 PM Ralph Castain &lt;<a href="mailto:rhc@open-mpi.org" class="">rhc@open-mpi.org</a>&gt; wrote:<br class=""></div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word" class="">Nope - we donâ€™t currently support cross-job shared memory operations. Nathan has talked about doing so for vader, but not at this time.<div class=""><br class=""></div><div class=""><br class=""><div class=""><blockquote type="cite" class=""></blockquote></div></div></div><div style="word-wrap:break-word" class=""><div class=""><div class=""><blockquote type="cite" class=""><div class="">On Jun 14, 2016, at 12:38 PM, Louis Williams &lt;<a href="mailto:louis.williams@gatech.edu" target="_blank" class="">louis.williams@gatech.edu</a>&gt; wrote:</div><br class=""></blockquote></div></div></div><div style="word-wrap:break-word" class=""><div class=""><div class=""><blockquote type="cite" class=""><div class=""><div dir="ltr" class=""><span style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">Hi,</span><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><br class=""></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">I am attempting to use the sm and vader BTLs between a client and server process, but it seems impossible to use fast transports (i.e. not TCP) between two independent groups started with two separate mpirun invocations. Am I correct, or is there a way to communicate using shared memory between a client and server like this?&nbsp;<span style="line-height:1.5" class="">It seems this might be the case:&nbsp;</span><a href="https://github.com/open-mpi/ompi/blob/master/ompi/dpm/dpm.c#L495" style="line-height:1.5" target="_blank" class="">https://github.com/open-mpi/ompi/blob/master/ompi/dpm/dpm.c#L495</a></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><br class=""></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><span style="line-height:1.5" class="">The server calls MPI::COMM_WORLD.Accept() and the client calls MPI::COMM_WORLD.Connect().&nbsp;</span><span style="line-height:1.5" class="">Each program is started with "mpirun --np 1 --mca btl self,sm,vader &lt;exectuable&gt;" where the executable is either the client or server program.&nbsp;</span><span style="line-height:1.5" class="">When no BTL is specified, both establish a TCP connection just fine.</span><span style="line-height:1.5" class="">&nbsp;</span><span style="line-height:1.5" class="">But when the sm and vader BTLs are specified, immediately after the Connect() call, both client and server exit with the message, copied at the end. It seems as though intergroup communication can't use fast transport and only uses TCP.&nbsp;</span></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><span style="line-height:1.5" class=""><br class=""></span></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">Also, as expected, running the Accept() and Connect() calls within a single program with "mpirun -np 2 --mca btl self,sm,vader ..." uses shared memory as transport.</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><br class=""></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">$&gt;&nbsp;mpirun --ompi-server "3414491136.0;tcp://<a href="http://10.4.131.16:49775/" target="_blank" class="">10.4.131.16:49775</a>" -np 1 --mca btl self,vader ./server</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><br class=""></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">At least one pair of MPI processes are unable to reach each other for</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">MPI communications.&nbsp; This means that no Open MPI device has indicated</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">that it can be used to communicate between these processes.&nbsp; This is</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">an error; Open MPI requires that all MPI processes be able to reach</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">each other.&nbsp; This error can sometimes be the result of forgetting to</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">specify the "self" BTL.</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><br class=""></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">&nbsp; Process 1 ([[50012,1],0]) is on host: MacBook-Pro-80</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">&nbsp; Process 2 ([[50010,1],0]) is on host: MacBook-Pro-80</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">&nbsp; BTLs attempted: self</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><br class=""></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">Your MPI job is now going to abort; sorry.</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">--------------------------------------------------------------------------</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">[MacBook-Pro-80.local:57315] [[50012,1],0] ORTE_ERROR_LOG: Unreachable in file dpm_orte.c at line 523</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">[MacBook-Pro-80:57315] *** An error occurred in MPI_Comm_accept</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">[MacBook-Pro-80:57315] *** reported by process [7572553729,4294967296]</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">[MacBook-Pro-80:57315] *** on communicator MPI_COMM_WORLD</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">[MacBook-Pro-80:57315] *** MPI_ERR_INTERN: internal error</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">[MacBook-Pro-80:57315] *** MPI_ERRORS_ARE_FATAL (processes in this communicator will now abort,</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">[MacBook-Pro-80:57315] *** &nbsp; &nbsp;and potentially your MPI job)</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">-------------------------------------------------------</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">Primary job &nbsp;terminated normally, but 1 process returned</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">a non-zero exit code.. Per user-direction, the job has been aborted.</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">-------------------------------------------------------</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">--------------------------------------------------------------------------</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">mpirun detected that one or more processes exited with non-zero status, thus causing</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">the job to be terminated. The first process to do so was:</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><br class=""></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">&nbsp; Process name: [[50012,1],0]</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">&nbsp; Exit code: &nbsp; &nbsp;17</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">--------------------------------------------------------------------------&nbsp;</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class=""><br class=""></div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">Thanks,</div><div style="color:rgb(33,33,33);font-family:&quot;helvetica neue&quot;,helvetica,arial,sans-serif;font-size:13px" class="">Louis</div></div></div></blockquote></div></div></div><div style="word-wrap:break-word" class=""><div class=""><div class=""><blockquote type="cite" class=""><div class="">
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" target="_blank" class="">users@open-mpi.org</a><br class="">Subscription: <a href="https://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" class="">https://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2016/06/29441.php" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2016/06/29441.php</a></div></blockquote></div><br class=""></div></div>_______________________________________________<br class="">
users mailing list<br class="">
<a href="mailto:users@open-mpi.org" target="_blank" class="">users@open-mpi.org</a><br class="">
Subscription: <a href="https://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank" class="">https://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2016/06/29442.php" rel="noreferrer" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2016/06/29442.php</a></blockquote></div></div></div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">Subscription: https://www.open-mpi.org/mailman/listinfo.cgi/users<br class="">Link to this post: http://www.open-mpi.org/community/lists/users/2016/06/29456.php</div></blockquote></div><br class=""></div></body></html>
