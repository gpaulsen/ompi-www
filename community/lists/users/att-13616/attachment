<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Verdana
}
--></style>
</head>
<body class='hmmessage'>
thanks very much !!!<div><br></div><div>May I use global variable to do that ?&nbsp;</div><div><br></div><div>It means that all nodes have the same global variable,&nbsp;</div><div>such as globalVector.&nbsp;</div><div><br></div><div>In the initialization, only node 0 load data from files and assign values to&nbsp;</div><div>the&nbsp;<span class="Apple-style-span" style="font-size: 13.3333px; ">globalVector.&nbsp;</span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; "><br></span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; ">After that, all other nodes can get the same data by accessing the&nbsp;</span><span class="Apple-style-span" style="font-size: 13.3333px; ">globalVector.&nbsp;</span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; "><br></span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; ">Does it make sense ?&nbsp;</span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; "><br></span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; ">Any help is appreciated.&nbsp;</span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; "><br></span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; ">Jack</span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; "><br></span></div><div><span class="Apple-style-span" style="font-size: 13.3333px; ">July 12 &nbsp;2010</span></div><div><br>&gt; Date: Mon, 12 Jul 2010 21:44:34 -0400<br>&gt; From: gus@ldeo.columbia.edu<br>&gt; To: users@open-mpi.org<br>&gt; Subject: Re: [OMPI users] OpenMPI load data to multiple nodes<br>&gt; <br>&gt; Hi Jack/Jinxu<br>&gt; <br>&gt; Jack Bryan wrote:<br>&gt; &gt; Dear All,<br>&gt; &gt; <br>&gt; &gt; I am working on a multi-computer Open MPI cluster system. <br>&gt; &gt; <br>&gt; &gt; If I put some data files in /home/mypath/folder, is it possible that all <br>&gt; &gt; non-head nodes can access the files in the folder ? <br>&gt; &gt;<br>&gt; <br>&gt; Yes, possible, for instance, if the /home/mypath/folder directory is<br>&gt; NFS mounted on all nodes/computers.<br>&gt; Otherwise, if all disks and directories are local to each computer,<br>&gt; you need to copy the input files to the local disks before you<br>&gt; start, and copy the output files back to your login computer after the<br>&gt; program ends.<br>&gt; <br>&gt; &gt; I need to load some data to some nodes, if all nodes can access the <br>&gt; &gt; data, I do not need to load them to each node one by one. <br>&gt; &gt; <br>&gt; &gt; If multiple nodes access the same file to get data, is there conflict ? <br>&gt; &gt; <br>&gt; <br>&gt; To some extent.<br>&gt; The OS (on the computer where the file is located)<br>&gt; will do the arbitration on which process gets the hold of the file at <br>&gt; each time.<br>&gt; If you have 1000 processes, this means a lot of arbitration,<br>&gt; and most likely contention.<br>&gt; Even for two processes only, if the processes are writing data to a <br>&gt; single file, this won't ensure that they write<br>&gt; the output data in the order that you want.<br>&gt; <br>&gt; &gt; For example, <br>&gt; &gt; <br>&gt; &gt; fopen(myFile) by node 1, at the same time fopen(myFile) by node 2. <br>&gt; &gt; <br>&gt; &gt; Is it allowed to do that on MPI cluster without conflict ? <br>&gt; &gt; <br>&gt; <br>&gt; I think MPI won't have any control over this.<br>&gt; It is up to the operational system, and depends on<br>&gt; which process gets its "fopen" request to the OS first,<br>&gt; which is not a deterministic sequence of events.<br>&gt; That is not a clean technique.<br>&gt; <br>&gt; You could instead:<br>&gt; <br>&gt; 1) Assign a single process, say, rank 0,<br>&gt; to read and write data from/to the file(s).<br>&gt; Then use, say, MPI_Scatter[v] and MPI_Gather[v],<br>&gt; to distribute and collect the data back and forth<br>&gt; between that process (rank 0) and all other processes.<br>&gt; <br>&gt; That is an old fashioned but very robust technique.<br>&gt; It avoids any I/O conflict or contention among processes.<br>&gt; All the data flows across the processes via MPI.<br>&gt; The OS receives I/O requests from a single process (rank 0).<br>&gt; <br>&gt; Besides MPI_Gather/MPI_Scatter, look also at MPI_Bcast,<br>&gt; if you need to send the same data to all processes,<br>&gt; assuming the data is being read by a single process.<br>&gt; <br>&gt; 2) Alternatively, you could use the MPI I/O functions,<br>&gt; if your files are binary.<br>&gt; <br>&gt; I hope it helps,<br>&gt; Gus Correa<br>&gt; <br>&gt; &gt; Any help is appreciated. <br>&gt; &gt; <br>&gt; &gt; Jinxu Ding<br>&gt; &gt; <br>&gt; &gt; July 12  2010<br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; The New Busy think 9 to 5 is a cute idea. Combine multiple calendars <br>&gt; &gt; with Hotmail. Get busy. <br>&gt; &gt; &lt;http://www.windowslive.com/campaign/thenewbusy?tile=multicalendar&amp;ocid=PID28326::T:WLMTAGL:ON:WL:en-US:WM_HMP:042010_5&gt;<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; ------------------------------------------------------------------------<br>&gt; &gt; <br>&gt; &gt; _______________________________________________<br>&gt; &gt; users mailing list<br>&gt; &gt; users@open-mpi.org<br>&gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; <br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; users@open-mpi.org<br>&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br></div> 		 	   		  <br /><hr />The New Busy is not the old busy. Search, chat and e-mail from your inbox. <a href='http://www.windowslive.com/campaign/thenewbusy?ocid=PID28326::T:WLMTAGL:ON:WL:en-US:WM_HMP:042010_3' target='_new'>Get started.</a></body>
</html>
