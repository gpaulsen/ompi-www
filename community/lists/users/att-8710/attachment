<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">There is indeed a heartbeat mechanism you can use - it is "off" by default. You can set it to check every N seconds with:<div><br></div><div>-mca orte_heartbeat_rate N</div><div><br></div><div>on your command line. Or if you want it to always run, add "orte_heartbeat_rate = N" to your default MCA param file. OMPI will declare the orted "dead" if two consecutive heartbeats are not seen.</div><div><br></div><div>Let me know how it works for you - it hasn't been extensively tested, but has worked so far.</div><div>Ralph</div><div><br><div><div>On Apr 1, 2009, at 6:07 AM, Guanyinzhu wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><span class="Apple-style-span" style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0; "><div class="hmmessage" style="font-size: 10pt; font-family: Verdana; ">I mean&nbsp;killed the orted deamon process&nbsp;during the mpi job running&nbsp;, but the mpi job hang and could't notice&nbsp;one of&nbsp;it's rank failed.<br>&nbsp;<br>&nbsp;<br><br>&nbsp;<br>> Date: Wed, 1 Apr 2009 19:09:34 +0800<br>> From:<span class="Apple-converted-space">&nbsp;</span><a href="mailto:ml.jgmbenoit@mailsnare.net">ml.jgmbenoit@mailsnare.net</a><br>> To:<span class="Apple-converted-space">&nbsp;</span><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>> Subject: Re: [OMPI users] Beginner's question: how to avoid a running mpi job hang if host or network failed or orted deamon killed?<br>><span class="Apple-converted-space">&nbsp;</span><br>> Is there a firewall somewhere ?<br>><span class="Apple-converted-space">&nbsp;</span><br>> Jerome<br>><span class="Apple-converted-space">&nbsp;</span><br>> Guanyinzhu wrote:<br>> > Hi!<span class="Apple-converted-space">&nbsp;</span><br>> > I'm using OpenMPI 1.3 on ten nodes connected with Gigabit Ethernet on<span class="Apple-converted-space">&nbsp;</span><br>> > Redhat Linux x86_64.<span class="Apple-converted-space">&nbsp;</span><br>> ><span class="Apple-converted-space">&nbsp;</span><br>> > I run a test like this: just killed the orted process and the job hung<span class="Apple-converted-space">&nbsp;</span><br>> > for a long time (hang for 2~3 hours then I killed the job).<br>> ><span class="Apple-converted-space">&nbsp;</span><br>> > I have the follow questions:<br>> ><span class="Apple-converted-space">&nbsp;</span><br>> > when network failed or host failed or orted deamon was killed by<span class="Apple-converted-space">&nbsp;</span><br>> > accident, How long would the running mpi job notice and exit?<span class="Apple-converted-space">&nbsp;</span><br>> ><span class="Apple-converted-space">&nbsp;</span><br>> > Does OpenMPI support a heartbeat mechanism or how c! ould I fast<span class="Apple-converted-space">&nbsp;</span><br>> > detect the failture to avoid the mpi job hang?<br>> ><span class="Apple-converted-space">&nbsp;</span><br>> ><span class="Apple-converted-space">&nbsp;</span><br>> > thanks a lot!<br>> ><span class="Apple-converted-space">&nbsp;</span><br>> ><span class="Apple-converted-space">&nbsp;</span><br>> > ------------------------------------------------------------------------<br>> > ?MSN????,??????????! ????! &lt;<a href="http://mobile.msn.com.cn/">http://mobile.msn.com.cn/</a>><br>> ><span class="Apple-converted-space">&nbsp;</span><br>> ><span class="Apple-converted-space">&nbsp;</span><br>> > ------------------------------------------------------------------------<br>> ><span class="Apple-converted-space">&nbsp;</span><br>> > _______________________________________________<br>> > users mailing list<br>> ><span class="Apple-converted-space">&nbsp;</span><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>> ><span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>><span class="Apple-converted-space">&nbsp;</span><br>><span class="Apple-converted-space">&nbsp;</span><br>> _______________________________________________<br>> users mailing list<br>><span class="Apple-converted-space">&nbsp;</span><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>><span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br><br><hr>更多热辣资讯尽在新版MSN首页！<span class="Apple-converted-space">&nbsp;</span><a href="http://cn.msn.com/" target="_new">立刻访问！</a><span class="Apple-converted-space">&nbsp;</span>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></div></span></blockquote></div><br></div></body></html>
