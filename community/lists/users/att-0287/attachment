<HTML><BODY style="word-wrap: break-word; -khtml-nbsp-mode: space; -khtml-line-break: after-white-space; "><DIV>Hi Brian,</DIV><DIV><BR class="khtml-block-placeholder"></DIV><DIV>Thanks for working on this.  I now have a problem building Open MPI, though.  This is from the end of the build log:</DIV><DIV><BR class="khtml-block-placeholder"></DIV><DIV> gcc -DHAVE_CONFIG_H -I. -I/Users/willic3/build/openmpi-1.0rc5r8038/ompi/mpi/f77</DIV><DIV>/profile -I../../../../include -I../../../../include -DOMPI_PROFILE_LAYER=1 -DOM</DIV><DIV>PI_COMPILING_F77_WRAPPERS=1 -I/Users/willic3/build/openmpi-1.0rc5r8038/include -</DIV><DIV>I/Users/willic3/build/openmpi-1.0rc5r8038 -I../../../.. -I../../../../include -I</DIV><DIV>/Users/willic3/build/openmpi-1.0rc5r8038/opal -I/Users/willic3/build/openmpi-1.0</DIV><DIV>rc5r8038/orte -I/Users/willic3/build/openmpi-1.0rc5r8038/ompi -D_REENTRANT -O3 -</DIV><DIV>DNDEBUG -fno-strict-aliasing -MT pwaitsome_f.lo -MD -MP -MF .deps/pwaitsome_f.Tp</DIV><DIV>o -c pwaitsome_f.c  -fno-common -DPIC -o .libs/pwaitsome_f.o</DIV><DIV>if test ! -r pwtick_f.c ; then \</DIV><DIV>    pname=`echo pwtick_f.c | cut -b '2-'` ; \</DIV><DIV>    ln -s /Users/willic3/build/openmpi-1.0rc5r8038/ompi/mpi/f77/$pname pwtick_f.</DIV><DIV>c ; \</DIV><DIV>fi</DIV><DIV>depbase=`echo pwtick_f.lo | sed 's|[^/]*$|.deps/&amp;|;s|\.lo$||'`; \</DIV><DIV>if /bin/sh ../../../../libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -</DIV><DIV>I/Users/willic3/build/openmpi-1.0rc5r8038/ompi/mpi/f77/profile -I../../../../inc</DIV><DIV>lude -I../../../../include  -DOMPI_PROFILE_LAYER=1 -DOMPI_COMPILING_F77_WRAPPERS</DIV><DIV>=1 -I/Users/willic3/build/openmpi-1.0rc5r8038/include -I/Users/willic3/build/ope</DIV><DIV>nmpi-1.0rc5r8038 -I../../../.. -I../../../../include -I/Users/willic3/build/open</DIV><DIV>mpi-1.0rc5r8038/opal -I/Users/willic3/build/openmpi-1.0rc5r8038/orte -I/Users/wi</DIV><DIV>llic3/build/openmpi-1.0rc5r8038/ompi  -D_REENTRANT  -O3 -DNDEBUG -fno-strict-ali</DIV><DIV>asing  -MT pwtick_f.lo -MD -MP -MF "$depbase.Tpo" -c -o pwtick_f.lo pwtick_f.c; </DIV><DIV>\</DIV><DIV>then mv -f "$depbase.Tpo" "$depbase.Plo"; else rm -f "$depbase.Tpo"; exit 1; fi</DIV><DIV> gcc -DHAVE_CONFIG_H -I. -I/Users/willic3/build/openmpi-1.0rc5r8038/ompi/mpi/f77</DIV><DIV>/profile -I../../../../include -I../../../../include -DOMPI_PROFILE_LAYER=1 -DOM</DIV><DIV>PI_COMPILING_F77_WRAPPERS=1 -I/Users/willic3/build/openmpi-1.0rc5r8038/include -</DIV><DIV>I/Users/willic3/build/openmpi-1.0rc5r8038 -I../../../.. -I../../../../include -I</DIV><DIV>/Users/willic3/build/openmpi-1.0rc5r8038/opal -I/Users/willic3/build/openmpi-1.0</DIV><DIV>rc5r8038/orte -I/Users/willic3/build/openmpi-1.0rc5r8038/ompi -D_REENTRANT -O3 -</DIV><DIV>DNDEBUG -fno-strict-aliasing -MT pwtick_f.lo -MD -MP -MF .deps/pwtick_f.Tpo -c p</DIV><DIV>wtick_f.c  -fno-common -DPIC -o .libs/pwtick_f.o</DIV><DIV>pwtick_f.c:33: error: conflicting types for 'PMPI_WTICK'</DIV><DIV>/Users/willic3/build/openmpi-1.0rc5r8038/ompi/mpi/f77/profile/prototypes_pmpi.h:</DIV><DIV>1483: error: previous declaration of 'PMPI_WTICK' was here</DIV><DIV>pwtick_f.c: In function 'PMPI_WTICK':</DIV><DIV>pwtick_f.c:33: error: incompatible types in return</DIV><DIV>pwtick_f.c: At top level:</DIV><DIV>pwtick_f.c:34: error: conflicting types for 'pmpi_wtick'</DIV><DIV>/Users/willic3/build/openmpi-1.0rc5r8038/ompi/mpi/f77/profile/prototypes_pmpi.h:</DIV><DIV>622: error: previous declaration of 'pmpi_wtick' was here</DIV><DIV>pwtick_f.c: In function 'pmpi_wtick':</DIV><DIV>pwtick_f.c:34: error: incompatible types in return</DIV><DIV>pwtick_f.c: At top level:</DIV><DIV>pwtick_f.c:35: error: conflicting types for 'pmpi_wtick_'</DIV><DIV>/Users/willic3/build/openmpi-1.0rc5r8038/ompi/mpi/f77/profile/prototypes_pmpi.h:</DIV><DIV>909: error: previous declaration of 'pmpi_wtick_' was here</DIV><DIV><BR class="khtml-block-placeholder"></DIV><DIV>If it would help, I can also send complete configure and build logs.</DIV><DIV><BR class="khtml-block-placeholder"></DIV><DIV>Thanks,</DIV><DIV>Charles</DIV><DIV><BR class="khtml-block-placeholder"></DIV><DIV><BR class="khtml-block-placeholder"></DIV><BR><DIV><DIV>On Nov 8, 2005, at 12:00 PM, <A href="mailto:users-request@open-mpi.org">users-request@open-mpi.org</A> wrote:</DIV><BR class="Apple-interchange-newline"><BLOCKQUOTE type="cite"><P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Message: 1</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Date: Mon, 7 Nov 2005 14:05:02 -0500</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">From: Brian Barrett &lt;<A href="mailto:brbarret@open-mpi.org">brbarret@open-mpi.org</A>&gt;</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Subject: Re: [O-MPI users] Questions about pmpi_wtick and pmpi_wtime</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">To: Open MPI Users &lt;<A href="mailto:users@open-mpi.org">users@open-mpi.org</A>&gt;</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Message-ID: &lt;<A href="mailto:3AE5C826-7EB8-4CA2-A69D-5A29087B63C1@open-mpi.org">3AE5C826-7EB8-4CA2-A69D-5A29087B63C1@open-mpi.org</A>&gt;</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">On Nov 4, 2005, at 11:41 AM, Charles Williams wrote:</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <BLOCKQUOTE type="cite"><P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">I have been using Open MPI in conjunction with PETSc on OSX 10.4, <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">and had been having trouble with undefined symbols when trying <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">tests with PETSc:</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">/usr/bin/ld: Undefined symbols:</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">_pmpi_wtick__</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">_pmpi_wtime__</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">After playing around with things for a while, I realized that these <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">undefined symbols only appeared in libmpi_f90.a, and were somehow <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">being pulled into the PETSc libraries when they were built.<SPAN class="Apple-converted-space">  </SPAN>The <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">problem occurred when trying to build an executable that included <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">libraries with these undefined symbols.<SPAN class="Apple-converted-space">  </SPAN>The simplest solution I <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">could think of was to edit include/mpif.h.in.<SPAN class="Apple-converted-space">  </SPAN>In the last two <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">lines of this file I simply changed:</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <BLOCKQUOTE type="cite"><P style="margin: 0.0px 0.0px 0.0px 20.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica"><SPAN class="Apple-converted-space">      </SPAN>double precision MPI_WTIME, MPI_WTICK, PMPI_WTIME, PMPI_WTICK</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 20.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica"><SPAN class="Apple-converted-space">      </SPAN>external MPI_WTIME, MPI_WTICK, PMPI_WTIME, PMPI_WTICK</FONT></P> </BLOCKQUOTE><P style="margin: 0.0px 0.0px 0.0px 10.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">to:</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">&lt; <SPAN class="Apple-converted-space">      </SPAN>double precision MPI_WTIME, MPI_WTICK</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">&lt; <SPAN class="Apple-converted-space">      </SPAN>external MPI_WTIME, MPI_WTICK</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">This fixed the problem for me, and I am wondering whether this is a <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">reasonable fix.<SPAN class="Apple-converted-space">  </SPAN>My understanding is that the functions are not <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">actually part of open-mpi.<SPAN class="Apple-converted-space">  </SPAN>Would this approach break anything <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">else?<SPAN class="Apple-converted-space">  </SPAN>If not, it would be nice to include it, since the only other <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">option I can think of for fixing things on OSX 10.4 with the <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">current build procedures is to strip libraries of undefined symbols <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 10.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">before they are used.</FONT></P> </BLOCKQUOTE><P style="margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Sorry about that.<SPAN class="Apple-converted-space">  </SPAN>Some time ago, we decided to make MPI_WTIME and <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">MPI_WTICK inline functions in C and not provide a profiling interface <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">for them.<SPAN class="Apple-converted-space">  </SPAN>Unfortunately, it appears we didn't properly update the <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Fortran or C++ interfaces.<SPAN class="Apple-converted-space">  </SPAN>I committed a change so PMPI_WTICK / <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">PMPI_WTIME exist and work properly.<SPAN class="Apple-converted-space">  </SPAN>That should fix your problem.</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">The change will be in the next 1.0 release candidate, and the nightly <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">tarballs that will be available tomorrow morning.<SPAN class="Apple-converted-space">  </SPAN>Release candidates <SPAN class="Apple-converted-space"> </SPAN></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">and betas will be available at the URL below:</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica"><SPAN class="Apple-converted-space">   </SPAN><A href="http://www.open-mpi.org/software/">http://www.open-mpi.org/software/</A></FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Hope this helps,</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px"><BR></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Brian</FONT></P> </BLOCKQUOTE></DIV><BR><DIV> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Charles A. Williams</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Dept. of Earth &amp; Environmental Sciences</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Science Center, 2C01B</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Rensselaer Polytechnic Institute</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Troy, NY<SPAN class="Apple-converted-space">  </SPAN>12180</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">Phone:<SPAN class="Apple-converted-space"><SPAN class="Apple-converted-tab">    </SPAN></SPAN>(518) 276-3369</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">FAX:<SPAN class="Apple-converted-space"><SPAN class="Apple-converted-tab">        </SPAN></SPAN>(518) 276-2012</FONT></P> <P style="margin: 0.0px 0.0px 0.0px 0.0px"><FONT face="Helvetica" size="3" style="font: 12.0px Helvetica">e-mail:<SPAN class="Apple-converted-space"><SPAN class="Apple-converted-tab">    </SPAN></SPAN><A href="mailto:willic3@rpi.edu">willic3@rpi.edu</A></FONT></P> <BR class="Apple-interchange-newline"> </DIV><BR></BODY></HTML>
