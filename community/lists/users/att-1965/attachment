Thanks for your reply. I actually meant OpenMPI (from <a href="http://open-mpi.org">open-mpi.org</a>) and I have compiled that using <br><br>./configure FC=ifort F77=ifort F90=ifort --prefix=$OPENMP_DIR<br><br>I may be asking some dumb questions here, but I'm really a beginner to please bear with me.
<br><br>~Amane<br><br><br><div><span class="gmail_quote">On 10/12/06, <b class="gmail_sendername">Reuti</b> &lt;<a href="mailto:reuti@staff.uni-marburg.de">reuti@staff.uni-marburg.de</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
Hi,<br><br>Am 12.10.2006 um 09:52 schrieb amane001:<br><br>&gt; Hello all,<br>&gt;<br>&gt; I recently switched to OpenMP from LAM-MPI for my code. I'm trying<br>&gt; to run my test code with a PBS scheduler on our local cluster. The
<br>&gt; PBS script is shown below. When the job is executed however, only<br>&gt; one CPU is used for running the test.exe. Another more confusing<br>&gt; aspect is the fact that the following three lines highlighted in<br>
&gt; the code below. Even if I set the OMP_NUM_THREADS = 2, the print<br>&gt; statement in the next line says it's value is 1.<br><br>is it your intention to mix OpenMPI and OpenMP? Which compilation<br>flags did you use for OpenMPI?
<br><br>&gt; Any ideas where I could be going wrong?<br>&gt;<br>&gt; Thank you all for your help in advance!<br>&gt; ~Amane<br>&gt;<br>&gt; #!/bin/sh<br>&gt;<br>&gt; #PBS -e job.err<br>&gt; #PBS -o job.log<br>&gt; #PBS -m ae
<br>&gt; #PBS -q debug<br>&gt; #PBS -l nodes=2<br>&gt;<br>&gt;<br>&gt; cd $PBS_O_WORKDIR<br>&gt; ##################################################<br>&gt; setenv OMP_NUM_THREADS 2<br><br>setenv is csh, you are using (ba)sh.
<br><br>export OMP_NUM_THREADS=2<br><br>but most likely you won't need it at all.<br><br>-- Reuti<br><br>&gt; echo I hope you find the correct number of processors<br>&gt; echo $OMP_NUM_THREADS<br>&gt; ##################################################
<br>&gt; ######### above 3 lines produce the following output --<br>&gt; # I hope you find the correct number of processors<br>&gt; # 1<br>&gt; ##################################################<br>&gt; /usr/local/openmp-
1.1.1/bin/mpirun -np 2 ../source/test.exe&nbsp;&nbsp;&lt;<br>&gt; input.dat&gt;Output<br>&gt;<br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org
</a><br>&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">
users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></blockquote></div><br>

