<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">It isn't in a file - unless you specify it, OMPI will set it automatically based on the number of procs on the node vs. what OMPI thinks are the number of available processors. The question is: why does OMPI not correctly know the number of processors on your machine?<div><br></div><div>I don't remember now, but did you send us this info:</div><div><br></div><div>&nbsp;&nbsp;<a href="http://www.open-mpi.org/community/help/">http://www.open-mpi.org/community/help/</a></div><div><br></div><div>If not, could you please do so? It would help us track down the problem.</div><div><br></div><div>Thanks</div><div>Ralph</div><div><br><div><div>On Apr 7, 2009, at 2:16 PM, Steve Kargl wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div>On Tue, Apr 07, 2009 at 01:40:13PM -0600, Ralph Castain wrote:<br><blockquote type="cite">I would really suggest looking at George's note first as I think you &nbsp;<br></blockquote><blockquote type="cite">are chasing your tail here. It sounds like the most likely problem is &nbsp;<br></blockquote><blockquote type="cite">that OMPI thinks you are oversubscribed and is setting sched_yield &nbsp;<br></blockquote><blockquote type="cite">accordingly. which would fully account for these diffs.<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">Note that the methods for setting sched yield are different between &nbsp;<br></blockquote><blockquote type="cite">the various releases, so something could be catching you here. If you &nbsp;<br></blockquote><blockquote type="cite">are sure you aren't oversubscribing, then set -mca mpi_yield_when_idle &nbsp;<br></blockquote><blockquote type="cite">0 on your cmd line to override any internal settings.<br></blockquote><blockquote type="cite"><br></blockquote><br>'-mca mpi_yield_when_idle 0' returns the performance of 1.3.1 to<br>that of 1.2.9. &nbsp;In fact, 1.3.1 may be marginally better. &nbsp;A comparison<br>can be see at<br><br><a href="http://troutmask.apl.washington.edu/~kargl/ompi_cmp_yield.jpg">http://troutmask.apl.washington.edu/~kargl/ompi_cmp_yield.jpg</a><br><br>So, in what file is sched_yield set? <br><br>-- <br>Steve<br>_______________________________________________<br>users mailing list<br>users@open-mpi.org<br>http://www.open-mpi.org/mailman/listinfo.cgi/users<br></div></blockquote></div><br></div></body></html>
