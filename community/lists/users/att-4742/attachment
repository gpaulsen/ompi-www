Wow, I&#39;m amazed... it just works &quot;out-of-the-box&quot; configured with with-openib.&nbsp; I guess the new kernel supplies everything I need.<br><br>Thanks a bunch for the clues.<br><br>&nbsp; Brian<br><br><div class="gmail_quote">
On Dec 19, 2007 5:55 AM, Jeff Squyres &lt;<a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt; wrote:<br><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
In general, you need a functioning IB subsystem on your machines for<br>OMPI to build for and use IB. &nbsp;This includes both the set of kernel<br>drivers and the userspace libraries. &nbsp;In particular, Open MPI v1.2<br>uses the &quot;ibverbs&quot; library. &nbsp;If OMPI can find the ibverbs library and
<br>headers during its configure phase, it will build IB support and try<br>to use it at run time.<br><br>You can see if OMPI finds what it needs in the stdout of configure --<br>search for the string &quot;openib&quot; and see where it configures the BTL
<br>openib component. &nbsp;If it ends with a message indicating that it will<br>compile the openib BTL component, then you&#39;re good. &nbsp;If not, you&#39;ll<br>see some specific tests that fail that indicate why it won&#39;t include
<br>that support (e.g., can&#39;t find the right header files or somesuch).<br><div><div></div><div class="Wj3C7c"><br><br>On Dec 19, 2007, at 8:49 AM, pat.o&#39;<a href="mailto:bryant@exxonmobil.com">bryant@exxonmobil.com
</a> wrote:<br><br>&gt; Brian,<br>&gt; &nbsp; &nbsp;Here is how I do it:<br>&gt;<br>&gt; ./configure --prefix /opt/openmpi-1.2.4 --with-openib=/usr/local/<br>&gt; ofed \<br>&gt; --without-tm CC=icc CXX=icpc F77=ifort FC=ifort \<br>
&gt; --with-threads=posix --enable-mpi-threads<br>&gt;<br>&gt;<br>&gt; J.W. (Pat) O&#39;Bryant,Jr.<br>&gt; Business Line Infrastructure<br>&gt; Technical Systems, HPC<br>&gt; Office: 713-431-7022<br>&gt;<br>&gt;<br>&gt;<br>
&gt;<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Brian Budge&quot;<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;brian.budge@g<br>&gt;<br>&gt; <a href="http://mail.com" target="_blank">mail.com</a>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;To<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Sent by: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Open MPI Users&quot;
<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; users-bounces@ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;<a href="mailto:users@open-mpi.org">users@open-mpi.org</a>&gt;<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; open-<br>&gt; <a href="http://mpi.org" target="_blank">mpi.org</a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cc
<br>&gt;<br>&gt;<br>&gt; Subject<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 12/19/07 12:35 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [OMPI users] new to MPI<br>&gt; +infiniband<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AM<br>&gt;<br>&gt;<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Please respond<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; to
<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Open MPI Users<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;users@open-mp<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://i.org" target="_blank">i.org</a>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; Hi all -
<br>&gt;<br>&gt; I have been using OpenMPI for quite a while now, and its working out<br>&gt; great.<br>&gt; I was looking at the FAQ and trying to figure out how to configure<br>&gt; OpenMPI<br>&gt; with infiniband. &nbsp;It shows how to enable IB pointing to the OFED
<br>&gt; directory.<br>&gt;<br>&gt;<br>&gt; I have infiniband built into the kernel, along with IP over IB and<br>&gt; with the<br>&gt; Mellanox drivers. &nbsp;What would I still need to install, and how would I<br>&gt; configure OpenMPI to work with this?
<br>&gt;<br>&gt; Thanks,<br>&gt; &nbsp;Brian_______________________________________________<br>&gt; users mailing list<br>&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">
http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>&gt;<br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>&gt; 
<a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br><br><br></div></div><font color="#888888">--<br>Jeff Squyres<br>Cisco Systems<br></font>
<div><div></div><div class="Wj3C7c">_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">
http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div></blockquote></div><br>

