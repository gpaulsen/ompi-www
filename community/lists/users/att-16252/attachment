<font size="4">Hi all,<br><br>I am trying to setup a small SGE cluster with OpenMPI integrated but I am totally stuck when trying to run a openmpi job to the SGE&#39;s PE.<br><br>I mainly followed the guide sge-snow.pdf from Revolutions Computing and <a href="http://idolinux.blogspot.com/2010/04/quick-install-of-open-mpi-with-grid.html">http://idolinux.blogspot.com/2010/04/quick-install-of-open-mpi-with-grid.html</a><br>
<br>The cluster is entirely ubuntu 10.10 based, both SGE 6.2u5 and OpenMPI 1.3 are directly from apt-get except OpenMPI is rebuilt from source with --with-sge flag.<br><br>Note: OpenMPI has been installed on all execution hosts, not on the queue master and submission host.<br>
<br>I submited a job by <br><br></font><font size="4">qsub -pe orte 8 ./ompi_job.sh</font><br><font size="4"><br>The error I got looks like<br>=============================================================================================================================<br>
</font><pre><font size="4"><span class="pun">[</span><span class="pln">sgeqexec01</span><span class="pun">:</span><span class="lit">06612</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[[</span><span class="pln">INVALID</span><span class="pun">],</span><span class="pln">INVALID</span><span class="pun">]</span><span class="pln"> ORTE_ERROR_LOG</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Not</span><span class="pln"> found </span><span class="kwd">in</span><span class="pln"> file </span><span class="pun">../../../../../../</span><span class="pln">orte</span><span class="pun">/</span><span class="pln">mca</span><span class="pun">/</span><span class="pln">ess</span><span class="pun">/</span><span class="pln">hnp</span><span class="pun">/</span><span class="pln">ess_hnp_module</span><span class="pun">.</span><span class="pln">c <br>
at line </span><span class="lit">161</span><span class="pln"><br></span><span class="pun">--------------------------------------------------------------------------</span><span class="pln"><br></span><span class="typ">It</span><span class="pln"> looks like orte_init failed </span><span class="kwd">for</span><span class="pln"> some reason</span><span class="pun">;</span><span class="pln"> your parallel process </span><span class="kwd">is</span><span class="pln"><br>
likely to abort</span><span class="pun">.</span><span class="pln">  </span><span class="typ">There</span><span class="pln"> are many reasons that a parallel process can<br>fail during orte_init</span><span class="pun">;</span><span class="pln"> some of which are due to configuration </span><span class="kwd">or</span><span class="pln"><br>
environment problems</span><span class="pun">.</span><span class="pln">  </span><span class="typ">This</span><span class="pln"> failure appears to be an </span><span class="kwd">internal</span><span class="pln"> failure</span><span class="pun">;</span><span class="pln"><br>
here</span><span class="str">&#39;s some additional information (which may only be relevant to an<br>Open MPI developer):<br><br>  orte_plm_base_select failed<br>  --&gt; Returned value Not found (-13) instead of ORTE_SUCCESS<br>
--------------------------------------------------------------------------<br>[sgeqexec01:06612] [[INVALID],INVALID] ORTE_ERROR_LOG: Not found in file ../../../orte/runtime/orte_init.c <br>at line 132<br>--------------------------------------------------------------------------<br>
It looks like orte_init failed for some reason; your parallel process is<br>likely to abort.  There are many reasons that a parallel process can<br>fail during orte_init; some of which are due to configuration or<br>environment problems.  This failure appears to be an internal failure;<br>
here&#39;</span><span class="pln">s some additional information </span><span class="pun">(</span><span class="pln">which may only be relevant to an<br></span><span class="typ">Open</span><span class="pln"> MPI developer</span><span class="pun">):</span><span class="pln"><br>
<br>  orte_ess_set_name failed<br>  </span><span class="pun">--&gt;</span><span class="pln"> </span><span class="typ">Returned</span><span class="pln"> value </span><span class="typ">Not</span><span class="pln"> found </span><span class="pun">(-</span><span class="lit">13</span><span class="pun">)</span><span class="pln"> instead of ORTE_SUCCESS<br>
</span><span class="pun">--------------------------------------------------------------------------</span><span class="pln"><br></span><span class="pun">[</span><span class="pln">sgeqexec01</span><span class="pun">:</span><span class="lit">06612</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[[</span><span class="pln">INVALID</span><span class="pun">],</span><span class="pln">INVALID</span><span class="pun">]</span><span class="pln"> ORTE_ERROR_LOG</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Not</span><span class="pln"> found </span><span class="kwd">in</span><span class="pln"> file </span><span class="pun">../../../../../</span><span class="pln">orte</span><span class="pun">/</span><span class="pln">tools</span><span class="pun">/</span><span class="pln">orterun</span><span class="pun">/</span><span class="pln">orterun</span><span class="pun">.</span><span class="pln">c <br>
at line </span><span class="lit">541</span></font></pre><font size="4">==============================================================================================================================<br><br>For troubleshooting I have done several things below:<br>
<br>1) passwordless SSH has been configurated properly for the execution hosts and the queue master.<br><br>pwbcad<span style="font-family: courier new,monospace;">@sgeqmast01:~$ ssh sgeqexec01 </span>uptime<br style="font-family: courier new,monospace;">
<span style="font-family: courier new,monospace;"> 14:35:54 up  2:47,  1 user,  load average: 0.10, 0.08, 0.02</span><br><br>2) I could run a openmpi job outside the SGE successfully. <br><br><span style="font-family: courier new,monospace;">mpirun -host n1, n2 -np 8 ./ompi_job</span><br>
<br>3) I submitted job to a queue directly instead of a PE, the job could run and completed successfully<br><br><span style="font-family: courier new,monospace;">qsub -q dev.q ./ompi_job.sh</span><br style="font-family: courier new,monospace;">
<br>4) Although I don&#39;t think PATH and LD_LIBRARY_PATH would cause issues in ubuntu, I still add OpenMPI binaries and libraries to both. But it didn&#39;t help.<br><br>It will be very appreciated if anyone can share their experience!<br>
<br>Derrick<br><br></font>

