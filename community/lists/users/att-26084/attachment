<div dir="ltr"><div>Dear all,</div><div><br></div><div>I have the following problem:</div><div><br></div><div>In my program each rank has a vector, where the position indicates where I have to send the data.</div><div><br></div><div>For example for rank 0, I have:</div><div><br></div><div><i>ALLOCATE(Ndata2send(0,MPI%nCPU-1)</i></div><div> </div><div><i>Ndata2send(:) = 0,10,10,16</i></div><div><i><br></i></div><div>where MPI%nCPU is the number of cPU, in my case 4</div><div><br></div><div>Thins means that I have to send 10 to rank 1, 10 to rank 2 and 16 to rank 3</div><div><br></div><div>I have the following cycle:</div><div><br></div><div><div>  icount=1</div><div>  DO iCPU=0,MPI%nCPU-1</div><div>     IF(iCPU.NE.MPI%rank)THEN</div><div>        iTag=iCPU</div><div>        CALL MPI_ISEND(Ndata2send(iCPU),1,MPI_INTEGER,iCPU,iTag,MPI_COMM_WORLD,send_request(icount),MPI%iErr)</div><div>        icount=icount+1</div><div>     ENDIF</div><div>  ENDDO</div><div><br></div><div>  icount=1</div><div>  DO iCPU=0,MPI%nCPU-1</div><div>     IF(iCPU.NE.MPI%rank)THEN</div><div>        iTag=iCPU</div><div>        CALL MPI_IRECV(Ndata2recv(iCPU),1,MPI_INTEGER,iCPU,iTag,MPI_COMM_WORLD,recv_request(icount),MPI%iErr)</div><div>        icount=icount+1</div><div>     ENDIF</div><div>  ENDDO</div></div><div><br></div><div>and then, to wait all comunication I have:</div><div><br></div><div><div><i> CALL MPI_WAITALL(3,send_request,send_status_list,MPI%iErr)</i></div><div><i> CALL MPI_WAITALL(3,recv_request,recv_status_list,MPI%iErr)</i></div></div><div><br></div><div><br></div><div>The problem is that comunication never stops.</div><div><br></div><div>Have I missed something? Please help me to understand what I havent&#39;t understood.</div><div><br></div><div>Thanks</div><div><br></div><div> </div><div>                    </div><div><br></div><br clear="all"><div><div class="gmail_signature">Diego<br><br></div></div>
</div>

