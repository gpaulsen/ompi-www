Hi, <br>I had found that the problem is the firewall on one of my computers. When I set firewall allow to connect with orther computer through tcp with port from 1024 to 4999, it is ok, there is no error about connection. But I still can not checkpoint and restart my program.
<br><br>The error is:<br>$ mpirun -np 3 -host <a href="http://172.28.11.40/" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">172.28.11.40</a>,<a href="http://172.28.11.28/" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">
172.28.11.28</a>,<a href="http://172.28.11.18/" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">172.28.11.18</a> -am ft-enable-cr send_recv<br> $ ompi-checkpoint 5693<div style="margin-left: 40px;">
--------------------------------------------<br>Error: The application (PID = 5693) failed to checkpoint properly.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returned -1.<br><br>--------------------------------------------------------------------------
</div><br>There is only one local snapshot created on the computer where I run command mpirun and ompi-checkpoint, and after create that local snapshot the checkpoint is terminated with above error.<br>Some body help me to solve that error!
<br>Thanks.<br><br><div><span class="gmail_quote">On 10/2/07, <b class="gmail_sendername">Hiep Bui Hoang</b> &lt;<a href="mailto:bhoanghiep@gmail.com">bhoanghiep@gmail.com</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
<br>Hi,<br>I had setup Open MPI &quot;trunk_16171&quot; for 3 computers with Lan connection, and set environment parameters, ssh without typing password for each node. I use <font size="-1">Red Hat Enterprise Linux 5</font>

. The program I tried is &#39;send_recv&#39;. I run successful my &#39;send_recv&#39; program in those 3 nodes. And checkpoint/restart successful on 1 node. But I had error when try to checkpoint/restart that program on 3 nodes.
<br><br>&nbsp;&nbsp;&nbsp; $ mpirun -np 4 -host <a href="http://172.28.11.40" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">172.28.11.40</a>,<a href="http://172.28.11.28" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">
172.28.11.28</a>,<a href="http://172.28.11.18" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">172.28.11.18</a> -am ft-enable-cr send_recv<br><br><div style="margin-left: 40px;">
....<br>Send 32 from rank 0 <br>&nbsp;Receive 32 at rank 1 <br>Send 33 from rank 0 <br>&nbsp;Receive 33 at rank 1 <br>[HNP:05700] [1,2]-[1,3] mca_oob_tcp_peer_try_connect: connect to <a href="http://172.28.11.40:3680" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">
172.28.11.40:3680
</a> failed: Software caused connection abort (103)<br>[HNP:05700] [1,2]-[1,3] mca_oob_tcp_peer_try_connect: connect to <a href="http://172.28.11.40:3680" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">
172.28.11.40:3680</a> failed, connecting over all interfaces failed!
<br>[node2:04837] [1,1]-[1,3] mca_oob_tcp_peer_try_connect: connect to <a href="http://172.28.11.40:3680" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">172.28.11.40:3680</a> failed: Software caused connection abort (103)
<br>[node2:04837] [1,1]-[1,3] mca_oob_tcp_peer_try_connect: connect to 
<a href="http://172.28.11.40:3680" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">172.28.11.40:3680</a> failed, connecting over all interfaces failed!<br>&nbsp;Receive 34 at rank 1 <br>Send 34 from rank 0 
<br>.....<br></div><br>PID of above mpirun is 5693.<br>&nbsp;&nbsp;&nbsp; $ ompi-checkpoint 5693
<br><div style="margin-left: 40px;">--------------------------------------------------------------------------<br>Error: The application (PID = 5693) failed to checkpoint properly.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returned -1.<br><br>--------------------------------------------------------------------------
<br></div><br>Somebody know about this error?<br>Thanks.<br><br>This is my &#39;send_recv&#39; program:<br><br>main(int argc, char **argv)<br>{<br>&nbsp;&nbsp; int node;<br>&nbsp;&nbsp; int MAX = 1000;<br>&nbsp;&nbsp; MPI_Status status;<br>&nbsp;&nbsp; MPI_Init(&amp;argc,&amp;argv);
<br>&nbsp;&nbsp; MPI_Comm_rank(MPI_COMM_WORLD, &amp;node);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; int&nbsp;&nbsp; &nbsp;i = 0;<br>&nbsp;&nbsp; while( i &lt;= MAX){<br>&nbsp;&nbsp; &nbsp;if( 0 == node){<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;MPI_Send(&amp;i, 1, MPI_INT, 1, 10, MPI_COMM_WORLD);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;printf(&quot;Send %d from rank %d \n&quot;,i, node);
<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;sleep(1);<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;if( 1 == node ){<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;MPI_Recv(&amp;i, 1, MPI_INT, 0, 10, MPI_COMM_WORLD, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;status);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;printf(&quot; Receive %d at rank %d \n&quot;,i,node);
<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;sleep(1);<br>&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;i++;<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; MPI_Finalize();<br>}<br><br>
</blockquote></div><br>

