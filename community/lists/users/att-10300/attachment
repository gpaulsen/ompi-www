<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Hello,<div><br></div><div><br><div><div>On Aug 11, 2009, at &nbsp;8:15 AM, Ralph Castain wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><span class="Apple-style-span" style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 'Lucida Sans Typewriter'; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; ">You can turn off those mca params I gave you as you are now past that point. I know there are others that can help debug that TCP btl error, but they can help you there.</span></blockquote><br></div><div>Just to eliminate the mitgcm from the debugging I compiled example/hello_c.c&nbsp;and run as:</div><div><br></div><div><font class="Apple-style-span" face="monospace"><div>&nbsp;/usr/local/openmpi/bin/mpirun --debug-daemons -n 8 -host xserve01 hello_c &gt;&amp; hello_c4_1host.txt</div><div><br></div><div>There is no ostensible problem. &nbsp;If I run as:</div></font></div><span class="Apple-style-span" style="font-family: monospace; "><div><br></div><div>/usr/local/openmpi/bin/mpirun --debug-daemons -n 8 -host xserve01,xserve02 hello_c &gt;&amp; hello_c4_2host.txt</div><div><br></div><div>The process says Hello, but hangs at the end, and needs to be killed with ^C.</div><div><br></div><div><div>I then modified connectivity_c to include a printf as MPI is initialized, and hardwired verbose=1. &nbsp;This completes, and appears to work fine..</div><div><br></div></div><div><div>/usr/local/openmpi/bin/mpirun --debug-daemons -n 8 -host xserve01 connectivity_c &gt;&amp; connectivity_c8_1host.txt</div><div><br></div><div>However, again, two hosts sours the mix:</div><div><br></div><div><div>/usr/local/openmpi/bin/mpirun --debug-daemons -n 8 -host xserve01,xserve02 connectivity_c &gt;&amp; connectivity_c8_2host.txt</div><div><br></div><div>This&nbsp;hangs, and after waiting a minute or so we see that rank 0--4 on xserve01 cannot contact rank 5 (presumably on xserve02). &nbsp;</div><div><br></div><div>It seems that I have something wrong in my tcp setup, but communication between these servers worked yesterday using 1.1.5, and ping etc all work fine, so something else is up. &nbsp;Some sort of port permissions? &nbsp;</div><div><br></div><div>Th most glaring error I see in these is:</div><div><div><div><br></div><div>[xserve02.local:43625] [[28627,0],2] orte:daemon:send_relay - recipient list is empty!</div><div><br></div><div>I see reference in the archives to a similar error where "contacts.txt" could not be found. &nbsp;I've had trouble with 10.5.7 with temporary directories, so maybe that is the issue?</div></div></div><div><br></div><div>Thanks Jody</div><div><br></div><div></div></div></div></span></div></body></html>
