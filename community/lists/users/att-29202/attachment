Rob,<div><br></div><div>I do not know how Debian packaged openmpi, and they should be asked instead of openmpi.</div><div><br></div><div>an other option to get things work is to add the path to openmpi libraries in the ld conf.</div><div>for example, append</div><div>/opt/openmpi/lib</div><div>to /etc/ld.so.conf</div><div>(or into a new file called /etc/ld.so.conf.d/openmpi, that works at least on redhat)<br>and run</div><div>ldconfig</div><div><br></div><div>that works for all users, but should be used if there is only one openmpi version available on the system.</div><div>as far as I am concerned, configure with --enable-mpirun-prefix-by-default is a much better option.</div><div><br></div><div>Cheers,</div><div><br></div><div>Gilles</div><div><br>On Saturday, May 14, 2016, Rob Malpass &lt;<a href="mailto:lug@getiton.myzen.co.uk">lug@getiton.myzen.co.uk</a>&gt; wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div lang="EN-GB" link="blue" vlink="purple"><div><p class="MsoNormal"><span style="font-size:14.0pt">Hi all<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">I posted about a fortnight ago to this list as I was having some trouble getting my nodes to be controlled by my master node.   Perceived wisdom at the time was to compile with the –enable-orterun-prefix-by-default.<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">For some time I’d been getting cannot open libopen-rte.so.7 which points to a problem with LD_LIBRARY_PATH.   I had been able to run it on nodes 3 and 4 even though (from headnode) if I do<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">ssh node4 ‘echo $LD_LIBRARY_PATH’<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">returns a blank line.   However – as I say it’s working on nodes 3 and 4.<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">I had been hacking for ages on nodes 1 and 2 getting the same error but still with LD_LIBRARY_PATH apparently not set for an interactive login.<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">Almost in desperation, I cheated:<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">sudo  apt-get install openmpi-bin<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">and hey presto.   I can now do (from head node)<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">mpirun –H node2,node3,node4 –n 10 foo<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">and it works fine.   So clearly apt-get install has set something that I’d not done (and it’s seemingly not LD_LIBRARY_PATH) as ssh node2 ‘echo $LD_LIBRARY_PATH’ still returns a blank line.<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">Can anyone tell me what might be in the install script so I can get a clue?<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:14.0pt">Thanks<u></u><u></u></span></p></div></div></blockquote></div>

