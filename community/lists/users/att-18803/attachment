<div>Hi there.<br></div><div><br></div><div>I am facing a very strange problem when using MPI_Barrier over an inter-communicator after some operations I describe bellow:</div><div><br></div><div>1) I start a server calling mpirun.</div>
<div>2) The server spawns 2 copies of a client using MPI_Comm_spawn, creating an inter-communicator between the two groups. The server group with 1 process (lets name it as A) and the client group with 2 processes (group B).</div>
<div>3) After that, I need to detach one of the processes (rank 0) in group B from the inter-communicator AB. To do that I do the following steps:</div><div><br></div><div><div>Server side:</div><div>        .....<br></div>
<div>        tmp_inter_comm = client_comm.Create ( client_comm.Get_group ( ) );</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>client_comm.Free ( );</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>client_comm = tmp_inter_comm;</div>
</div><div>        .....<br></div><div>        client_comm.Barrier();</div><div>        .....<br></div><div><br></div><div>Client side:</div><div>        ....</div><div>        rank = 0;</div><div>        tmp_inter_comm = server_comm.Create ( server_comm.Get_group ( ).Excl ( 1, &amp;rank ) );</div>
<div><span class="Apple-tab-span" style="white-space:pre">	</span>server_comm.Free ( );</div><div><span class="Apple-tab-span" style="white-space:pre">	</span>server_comm = tmp_inter_comm;</div><div>        .....</div><div>
        if (server_comm != MPI::COMM_NULL)</div><div>            server_comm.Barrier();</div><div><br></div><div><br></div><div>The problem: everything works fine until the call to Barrier. In that point, the server exits the barrier, but the client at the group B does not. Observe that we have only one process inside B, because I used Excl to remove one process from the original group.</div>
<div><br></div><div>p.s.: This occurs in the version 1.5.4 and the C++ API.<br></div><div><br></div><div>I am very concerned about this problem because this solution plays a very important role in my master thesis.</div><div>
<br></div><div>Is this an ompi problem or am I doing something wrong?</div><div><br></div><div>Thanks in advance</div><div><br></div><div>Rodrigo Oliveira</div>

