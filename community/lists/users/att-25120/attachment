<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br><div><div>On Aug 21, 2014, at 10:58 AM, Filippo Spiga &lt;<a href="mailto:spiga.filippo@gmail.com">spiga.filippo@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Dear Ralph<div><br></div><div>On Aug 21, 2014, at 2:30 PM, Ralph Castain &lt;<a href="mailto:rhc@open-mpi.org">rhc@open-mpi.org</a>&gt; wrote:<br><blockquote type="cite">I'm afraid that none of the mapping or binding options would be available under srun as those only work via mpirun. You can pass MCA params in the environment of course, or in default MCA param files.<br></blockquote><div><br></div>I understand. I hopefully be able to still pass the LAMA mca options as environment variables</div></div></blockquote><div><br></div>I'm afraid not - LAMA doesn't exist in Slurm, only in mpirun itself</div><div><br><blockquote type="cite"><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div>....I fear by default srun completely takes over the process binding.</div><div><br></div><div><br></div><div>I got another problem. On my cluster I have two GPU and two Ivy Bridge processors. To maximize the PCIe bandwidth I want to allocate GPU 0 to socket 0 and GPU 1 to socket 1. I use a script like this</div><div><br></div><div><font face="Andale Mono">#!/bin/bash<br>lrank=$OMPI_COMM_WORLD_LOCAL_RANK<br>case ${lrank} in<br>0)<br>&nbsp;export CUDA_VISIBLE_DEVICES=0<br>&nbsp;"$@"<br>;;<br>1)<br>&nbsp;export CUDA_VISIBLE_DEVICES=1<br>&nbsp;"$@"<br>;;<br>esac</font></div><div><br></div><div><br></div><div>But OMP_COMM_WORLD_LOCAL_RANK is not defined is I use srun with PMI2 as luncher. Is there any equivalent option/environment variable that will help me achieve the same result?</div></div></blockquote><div><br></div>I'm afraid not - that's something we added. I'm unaware of any similar envar from Slurm, I'm afraid</div><div><br></div><div><br><blockquote type="cite"><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><br></div><div>Thanks in advance!</div><div>F</div><div><br><div>--<br>Mr. Filippo SPIGA, M.Sc.<br><a href="http://filippospiga.info/">http://filippospiga.info</a>&nbsp;~ skype: filippo.spiga<br><br>«Nobody will drive us out of Cantor's paradise.» ~ David Hilbert<br><br>*****<br>Disclaimer: "Please note this message and any attachments are CONFIDENTIAL and may be privileged or otherwise protected from disclosure. The contents are not to be disclosed to anyone other than the addressee. Unauthorized recipients are requested to&nbsp;preserve this confidentiality and to advise the sender immediately of any error in transmission."<br><br></div><br></div></div>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/users<br>Link to this post: http://www.open-mpi.org/community/lists/users/2014/08/25119.php</blockquote></div><br></body></html>
