<div dir="ltr">Dear OpenMPI developers,<br>i&#39;m testing checkpoint and restart with OpenMPI 1.4 nightly. Test machine is IBM Blade System over Infiniband with 4 processors every communication node.<br>At the moment,&nbsp; I have some problems. My application is&nbsp; a simply communication ring between processors, with parametric loop. <br>
<br><b><u>First case:</u></b> 8 procs over 2 nodes.<br><br>Start command: <br><br>$ mpirun -machinefile machinefile -am ft-enable-cr ./ring -t 5000000<br><br>The output is:<br><br>[node0316:20037] mca: base: components_open: Looking for filem components<br>
[node0316:20037] mca: base: components_open: including only filem<br>components that are checkpoint enabled<br>[node0316:20037] mca: base: components_open: (filem) Component rsh is<br>Checkpointable<br>[node0316:20037] mca: base: components_open: opening filem components<br>
[node0316:20037] mca: base: components_open: found loaded component rsh<br>[node0316:20037] mca: base: components_open: component rsh has no<br>register function<br>[node0316:20037] filem:rsh: open()<br>[node0316:20037] filem:rsh: open: priority&nbsp;&nbsp; = 20<br>
[node0316:20037] filem:rsh: open: verbosity&nbsp; = 0<br>[node0316:20037] filem:rsh: open: cp command&nbsp; = scp<br>[node0316:20037] filem:rsh: open: rsh command&nbsp; = ssh<br>[node0316:20037] mca: base: components_open: component rsh open function<br>
successful<br>[node0316:20037] mca:base:select: Auto-selecting filem components<br>[node0316:20037] mca:base:select:(filem) Querying component [rsh]<br>[node0316:20037] mca:base:select:(filem) Query of component [rsh] set<br>
priority to 20<br>[node0316:20037] mca:base:select:(filem) Selected component [rsh]<br>[node0316:20037] mca: base: components_open: Looking for snapc components<br>[node0316:20037] mca: base: components_open: including only snapc<br>
components that are checkpoint enabled<br>[node0316:20037] mca: base: components_open: (snapc) Component full is<br>Checkpointable<br>[node0316:20037] mca: base: components_open: opening snapc components<br>[node0316:20037] mca: base: components_open: found loaded component full<br>
[node0316:20037] mca: base: components_open: component full has no<br>register function<br>[node0316:20037] snapc:full: open()<br>[node0316:20037] snapc:full: open: priority&nbsp;&nbsp;&nbsp; = 20<br>[node0316:20037] snapc:full: open: verbosity&nbsp;&nbsp; = 100<br>
[node0316:20037] snapc:full: open: skip_filem&nbsp; = False<br>[node0316:20037] mca: base: components_open: component full open<br>function successful<br>[node0316:20037] mca:base:select: Auto-selecting snapc components<br>[node0316:20037] mca:base:select:(snapc) Querying component [full]<br>
[node0316:20037] snapc:full: component_query()<br>[node0316:20037] mca:base:select:(snapc) Query of component [full] set<br>priority to 20<br>[node0316:20037] mca:base:select:(snapc) Selected component [full]<br>[node0316:20037] snapc:full: module_init(1, 1)<br>
[node0316:20037] snapc:full: module_init: Global Snapshot Coordinator<br>** HANG**<br><br>The application doesn&#39;t start, and appears locked.<br><br>Strace command before mpirun shows&nbsp; the informations below:<br><br>poll([{fd=4, events=POLLIN}, {fd=5, events=POLLIN}, {fd=6,<br>
events=POLLIN}], 3, 1000) = 0<br>poll([{fd=4, events=POLLIN}, {fd=5, events=POLLIN}, {fd=6,<br>events=POLLIN}], 3, 1000) = 0<br>poll([{fd=4, events=POLLIN}, {fd=5, events=POLLIN}, {fd=6,<br>events=POLLIN}], 3, 1000) = 0<br>
poll([{fd=4, events=POLLIN}, {fd=5, events=POLLIN}, {fd=6,<br>events=POLLIN}], 3, 1000) = 0<br>poll([{fd=4, events=POLLIN}, {fd=5, events=POLLIN}, {fd=6,<br>events=POLLIN}], 3, 1000) = 0<br>poll(...<br><br>doing nothing..<br>
<br><b><u>Second case:</u></b> 1 node, 4 processor ( without intercommunication over Infiniband)<br><br>In this case, mpirun works well, but the checkpoint procedure fails:<br><br>ompi-checkpoint 20109<br>[node0316:20134] Error: Unable to get the current working directory<br>
[node0316:20134] [[42404,0],0] ORTE_ERROR_LOG: Not found in file<br>orte-checkpoint.c at line 395<br>[node0316:20134] HNP with PID 20109 Not found!<br><br>I don&#39;t understand why OpenMPI doesn&#39;t find that log file.<br>
<br>Any idea? <br><br>Thanks in advance.<br><br><br><br><br clear="all"><br>-- <br>Gabriele Fatigati<br><br>CINECA Systems &amp; Tecnologies Department<br><br>Supercomputing Group<br><br>Via Magnanelli 6/3, Casalecchio di Reno (BO) Italy<br>
<br><a href="http://www.cineca.it">www.cineca.it</a> Tel: +39 051 6171722<br><br><a href="mailto:g.fatigati@cineca.it">g.fatigati@cineca.it</a> <br>
</div>

