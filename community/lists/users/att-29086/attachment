Note there is no progress thread in openmpi 1.10<div>from a pragmatic point of view, that means that for &quot;large&quot; messages, no data is sent in MPI_Isend, and the data is sent when MPI &quot;progresses&quot; e.g. call a MPI_Test, MPI_Probe, MPI_Recv or some similar subroutine.</div><div>in your example, the data is transferred after the first usleep completes.</div><div><br></div><div>that being said, it takes quite a while, and there could be an issue.</div><div>what if you use MPI_Send instead () ?</div><div>what if you send/Recv a large message first (to &quot;warmup&quot; connections), MPI_Barrier, and then start your MPI_Isend ?</div><div><br></div><div>Cheers,</div><div><br></div><div>Gilles</div><div><br></div><div><br>On Thursday, May 5, 2016, Zhen Wang &lt;<a href="mailto:toddwz@gmail.com">toddwz@gmail.com</a>&gt; wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><div><div>Hi,<br><br></div>I&#39;m having a problem with Isend, Recv and Test in Linux Mint 16 Petra. The source is attached.<br><br>Open MPI 1.10.2 is configured with<br>./configure --enable-debug --prefix=/home/&lt;me&gt;/Tool/openmpi-1.10.2-debug<br><br>The source is built with<br>~/Tool/openmpi-1.10.2-debug/bin/mpiCC a5.cpp<br><br>and run in one node with<br>~/Tool/openmpi-1.10.2-debug/bin/mpirun -n 2 ./a.out<br><br></div>The output is in the end. What puzzles me is why MPI_Test is called so many times, and it takes so long to send a message. Am I doing something wrong? I&#39;m simulating a more complicated program: MPI 0 Isends data to MPI 1, computes (usleep here), and calls Test to check if data are sent. MPI 1 Recvs data, and computes.<br><br>Thanks in advance.<br><div><br><div><br clear="all"><div><div><div><div dir="ltr">Best regards,<div>Zhen<br><br>MPI 0: Isend of 0 started at 20:32:35.<br>MPI 1: Recv of 0 started at 20:32:35.<br>MPI 0: MPI_Test of 0 at 20:32:35.<br>MPI 0: MPI_Test of 0 at 20:32:35.<br>MPI 0: MPI_Test of 0 at 20:32:35.<br>MPI 0: MPI_Test of 0 at 20:32:35.<br>MPI 0: MPI_Test of 0 at 20:32:35.<br>MPI 0: MPI_Test of 0 at 20:32:35.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:36.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:37.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:38.<br>MPI 0: MPI_Test of 0 at 20:32:39.<br>MPI 0: MPI_Test of 0 at 20:32:39.<br>MPI 0: MPI_Test of 0 at 20:32:39.<br>MPI 0: MPI_Test of 0 at 20:32:39.<br>MPI 0: MPI_Test of 0 at 20:32:39.<br>MPI 0: MPI_Test of 0 at 20:32:39.<br>MPI 1: Recv of 0 finished at 20:32:39.<br>MPI 0: MPI_Test of 0 at 20:32:39.<br>MPI 0: Isend of 0 finished at 20:32:39.<br><br></div></div></div></div>
</div></div></div></div>
</blockquote></div>

