<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type content="text/html; charset=ks_c_5601-1987"><meta name=Generator content="Microsoft Word 14 (filtered medium)"><!--[if !mso]><style>v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style><![endif]--><style><!--
/* Font Definitions */
@font-face
	{font-family:"¸¼Àº °íµñ";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"\@¸¼Àº °íµñ";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:HY¾èÀº»ù¹°M;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:"\@HY¾èÀº»ù¹°M";
	panose-1:2 3 6 0 0 1 1 1 1 1;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"¸¼Àº °íµñ";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-priority:99;
	mso-style-link:"Ç³¼± µµ¿ò¸» ÅØ½ºÆ® Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-autospace:none;
	word-break:break-hangul;
	font-size:9.0pt;
	font-family:"¸¼Àº °íµñ";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-priority:34;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:40.0pt;
	margin-bottom:.0001pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-left:4.0gd;
	mso-para-margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-autospace:none;
	word-break:break-hangul;
	font-size:10.0pt;
	font-family:"¸¼Àº °íµñ";}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"¸¼Àº °íµñ";
	color:windowtext;}
span.Char
	{mso-style-name:"Ç³¼± µµ¿ò¸» ÅØ½ºÆ® Char";
	mso-style-priority:99;
	mso-style-link:"Ç³¼± µµ¿ò¸» ÅØ½ºÆ®";
	font-family:"¸¼Àº °íµñ";}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"¸¼Àº °íµñ";}
/* Page Definitions */
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:3.0cm 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
/* List Definitions */
@list l0
	{mso-list-id:629675578;
	mso-list-type:hybrid;
	mso-list-template-ids:533093612 -449924942 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l0:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:38.0pt;
	text-indent:-18.0pt;}
@list l0:level2
	{mso-level-number-format:alpha-upper;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:60.0pt;
	text-indent:-20.0pt;}
@list l0:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:80.0pt;
	text-indent:-20.0pt;}
@list l0:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:100.0pt;
	text-indent:-20.0pt;}
@list l0:level5
	{mso-level-number-format:alpha-upper;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:120.0pt;
	text-indent:-20.0pt;}
@list l0:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:140.0pt;
	text-indent:-20.0pt;}
@list l0:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:160.0pt;
	text-indent:-20.0pt;}
@list l0:level8
	{mso-level-number-format:alpha-upper;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:180.0pt;
	text-indent:-20.0pt;}
@list l0:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:200.0pt;
	text-indent:-20.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext="edit">
<o:idmap v:ext="edit" data="1" />
</o:shapelayout></xml><![endif]--></head><body lang=KO link=blue vlink=purple><div class=WordSection1><p class=MsoNormal><span lang=EN-US>Hello,<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>I tried to run a parallel computation (OpenFOAM) using Open MPI on a HPC connected with infiniband.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US>When I ran a job using mpirun over a couple of nodes (20 cpus per node), the computation was not accelerated as I expected.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>For example, I ran the job over 40 cpus on 2 nodes, and I checked cpu usages and processes via top command.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US>I expected 20 processes would be running on each node but I found that only 19 processes were running and a cpu was in idle while others were used.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US>Following is a capture of top result.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>As you can see, Cpu1 is in idle and there are only 19 simpleFoam processes!<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US><img width=557 height=725 id="±×¸²_x0020_2" src="cid:image002.png@01D126AB.FA0798C0"></span><span lang=EN-US><o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>I have no idea why this is happened.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>Sometimes, a cpu is in idle while 20 processes are running but, in that case two processes running with 50% of cpu usage.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US>That is, those two different processes are assigned to the same cpu.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>Please refer to the attached file for required information of the cluster and its environment.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US>The output of ¡°ulimit &#8211;l</span>¡°<span lang=EN-US> command on both nodes is ¡°unlimited¡±.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>Additional information for OpenFabrics-based network is as following:<o:p></o:p></span></p><p class=MsoListParagraph style='margin-left:38.0pt;mso-para-margin-left:0gd;text-indent:-18.0pt;mso-list:l0 level1 lfo1'><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span lang=EN-US>OpenFabrics version : MLNX_OFED_LINUX-2.4.1.0.0<o:p></o:p></span></p><p class=MsoListParagraph style='margin-left:38.0pt;mso-para-margin-left:0gd;text-indent:-18.0pt;mso-list:l0 level1 lfo1'><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span lang=EN-US>Linux/kernel info: RHEL6.5 2.6.32-431.el6.x86_64<br>- Linux distro/version : Red hat Enterprise Linux Server release 6.5 (Santiago)<br>- Kernel version : 2.6.32-431.el6.x86_64<o:p></o:p></span></p><p class=MsoListParagraph style='margin-left:38.0pt;mso-para-margin-left:0gd;text-indent:-18.0pt;mso-list:l0 level1 lfo1'><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span lang=EN-US>Subnet manager : infiniband B class<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>Thank you.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US>Best regards,<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US>Geon-Hong Kim.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><b><span lang=EN-US style='font-family:"Tahoma","sans-serif"'>-----------------------------------<o:p></o:p></span></b></p><p class=MsoNormal><b><span lang=EN-US style='font-family:"Tahoma","sans-serif"'><img width=176 height=46 id="±×¸²_x0020_1" src="cid:image001.png@01D126AA.AC080E80" alt=HHI><o:p></o:p></span></b></p><p class=MsoNormal><b><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'>Geon-Hong Kim<o:p></o:p></span></b></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'>Engineer, Ph.D.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'>Performance Evaluation Research Department<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'>Hyundai Maritime Research Institute<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'>Hyundai Heavy Industries Co., Ltd.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'>Office +82-52-203-8053<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'>Fax +82-52-250-9675<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-family:"Tahoma","sans-serif";color:#1F497D'>Mobile +82-10-3084-1357<o:p></o:p></span></p><p class=MsoNormal><b><span lang=EN-US style='font-family:"Tahoma","sans-serif"'>-----------------------------------<o:p></o:p></span></b></p><p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p></div></body></html>
