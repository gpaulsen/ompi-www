<div dir="ltr">Hello. I have read a couple of posts on Stackoverflow that seem to imply that independently started processes should be able to communicate via ompi-server, but I have not been able to accomplish this. Is this actually possible? Here is an outline of what I have done and the error I am receiving. I&#39;m using version 1.8.1.<div>
<br></div><div><div>&gt; ompi-server --no-daemonize -r +</div><div>78512128.0;tcp://<a href="http://192.168.1.219:50443">192.168.1.219:50443</a></div></div><div><br></div><div><div>&gt; mpirun -np 1 --hostfile ~/mpi-hosts --ompi-server &quot;78512128.0;tcp://<a href="http://192.168.1.219:50443">192.168.1.219:50443</a>&quot; -v port_server</div>
<div>Master of rank 0 of 1 on kurenai</div><div>Master port is 488308736.0;tcp://192.168.1.219:60050+488308737.0;tcp://192.168.1.219:48993:300</div></div><div><br></div><div>port_server code outline:</div><div><br></div><div>
    char port[MPI::MAX_PORT_NAME];<br></div><div>    MPI::Intercomm intercomm;<br></div><div>    MPI::Info info;<br></div><div>    int buffer[3];<br></div><div><br></div><div><div>    MPI::Open_port(MPI::INFO_NULL, port);<br>
</div><div><br></div><div>    printf(&quot;Master port is %s\n&quot;, port);</div><div><br></div><div>    info = MPI::Info::Create();<br></div><div><br></div><div>    info.Set(&quot;ompi_global_scope&quot;, &quot;true&quot;);<br>
</div><div><br></div><div>    MPI::Publish_name(&quot;test_service&quot;, info, port);<br></div><div><br></div><div>    intercomm = MPI::COMM_WORLD.Accept(port, MPI::INFO_NULL, 0);<br></div><div><br></div><div><div>    buffer[0] = 1;</div>
<div>    buffer[1] = 2;</div><div>    buffer[2] = 3;</div></div><div><br></div><div>    intercomm.Send(buffer, 3, MPI::INT, 0, PARENT_TAG);<br></div><div><br></div><div>    ...</div><div><br></div></div><div><div>&gt; mpirun -np 1 --hostfile ~/mpi-hosts --ompi-server &quot;78512128.0;tcp://<a href="http://192.168.1.219:50443">192.168.1.219:50443</a>&quot; -v port_client</div>
<div><a href="mailto:barronj@192.168.1.219">barronj@192.168.1.219</a>&#39;s password:</div><div>Slave of rank 0 of 1 on athena</div><div>Slave found test_service on port, 488308736.0;tcp://192.168.1.219:60050+488308737.0;tcp://192.168.1.219:48993:300</div>
<div>[athena:08054] [[27027,0],0]-[[7451,0],0] mca_oob_tcp_peer_send_handler: invalid connection state (6) on socket 19</div></div><div><br></div><div>client code outline:</div><div><br></div><div>    char port[MPI::MAX_PORT_NAME];</div>
<div>    MPI::Intercomm intercomm;<br></div><div>    int buffer[3];<br></div><div><br></div><div><div>    MPI::Lookup_name(&quot;test_service&quot;, MPI::INFO_NULL, port);<br></div><div><br></div><div>    printf(&quot;Slave found test_service on port, %s\n&quot;, port);</div>
<div><br></div><div>    intercomm = MPI::COMM_WORLD.Connect(port, MPI::INFO_NULL, 0);<br></div><div><br></div><div>    intercomm.Recv(buffer, 3, MPI::INT, 0, PARENT_TAG);<br></div><div><br></div><div>    ...</div><div><br>
</div><div>From testing, it looks like it is happening within Connect. What am I doing incorrectly?</div><div><br></div><div>Thank you,</div><div><br></div><div>James Barron</div><div><br></div></div></div>

