<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class=""><div class="">How is the file read? From stdin? Or do they open it directly?</div><div class=""><br class=""></div>If the latter, then it sure sounds like a CGNS issue to me - looks like they are slurping in the entire file, and then forget to free the memory when they close it. I canâ€™t think of any solution short of getting them to look at the problem.<div class=""><br class=""></div><div class=""><br class=""></div><div class=""><br class=""></div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Jun 17, 2015, at 5:28 AM, Manoj Vaghela &lt;<a href="mailto:manoj.vaghela@gmail.com" class="">manoj.vaghela@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><div class="">Hi,<br class=""><br class=""></div>While checking for memory issues related with CGNS 2.5.5, on a test machine, the following output is display when just opening and closing CGNS file.<br class=""><div class=""><div class=""><div class=""><br class=""></div><div class="">Can anybody please help me on this?<br class="">This machine is Centos 7 (minimal installation) with GCC 4.8.3 and CentOS 7. The gcc compiler is used. The CGNS library is statically compiled locally with default configuration option.<br class=""><br class=""></div><div class="">===================<br class="">before open:files 0/0: memory 0/0<br class="">after&nbsp; open:files 1/1: memory 969250618/969250618<br class="">no CGNS error reported<br class="">no CGNS error reported<br class="">before close:files 1/1: memory 969250618/969250618<br class="">after&nbsp; close:files 0/0: memory 969250618/969250618<br class="">no CGNS error reported<br class="">===================<br class=""><div class=""><br class="">I am still not able to conclude on whether it is a OS/machine/CGNSLib problem? Should I compile with dynamic option?<br class=""><br class=""></div>If I use MPI and open CGNS file only for reading, should it occupy whole memory on each processor? Ideally it should free memory after cg_close(), but it is not freeing.<br class=""><br class=""></div><div class="">Also, in major cases, the CGNS file would be of size of more than 2GB. Do I need to compile with any specific flags?<span class="Apple-converted-space">&nbsp;</span><br class=""><br class=""></div><div class="">Please help.<br class=""></div><div class="">Thanks.<br class=""><br class="">--<br class=""></div><div class="">regards,<br class=""></div><div class="">Manoj<br class=""></div><div class=""><br class=""></div></div></div></div><div class="gmail_extra" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br class=""><div class="gmail_quote">On Tue, Jun 2, 2015 at 2:19 AM, Manoj Vaghela<span class="Apple-converted-space">&nbsp;</span><span dir="ltr" class="">&lt;<a href="mailto:manoj.vaghela@gmail.com" target="_blank" class="">manoj.vaghela@gmail.com</a>&gt;</span><span class="Apple-converted-space">&nbsp;</span>wrote:<br class=""><blockquote class="gmail_quote" style="margin: 0px 0px 0px 0.8ex; border-left-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; padding-left: 1ex;"><div dir="ltr" class=""><div class=""><div class=""><div class=""><div class=""><div class=""><div class="">Dear Nathan,<br class=""><br class=""></div>After some initial debugging procedure, I found that the problem is with the CGNS (v 2.5) file which I am reading by each processor. The CGNS file which has 3-levels of userdefined data of descriptors/arrays is just read by each processor only for getting some texts, which in turn takes 1% of memory (totally to 5GB). I have no idea of why it is happening. I have asked this memory related issue to the CGNS forum for help.<br class=""><br class=""></div>I am checking memory of each processor (process) using "top" command. Each process shows its % memory usage, so in my case for 16 processors, it is 16 * 1% = 16% (5GB) of total memory (=32GB) which is very huge for just extracting only text data from the file.<br class=""><br class=""></div>Any comments are welcome.<br class=""></div>Thanks.<br class=""><br class="">--<br class=""></div>regards,<br class=""></div>Manoj B Vaghela<br class=""></div><div class="gmail_extra"><br class=""><div class="gmail_quote"><div class=""><div class="h5">On Mon, Jun 1, 2015 at 3:14 PM, Nathan Hjelm<span class="Apple-converted-space">&nbsp;</span><span dir="ltr" class="">&lt;<a href="mailto:hjelmn@lanl.gov" target="_blank" class="">hjelmn@lanl.gov</a>&gt;</span><span class="Apple-converted-space">&nbsp;</span>wrote:<br class=""></div></div><blockquote class="gmail_quote" style="margin: 0px 0px 0px 0.8ex; border-left-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; padding-left: 1ex;"><div class=""><div class="h5"><br class="">Just to be sure. How are you measuring the memory usage? If you are<br class="">using /proc/meminfo are you subracting out the Cached memory usage?<br class=""><br class="">-Nathan<br class=""><div class=""><div class=""><br class="">On Mon, Jun 01, 2015 at 04:54:45AM -0400, Manoj Vaghela wrote:<br class="">&gt;&nbsp; &nbsp; Hi OpenMPI users,<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; I have been using OpenMPI for quite a few years now. Recently I figured<br class="">&gt;&nbsp; &nbsp; out some memory related issues which are quite bothering me.<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; I have OpenMPI 1.8.3 version installed on different machines. All machines<br class="">&gt;&nbsp; &nbsp; are SMPs and linux x86_64. The Machine one and one-1 are installed with<br class="">&gt;&nbsp; &nbsp; Red Hat Enterprise Linux Server release 5.4 and others are CentOS 7.<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; I am using 16 cores on each machine. If I see memory consumption for a<br class="">&gt;&nbsp; &nbsp; finite volume problem of 3 million cells, it should take nearly 3GB of<br class="">&gt;&nbsp; &nbsp; memory on each machine for 16 cores usage. The following are some of the<br class="">&gt;&nbsp; &nbsp; values of memory consumption which I got.<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; machine&nbsp; &nbsp; &nbsp; &nbsp;mem used(GB)&nbsp; &nbsp; &nbsp; &nbsp;total memory(GB)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;per<br class="">&gt;&nbsp; &nbsp; core<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; memory usage(%)<br class="">&gt;&nbsp; &nbsp; ==========================================================<br class="">&gt;&nbsp; &nbsp; one&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.114413568&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 66.075424<br class="">&gt;&nbsp; &nbsp; 0.2<br class="">&gt;&nbsp; &nbsp; one-1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.368967808&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;24.676748<br class="">&gt;&nbsp; &nbsp; 0.6<br class="">&gt;&nbsp; &nbsp; two&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7.362867456&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;32.869944<br class="">&gt;&nbsp; &nbsp; 1.4<br class="">&gt;&nbsp; &nbsp; three&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7.333295872&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;16.368964<br class="">&gt;&nbsp; &nbsp; 2.8<br class="">&gt;&nbsp; &nbsp; four&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7.356667136&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;32.842264<br class="">&gt;&nbsp; &nbsp; 1.4<br class="">&gt;&nbsp; &nbsp; five&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7.350758912<br class="">&gt;&nbsp; &nbsp; 32.815888&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.4<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; I am wondering why machines two to five are taking high memory against the<br class="">&gt;&nbsp; &nbsp; machines one and one-1 for the same setup files for this problem.<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; I have compiled OpenMPI with its default options on all machines.<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; It will help if somebody has any idea on this problem. Is there anything<br class="">&gt;&nbsp; &nbsp; to be set while building OpenMPI ? or it is OS problem?<br class="">&gt;&nbsp; &nbsp; Thanks.<br class="">&gt;<br class="">&gt;&nbsp; &nbsp; Manoj<br class="">&gt;<br class=""><br class=""></div></div>&gt; _______________________________________________<br class="">&gt; users mailing list<br class="">&gt;<span class="Apple-converted-space">&nbsp;</span><a href="mailto:users@open-mpi.org" target="_blank" class="">users@open-mpi.org</a><br class="">&gt; Subscription:<span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">&gt; Searchable archives:<span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/community/lists/users/2015/06/27006.php" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2015/06/27006.php</a><br class=""><br class=""><br class="">_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" target="_blank" class="">users@open-mpi.org</a><br class="">Subscription:<span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class=""></div></div>Link to this post:<span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/community/lists/users/2015/06/27015.php" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2015/06/27015.php</a><br class=""></blockquote></div><br class=""></div></blockquote></div><br class=""></div><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">_______________________________________________</span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">users mailing list</span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class=""><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a></span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Link to this post:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/community/lists/users/2015/06/27145.php" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/community/lists/users/2015/06/27145.php</a></div></blockquote></div><br class=""></div></body></html>
