<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">I donâ€™t believe checkpoint/restart is supported in OMPI past the 1.6 series. There was some attempt to restore it, but that person graduated prior to fully completing the work.<div class=""><br class=""></div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Mar 23, 2016, at 9:14 AM, Meij, Henk &lt;<a href="mailto:hmeij@wesleyan.edu" class="">hmeij@wesleyan.edu</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div style="font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; direction: ltr; font-family: Arial; font-size: 10pt;" class=""><div style="margin-bottom: 0px; margin-top: 0px;" class="">So I've redone this with openmpi 1.10.2 and another piece of software (lammps 16feb16) and get same results.</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">Upon cr_restart I see the openlava_wrapper process, the mpirun process reappearing but no orted and no lmp_mpi processes. Not obvious error anywhere. Using the --save-all feature from BLCR and ignore pids.</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">Does BLCR and openmpi work? Anybody have any idea as to where to look?</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">-Henk</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="font-size: 16px; font-family: 'Times New Roman';" class=""><hr tabindex="-1" class=""><div id="divRpF278291" style="direction: ltr;" class=""><font size="2" face="Tahoma" class=""><b class="">From:</b><span class="Apple-converted-space">&nbsp;</span>Meij, Henk<br class=""><b class="">Sent:</b><span class="Apple-converted-space">&nbsp;</span>Monday, March 21, 2016 12:24 PM<br class=""><b class="">To:</b><span class="Apple-converted-space">&nbsp;</span><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class=""><b class="">Subject:</b><span class="Apple-converted-space">&nbsp;</span>RE: BLCR &amp; openmpi<br class=""></font><br class=""></div><div class=""></div><div class=""><div style="font-size: 10pt; font-family: Arial; direction: ltr;" class=""><div style="margin-bottom: 0px; margin-top: 0px;" class="">hmm, I'm not correct. cr_restart starts with no errors, launches&nbsp;some of&nbsp;the processes, then suspends itself. strace on mpirun on this manual invocation yields the behavior same as below.</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">-Henk</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">[hmeij@swallowtail kflaherty]$ ps -u hmeij<br class="">&nbsp; PID TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD<br class="">29481 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 res<br class="">29485 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 1458575067.384<br class="">29488 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 1458575067.384.<br class="">29508 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 cr_restart<br class="">29509 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 blcr_watcher<br class="">29512 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:02 lava.openmpi.wr<br class="">29514 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:38:35 mpirun<br class="">30313 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:01 sshd<br class="">30314 pts/1&nbsp;&nbsp;&nbsp; 00:00:00 bash<br class="">30458 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 sleep<br class="">30483 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 sleep<br class="">30650 pts/1&nbsp;&nbsp;&nbsp; 00:00:00 cr_restart<br class="">30652 pts/1&nbsp;&nbsp;&nbsp; 00:00:00 lava.openmpi.wr<br class="">30653 pts/1&nbsp;&nbsp;&nbsp; 00:00:00 mpirun<br class="">30729 pts/1&nbsp;&nbsp;&nbsp; 00:00:00 ps<br class="">[hmeij@swallowtail kflaherty]$ jobs<br class="">[1]+&nbsp; Stopped&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cr_restart --no-restore-pid --no-restore-pgid --no-restore-sid --relocate /sanscratch/383=/sanscratch/000 /sanscratch/checkpoints/383/chk.28244<br class=""></div><div style="font-size: 16px; font-family: 'Times New Roman';" class=""><hr tabindex="-1" class=""><div id="divRpF658793" style="direction: ltr;" class=""><font size="2" face="Tahoma" class=""><b class="">From:</b><span class="Apple-converted-space">&nbsp;</span>Meij, Henk<br class=""><b class="">Sent:</b><span class="Apple-converted-space">&nbsp;</span>Monday, March 21, 2016 12:04 PM<br class=""><b class="">To:</b><span class="Apple-converted-space">&nbsp;</span><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class=""><b class="">Subject:</b><span class="Apple-converted-space">&nbsp;</span>BLCR &amp; openmpi<br class=""></font><br class=""></div><div class=""></div><div class=""><div style="font-size: 10pt; font-family: Arial; direction: ltr;" class=""><div style="margin-bottom: 0px; margin-top: 0px;" class="">openmpi1.2 (yes, I know old),python 2.6.1 blcr 0.8.5</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">when I attempt to cr_restart (having performed cr_checkpoint --save-all) I can restart the job manually with blcr on a node. but when I go through my openlava scheduler, the cr_restart launches mpirun, then nothing. no orted or the python processes that were running. the new scheduler job performing the restart puts in place the old machinefile and stderr and stdout files. here is what I view on an strace of mpirun</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">What problem is this pointing at?</div><div style="margin-bottom: 0px; margin-top: 0px;" class="">Thanks,</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">-Henk</div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><div style="margin-bottom: 0px; margin-top: 0px;" class="">poll([{fd=5, events=POLLIN}, {fd=4, events=POLLIN}, {fd=6, events=POLLIN}, {fd=11, events=POLLIN}, {fd=7, events=POLLIN}, {fd=8, events=POLLIN}, {fd=9, events=POLLIN}, {fd=10, events=POLLIN}], 8, 1000) = 8 ([{fd=5, revents=POLLNVAL}, {fd=4, revents=POLLNVAL}, {fd=6, revents=POLLNVAL}, {fd=11, revents=POLLNVAL}, {fd=7, revents=POLLNVAL}, {fd=8, revents=POLLNVAL}, {fd=9, revents=POLLNVAL}, {fd=10, revents=POLLNVAL}])<br class="">rt_sigprocmask(SIG_BLOCK, [INT USR1 USR2 TERM CHLD], NULL, 8) = 0<br class="">rt_sigaction(SIGCHLD, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">rt_sigaction(SIGTERM, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">rt_sigaction(SIGINT, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">rt_sigaction(SIGUSR1, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">rt_sigaction(SIGUSR2, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">sched_yield()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 0<br class="">rt_sigprocmask(SIG_BLOCK, [INT USR1 USR2 TERM CHLD], NULL, 8) = 0<br class="">rt_sigaction(SIGCHLD, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">rt_sigaction(SIGTERM, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">rt_sigaction(SIGINT, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">rt_sigaction(SIGUSR1, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class="">rt_sigaction(SIGUSR2, {0x2b7ca19cb30a, [INT USR1 USR2 TERM CHLD], SA_RESTORER|SA_RESTART, 0x397840f790}, NULL, 8) = 0<br class=""></div><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p><p style="margin-bottom: 0px; margin-top: 0px;" class="">&nbsp;</p></div></div></div></div></div></div></div><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">_______________________________________________</span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">users mailing list</span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><a href="mailto:users@open-mpi.org" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">users@open-mpi.org</a><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Subscription:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Link to this post:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/community/lists/users/2016/03/28806.php" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/community/lists/users/2016/03/28806.php</a></div></blockquote></div><br class=""></div></body></html>
