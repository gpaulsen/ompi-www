<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">Your earlier message indicates that it works fine so long as the DN was the same, regardless of number of nodes. It only failed when the DN’s of the nodes differed.<div class=""><br class=""></div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Aug 25, 2015, at 3:31 PM, Yong Qin &lt;<a href="mailto:yong.qin@gmail.com" class="">yong.qin@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class=""><div class=""><div class="">Of course! I blame that two-node test distracted me from checking all the FQDN relevant parameters. :)<br class=""><br class=""></div>So why would the two-node test pass in this case without allowing the FQDN then?<br class=""><br class=""></div>Thanks,<br class=""><div class=""><div class="gmail_extra"><br class=""><div class="gmail_quote">On Tue, Aug 25, 2015 at 2:35 PM, Ralph Castain <span dir="ltr" class="">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">You need to set —mca orte_keep_fqdn_hostnames 1 on your mpirun line, or set the equivalent MCA param<br class="">
<div class=""><div class="h5"><br class="">
<br class="">
&gt; On Aug 25, 2015, at 2:24 PM, Yong Qin &lt;<a href="mailto:yong.qin@gmail.com" class="">yong.qin@gmail.com</a>&gt; wrote:<br class="">
&gt;<br class="">
&gt; Hi,<br class="">
&gt;<br class="">
&gt; This has been bothering me for a while but I never got a chance to identify the root cause. I know this issue could be due to misconfig of network or ssh in many cases. But I'm pretty sure that we don't fall into that category at all. Proof? This issue doesn't happen in 1.6.x and earlier releases, but only in 1.8+ including the 1.10.0 which was released today.<br class="">
&gt;<br class="">
&gt; [yqin@n0009.scs00 ~]$ mpirun -V<br class="">
&gt; mpirun (Open MPI) 1.6.5<br class="">
&gt;<br class="">
&gt; [yqin@n0009.scs00 ~]$ mpirun -np 3 -H n0189.mako0,n0233.mako0,n0198.mako0 hostname<br class="">
&gt; n0233.mako0<br class="">
&gt; n0189.mako0<br class="">
&gt; n0198.mako0<br class="">
&gt;<br class="">
&gt; [yqin@n0009.scs00 ~]$ mpirun -V<br class="">
&gt; mpirun (Open MPI) 1.8.8<br class="">
&gt;<br class="">
&gt; [yqin@n0009.scs00 ~]$ mpirun -np 3 -H n0189.mako0,n0233.mako0,n0198.mako0 hostname<br class="">
&gt; ssh: Could not resolve hostname n0198: Name or service not known<br class="">
&gt; --------------------------------------------------------------------------<br class="">
&gt; ORTE was unable to reliably start one or more daemons.<br class="">
&gt; This usually is caused by:<br class="">
&gt;<br class="">
&gt; * not finding the required libraries and/or binaries on<br class="">
&gt;&nbsp; &nbsp;one or more nodes. Please check your PATH and LD_LIBRARY_PATH<br class="">
&gt;&nbsp; &nbsp;settings, or configure OMPI with --enable-orterun-prefix-by-default<br class="">
&gt;<br class="">
&gt; * lack of authority to execute on one or more specified nodes.<br class="">
&gt;&nbsp; &nbsp;Please verify your allocation and authorities.<br class="">
&gt;<br class="">
&gt; * the inability to write startup files into /tmp (--tmpdir/orte_tmpdir_base).<br class="">
&gt;&nbsp; &nbsp;Please check with your sys admin to determine the correct location to use.<br class="">
&gt;<br class="">
&gt; *&nbsp; compilation of the orted with dynamic libraries when static are required<br class="">
&gt;&nbsp; &nbsp;(e.g., on Cray). Please check your configure cmd line and consider using<br class="">
&gt;&nbsp; &nbsp;one of the contrib/platform definitions for your system type.<br class="">
&gt;<br class="">
&gt; * an inability to create a connection back to mpirun due to a<br class="">
&gt;&nbsp; &nbsp;lack of common network interfaces and/or no route found between<br class="">
&gt;&nbsp; &nbsp;them. Please check network connectivity (including firewalls<br class="">
&gt;&nbsp; &nbsp;and network routing requirements).<br class="">
&gt; --------------------------------------------------------------------------<br class="">
&gt;<br class="">
&gt; [yqin@n0009.scs00 ~]$ mpirun -V<br class="">
&gt; mpirun (Open MPI) 1.10.0<br class="">
&gt;<br class="">
&gt; [yqin@n0009.scs00 ~]$ mpirun -np 3 -H n0189.mako0,n0233.mako0,n0198.mako0 hostname<br class="">
&gt; ssh: Could not resolve hostname n0198: Name or service not known<br class="">
&gt; --------------------------------------------------------------------------<br class="">
&gt; ORTE was unable to reliably start one or more daemons.<br class="">
&gt; This usually is caused by:<br class="">
&gt;<br class="">
&gt; * not finding the required libraries and/or binaries on<br class="">
&gt;&nbsp; &nbsp;one or more nodes. Please check your PATH and LD_LIBRARY_PATH<br class="">
&gt;&nbsp; &nbsp;settings, or configure OMPI with --enable-orterun-prefix-by-default<br class="">
&gt;<br class="">
&gt; * lack of authority to execute on one or more specified nodes.<br class="">
&gt;&nbsp; &nbsp;Please verify your allocation and authorities.<br class="">
&gt;<br class="">
&gt; * the inability to write startup files into /tmp (--tmpdir/orte_tmpdir_base).<br class="">
&gt;&nbsp; &nbsp;Please check with your sys admin to determine the correct location to use.<br class="">
&gt;<br class="">
&gt; *&nbsp; compilation of the orted with dynamic libraries when static are required<br class="">
&gt;&nbsp; &nbsp;(e.g., on Cray). Please check your configure cmd line and consider using<br class="">
&gt;&nbsp; &nbsp;one of the contrib/platform definitions for your system type.<br class="">
&gt;<br class="">
&gt; * an inability to create a connection back to mpirun due to a<br class="">
&gt;&nbsp; &nbsp;lack of common network interfaces and/or no route found between<br class="">
&gt;&nbsp; &nbsp;them. Please check network connectivity (including firewalls<br class="">
&gt;&nbsp; &nbsp;and network routing requirements).<br class="">
&gt; --------------------------------------------------------------------------<br class="">
&gt;<br class="">
&gt;<br class="">
&gt; Note that I was running the mpirun from "n0009.scs00". If I ran it from a native "mako0" node, it would pass as well.<br class="">
&gt;<br class="">
&gt; [yqin@n0198.mako0 ~]$ mpirun -V<br class="">
&gt; mpirun (Open MPI) 1.10.0<br class="">
&gt;<br class="">
&gt; [yqin@n0198.mako0 ~]$ mpirun -np 3 -H n0189.mako0,n0233.mako0,n0198.mako0 hostname<br class="">
&gt; n0189.mako0<br class="">
&gt; n0198.mako0<br class="">
&gt; n0233.mako0<br class="">
&gt;<br class="">
&gt; The network connection between n0009.scs00 and all the "mako0" nodes are clear and no firewall at all, and all on the same subnet. The only thing that I can think of is the hostname itself. From the error message mpirun was trying to resolve n0198, etc., even though the proper hostname that's passed to it was n0198.mako0. "n0198" by itself would not resolve because we have multiple clusters configured within the same subnet and we do need the cluster name suffix as identifier. But this is also not always true, for example, if I only have two nodes involved than it would pass as well.<br class="">
&gt;<br class="">
&gt; [yqin@n0009.scs00 ~]$ mpirun -V<br class="">
&gt; mpirun (Open MPI) 1.10.0<br class="">
&gt;<br class="">
&gt; [yqin@n0009.scs00 ~]$ mpirun -np 2 -H n0189.mako0,n0233.mako0 hostname<br class="">
&gt; n0189.mako0<br class="">
&gt; n0233.mako0<br class="">
&gt;<br class="">
&gt; The issue only exposes itself when more than 2 nodes are involved. Any thoughts?<br class="">
&gt;<br class="">
&gt; Thanks,<br class="">
&gt;<br class="">
&gt; Yong Qin<br class="">
</div></div>&gt; _______________________________________________<br class="">
&gt; users mailing list<br class="">
&gt; <a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">
&gt; Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">
&gt; Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/08/27489.php" rel="noreferrer" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2015/08/27489.php</a><br class="">
<br class="">
_______________________________________________<br class="">
users mailing list<br class="">
<a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/08/27490.php" rel="noreferrer" target="_blank" class="">http://www.open-mpi.org/community/lists/users/2015/08/27490.php</a></blockquote></div><br class=""></div></div></div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/users<br class="">Link to this post: http://www.open-mpi.org/community/lists/users/2015/08/27491.php</div></blockquote></div><br class=""></div></body></html>
