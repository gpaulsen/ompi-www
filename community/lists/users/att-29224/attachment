<div dir="ltr">Hi,<div><br></div><div>I am using Open MPI 1.8.6. I guess my question is related to the flow control algorithm for small messages. The question is how to avoid the sender being blocked by the receiver when using <b>openib</b> module for small messages and using <b>blocking send</b>. I have looked through this FAQ(<a href="https://www.open-mpi.org/faq/?category=openfabrics#ofa-troubleshoot">https://www.open-mpi.org/faq/?category=openfabrics#ofa-troubleshoot</a>) but didn&#39;t find the answer. My understanding of &quot;eager sending protocol&quot; is that if a message is &quot;small&quot;, it will be transported to the receiver immediately, even if the receiver is not ready. As a result, the sender won&#39;t be blocked until the receiver posts the receive operation. <br clear="all"><div><br></div><div>I am trying to observe such behavior with a simple program of two MPI ranks (attached). My confusion is that while I can see the behavior with &quot;vader&quot; module (shared memory) when running the two ranks on the same node, </div><div>[output]</div><div><p style="margin:0px;font-size:11px;line-height:normal;font-family:Menlo;background-color:rgb(254,244,156)">[0] size = 16, loop = 78, <b>time = 0.00007</b></p>
<p style="margin:0px;font-size:11px;line-height:normal;font-family:Menlo;background-color:rgb(254,244,156)">[1] size = 16, loop = 78, <b>time = 3.42426</b></p></div><div>[/output]</div><div>but I cannot see it when running them on two nodes using the &quot;openib&quot; module. </div><div><div>[output]</div><div><p style="margin:0px;font-size:11px;line-height:normal;font-family:Menlo;background-color:rgb(254,244,156)">[0] size = 16, loop = 78, <b>time = 3.42627</b></p><p style="margin:0px;font-size:11px;line-height:normal;font-family:Menlo;background-color:rgb(254,244,156)">[1] size = 16, loop = 78, <b>time = 3.42426</b></p></div><div>[/output]</div></div><div><br></div><div>So anyone knows the reason? My runtime configuration is also attached. Thanks!</div><div><br></div><div>Sincerely,</div><div>Michael</div><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr">Xiaolong Cui (Michael)<div>Department of Computer Science</div><div>Dietrich School of Arts &amp; Science</div><div>University of Pittsburgh</div><div>Pittsburgh, PA 15260</div></div></div>
</div></div>

