<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">There are major differences when you launch via srun vs mpirun as the OMPI daemons provide a lot of “helper” info to the procs that they don’t get when directly launched. We’ve tried to minimize those differences, but we can’t necessarily get them all.<div class=""><br class=""></div><div class="">We’ve seen reports of this before, but there aren’t any known solutions. We are working on a new version of PMI (called PMIx) that will hopefully reduce those differences, but it isn’t released yet.</div><div class=""><br class=""></div><div class="">Bottom line for now is that direct launch has its downside.</div><div class=""><br class=""></div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On May 20, 2015, at 2:15 PM, Patrick LeGresley &lt;<a href="mailto:plegresl@gmail.com" class="">plegresl@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Hi,<div class=""><br class=""></div><div class="">I've noticed some performance differences when using mpirun and SLURM for job startup.&nbsp; Below I've included example output from the OSU bidirectional bandwidth benchmark that seem to show a significant difference in bandwidth for larger message sizes.&nbsp; I've looked at the OpenMPI FAQ for running jobs under SLURM and my OpenMPI installation was configured using both --with-slurm and --with-pmi.&nbsp; Similar differences in performance seem to happen if you use the "wrong" mpirun executable, for example using the 1.8.4 mpirun to start an executable compiled using 1.8.5 (also shown below).&nbsp; I thought maybe the environment variables set by the mpirun from 1.8.5 were important, but using the same environment variables set by the 1.8.5 version of mpirun didn't seem to influence the behavior.&nbsp; Is this a known issue, or are there ideas of why using SLURM seems to result in such different performance for larger message sizes?</div><div class=""><br class=""></div><div class="">Thanks,</div><div class=""><br class=""></div><div class="">Patrick</div><div class=""><br class=""></div><div class=""><br class=""></div><div class=""><b class=""><u class="">SLURM:</u></b></div><div class=""><br class=""></div><div class=""><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-1:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">env | grep OMPI</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-1:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">srun -p GTX980x4sys --ntasks 2 ./osu_bibw</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">cpu_bind=MASK - svail-15, task&nbsp; 0&nbsp; 0 [6916]: mask 0x8000 set</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">cpu_bind=MASK - svail-15, task&nbsp; 1&nbsp; 1 [6917]: mask 0x80000000 set</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># OSU MPI-CUDA Bi-Directional Bandwidth Test</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Send Buffer on HOST (H) and Receive Buffer on HOST (H)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Size &nbsp; &nbsp; Bi-Bandwidth (MB/s)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.44</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.12</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 12.19</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 24.45</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 48.95</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 97.76</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 193.11</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 375.00</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">256 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 688.26</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1101.45</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1024 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1975.76</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2048 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3298.67</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4096 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3270.65</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8192 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4737.39</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16384&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5479.92</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32768&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6331.54</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">65536&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6392.04</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">131072 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5034.20</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">262144 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3762.04</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">524288 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4543.68</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1048576&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4244.62</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2097152&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4233.64</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4194304&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4232.11</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-1:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">export OMPI_MCA_btl=self,vader</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-1:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">srun -p GTX980x4sys --ntasks 2 ./osu_bibw</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">cpu_bind=MASK - svail-15, task&nbsp; 0&nbsp; 0 [6961]: mask 0x8000 set</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">cpu_bind=MASK - svail-15, task&nbsp; 1&nbsp; 1 [6962]: mask 0x80000000 set</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># OSU MPI-CUDA Bi-Directional Bandwidth Test</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Send Buffer on HOST (H) and Receive Buffer on HOST (H)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Size &nbsp; &nbsp; Bi-Bandwidth (MB/s)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.59</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4.78</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 9.89</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 41.75</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 81.89</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 166.25</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 239.32</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 388.07</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">256 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 667.63</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1166.52</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1024 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1978.11</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2048 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3462.92</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4096 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3831.92</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8192 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5722.75</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16384&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8295.46</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32768 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10401.27</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">65536 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11181.00</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">131072&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10024.32</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">262144 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 9953.43</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">524288&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10237.18</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1048576 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 13484.74</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2097152 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 13548.25</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4194304 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 12401.71</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-1:~/SRC/openmpi-1.8.5/majel/bin$&nbsp;</div></div><div class=""><br class=""></div><div class=""><b class=""><u class="">mpirun:</u></b></div><div class=""><br class=""></div><div class=""><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-15:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">env | grep OMPI</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-15:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">/tools/openmpi-1.8.5/bin/mpirun -np 2 --report-bindings -npersocket 1 ./osu_bibw</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">[svail-15:06868] MCW rank 1 bound to socket 1[core 8[hwt 0-1]]: [../../../../../../../..][BB/../../../../../../..]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">[svail-15:06868] MCW rank 0 bound to socket 0[core 0[hwt 0-1]]: [BB/../../../../../../..][../../../../../../../..]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># OSU MPI-CUDA Bi-Directional Bandwidth Test</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Send Buffer on HOST (H) and Receive Buffer on HOST (H)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Size &nbsp; &nbsp; Bi-Bandwidth (MB/s)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.40</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5.11</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11.96</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 24.68</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 49.17</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 92.79</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 179.02</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 317.15</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">256 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 484.08</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">512 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 920.96</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1024 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1543.13</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2048 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2588.79</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4096 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3267.20</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8192 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4324.19</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16384&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5642.14</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32768&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6422.15</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">65536&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6988.72</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">131072 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6793.10</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">262144 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6284.13</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">524288 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6398.42</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1048576&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7267.68</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2097152&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7430.67</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4194304&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7215.42</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-15:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">export OMPI_MCA_btl=self,vader</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-15:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">/tools/openmpi-1.8.5/bin/mpirun -np 2 --report-bindings -npersocket 1 ./osu_bibw</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">[svail-15:06892] MCW rank 1 bound to socket 1[core 8[hwt 0-1]]: [../../../../../../../..][BB/../../../../../../..]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">[svail-15:06892] MCW rank 0 bound to socket 0[core 0[hwt 0-1]]: [BB/../../../../../../..][../../../../../../../..]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># OSU MPI-CUDA Bi-Directional Bandwidth Test</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Send Buffer on HOST (H) and Receive Buffer on HOST (H)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Size &nbsp; &nbsp; Bi-Bandwidth (MB/s)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3.09</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.32</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 29.89</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 60.45</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 86.52</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 206.86</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 265.10</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 348.81</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">256 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 507.25</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">512 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 856.77</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1024 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1468.91</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2048 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2508.12</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4096 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3949.40</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8192 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6830.64</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16384 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10118.59</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32768 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14690.76</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">65536 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 18497.65</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">131072&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20405.31</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">262144&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 19300.26</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">524288&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 18829.65</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1048576 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 19374.49</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2097152 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 21596.29</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4194304 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 24355.79</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-15:~/SRC/openmpi-1.8.5/majel/bin$&nbsp;</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""><br class=""></div><div style="margin: 0px; font-family: Menlo;" class=""><b style="font-family:arial,sans-serif" class=""><u class="">"wrong" mpirun:</u></b><br class=""></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""><b style="font-family:arial,sans-serif" class=""><u class=""><br class=""></u></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-15:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">env | grep OMPI</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""><font class="">OMPI</font>_MCA_btl=self,vader</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-15:~/SRC/openmpi-1.8.5/majel/bin$ <b class=""><font color="#ff0000" class="">/tools/openmpi-1.8.4/bin/mpirun -np 2 --report-bindings -npersocket 1 ./osu_bibw</font></b></div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">[svail-15:07109] MCW rank 1 bound to socket 1[core 8[hwt 0-1]]: [../../../../../../../..][BB/../../../../../../..]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">[svail-15:07109] MCW rank 0 bound to socket 0[core 0[hwt 0-1]]: [BB/../../../../../../..][../../../../../../../..]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># OSU MPI-CUDA Bi-Directional Bandwidth Test</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Send Buffer on HOST (H) and Receive Buffer on HOST (H)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class=""># Size &nbsp; &nbsp; Bi-Bandwidth (MB/s)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.10</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 13.67</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 26.74</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 57.17</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 81.82</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 238.84</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 241.87</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 319.86</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">256 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 490.38</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">512 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 805.50</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1024 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1394.54</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2048 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2350.89</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4096 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2845.86</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">8192 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3692.30</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">16384&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5196.64</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">32768&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6018.54</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">65536&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6360.56</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">131072 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6540.06</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">262144 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6860.57</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">524288 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7945.36</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">1048576&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7983.90</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">2097152&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7926.69</div><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">4194304&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7836.43</div><p style="margin:0px;font-size:11px;font-family:Menlo" class="">






























</p><div style="margin: 0px; font-size: 11px; font-family: Menlo;" class="">plegresl@svail-15:~/SRC/openmpi-1.8.5/majel/bin$&nbsp;</div></div></div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/users<br class="">Link to this post: http://www.open-mpi.org/community/lists/users/2015/05/26894.php</div></blockquote></div><br class=""></div></body></html>
