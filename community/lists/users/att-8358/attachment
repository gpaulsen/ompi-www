<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Did you try compiling your program with the provided mpicc (or mpiCC, mpif90, etc. - as appropriate) wrapper compiler? The wrapper compilers contain all the required library definitions to make the application work.<div><br></div><div>Compiling without the wrapper compilers is a very bad idea...</div><div><br></div><div>Ralph</div><div><br></div><div><br></div><div><div>On Mar 6, 2009, at 11:02 AM, justin oppenheim wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td valign="top" style="font: inherit;">Please let me go over it again, and maybe it helps clarifying things a bit better. All the OS involved are Suse 10.3.<br><br>I have a place for the the installed programs, say /programs.<br><br>In /programs I have installed openmpi and my mpi program, say my_mpi_program.&nbsp; When  I am in the working directory, my LD_LIBRARY_PATH does include both <br><br>/programs/my_mpi_program/lib<br>/programs/openmpi/lib<br><br>And my PATH includes<br>/programs/my_mpi_program/bin<br>/programs/openmpi/bin<br><br>So, then I do<br><br>mpirun -machinefile machinefile&nbsp; -np 20 my_mpi_program &lt;arguments> <br><br>and I get<br><br>/programs/my_mpi_program: symbol lookup error: /programs/openmpi/lib/libmpi_cxx.so.0: undefined symbol: ompi_registered_datareps<br><br>When I configured openmpi, I did<br><br>./configure --prefix=/programs/openmpi<br>&nbsp;<br>and then compiled it. Subsequently, I compiled my_mpi_program with the options:<br><br>MPI_CXX=/programs/openmpi/bin/mpicxx <br>MPI_CC=/programs/openmpi/bin/mpicc <br>MPI_INCLUDE=/programs/openmpi/include/<br>MPI_LIB=mpi <br>MPI_LIBDIR=/programs/openmpi/lib/ MPI_LINKERFORPROGRAMS=/programs/openmpi/bin/mpicxx<br><br>Any clue? The directory /programs is NSF mounted on the nodes.<br><br>Many thanks again,<br><br>JO<br><br><br><br><br><br><br><br><br><br><br>--- On <b>Thu, 3/5/09, justin oppenheim <i>&lt;<a href="mailto:jl09981@yahoo.com">jl09981@yahoo.com</a>></i></b> wrote:<br><blockquote style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: 5px;">From: justin oppenheim &lt;<a href="mailto:jl09981@yahoo.com">jl09981@yahoo.com</a>><br>Subject: Re: [OMPI users] Run-time problem<br>To: "Ralph Castain" &lt;<a href="mailto:rhc@lanl.gov">rhc@lanl.gov</a>><br>Date: Thursday, March 5, 2009, 5:28 PM<br><br><div id="yiv1749703698"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="font-family: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-size: inherit; line-height: inherit; font-size-adjust: inherit; font-stretch: inherit;" valign="top">Hi Ralph:<br><br>Sorry for my ignorance, but in you option 2: what command should I add the option <br>--prefix=path-to-install? when I configure openmpi? I already did that when I configured&nbsp; and compiled openmpi.  Also, in response to your option 1, I did add the paths to libraries of openmpi in the LD_LIBRARY_PATH&nbsp; in the .cshrc of the nodes. <br><br>Thank you,<br>JO<br><br>--- On <b>Thu, 3/5/09, Ralph Castain <i>&lt;<a href="mailto:rhc@lanl.gov">rhc@lanl.gov</a>></i></b> wrote:<br><blockquote style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: 5px;">From: Ralph Castain &lt;<a href="mailto:rhc@lanl.gov">rhc@lanl.gov</a>><br>Subject: Re: [OMPI users] Run-time problem<br>To: <a href="mailto:jl09981@yahoo.com">jl09981@yahoo.com</a><br>Cc: "Open MPI Users &lt;<a href="mailto:users@open-mpi.org">users@open-mpi.org</a>>" &lt;<a href="mailto:users@open-mpi.org">users@open-mpi.org</a>><br>Date: Thursday, March 5, 2009, 12:46 PM<br><br><div id="yiv1874675760">First, you can add --launch-agent rsh to the command line and that will have OMPI use rsh.<div><br></div><div>It sounds like your remote nodes may not be seeing your OMPI install directory. Several ways you can resolve that - here are a couple:</div><div><br></div><div>1. add the install directory to your LD_LIBRARY_PATH in your .cshrc (or whatever shell rc you are using) - be sure this is being executed on the remote nodes</div><div><br></div><div>2. add --prefix=path-to-install on your cmd line - this will direct your remote procs to the proper libraries</div><div><br></div><div>Ralph</div><div><br></div><div><br><div><div>On Mar 5, 2009, at 10:18 AM, justin oppenheim wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="font-family: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-size: inherit; line-height: inherit; font-size-adjust: inherit; font-stretch: inherit;" valign="top">Maybe I should also add that the program<br>my_mpi_executable is locally installed under the same root directory as that under which&nbsp; openmpi-1.3 is installed. This root directory is NSF mounted on the working nodes.<br><br>Thanks,<br>JO<br><br>--- On <b>Thu, 3/5/09, justin oppenheim <i>&lt;<a rel="nofollow" target="_blank" href="mailto:jl09981@yahoo.com">jl09981@yahoo.com</a>></i></b> wrote:<br><blockquote style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: 5px;">From: justin oppenheim &lt;<a rel="nofollow" target="_blank" href="mailto:jl09981@yahoo.com">jl09981@yahoo.com</a>><br>Subject: Re: [OMPI users] Run-time problem<br>To: "Ralph Castain" &lt;<a rel="nofollow" target="_blank" href="mailto:rhc@lanl.gov">rhc@lanl.gov</a>><br>Date: Thursday, March 5, 2009, 12:04 PM<br><br><div id="yiv1250831840"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="font-family: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-size: inherit; line-height: inherit; font-size-adjust: inherit; font-stretch: inherit;" valign="top">Hi Ralph:<br><br>Thanks for your prompt response. I am using openmpi-1.3, Suse 10.3. I installed openmpi-1.3 with the option<br><br>./configure --prefix=/where/to/install<br><br>and then just <br><br>make all install<br><br>I thought the default connection mode is rsh, but I had to invoke ssh-agent, in order not have to enter password one by one. How to change to rsh?<br><br>Thanks,<br>JO<br><br>--- On <b>Thu, 3/5/09, Ralph Castain <i>&lt;<a rel="nofollow" target="_blank" href="mailto:rhc@lanl.gov">rhc@lanl.gov</a>></i></b> wrote:<br><blockquote style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: 5px;">From: Ralph Castain &lt;<a rel="nofollow" target="_blank" href="mailto:rhc@lanl.gov">rhc@lanl.gov</a>><br>Subject: Re: [OMPI users] Run-time problem<br>To: <a rel="nofollow" target="_blank" href="mailto:jl09981@yahoo.com">jl09981@yahoo.com</a>, "Open MPI Users" &lt;<a rel="nofollow" target="_blank" href="mailto:users@open-mpi.org">users@open-mpi.org</a>><br>Date: Thursday, March 5, 2009, 11:40 AM<br><br><div id="yiv1213050412">Could you tell us what version of Open MPI you are using, a little about your system (I would assume you are using ssh?), and how this was configured?<div><br></div><div>Thanks</div><div>Ralph</div><div><br></div><div><br><div><div>On Mar 5, 2009, at 9:31 AM, justin oppenheim wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="font-family: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-size: inherit; line-height: inherit; font-size-adjust: inherit; font-stretch: inherit;" valign="top">Hi:<br><br>When I execute something like<br><br>mpirun -machinefile machinefile my_mpi_executable <br><br>I get something like this <br><br>my_mpi_executable symbol lookup error: remote_openmpi/lib/libmpi_cxx.so.0: undefined symbol: ompi_registered_datareps<br><br>where both my_mpi_executable and remote_openmpi are installed on NSF mounted locations.<br><br>Any clue?<br><br>thanks<br><br>JO</td></tr></tbody></table><br>       _______________________________________________<br>users mailing list<br><a rel="nofollow" target="_blank" href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a rel="nofollow" target="_blank" href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></blockquote></div><br></div></div></blockquote></td></tr></tbody></table><br>       </div></blockquote></td></tr></tbody></table><br>       </blockquote></div><br></div></div></blockquote></td></tr></tbody></table><br>       </div></blockquote></td></tr></tbody></table><br>       </blockquote></div><br></body></html>
