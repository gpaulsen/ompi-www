<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Tahoma
}
--></style>
</head>
<body class='hmmessage'>
thanks<div><br></div><div>But, the code is too long.<br><br></div><div>Jack&nbsp;</div><div>Oct. 25 2010</div><div><br>&gt; Date: Mon, 25 Oct 2010 14:08:54 -0400<br>&gt; From: gus@ldeo.columbia.edu<br>&gt; To: users@open-mpi.org<br>&gt; Subject: Re: [OMPI users] Open MPI program cannot complete<br>&gt; <br>&gt; Your job may be queued, not executing, because there are no<br>&gt; resources available, all nodes are busy.<br>&gt; Try qstat -a.<br>&gt; <br>&gt; Posting a code snippet with all your MPI calls may prove effective.<br>&gt; You might get a trove of advice for a thrift of effort.<br>&gt; <br>&gt; Jeff Squyres wrote:<br>&gt; &gt; Check the man page for qsub for proper use.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; On Oct 25, 2010, at 1:49 PM, Jack Bryan wrote:<br>&gt; &gt; <br>&gt; &gt;&gt; thanks<br>&gt; &gt;&gt;<br>&gt; &gt;&gt; I use <br>&gt; &gt;&gt;         qsub -I nsga2_job.sh<br>&gt; &gt;&gt;         qsub: waiting for job 48270.clusterName to start<br>&gt; &gt;&gt;<br>&gt; &gt;&gt; By qstat<br>&gt; &gt;&gt;     I found the job name is none and no results show up. <br>&gt; &gt;&gt;<br>&gt; &gt;&gt; No shell prompt appear, the command line is hang there , no response. <br>&gt; &gt;&gt;<br>&gt; &gt;&gt; Any help is appreciated. <br>&gt; &gt;&gt;<br>&gt; &gt;&gt; Thanks<br>&gt; &gt;&gt;<br>&gt; &gt;&gt; Jack <br>&gt; &gt;&gt;<br>&gt; &gt;&gt; Oct. 25 2010<br>&gt; &gt;&gt;<br>&gt; &gt;&gt;&gt; From: jsquyres@cisco.com<br>&gt; &gt;&gt;&gt; Date: Mon, 25 Oct 2010 13:39:30 -0400<br>&gt; &gt;&gt;&gt; To: users@open-mpi.org<br>&gt; &gt;&gt;&gt; Subject: Re: [OMPI users] Open MPI program cannot complete<br>&gt; &gt;&gt;&gt;<br>&gt; &gt;&gt;&gt; Can you use the interactive mode of PBS to get 5 cores on 1 node? IIRC, "qsub -I ..." ?<br>&gt; &gt;&gt;&gt;<br>&gt; &gt;&gt;&gt; Then you get a shell prompt with your allocated cores and can run stuff interactively. I don't know if your site allows this, but interactive debugging here might be *significantly* easier than try to automate some debugging.<br>&gt; &gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;<br>&gt; &gt;&gt;&gt; On Oct 25, 2010, at 1:35 PM, Jack Bryan wrote:<br>&gt; &gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; thanks<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; I have to use #PBS to submit any jobs in my cluster. <br>&gt; &gt;&gt;&gt;&gt; I cannot use command line to hang a job on my cluster. <br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; this is my script: <br>&gt; &gt;&gt;&gt;&gt; --------------------------------------<br>&gt; &gt;&gt;&gt;&gt; #!/bin/bash<br>&gt; &gt;&gt;&gt;&gt; #PBS -N jobname<br>&gt; &gt;&gt;&gt;&gt; #PBS -l walltime=00:08:00,nodes=1<br>&gt; &gt;&gt;&gt;&gt; #PBS -q queuename<br>&gt; &gt;&gt;&gt;&gt; COMMAND=/mypath/myprog<br>&gt; &gt;&gt;&gt;&gt; NCORES=5<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; cd $PBS_O_WORKDIR<br>&gt; &gt;&gt;&gt;&gt; NODES=`cat $PBS_NODEFILE | wc -l`<br>&gt; &gt;&gt;&gt;&gt; NPROC=$(( $NCORES * $NODES ))<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; mpirun -np $NPROC --mca btl self,sm,openib $COMMAND<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; -------------------------------------------<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; Where should I put the (gdb --batch -ex 'bt full' -ex 'info reg' -pid ZOMBIE_PID) in the script ? <br>&gt; &gt;&gt;&gt;&gt; And how to get ZOMBIE_PID from the script ? <br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; Any help is appreciated. <br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; thanks<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; Oct. 25 2010<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; Date: Mon, 25 Oct 2010 19:24:35 +0200<br>&gt; &gt;&gt;&gt;&gt; From: jed@59a2.org<br>&gt; &gt;&gt;&gt;&gt; To: users@open-mpi.org<br>&gt; &gt;&gt;&gt;&gt; Subject: Re: [OMPI users] Open MPI program cannot complete<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; On Mon, Oct 25, 2010 at 19:07, Jack Bryan &lt;dtustudy68@hotmail.com&gt; wrote:<br>&gt; &gt;&gt;&gt;&gt; I need to use #PBS parallel job script to submit a job on MPI cluster. <br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; Is it not possible to reproduce locally? Most clusters have a way to submit an interactive job (which would let you start this thing and then inspect individual processes). Ashley's Padb suggestion will certainly be better in a non-interactive environment.<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; Where should I put the (gdb --batch -ex 'bt full' -ex 'info reg' -pid ZOMBIE_PID) in the script ? <br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; Is control returning to your script after rank 0 has exited? In that case, you can just put this on the next line.<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; How to get the ZOMBIE_PID ? <br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; "ps" from the command line, or getpid() from C code.<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; Jed<br>&gt; &gt;&gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;&gt; _______________________________________________ users mailing list users@open-mpi.org http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt;&gt;&gt;&gt; _______________________________________________<br>&gt; &gt;&gt;&gt;&gt; users mailing list<br>&gt; &gt;&gt;&gt;&gt; users@open-mpi.org<br>&gt; &gt;&gt;&gt;&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt;&gt;&gt;<br>&gt; &gt;&gt;&gt; -- <br>&gt; &gt;&gt;&gt; Jeff Squyres<br>&gt; &gt;&gt;&gt; jsquyres@cisco.com<br>&gt; &gt;&gt;&gt; For corporate legal information go to:<br>&gt; &gt;&gt;&gt; http://www.cisco.com/web/about/doing_business/legal/cri/<br>&gt; &gt;&gt;&gt;<br>&gt; &gt;&gt;&gt;<br>&gt; &gt;&gt;&gt; _______________________________________________<br>&gt; &gt;&gt;&gt; users mailing list<br>&gt; &gt;&gt;&gt; users@open-mpi.org<br>&gt; &gt;&gt;&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt;&gt; _______________________________________________<br>&gt; &gt;&gt; users mailing list<br>&gt; &gt;&gt; users@open-mpi.org<br>&gt; &gt;&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt; <br>&gt; &gt; <br>&gt; <br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; users@open-mpi.org<br>&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br></div> 		 	   		  </body>
</html>
