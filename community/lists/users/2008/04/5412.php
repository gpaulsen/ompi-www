<?
$subject_val = "Re: [OMPI users] fortran90 and c++ wrappers don't work";
include("../../include/msg-header.inc");
?>
<!-- received="Thu Apr 17 09:29:33 2008" -->
<!-- isoreceived="20080417132933" -->
<!-- sent="Thu, 17 Apr 2008 09:29:23 -0400" -->
<!-- isosent="20080417132923" -->
<!-- name="Jeff Squyres" -->
<!-- email="jsquyres_at_[hidden]" -->
<!-- subject="Re: [OMPI users] fortran90 and c++ wrappers don't work" -->
<!-- id="AB6A1EAF-F289-4464-A66A-AE836620C073_at_cisco.com" -->
<!-- charset="WINDOWS-1252" -->
<!-- inreplyto="273EA81204953D4A911A18E8E2AF0000028F8ECA_at_santafe6.academic.ad.calstatela.edu" -->
<!-- expires="-1" -->
<div class="center">
<table border="2" width="100%" class="links">
<tr>
<th><a href="date.php">Date view</a></th>
<th><a href="index.php">Thread view</a></th>
<th><a href="subject.php">Subject view</a></th>
<th><a href="author.php">Author view</a></th>
</tr>
</table>
</div>
<p class="headers">
<strong>Subject:</strong> Re: [OMPI users] fortran90 and c++ wrappers don't work<br>
<strong>From:</strong> Jeff Squyres (<em>jsquyres_at_[hidden]</em>)<br>
<strong>Date:</strong> 2008-04-17 09:29:23
</p>
<ul class="links">
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="5413.php">Mukesh K Srivastava: "[OMPI users] GDB Debugging - GROMACS(v-3.3.3) Application with OpenMPI(v-1.2.5/v-1.2.6)"</a>
<li><strong>Previous message:</strong> <a href="5411.php">Tim Prins: "Re: [OMPI users] Different Interfaces on Different Nodes .. OpenMPI 1.2.3, 1.2.4 .."</a>
<li><strong>In reply to:</strong> <a href="5406.php">Rodriguez, Jose: "[OMPI users] fortran90 and c++ wrappers don't work"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr>
<!-- body="start" -->
<p>
Can you double check that you are using the wrapper compilers from the  
<br>
Open MPI installation that you think you're using?
<br>
<p>Tiger doesn't ship with Open MPI, so you shouldn't have problems  
<br>
conflicting with a system-installed OMPI, but could you possibly have  
<br>
another OMPI install hanging around somewhere?
<br>
<p>What is the output of mpicc --showme, mpicxx --showme, mpif77 -showme,  
<br>
and mpif90 --showme?
<br>
<p>If the intel compilers are not defaulting to 64 bit, you might also  
<br>
need to add -m64 to your wrapper compiler command line, e.g.:
<br>
<p>shell$ mpif90 hello_f90.f90 -m64
<br>
<p>You can add flags to the wrapper compilers with the following:
<br>
<p>&nbsp;&nbsp;&nbsp;--with-wrapper-cflags   Extra flags to add to CFLAGS when using mpicc
<br>
&nbsp;&nbsp;&nbsp;--with-wrapper-cxxflags Extra flags to add to CXXFLAGS when using
<br>
&nbsp;&nbsp;&nbsp;--with-wrapper-fflags   Extra flags to add to FFLAGS when using  
<br>
mpif77
<br>
&nbsp;&nbsp;&nbsp;--with-wrapper-fcflags  Extra flags to add to FCFLAGS when using  
<br>
mpif90
<br>
&nbsp;&nbsp;&nbsp;--with-wrapper-ldflags  Extra flags to add to LDFLAGS when using  
<br>
wrapper
<br>
&nbsp;&nbsp;&nbsp;--with-wrapper-libs     Extra flags to add to LIBS when using wrapper
<br>
<p>Or you can edit the text files in $prefix/share/openmpi/*-wrapper- 
<br>
data.txt.
<br>
<p><p>On Apr 17, 2008, at 12:55 AM, Rodriguez, Jose wrote:
<br>
<span class="quotelev1">&gt; Dear OMPI users and builders:
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; I recently installed the latest version of Open MPI (1.2.6) on my  
</span><br>
<span class="quotelev1">&gt; Mac Pro, which has 2 dual-core Intel cpu's.
</span><br>
<span class="quotelev1">&gt; On the plus side, I can successfully compile and run MPI codes  
</span><br>
<span class="quotelev1">&gt; written both in fortran77 and in c on all 4 cores
</span><br>
<span class="quotelev1">&gt; with the corresponding wrappers that the build created.  On the down  
</span><br>
<span class="quotelev1">&gt; side, I can&#146;t compile the fortran90
</span><br>
<span class="quotelev1">&gt; and the c++ versions of the sample `hello world' MPI programs.   
</span><br>
<span class="quotelev1">&gt; Instead I get
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; &quot;.../mpi_examples jpr$ mpif90 hello_f90.f90
</span><br>
<span class="quotelev1">&gt;  fortcom: Error: hello_f90.f90, line 12: This module file was not
</span><br>
<span class="quotelev1">&gt;  generated by any release of this compiler.   [MPI]
</span><br>
<span class="quotelev1">&gt;  use mpi  --------^
</span><br>
<span class="quotelev1">&gt;  fortcom: Error: hello_f90.f90, line 17: This name does not have a  
</span><br>
<span class="quotelev1">&gt; type,
</span><br>
<span class="quotelev1">&gt;  and must have an explicit type.   [MPI_COMM_WORLD]
</span><br>
<span class="quotelev1">&gt;  call MPI_COMM_RANK(MPI_COMM_WORLD, rank, ierr)   
</span><br>
<span class="quotelev1">&gt; -----------------------^
</span><br>
<span class="quotelev1">&gt;  compilation aborted for hello_f90.f90 (code 1)&quot;
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; and
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; &quot;.../mpi_examples jpr$ mpicxx hello_cxx.cc
</span><br>
<span class="quotelev1">&gt;  ld64 warning: in /usr/local/lib/libstdc++.dylib, file is not of  
</span><br>
<span class="quotelev1">&gt; required architecture
</span><br>
<span class="quotelev1">&gt;  ld64-62.1 failed: can't open file for writing&quot;.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Does anyone know what's wrong here? I configured the build using all  
</span><br>
<span class="quotelev1">&gt; of the latest Intel compilers:
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; &#147;$ ./configure CC=icc CXX=icpc F77=ifort FC=ifort CFLAGS=-m64
</span><br>
<span class="quotelev1">&gt;  CXXFLAGS=-m64 FFLAGS=-m64 FCFLAGS=-m64 --with-mpi-f90-size=medium&#148;.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Last, I'm running Mac OS Tiger (10.4.11) and Xcode 2.4.1. And  
</span><br>
<span class="quotelev1">&gt; apropos my version of GCC, I have
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; &quot;diana:~ jpr$ GCC
</span><br>
<span class="quotelev1">&gt;  i686-apple-darwin8-gcc-4.0.1: no input files&quot;.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Any guidance would be greatly appreciated.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Jose Rodriguez, Physics and Astronomy, California State University  
</span><br>
<span class="quotelev1">&gt; at Los Angeles, April 16, 2008.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; _______________________________________________
</span><br>
<span class="quotelev1">&gt; users mailing list
</span><br>
<span class="quotelev1">&gt; users_at_[hidden]
</span><br>
<span class="quotelev1">&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a>
</span><br>
<p><p><pre>
-- 
Jeff Squyres
Cisco Systems
</pre>
<!-- body="end" -->
<hr>
<ul class="links">
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="5413.php">Mukesh K Srivastava: "[OMPI users] GDB Debugging - GROMACS(v-3.3.3) Application with OpenMPI(v-1.2.5/v-1.2.6)"</a>
<li><strong>Previous message:</strong> <a href="5411.php">Tim Prins: "Re: [OMPI users] Different Interfaces on Different Nodes .. OpenMPI 1.2.3, 1.2.4 .."</a>
<li><strong>In reply to:</strong> <a href="5406.php">Rodriguez, Jose: "[OMPI users] fortran90 and c++ wrappers don't work"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div class="center">
<table border="2" width="100%" class="links">
<tr>
<th><a href="date.php">Date view</a></th>
<th><a href="index.php">Thread view</a></th>
<th><a href="subject.php">Subject view</a></th>
<th><a href="author.php">Author view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<? include("../../include/msg-footer.inc") ?>
