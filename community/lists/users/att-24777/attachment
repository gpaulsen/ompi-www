
<HTML><BODY><p>Hello!<br>I have&nbsp;Open MPI v1.9a1r32142 and slurm 2.5.6.<br><br>I can not use mpirun after salloc:<br><br>$salloc -N2 --exclusive -p test -J ompi<br>$LD_PRELOAD=/mnt/data/users/dm2/vol3/semenov/_scratch/mxm/mxm-3.0/lib/libmxm.so mpirun -np 1 hello_c<br>-----------------------------------------------------------------------------------------------------<br>An ORTE daemon has unexpectedly failed after launch and before<br>communicating back to mpirun. This could be caused by a number<br>of factors, including an inability to create a connection back<br>to mpirun due to a lack of common network interfaces and/or no<br>route found between them. Please check network connectivity<br>(including firewalls and network routing requirements).<br>------------------------------------------------------------------------------------------------------<br>But if i use mpirun in sbutch script it looks correct:<br>$cat ompi_mxm3.0<br>#!/bin/sh<br>LD_PRELOAD=/mnt/data/users/dm2/vol3/semenov/_scratch/mxm/mxm-3.0/lib/libmxm.so&nbsp; mpirun&nbsp; -x LD_PRELOAD -x MXM_SHM_KCOPY_MODE=off --map-by slot:pe=8 "$@"<br><br>$sbatch -N2&nbsp; --exclusive -p test -J ompi&nbsp; ompi_mxm3.0 ./hello_c<br>Submitted batch job 645039<br>$cat slurm-645039.out <br>[warn] Epoll ADD(1) on fd 0 failed.&nbsp; Old events were 0; read change was 1 (add); write change was 0 (none): Operation not permitted<br>[warn] Epoll ADD(4) on fd 1 failed.&nbsp; Old events were 0; read change was 0 (none); write change was 1 (add): Operation not permitted<br>Hello, world, I am 0 of 2, (Open MPI v1.9a1, package: Open MPI semenov@compiler-2 Distribution, ident: 1.9a1r32142, repo rev: r32142, Jul 04, 2014 (nightly snapshot tarball), 146)<br>Hello, world, I am 1 of 2, (Open MPI v1.9a1, package: Open MPI semenov@compiler-2 Distribution, ident: 1.9a1r32142, repo rev: r32142, Jul 04, 2014 (nightly snapshot tarball), 146)<br><br>Regards,<br>Timur</p></BODY></HTML>
