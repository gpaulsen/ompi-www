<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">Try adding —cpu-set a,b,c,… &nbsp;where the a,b,c… are the core id’s of your second socket. I’m working on a cleaner option as this has come up before.<div class=""><br class=""><div class=""><br class=""><div class=""><blockquote type="cite" class=""><div class="">On Dec 21, 2015, at 5:29 AM, Matt Thompson &lt;<a href="mailto:fortran@gmail.com" class="">fortran@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Dear Open MPI Gurus,<div class=""><br class=""></div><div class="">I'm currently trying to do something with Open MPI 1.8.8 that I'm pretty sure is possible, but I'm just not smart enough to figure out. Namely, I'm seeing some odd GPU timings and I think it's because I was dumb and assumed the GPU was on the PCI bus next to Socket #0 as some older GPU nodes I ran on were like that.&nbsp;</div><div class=""><br class=""></div><div class="">But, a trip through lspci and lstopo has shown me that the GPU is actually on Socket #1. These are dual socket Sandy Bridge nodes and I'd like to do some tests where I run a 8 processes per node and those processes all land on Socket #1.</div><div class=""><br class=""></div><div class="">So, what I'm trying to figure out is how to have Open MPI bind processes like that. My first thought as always is to run a helloworld job with -report-bindings on. I can manage to do this:</div><div class=""><br class=""></div><div class=""><div class=""><div class=""><font face="monospace, monospace" class="">(1061) $ mpirun -np 8 -report-bindings -map-by core ./helloWorld.exe</font></div><div class=""><font face="monospace, monospace" class="">[borg01z205:16306] MCW rank 4 bound to socket 0[core 4[hwt 0]]: [././././B/././.][./././././././.]</font></div><div class=""><font face="monospace, monospace" class="">[borg01z205:16306] MCW rank 5 bound to socket 0[core 5[hwt 0]]: [./././././B/./.][./././././././.]</font></div><div class=""><font face="monospace, monospace" class="">[borg01z205:16306] MCW rank 6 bound to socket 0[core 6[hwt 0]]: [././././././B/.][./././././././.]</font></div><div class=""><font face="monospace, monospace" class="">[borg01z205:16306] MCW rank 7 bound to socket 0[core 7[hwt 0]]: [./././././././B][./././././././.]</font></div><div class=""><font face="monospace, monospace" class="">[borg01z205:16306] MCW rank 0 bound to socket 0[core 0[hwt 0]]: [B/././././././.][./././././././.]</font></div><div class=""><font face="monospace, monospace" class="">[borg01z205:16306] MCW rank 1 bound to socket 0[core 1[hwt 0]]: [./B/./././././.][./././././././.]</font></div><div class=""><font face="monospace, monospace" class="">[borg01z205:16306] MCW rank 2 bound to socket 0[core 2[hwt 0]]: [././B/././././.][./././././././.]</font></div><div class=""><font face="monospace, monospace" class="">[borg01z205:16306] MCW rank 3 bound to socket 0[core 3[hwt 0]]: [./././B/./././.][./././././././.]</font></div><div class=""><font face="monospace, monospace" class="">Process &nbsp; &nbsp;7 of &nbsp; &nbsp;8 is on borg01z205</font></div><div class=""><font face="monospace, monospace" class="">Process &nbsp; &nbsp;5 of &nbsp; &nbsp;8 is on borg01z205</font></div><div class=""><font face="monospace, monospace" class="">Process &nbsp; &nbsp;2 of &nbsp; &nbsp;8 is on borg01z205</font></div><div class=""><font face="monospace, monospace" class="">Process &nbsp; &nbsp;3 of &nbsp; &nbsp;8 is on borg01z205</font></div><div class=""><font face="monospace, monospace" class="">Process &nbsp; &nbsp;4 of &nbsp; &nbsp;8 is on borg01z205</font></div><div class=""><font face="monospace, monospace" class="">Process &nbsp; &nbsp;6 of &nbsp; &nbsp;8 is on borg01z205</font></div><div class=""><font face="monospace, monospace" class="">Process &nbsp; &nbsp;0 of &nbsp; &nbsp;8 is on borg01z205</font></div><div class=""><font face="monospace, monospace" class="">Process &nbsp; &nbsp;1 of &nbsp; &nbsp;8 is on borg01z205</font></div></div><div class=""><br class=""></div><div class="">Great...but wrong socket! Is there a way to tell it to use Socket 1 instead?&nbsp;</div><div class=""><br class=""></div><div class="">Note I'll be running under SLURM, so I will only have 8 processes per node, so it shouldn't need to use Socket 0.</div>-- <br class=""><div class="gmail_signature"><div dir="ltr" class=""><div class=""><div dir="ltr" class=""><div class="">Matt Thompson</div></div></div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px" class=""><div class=""><div class=""><div class="">Man Among Men</div></div></div><div class=""><div class=""><div class="">Fulcrum of History</div></div></div></blockquote></div></div>
</div></div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" class="">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br class="">Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/12/28190.php" class="">http://www.open-mpi.org/community/lists/users/2015/12/28190.php</a></div></blockquote></div><br class=""></div></div></body></html>
