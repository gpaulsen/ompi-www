<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Well, there are some other rather simple ways to do it too.<div><br></div><div>1. Follow the FAQs and setup your remote login environment properly</div><div><br></div><div><a href="http://www.open-mpi.org/faq/?category=running#adding-ompi-to-path">http://www.open-mpi.org/faq/?category=running#adding-ompi-to-path</a></div><div><br></div><div>2. add "-x LD_LIBRARY_PATH" to your mpirun cmd line, as explained in this FAQ</div><div><br></div><div><a href="http://www.open-mpi.org/faq/?category=running#mpirun-options">http://www.open-mpi.org/faq/?category=running#mpirun-options</a></div><div><br></div><div>If you are using ssh/rsh for your launch, then #2 will resolve the problem as we set the LD_LIBRARY_PATH in ssh prior to actually starting the orted. If you are launching via some other resource manager, then #2 will indeed not solve the problem as there is no way to preset the environment. However, most RMs (including Torque, Slurm, LSF, and SGE) allow passing of the environment if configured to do so - you might check with your sys admin to see if they will do it for you.</div><div><br></div><div><br></div><div><br><div><div><div>On Jun 30, 2013, at 12:52 PM, Alan Wild &lt;<a href="mailto:alan@madllama.net">alan@madllama.net</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div dir="ltr">I'm surprised that there are users still reporting issues getting this to work, but as I'm still seeing notes in the digest I wanted to share (what I believe the issue is) and how I've fixed it.<div>
<br></div><div>If you don't take special measures, OpenMPI will be dynamically linked and have runtime dependencies on several of Intel's .so files. &nbsp;However, passing LD_LIBRARY_PATH has an option on mpirun is often not sufficient because the orted process itself has these dyanmic dependencies... so when you invoke mpirun, it fires up and launches orted on the remote hosts (with the intention of passing LD_LIBRARY_PATH or whatever to the remote process but the remote process immediately fails because it cannot resolve its dependencies (and LD_LIBRARY_PATH is never setup on the far side).</div>
<div><br></div><div>So I see two options:</div><div><br></div><div>1) linking orted statically. &nbsp;(Not sure if I've ever done this)</div><div><br></div><div>2) Passing an rpath in your openmpi link options so that oreted can resolve its own dependencies without needing an LD_LIBRARY_PATH</div>
<div><br></div><div>You can do #2 by using something similar to the following on your configure line</div><div><br></div><div>./configure --prefix=/path/to/where/to/install/openmpi LDFLAGS="-Wl,--enable-new-dtags -Wl,-rpath,/path/to/intel/compiler/lib_directory"</div>
<div><br></div><div><br></div><div><br></div><div>-Alan<div class="gmail_extra"><div><br></div>-- <br><a href="mailto:alan@madllama.net">alan@madllama.net</a> <a href="http://humbleville.blogspot.com/">http://humbleville.blogspot.com</a>
</div></div></div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/users</blockquote></div><br></div></div></body></html>
