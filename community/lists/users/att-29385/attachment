<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Jun 6, 2016, at 10:18 AM, Rob Nagler &lt;<a href="mailto:openmpi-wooxi@q33.us" class="">openmpi-wooxi@q33.us</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class=""><div class="gmail_extra"><div class="gmail_quote"><div class="">Ralph,&nbsp;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word" class=""><div class=""><span class=""><blockquote type="cite" class=""><div class=""></div></blockquote></span>FWIW: I haven’t seen it before.</div></div></blockquote><div class=""><br class=""></div><div class="">Good to know.&nbsp;</div><div class="">&nbsp;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word" class=""><div class=""><span class=""><blockquote type="cite" class=""><div dir="ltr" class=""><div class="gmail_extra"></div></div></blockquote><div class=""><br class=""></div></span>Not sure I understand the issue, but I have no knowledge of Jupyter or why you are using it. From what I can see, it appears that your choice of tools may be complicating your solution - I’d suggest perhaps focusing on solving the problem rather than trying to force-fit your current tools, but that presumes you don’t have some particular attachment to those tools.</div></div></blockquote><div class=""><br class=""></div><div class="">No attachment to particular tools. This is a greenfield project. As to Jupyter, it's fairly simple. JupyterHub launches Jupyter in a Docker container with the user's directory, e.g. /var/nfs/jupyter/robnagler gets mounted /home/docker-user. Then the user can bring a up a terminal and work within the container as if they ssh'ed into the container, but without having to run ssh.&nbsp;</div><div class=""><br class=""></div><div class="">Think of JupyterHub as way to provide login nodes without having a corresponding Unix user.</div><div class=""><br class=""></div><div class="">&nbsp;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word" class=""><div class=""><span class=""><div class=""><br class=""></div></span>That isn’t the security hole - the issue is that Docker doesn’t prevent the user from taking privileged state, which means the user can become root. Yes, it is within that container - but the network and other 3rd party services can be vulnerable. Cgroups doesn’t really solve that problem as it still thinks the user is the one you originally set for the container, and constrains resources that way - but it doesn’t do authentication protection.</div></div></blockquote><div class=""><br class=""></div><div class="">I think <a href="https://docs.docker.com/engine/reference/commandline/daemon/#daemon-user-namespace-options" class="">user namespaces</a> (Docker 1.10) &nbsp;helps mitigate privilege escalation/container escape issues. You can become root in the container, but outside the container, you are some other user, like NFS's root_squash. Docker by default does contain the network and other devices. I don't really know what MPI would require, but it seems to work with TCP sockets, which don't allow spoofing.</div><div class=""><br class=""></div><div class="">One thing I'm assuming with all this is that people who run containers on Docker Hub, Travis, <a href="http://terminal.com" class="">Terminal.com</a>, etc. have similar problems. They are running jobs on behalf of web users (like our problem) as a single unix user id. Docker Hub runs containers as root to build images so they must be able to lock down containers well enough.</div></div></div></div></div></blockquote><div><br class=""></div>You know what they say about “assume”….</div><div><br class=""><blockquote type="cite" class=""><div class=""><div dir="ltr" class=""><div class="gmail_extra"><div class="gmail_quote"><div class=""><br class=""></div><div class="">Another thing we can (and probably should) do is verify the images have no setuid files. I think this would eliminate a lot of the privilege escalation issues.</div><div class=""><br class=""></div><div class="">Rob<br class=""></div><div class=""><br class=""></div></div><br class=""></div></div>
_______________________________________________<br class="">users mailing list<br class=""><a href="mailto:users@open-mpi.org" class="">users@open-mpi.org</a><br class="">Subscription: https://www.open-mpi.org/mailman/listinfo.cgi/users<br class="">Link to this post: http://www.open-mpi.org/community/lists/users/2016/06/29384.php</div></blockquote></div><br class=""></body></html>
