<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Andreas,<div><br></div><div>Have you checked that ifort is creating 64 bit objects. If I remember correctly with 10.1 the default was to create 32 bit objects.</div><div><br></div><div>Doug Reeder<br><div><div>On Sep 11, 2009, at 3:25 PM, Andreas Haselbacher wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">On Fri, Sep 11, 2009 at 5:10 PM, Jeff Squyres <span dir="ltr">&lt;<a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>></span> wrote:<br><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"> <div class="im">On Sep 11, 2009, at 10:05 AM, Andreas Haselbacher wrote:<br> <br> <blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"> I've built openmpi version 1.3.3 on a MacPro with OS X 10.5.8 and the Intel 10.1.006 Fortran compiler and gcc 4.0. &nbsp;As far as I can tell, the configure and make commands completed fine. There are some warnings, but it's not clear to me that they are critical - or the explanation for what's not working. After installing, I try to compile a simple F77 hello world code. The output is:<br> <br> % mpif77 helloworld_mpi.f -o helloworld_mpi<br> ld: warning in /opt/openmpi/lib/libmpi_f77.a, file is not of required architecture<br> </blockquote> <br></div> This means that it skipped that library because it didn't match what you were trying to compile against.<br> <br> Can you send the output of mpif77 --showme?<div class="im"><br></div></blockquote><div><br></div><div>ifort -I/opt/openmpi/include -L/opt/openmpi/lib -lmpi_f77 -lmpi -lopen-rte -lopen-pal -lutil</div><div>&nbsp;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"> <div class="im"> <br> <blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"> Undefined symbols:<br> &nbsp;"_mpi_init_", referenced from:<br> &nbsp; &nbsp; &nbsp;_MAIN__ in ifortIsUNoZ.o<br> </blockquote> <br></div> None of these symbols were found because libmpi_f77.a was skipped.<div class="im"><br></div></blockquote><div><br></div><div>Right.</div><div>&nbsp;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"> <div class="im"> <br> <blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"> Here's my configure command:<br> <br> ./configure --prefix=/opt/openmpi --enable-static --disable-shared CC=gcc CFLAGS=-m64 CXX=g++ CXXFLAGS=-m64 F77=ifort FC=ifort FFLAGS=-assume nounderscore FCFLAGS=-assume nounderscore<br> </blockquote> <br></div> I do not have the intel compilers for Mac; do they default to producing 64 bit objects? &nbsp;I ask because it looks like you forced the C and C++ compilers to produce 64 bit objects -- do you need to do the same with ifort? &nbsp;(via the FCFLAGS and FFLAGS env variables)<br> </blockquote><div><br></div><div>If I remember correctly, I had to add those flags, otherwise configure claimed that the compilers were not compatible. I can rerun configure if you suspect that this is an issue. &nbsp;I did not add these flags to the Fortran variables because configure did not complain further, but I can see that this might be an issue.&nbsp;</div> <div>&nbsp;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"> <br> Also, did you quote the "-assume nounderscore" arguments to FFLAGS/FCFLAGS? &nbsp;I.e., something like this:<br> <br> &nbsp; &nbsp;"FFLAGS=-assume nounderscore"<br><font color="#888888"> <br></font></blockquote><div><br></div><div>Yes, I did.&nbsp;</div><div><br></div><div>Andreas</div><div>&nbsp;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"><font color="#888888"> -- <br> Jeff Squyres<br> <a href="mailto:jsquyres@cisco.com" target="_blank">jsquyres@cisco.com</a><br> <br> </font></blockquote></div><br> _______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></blockquote></div><br></div></body></html>
