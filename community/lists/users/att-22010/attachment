<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">I would suspect you are hitting limits on the number of open sockets - check your limits settings on file descriptors.<div><br><div><div>On Jun 1, 2013, at 11:43 AM, vacate &lt;<a href="mailto:vacatehoping@gmail.com">vacatehoping@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div dir="ltr"><span style="font-family:arial,sans-serif;font-size:13px">Hello everybody,</span><br><div><span style="font-family:arial,sans-serif;font-size:13px"><br></span></div><div style=""><span style="font-family:arial,sans-serif;font-size:13px">I'm a beginner in Open MPI world.</span></div>
<div style=""><font face="arial, sans-serif">Maybe it's a simple problem, but I cannot figure out what happen on it...</font></div><div style=""><font face="arial, sans-serif"><br></font></div><div style=""><font face="arial, sans-serif">My situation is</font></div>
<div style=""><font face="arial, sans-serif">I use 4 hosts totally, and their IP address are static.</font></div><div style=""><span style="font-family:arial,sans-serif">I can't do </span><u style="font-family:arial,sans-serif">mpirun</u><span style="font-family:arial,sans-serif"> over 1500 times almost at the same time.</span><br>
</div><div style=""><font face="arial, sans-serif">(but it's always okay less than 1000 times)</font></div><div style=""><font face="arial, sans-serif">I got many "<b>ssh_exchange_identification: connection closed by remote host</b></font><span style="font-family:arial,sans-serif">" errors.</span></div>
<div style=""><br></div><div style="">--------------------------------------------------------------------------------------------------------------------------<br></div><div style=""><font face="arial, sans-serif">My Open MPI version :&nbsp;1.6.2</font></div>
<div style="">--------------------------------------------------------------------------------------------------------------------------<font face="arial, sans-serif"><br></font></div><div style=""><font face="arial, sans-serif">I use a simple bash shell script file to run my Open MPI file(named&nbsp;</font><span style="font-family:arial,sans-serif">openMPI_test</span><span style="font-family:arial,sans-serif">)</span></div>
<div style=""><font face="arial, sans-serif">Here is my script content :</font></div><div style=""><font face="arial, sans-serif"><br></font></div><div style=""><font face="arial, sans-serif">for (( index=0; index&lt;2000 ; index++))<br>
</font></div><div style=""><font face="arial, sans-serif">&nbsp; &nbsp;do</font></div><div style=""><font face="arial, sans-serif">&nbsp; &nbsp; &nbsp; &nbsp;(time mpirun --hostfile my_hostfile openMPI_test &amp;) &gt;&gt; file 2&gt;&amp;1</font></div><div style="">
<font face="arial, sans-serif">&nbsp; &nbsp;done</font></div><div style=""><font face="arial, sans-serif"><br></font></div><div style=""><font face="arial, sans-serif"><br></font></div><div style="">p.s.1 "<span style="font-family:arial,sans-serif">my_hostfile</span>" file lists 4 hosts' IP address.<font face="arial, sans-serif"><br>
</font></div><div style="">p.s.2 "<span style="font-family:arial,sans-serif">openMPI_test</span>" file ask each host do the same thing, it means:</div><div style="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(rank == 0){ &nbsp; &nbsp; &nbsp;for(i=0 ; i&lt;65535 ; i++) &nbsp; &nbsp;temp = i/(i+1); &nbsp;}</div>
<div style="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(rank == 1){ &nbsp; &nbsp; &nbsp;for(i=0 ; i&lt;65535 ; i++) &nbsp; &nbsp;temp = i/(i+1); &nbsp;}<br></div><div style="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(rank == 2){ &nbsp; &nbsp; &nbsp;for(i=0 ; i&lt;65535 ; i++) &nbsp; &nbsp;temp = i/(i+1); &nbsp;}<br></div><div style="">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(rank == 3){ &nbsp; &nbsp; &nbsp;for(i=0 ; i&lt;65535 ; i++) &nbsp; &nbsp;temp = i/(i+1); &nbsp;}<br></div><div style="">--------------------------------------------------------------------------------------------------------------------------<br>
</div><div style=""><br></div><div style="">At the first, I thought I have some system problems,</div><div style="">so I tried to modify my /etc/ssh/sshd_config file.</div><div style="">I set Max_Sessions up to 65535, and MaxStartups up to 65535,</div>
<div style="">but the result made me so sad because it still didn't work :((<br></div><div style=""><br></div><div style="">I'm not sure if there are some settings or limits in Open MPI,<br></div><div style="">or I just have another system problems?</div>
<div style=""><br></div><div style="">I really hope someone can help me..</div><div style="">Thank you all very very much!!<br></div><div style=""><br></div><div style=""><br></div><div style=""><br></div><div style="">Best Wishes,</div><div style="">
Jen</div><div style=""><br></div></div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/users</blockquote></div><br></div></body></html>
