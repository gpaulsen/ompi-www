<html><body><div style="color:#000; background-color:#fff; font-family:Courier New, courier, monaco, monospace, sans-serif;font-size:10pt"><div><span></span></div><div><br></div>  <div style="font-family: Courier New, courier, monaco, monospace, sans-serif; font-size: 10pt;"> <div style="font-family: times new roman, new york, times, serif; font-size: 12pt;"> <div dir="ltr"> <font size="2" face="Arial"> ----- Forwarded Message -----<br>  <b><span style="font-weight:bold;">From:</span></b> Hamilton Fischer &lt;fischerhamilton@yahoo.com&gt;<br> <b><span style="font-weight: bold;">To:</span></b> "user@open-mpi.org" &lt;user@open-mpi.org&gt; <br> <b><span style="font-weight: bold;">Sent:</span></b> Monday, January 16, 2012 9:09 PM<br> <b><span style="font-weight: bold;">Subject:</span></b> unknown af_family recieved errors...<br> </font> </div> <br>
<div id="yiv629281119"><div><div style="color:#000;background-color:#fff;font-family:times new roman, new york, times, serif;font-size:12pt;"><div><span style="font-family:times new roman, new york, times, serif;">Hi, I'm having odd issues with my "cluster", I guess. This very simple example works on one machine, but it gives a load of errors and hangs afterwards when I try to make it work on parrallelize it across the network.</span><br><font size="2"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;"></span></font></div><div><font size="2"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><br></span></font></div><div><font size="2"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">#include &lt;stdio.h&gt;</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace,
 sans-serif;">#include "mpi.h"</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">int</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">main(int argc, char *argv[])</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">{</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp; int rank, size;</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace,
 sans-serif;">&nbsp; MPI_Init(&amp;argc, &amp;argv);</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp; MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp; MPI_Comm_size(MPI_COMM_WORLD, &amp;size);</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp; if (rank == 0)</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp; {</span><br style="font-family:Courier New,
 courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int i;</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(i=1; i &lt; size; ++i)</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp; {</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp; &nbsp; int s=1;</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp; &nbsp; MPI_Send(&amp;s, 1,
 MPI_INT, i, 1, MPI_COMM_WORLD);</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp; }</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp; }</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp; else</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp; {</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int r;</span><br
 style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="
font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Recv(&amp;r, 1, MPI_INT, 0, 1, MPI_COMM_WORLD, NULL);</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%d got a %d\n", rank, r);</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp;&nbsp;&nbsp; }</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp; MPI_Finalize();</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">&nbsp; return 0;</span><br style="font-family:Courier
 New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">}</span><br></font></div><div><br></div><div>If I do `mpirun -np 3 a.out', where a.out is the executable, I get obvious output:</div><div><br></div><div>1 got a 1<br>2 got a 1<br></div><div><br></div><div>Now, let's say I go on the network. I use `mpirun --hostfile ../combin_host a.out', where my hostfile is simply:</div><div><br></div><div><font size="2"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;"># Hostfile<br>angryrock@192.168.0.1 slots=4<br># Hostfile<br>user@192.168.0.102 slots=2<br>user@192.168.0.103 slots=2<br>user@192.168.0.104 slots=2<br>user@192.168.0.105 slots=2<br></span></font><br></div><div>I get this...<br></div><div><br></div><div style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><font size="2">[localhost:04756] mca_btl_tcp_proc: unknown af_family received:
 1<br>[localhost:04756] unknown address family for tcp: 0<br>[localhost:04756] mca_btl_tcp_proc: unknown af_family received: 1<br>[localhost:04756] unknown address family for tcp: 0<br>[localhost:04610] mca_btl_tcp_proc: unknown af_family received: 1<br>[localhost:04610] unknown address family for tcp: 0<br><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">[localhost:04048] mca_btl_tcp_proc: unknown af_family received: 1</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"></font></div><div><font style="font-family:Courier New, courier, monaco, monospace, sans-serif;" size="2">...</font><font size="2"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;"></span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">[localhost:04123] unknown address family for tcp:
 0</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">1 got a 1</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">2 got a 1</span><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><span style="font-family:Courier New, courier, monaco, monospace, sans-serif;">3 got a 1</span></font><br style="font-family:Courier New, courier, monaco, monospace, sans-serif;"><font style="font-family:Courier New, courier, monaco, monospace, sans-serif;" size="2">^Cmpirun: killing job...</font></div><div><br></div><div>The ellipsis encompases a few lines of the same thing probably for each host. The ending part no doubt is a.out executing on my machine. As is obvious, at the end, I have to kill it because it
 hangs.</div><div><br></div><div>Any help as to what my
 issue might be? It obviously is an installation issue...</div><div><br></div><div>Thanks,</div><div>noobermin<br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div></div></div></div><br><br> </div> </div>  </div></body></html>
