<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
  </head>
  <body bgcolor="#ffffff" text="#000000">
    Well MPI_Recv does give you the message that was sent specifically
    to the rank calling it by any of the processes in the communicator.&nbsp;
    If you think the message you received should have gone to another
    rank then there is a bug somewhere.&nbsp; I would start by either adding
    debugging printf's to your code to trace the messages.&nbsp;&nbsp; Or
    narrowing down the code to a small kernel such that you can prove to
    yourself that MPI is working the way it should and if not you can
    show us where it is going wrong.<br>
    <br>
    --td<br>
    <br>
    On 7/15/2011 6:51 AM, Mudassar Majeed wrote:
    <blockquote
      cite="mid:1310727078.94177.YahooMailNeo@web121720.mail.ne1.yahoo.com"
      type="cite">
      <div style="color: rgb(0, 0, 0); background-color: rgb(255, 255,
        255); font-family: times new roman,new york,times,serif;
        font-size: 10pt;">I get the sender's rank in status.MPI_SOURCE,
        but it is different than expected. I need to receive that
        message which was sent to me, not any message.&nbsp; <br>
        <br>
        regards,<br>
        <br>
        Date: Fri, 15 Jul 2011 06:33:41 -0400<br>
        From: Terry Dontje &lt;<a moz-do-not-send="true"
          href="mailto:terry.dontje@oracle.com">terry.dontje@oracle.com</a>&gt;<br>
        Subject: Re: [OMPI users] Urgent Question regarding,
        MPI_ANY_SOURCE.<br>
        To: <a moz-do-not-send="true" href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
        Message-ID: &lt;<a moz-do-not-send="true"
          href="mailto:4E201785.6010101@oracle.com">4E201785.6010101@oracle.com</a>&gt;<br>
        Content-Type: text/plain; charset="iso-8859-1"; Format="flowed"<br>
        <br>
        Mudassar,<br>
        <br>
        You can do what you are asking.&nbsp; The receiver uses
        MPI_ANY_SOURCE for <br>
        the source rank value and when you receive a message the <br>
        status.MPI_SOURCE will contain the rank of the actual sender not
        the <br>
        receiver's rank.&nbsp; If you are not seeing that then there is a bug
        somewhere.<br>
        <br>
        --td<br>
        <br>
        On 7/14/2011 9:54 PM, Mudassar Majeed wrote:<br>
        &gt; Friend,<br>
        &gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I can not specify the rank of the sender.
        Because only <br>
        &gt; the sender knows to which receiver the message is to be
        sent. The <br>
        &gt; receiver does not know from which sender the message will
        come. I am <br>
        &gt; trying to do a research work on load balancing in MPI
        application <br>
        &gt; where load is redistributed, so in that I require a
        receiver to <br>
        &gt; receive a load value from a sender that it does not know.
        On the other <br>
        &gt; hand, the sender actually calculates, to which receiver
        this load <br>
        &gt; value should be sent. So for this, I want sender to send a
        message <br>
        &gt; containing the load to a receiver, but receiver does not
        know from <br>
        &gt; which sender the message will come. See, it is like send
        receiver in <br>
        &gt; DATAGRAM sockets. The receiver, receives the message on the
        IP and <br>
        &gt; port, the message which was directed for it. I want to have
        same <br>
        &gt; behavior. But it seems that it is not possible in MPI.
        Isn't it?<br>
        &gt;<br>
        &gt; regards,<br>
        &gt; Mudassar<br>
        &gt;<br>
        &gt;
        ------------------------------------------------------------------------<br>
        &gt; *From:* Jeff Squyres &lt;<a moz-do-not-send="true"
          href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt;<br>
        &gt; *To:* Mudassar Majeed &lt;<a moz-do-not-send="true"
          href="mailto:mudassarm30@yahoo.com">mudassarm30@yahoo.com</a>&gt;<br>
        &gt; *Cc:* Open MPI Users &lt;<a moz-do-not-send="true"
          href="mailto:users@open-mpi.org">users@open-mpi.org</a>&gt;<br>
        &gt; *Sent:* Friday, July 15, 2011 3:30 AM<br>
        &gt; *Subject:* Re: [OMPI users] Urgent Question regarding,
        MPI_ANY_SOURCE.<br>
        &gt;<br>
        &gt; Right.&nbsp; I thought you were asking about receiving *another*
        message <br>
        &gt; from whomever you just received from via ANY_SOURCE.<br>
        &gt;<br>
        &gt; If you want to receive from a specific sender, you just
        specify the <br>
        &gt; rank you want to receive from -- not ANY_SOURCE.<br>
        &gt;<br>
        &gt; You will always only receive messages that were sent to
        *you*.&nbsp; <br>
        &gt; There's no MPI_SEND_TO_ANYONE_WHO_IS_LISTENING
        functionality, for <br>
        &gt; example.&nbsp; So your last statement: "But when it captures
        with .. <br>
        &gt; MPI_ANY_SOURCE and MPI_ANY_TAG, the receiver will capture
        any message <br>
        &gt; (even not targetted for it)" is incorrect.<br>
        &gt;<br>
        &gt; I guess I still don't understand your question...?<br>
        &gt;<br>
        &gt;<br>
        &gt; On Jul 14, 2011, at 9:17 PM, Mudassar Majeed wrote:<br>
        &gt;<br>
        &gt; &gt;<br>
        &gt; &gt; I know this, but when I compare status.MPI_SOURCE with
        myid, they <br>
        &gt; are different. I guess you need to reconsider my question.
        The <br>
        &gt; MPI_Recv function seems to capture message from the queue
        with some <br>
        &gt; search parameters like source, tag etc. So in case the
        receiver does <br>
        &gt; not know the sender and wants to receive only that message
        which was <br>
        &gt; sent for this receiver. But when it captures with source as
        <br>
        &gt; MPI_ANY_SOURCE and MPI_ANY_TAG, the receiver will capture
        any message <br>
        &gt; (even not targetted for it).<br>
        &gt; &gt;<br>
        &gt; &gt; regards,<br>
        &gt; &gt; Mudassar<br>
        &gt; &gt;<br>
        &gt; &gt;<br>
        &gt; &gt; From: Jeff Squyres &lt;<a moz-do-not-send="true"
          href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>
        &lt;mailto:<a moz-do-not-send="true"
          href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt;&gt;<br>
        &gt; &gt; To: Mudassar Majeed &lt;<a moz-do-not-send="true"
          href="mailto:mudassarm30@yahoo.com">mudassarm30@yahoo.com</a>
        <br>
        &gt; &lt;mailto:<a moz-do-not-send="true"
          href="mailto:mudassarm30@yahoo.com">mudassarm30@yahoo.com</a>&gt;&gt;;
        Open MPI Users &lt;<a moz-do-not-send="true"
          href="mailto:users@open-mpi.org">users@open-mpi.org</a> <br>
        &gt; &lt;mailto:<a moz-do-not-send="true"
          href="mailto:users@open-mpi.org">users@open-mpi.org</a>&gt;&gt;<br>
        &gt; &gt; Sent: Friday, July 15, 2011 1:58 AM<br>
        &gt; &gt; Subject: Re: [OMPI users] Urgent Question regarding,
        MPI_ANY_SOURCE.<br>
        &gt; &gt;<br>
        &gt; &gt; When you use MPI_ANY_SOURCE in a receive, the rank of
        the actual <br>
        &gt; sender is passed back to you in the status.MPI_SOURCE.<br>
        &gt; &gt;<br>
        &gt; &gt; On Jul 14, 2011, at 7:55 PM, Mudassar Majeed wrote:<br>
        &gt; &gt;<br>
        &gt; &gt; &gt; Hello people,<br>
        &gt; &gt; &gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I am trapped in the
        following problem plz <br>
        &gt; help me. Suppose a process A sends a message to process B.
        The process <br>
        &gt; B will receive the message with MPI_Recv with
        MPI_ANY_SOURCE in the <br>
        &gt; source argument. Let say process B does not know that A is
        the sender. <br>
        &gt; But I want B to receive message from process A (the one who
        actually <br>
        &gt; sends the message to process B). But if I use
        MPI_ANY_SOURCE, then any <br>
        &gt; message from any source is captured by process B (let say
        there are <br>
        &gt; other processes sending messages). Instead of
        MPI_ANY_SOURCE I cannot <br>
        &gt; use A in the source argument as B does not know about the
        sender. What <br>
        &gt; should I do in this situation ?<br>
        &gt; &gt; &gt;<br>
        &gt; &gt; &gt; regards,<br>
        &gt; &gt; &gt; Mudassar Majeed<br>
        &gt; &gt; &gt; _______________________________________________<br>
        &gt; &gt; &gt; users mailing list<br>
        &gt; &gt; &gt; <a moz-do-not-send="true"
          href="mailto:users@open-mpi.org">users@open-mpi.org</a>
        &lt;mailto:<a moz-do-not-send="true"
          href="mailto:users@open-mpi.org">users@open-mpi.org</a>&gt;<br>
        &gt; &gt; &gt; <a moz-do-not-send="true"
          href="http://www.open-mpi.org/mailman/listinfo.cgi/users"
          target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
        &gt; &gt;<br>
        &gt; &gt;<br>
        &gt; &gt; --<br>
        &gt; &gt; Jeff Squyres<br>
        &gt; &gt; <a moz-do-not-send="true"
          href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>
        &lt;mailto:<a moz-do-not-send="true"
          href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt;<br>
        &gt; &gt; For corporate legal information go to:<br>
        &gt; &gt; <a moz-do-not-send="true"
          href="http://www.cisco.com/web/about/doing_business/legal/cri/"
          target="_blank">http://www.cisco.com/web/about/doing_business/legal/cri/</a><br>
        &gt; &gt;<br>
        &gt; &gt;<br>
        &gt; &gt;<br>
        &gt;<br>
        &gt;<br>
        &gt; -- <br>
        &gt; Jeff Squyres<br>
        &gt; <a moz-do-not-send="true" href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>
        &lt;mailto:<a moz-do-not-send="true"
          href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt;<br>
        &gt; For corporate legal information go to:<br>
        &gt; <a moz-do-not-send="true"
          href="http://www.cisco.com/web/about/doing_business/legal/cri/"
          target="_blank">http://www.cisco.com/web/about/doing_business/legal/cri/</a><br>
        &gt;<br>
        &gt;<br>
        &gt;<br>
        &gt;<br>
        &gt; _______________________________________________<br>
        &gt; users mailing list<br>
        &gt; <a moz-do-not-send="true" href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
        &gt; <a moz-do-not-send="true"
          href="http://www.open-mpi.org/mailman/listinfo.cgi/users"
          target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></div>
      <pre wrap="">
<fieldset class="mimeAttachmentHeader"></fieldset>
_______________________________________________
users mailing list
<a class="moz-txt-link-abbreviated" href="mailto:users@open-mpi.org">users@open-mpi.org</a>
<a class="moz-txt-link-freetext" href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></pre>
    </blockquote>
    <br>
    <div class="moz-signature">-- <br>
      <meta content="text/html; charset=ISO-8859-1"
        http-equiv="Content-Type">
      <div class="moz-signature">
        <meta http-equiv="content-type" content="text/html;
          charset=ISO-8859-1">
        <title></title>
        <img moz-do-not-send="false"
          src="cid:part1.08050300.03000500@oracle.com" alt="Oracle"><br>
        <div class="moz-signature">
          <div class="moz-signature">
            <div class="moz-signature">
              <div class="moz-signature">Terry D. Dontje | Principal
                Software Engineer<br>
                <div class="moz-signature"><font size="2"
                    color="#666666" face="Verdana">Developer
                    Tools
                    Engineering | +1.781.442.2631<br>
                  </font>
                  <font size="2" color="#ff0000" face="Verdana">Oracle
                  </font><font size="2" color="#666666" face="Verdana"><b>
                      - Performance
                      Technologies</b></font><br>
                  <font size="2" color="#666666" face="Verdana">
                    95 Network Drive, Burlington, MA 01803<br>
                    Email <a moz-do-not-send="true"
                      href="mailto:terry.dontje@oracle.com">terry.dontje@oracle.com</a><br>
                  </font><br>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>
      <br>
    </div>
  </body>
</html>

