<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Verdana
}
--></style>
</head>
<body class='hmmessage'>
I actually tried both:<br>-- in the interactive mode, as soon as I hit enter, the PBS sends me to a worker node (WN2) that does not have tm support.<br>&nbsp;&nbsp;&nbsp; I guess if I added the head node to the list of PBS nodes, I would not run into the problem. However, I am glad I did run into <br>&nbsp;&nbsp;&nbsp; the problem. You guys helped me understand how mpirun interacts with PBS.<br>-- in the batch mode, the PBS chooses WN2 as the root node (rank 0) to run mpirun. <br>So, Both behaved in the same in my case.<br><br>With many thanks Ralph for the clarification. I am now getting into the openMPI spirit. By the way, I love it :) <br><br>~Belaid.<br><br><br><br>&nbsp;<br><br><hr id="stopSpelling">From: rhc@open-mpi.org<br>Date: Tue, 1 Dec 2009 19:44:38 -0700<br>To: users@open-mpi.org<br>Subject: Re: [OMPI users] mpirun is using one PBS node only<br><br>

<base>Just to further show my confusion (since I wrote much of the TM support):<div><br></div><div>If you get an interactive allocation and then type "mpirun ....", mpirun will execute on the node upon which you are sitting. Jeff's statement is -only- true if you "qsub" the job - i.e., you run it in batch mode.</div><div><br></div><div>From your prior notes, I was under the impression you were running interactively. If this is true, then you only need OMPI to be built with TM support on the node which you are interactively working on.</div><div><br></div><div>If you are running it in batch mode, then Jeff is correct - you will need OMPI built with TM support on all nodes since you (in general) cannot know which node PBS will launch you on.</div><div><br></div><div>Hope that is clear</div><div>Ralph</div><div><br><div><div>On Dec 1, 2009, at 7:35 PM, Belaid MOA wrote:</div><br class="ecxApple-interchange-newline"><blockquote><span class="ecxApple-style-span" style="border-collapse: separate; font-family: Helvetica; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px;"><div class="ecxhmmessage" style="font-size: 10pt; font-family: Verdana;">&gt; Yes, this page is definitely incorrect if you want to run with PBS/TM<span class="ecxApple-converted-space">&nbsp;</span><br>&gt; support -- you definitely need to install with TM support on all nodes.<br>&gt;<span class="ecxApple-converted-space">&nbsp;</span><br>&gt; The reason is that PBS will launch your script (and therefore<span class="ecxApple-converted-space">&nbsp;</span><br>&gt; "mpirun") on the first node of the job. This node must have an Open<span class="ecxApple-converted-space">&nbsp;</span><br>&gt; MPI mpirun with TM support so that it can query PBS to get the nodes<span class="ecxApple-converted-space">&nbsp;</span><br>&gt; to launch on, use the TM API to launch processes on the nodes<span class="ecxApple-converted-space">&nbsp;</span><br>&gt; allocated to the job, etc.<br>That's exactly the sound logic I understood from OpenMPI documentation but<br>I thought the website is reliable in the sense it configured the server node with<br>tm support.<br><br>I am very grateful to subscribe to this list. It is one of the most active list I ever saw.<br><br>Thanks a lot Jeff.<br><br>With Best Regards.<br>~Belaid.<br><br><hr>Get a great deal on Windows 7 and see how it works the way you want.<span class="ecxApple-converted-space">&nbsp;</span><a href="http://go.microsoft.com/?linkid=9691813">See the Windows 7 offers now.</a>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></div></span></blockquote></div><br></div> 		 	   		  <br /><hr />Get a great deal on Windows 7 and see how it works the way you want. <a href='http://go.microsoft.com/?linkid=9691813' target='_new'>See the Windows 7 offers now.</a></body>
</html>
