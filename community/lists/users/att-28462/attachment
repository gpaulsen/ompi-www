<div dir="ltr"><div class="gmail_extra"><div class="gmail_quote">On Mon, Feb 8, 2016 at 12:31 AM, Jeff Hammond <span dir="ltr">&lt;<a href="mailto:jeff.science@gmail.com" target="_blank">jeff.science@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><div class="gmail_extra"><span class=""><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><span><br>&gt; BTW: is there a reason you don&#39;t want to just use the C datatypes?  The fundamental output of the index is an integer value -- casting it to a float of some flavor doesn&#39;t fundamentally change its value.<div><br></div></span><div>The code in question is not mine.  I have suggested to the developers that they should use the correct C types.  The reason I became aware of this issue is that one of my colleagues compiled and ran this code on a system where OpenMPI was built without Fortran support and the code started failing with errors from MPI which were not seen on other systems.</div><span><div><br></div></span></div></blockquote></div><div><br></div></span><div>If you use an MPI library compiled without Fortran support, you should expect precisely nothing related to Fortran to work.  You might get more than this because the universe is being nice to you, but you should treat it as serendipity when something works, not a bug when something doesn&#39;t.</div><span class="HOEnZb"><font color="#888888"><div><br></div></font></span></div></div></blockquote><div>Jeff, I think you have it backwards or perhaps you haven&#39;t read the whole thread to understand the context.  I&#39;m trying to understand why an MPI library compiled without MPI support is trying to do anything at all with Fortran-related types.  Given that there was no Fortran compiler to get type information from, why are the Fortran types still defined by the MPI library?  The library cannot possibly know what the right thing to do is, so why is it trying to do anything at all?</div><div> </div><div>I want a program that&#39;s using Fortran MPI types to **FAIL** when built against an MPI library that doesn&#39;t support Fortran, preferably at compile time, with a very loud &quot;NO FORTRAN SUPPORT!!!&quot; error message.  I don&#39;t expect, nor want, anything Fortran-related to work in this case.  That saves me from having to track down stuff like this which, as you say, if it works at all is just serendipitous.</div><div><br></div><div>Cheers,</div><div>Brian</div><div><br></div></div></div></div>

