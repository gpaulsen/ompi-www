<table cellspacing="0" cellpadding="0" border="0" ><tr><td valign="top" style="font: inherit;">Hi Jeff:<br><br>I managed to run it just recently... It turns out that some libraries libib* were missing, as well as some others. I learned this by trying to install an old version of openmpi that was in the repository of my Suse Linux. The "software manager" of Suse told me the missing libraries for the old openmpi. After installing these libraries, the already installed new openmpi (downloaded from open-mpi.org) works. Maybe it is a good idea to spell this out on open-mpi web site. People would just install the openmpi without knowing that there might be some missing libraries... <br><br>Thanks!<br>JO <br><br>--- On <b>Sat, 3/14/09, Jeff Squyres <i>&lt;jsquyres@cisco.com&gt;</i></b> wrote:<br><blockquote style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: 5px;">From: Jeff Squyres &lt;jsquyres@cisco.com&gt;<br>Subject: Re: [OMPI
 users] Run-time problem<br>To: jl09981@yahoo.com, "Open MPI Users" &lt;users@open-mpi.org&gt;<br>Cc: "Ralph Castain" &lt;rhc@lanl.gov&gt;<br>Date: Saturday, March 14, 2009, 9:15 AM<br><br><pre>Sorry for the delay in replying; this week unexpectedly turned exceptionally<br>hectic for several us...<br><br>On Mar 9, 2009, at 2:53 PM, justin oppenheim wrote:<br><br>&gt; Yes. As I indicated earlier, I did use these options to compile my program<br>&gt; <br>&gt; MPI_CXX=/programs/openmpi/bin/mpicxx<br>&gt; MPI_CC=/programs/openmpi/bin/mpicc<br>&gt; MPI_INCLUDE=/programs/openmpi/include/<br>&gt; MPI_LIB=mpi /programs/openmpi/<br>&gt; MPI_LIBDIR=/programs/openmpi/lib/<br>MPI_LINKERFORPROGRAMS=/programs/openmpi/bin/mpicxx<br><br>Ah; I think Ralph was asking because we don't know exactly how these<br>?environment variables? are being used to build your application.<br><br>&gt; where /programs/openmpi/ is the chosen location for installing the openmpi<br>package
 (specifically, openmpi-1.3.tar.gz)  that I downloaded from <br>www.open-mpi.org.<br><br>Can you ensure that you have exactly the same version of Open MPI installed on<br>all nodes in exactly the same location in the filesystem (it doesn't *have*<br>to be the same location on the filesystem on all the nodes, but it sure is<br>easier if it is).  Also be sure that when you mpirun across multiple nodes that<br>the same version of Open MPI (both executables and libraries) are being found on<br>all nodes.<br><br>&gt; <br>&gt; Any clue? Again, my system is Suse 10.3 64-bit, which should be pretty<br>standard. Would another package openmpi-1.3-1.src.rpm work better for my system?<br>&gt; <br>&gt; Thanks,<br>&gt; <br>&gt; JO<br>&gt; <br>&gt; <br>&gt; <br>&gt; <br>&gt; <br>&gt; --- On Mon, 3/9/09, Ralph Castain &lt;rhc@lanl.gov&gt; wrote:<br>&gt; From: Ralph Castain &lt;rhc@lanl.gov&gt;<br>&gt; Subject: Re: [OMPI users] Run-time problem<br>&gt; To:
 jl09981@yahoo.com<br>&gt; Cc: users@open-mpi.org<br>&gt; Date: Monday, March 9, 2009, 7:59 AM<br>&gt; <br>&gt; Did you try compiling your program with the provided mpicc (or mpiCC,<br>mpif90, etc. - as appropriate) wrapper compiler? The wrapper compilers contain<br>all the required library definitions to make the application work.<br>&gt; <br>&gt; Compiling without the wrapper compilers is a very bad idea...<br>&gt; <br>&gt; Ralph<br>&gt; <br>&gt; <br>&gt; On Mar 6, 2009, at 11:02 AM, justin oppenheim wrote:<br>&gt; <br>&gt;&gt; Please let me go over it again, and maybe it helps clarifying things a<br>bit better. All the OS involved are Suse 10.3.<br>&gt;&gt; <br>&gt;&gt; I have a place for the the installed programs, say /programs.<br>&gt;&gt; <br>&gt;&gt; In /programs I have installed openmpi and my mpi program, say<br>my_mpi_program.  When I am in the working directory, my LD_LIBRARY_PATH does<br>include both<br>&gt;&gt; <br>&gt;&gt;
 /programs/my_mpi_program/lib<br>&gt;&gt; /programs/openmpi/lib<br>&gt;&gt; <br>&gt;&gt; And my PATH includes<br>&gt;&gt; /programs/my_mpi_program/bin<br>&gt;&gt; /programs/openmpi/bin<br>&gt;&gt; <br>&gt;&gt; So, then I do<br>&gt;&gt; <br>&gt;&gt; mpirun -machinefile machinefile  -np 20 my_mpi_program<br>&lt;arguments&gt;<br>&gt;&gt; <br>&gt;&gt; and I get<br>&gt;&gt; <br>&gt;&gt; /programs/my_mpi_program: symbol lookup error:<br>/programs/openmpi/lib/libmpi_cxx.so.0: undefined symbol:<br>ompi_registered_datareps<br>&gt;&gt; <br>&gt;&gt; When I configured openmpi, I did<br>&gt;&gt; <br>&gt;&gt; ./configure --prefix=/programs/openmpi<br>&gt;&gt; <br>&gt;&gt; and then compiled it. Subsequently, I compiled my_mpi_program with the<br>options:<br>&gt;&gt; <br>&gt;&gt; MPI_CXX=/programs/openmpi/bin/mpicxx<br>&gt;&gt; MPI_CC=/programs/openmpi/bin/mpicc<br>&gt;&gt; MPI_INCLUDE=/programs/openmpi/include/<br>&gt;&gt; MPI_LIB=mpi<br>&gt;&gt;
 MPI_LIBDIR=/programs/openmpi/lib/<br>MPI_LINKERFORPROGRAMS=/programs/openmpi/bin/mpicxx<br>&gt;&gt; <br>&gt;&gt; Any clue? The directory /programs is NSF mounted on the nodes.<br>&gt;&gt; <br>&gt;&gt; Many thanks again,<br>&gt;&gt; <br>&gt;&gt; JO<br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; --- On Thu, 3/5/09, justin oppenheim &lt;jl09981@yahoo.com&gt; wrote:<br>&gt;&gt; From: justin oppenheim &lt;jl09981@yahoo.com&gt;<br>&gt;&gt; Subject: Re: [OMPI users] Run-time problem<br>&gt;&gt; To: "Ralph Castain" &lt;rhc@lanl.gov&gt;<br>&gt;&gt; Date: Thursday, March 5, 2009, 5:28 PM<br>&gt;&gt; <br>&gt;&gt; Hi Ralph:<br>&gt;&gt; <br>&gt;&gt; Sorry for my ignorance, but in you option 2: what command should I add<br>the option<br>&gt;&gt; --prefix=path-to-install? when I configure openmpi? I already did that<br>when I configured  and compiled openmpi.  Also, in
 response to your option 1, I<br>did add the paths to libraries of openmpi in the LD_LIBRARY_PATH  in the .cshrc<br>of the nodes.<br>&gt;&gt; <br>&gt;&gt; Thank you,<br>&gt;&gt; JO<br>&gt;&gt; <br>&gt;&gt; --- On Thu, 3/5/09, Ralph Castain &lt;rhc@lanl.gov&gt; wrote:<br>&gt;&gt; From: Ralph Castain &lt;rhc@lanl.gov&gt;<br>&gt;&gt; Subject: Re: [OMPI users] Run-time problem<br>&gt;&gt; To: jl09981@yahoo.com<br>&gt;&gt; Cc: "Open MPI Users &lt;users@open-mpi.org&gt;"<br>&lt;users@open-mpi.org&gt;<br>&gt;&gt; Date: Thursday, March 5, 2009, 12:46 PM<br>&gt;&gt; <br>&gt;&gt; First, you can add --launch-agent rsh to the command line and that<br>will have OMPI use rsh.<br>&gt;&gt; <br>&gt;&gt; It sounds like your remote nodes may not be seeing your OMPI install<br>directory. Several ways you can resolve that - here are a couple:<br>&gt;&gt; <br>&gt;&gt; 1. add the install directory to your LD_LIBRARY_PATH in your .cshrc<br>(or whatever shell rc you are using) -
 be sure this is being executed on the<br>remote nodes<br>&gt;&gt; <br>&gt;&gt; 2. add --prefix=path-to-install on your cmd line - this will direct<br>your remote procs to the proper libraries<br>&gt;&gt; <br>&gt;&gt; Ralph<br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; On Mar 5, 2009, at 10:18 AM, justin oppenheim wrote:<br>&gt;&gt; <br>&gt;&gt;&gt; Maybe I should also add that the program<br>&gt;&gt;&gt; my_mpi_executable is locally installed under the same root<br>directory as that under which  openmpi-1.3 is installed. This root directory is<br>NSF mounted on the working nodes.<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Thanks,<br>&gt;&gt;&gt; JO<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; --- On Thu, 3/5/09, justin oppenheim &lt;jl09981@yahoo.com&gt;<br>wrote:<br>&gt;&gt;&gt; From: justin oppenheim &lt;jl09981@yahoo.com&gt;<br>&gt;&gt;&gt; Subject: Re: [OMPI users] Run-time problem<br>&gt;&gt;&gt; To: "Ralph Castain" &lt;rhc@lanl.gov&gt;<br>&gt;&gt;&gt; Date: Thursday, March 5,
 2009, 12:04 PM<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Hi Ralph:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Thanks for your prompt response. I am using openmpi-1.3, Suse<br>10.3. I installed openmpi-1.3 with the option<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; ./configure --prefix=/where/to/install<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; and then just<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; make all install<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; I thought the default connection mode is rsh, but I had to invoke<br>ssh-agent, in order not have to enter password one by one. How to change to rsh?<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Thanks,<br>&gt;&gt;&gt; JO<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; --- On Thu, 3/5/09, Ralph Castain &lt;rhc@lanl.gov&gt; wrote:<br>&gt;&gt;&gt; From: Ralph Castain &lt;rhc@lanl.gov&gt;<br>&gt;&gt;&gt; Subject: Re: [OMPI users] Run-time problem<br>&gt;&gt;&gt; To: jl09981@yahoo.com, "Open MPI Users"<br>&lt;users@open-mpi.org&gt;<br>&gt;&gt;&gt; Date: Thursday, March 5, 2009, 11:40
 AM<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Could you tell us what version of Open MPI you are using, a little<br>about your system (I would assume you are using ssh?), and how this was<br>configured?<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Thanks<br>&gt;&gt;&gt; Ralph<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; <br>&gt;&gt;&gt; On Mar 5, 2009, at 9:31 AM, justin oppenheim wrote:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; Hi:<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; When I execute something like<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; mpirun -machinefile machinefile my_mpi_executable<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; I get something like this<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; my_mpi_executable symbol lookup error:<br>remote_openmpi/lib/libmpi_cxx.so.0: undefined symbol: ompi_registered_datareps<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; where both my_mpi_executable and remote_openmpi are installed<br>on NSF mounted locations.<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; Any
 clue?<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; thanks<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; JO<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; _______________________________________________<br>&gt;&gt;&gt;&gt; users mailing list<br>&gt;&gt;&gt;&gt; users@open-mpi.org<br>&gt;&gt;&gt;&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; <br>&gt;&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt; <br>&gt; <br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; users@open-mpi.org<br>&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br><br><br>--Jeff Squyres<br>Cisco Systems<br><br></pre></blockquote></td></tr></table><br>

      
