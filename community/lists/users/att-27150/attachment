<div dir="ltr">Hi,<div>the message in question belongs to MXM and it is warning (silenced in latter releases of MXM).</div><div><br></div><div>To select specific device in MXM, please pass:</div><div><br></div><div>mpirun -x MXM_IB_PORTS=mlx4_0:2 ...</div><div><br></div><div>M</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Wed, Jun 17, 2015 at 9:38 PM, Na Zhang <span dir="ltr">&lt;<a href="mailto:na.zhang@stonybrook.edu" target="_blank">na.zhang@stonybrook.edu</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Hi all, <br><br>I am trying to launch MPI jobs (with version openmpi-1.6.5) on a node with multiple InfiniBand HCA cards (pls. see ibstat info below). I just want to use the only active port: mlx4_0 port 2. Thus I issued <div><br></div><div>mpirun <b>-mca btl_openib_if_include &quot;mlx4_0:2&quot;</b> -np...</div><div><br></div><div>I thought this command would allow only to use mlx4_0:2. But I still got below warning: </div><div><br></div><div>ib_dev.c:241  MXM  WARN  No suitable active ports were found on IB device &#39;mlx4_1&#39;.<br></div><div><br></div><div>I wonder whether this support still works.  Or are there any other supports to enable HCA card selection? And how can I change my default settings for MPI use? </div><div><br></div><div>Thanks! </div><div><br></div><div>Best,</div><div>Na Zhang </div><div><div><br></div><div><div>$ ibstat</div><div>CA &#39;mlx4_0&#39;</div><div><span style="white-space:pre-wrap">	</span>CA type: MT4099</div><div><span style="white-space:pre-wrap">	</span>Number of ports: 2</div><div><span style="white-space:pre-wrap">	</span>Firmware version: 2.31.5050</div><div><span style="white-space:pre-wrap">	</span>Hardware version: 1</div><div><span style="white-space:pre-wrap">	</span>Node GUID: 0x0002c90300fee510</div><div><span style="white-space:pre-wrap">	</span>System image GUID: 0x0002c90300fee513</div><div><span style="white-space:pre-wrap">	</span>Port 1:</div><div><span style="white-space:pre-wrap">		</span>State: Down</div><div><span style="white-space:pre-wrap">		</span>Physical state: Disabled</div><div><span style="white-space:pre-wrap">		</span>Rate: 10</div><div><span style="white-space:pre-wrap">		</span>Base lid: 0</div><div><span style="white-space:pre-wrap">		</span>LMC: 0</div><div><span style="white-space:pre-wrap">		</span>SM lid: 0</div><div><span style="white-space:pre-wrap">		</span>Capability mask: 0x00010000</div><div><span style="white-space:pre-wrap">		</span>Port GUID: 0x0202c9fffefee510</div><div><span style="white-space:pre-wrap">		</span>Link layer: Ethernet</div><div><span style="white-space:pre-wrap">	</span>Port 2:</div><div><span style="white-space:pre-wrap">		</span>State: Active</div><div><span style="white-space:pre-wrap">		</span>Physical state: LinkUp</div><div><span style="white-space:pre-wrap">		</span>Rate: 56</div><div><span style="white-space:pre-wrap">		</span>Base lid: 3</div><div><span style="white-space:pre-wrap">		</span>LMC: 0</div><div><span style="white-space:pre-wrap">		</span>SM lid: 8</div><div><span style="white-space:pre-wrap">		</span>Capability mask: 0x02514868</div><div><span style="white-space:pre-wrap">		</span>Port GUID: 0x0002c90300fee512</div><div><span style="white-space:pre-wrap">		</span>Link layer: InfiniBand</div><div>CA &#39;mlx4_1&#39;</div><div><span style="white-space:pre-wrap">	</span>CA type: MT4099</div><div><span style="white-space:pre-wrap">	</span>Number of ports: 2</div><div><span style="white-space:pre-wrap">	</span>Firmware version: 2.30.3200</div><div><span style="white-space:pre-wrap">	</span>Hardware version: 1</div><div><span style="white-space:pre-wrap">	</span>Node GUID: 0x24be05ffffb584f0</div><div><span style="white-space:pre-wrap">	</span>System image GUID: 0x24be05ffffb584f3</div><div><span style="white-space:pre-wrap">	</span>Port 1:</div><div><span style="white-space:pre-wrap">		</span>State: Down</div><div><span style="white-space:pre-wrap">		</span>Physical state: Disabled</div><div><span style="white-space:pre-wrap">		</span>Rate: 10</div><div><span style="white-space:pre-wrap">		</span>Base lid: 0</div><div><span style="white-space:pre-wrap">		</span>LMC: 0</div><div><span style="white-space:pre-wrap">		</span>SM lid: 0</div><div><span style="white-space:pre-wrap">		</span>Capability mask: 0x00010000</div><div><span style="white-space:pre-wrap">		</span>Port GUID: 0x26be05fffeb584f1</div><div><span style="white-space:pre-wrap">		</span>Link layer: Ethernet</div><div><span style="white-space:pre-wrap">	</span>Port 2:</div><div><span style="white-space:pre-wrap">		</span>State: Down</div><div><span style="white-space:pre-wrap">		</span>Physical state: Disabled</div><div><span style="white-space:pre-wrap">		</span>Rate: 10</div><div><span style="white-space:pre-wrap">		</span>Base lid: 0</div><div><span style="white-space:pre-wrap">		</span>LMC: 0</div><div><span style="white-space:pre-wrap">		</span>SM lid: 0</div><div><span style="white-space:pre-wrap">		</span>Capability mask: 0x00010000</div><div><span style="white-space:pre-wrap">		</span>Port GUID: 0x24be050001b584f2</div><div><span style="white-space:pre-wrap">		</span>Link layer: Ethernet</div></div><div><br></div><br clear="all"><div><br></div><br><div><div dir="ltr"><div><br></div></div></div></div></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/06/27149.php" rel="noreferrer" target="_blank">http://www.open-mpi.org/community/lists/users/2015/06/27149.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</div>

