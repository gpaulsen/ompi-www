On Fri, Jun 19, 2009 at 3:12 AM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org">rhc@open-mpi.org</a>&gt;</span> wrote:<br><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;">
Add --debug-devel to your cmd line and you&#39;ll get a bunch of diagnostic info. Did you configure --enable-debug? If so, then additional debug can be obtained - can let you know how to get it, if necessary.</blockquote>
<div><br></div><div>Yes we had run with the -d flag and it was the output from this that prompted us to find out how to prevent the use of the external network. I am not sure what most of the messages mean but we still get quite a few references to <a href="http://hankel.fred.com">hankel.fred.com</a> which the nodes will not be able to access. Here is the output (changed external ip numbers and domain):</div>
<div><br></div><div><div>[cluster@hankel ~]$ mpirun --debug-devel --mca btl tcp,self --mca btl_tcp_if_exclude lo,eth0 --mca oob_tcp_if_exclude lo,eth0 -np 1 --host n06 hostname</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] connect_uni: connection not allowed</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] [0,0,0] setting up session dir with</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] <span class="Apple-tab-span" style="white-space:pre">	</span>universe default-universe-26997</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] <span class="Apple-tab-span" style="white-space:pre">	</span>user cluster</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] <span class="Apple-tab-span" style="white-space:pre">	</span>host <a href="http://hankel.fred.com">hankel.fred.com</a></div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] <span class="Apple-tab-span" style="white-space:pre">	</span>jobid 0</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] <span class="Apple-tab-span" style="white-space:pre">	</span>procid 0</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] procdir: /tmp/openmpi-sessions-cluster@hankel.fred.com_0/default-universe-26997/0/0</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] jobdir: /tmp/openmpi-sessions-cluster@hankel.fred.com_0/default-universe-26997/0</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] unidir: /tmp/openmpi-sessions-cluster@hankel.fred.com_0/default-universe-26997</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] top: openmpi-sessions-cluster@hankel.fred.com_0</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] tmp: /tmp</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] [0,0,0] contact_file /tmp/openmpi-sessions-cluster@hankel.fred.com_0/default-universe-26997/universe-setup.txt</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] [0,0,0] wrote setup file</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] pls:rsh: local csh: 0, local sh: 1</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] pls:rsh: assuming same remote shell as local shell</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] pls:rsh: remote csh: 0, remote sh: 1</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] pls:rsh: final template argv:</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] pls:rsh:     /usr/bin/ssh &lt;template&gt; orted --debug --bootproxy 1 --name &lt;template&gt; --num_procs 2 --vpid_start 0 --nodename &lt;template&gt; --universe cluster@hankel.fred.com:default-universe-26997 --nsreplica &quot;0.0.0;tcp://<a href="http://192.168.0.99:54116">192.168.0.99:54116</a>&quot; --gprreplica &quot;0.0.0;tcp://<a href="http://192.168.0.99:54116">192.168.0.99:54116</a>&quot;</div>
<div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] pls:rsh: launching on node n06</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] pls:rsh: n06 is a REMOTE node</div><div>[<a href="http://hankel.fred.com:26997">hankel.fred.com:26997</a>] pls:rsh: executing: (//usr/bin/ssh) /usr/bin/ssh n06  PATH=/usr/lib/openmpi/1.2.7-gcc/bin:$PATH ; export PATH ; LD_LIBRARY_PATH=/usr/lib/openmpi/1.2.7-gcc/lib:$LD_LIBRARY_PATH ; export LD_LIBRARY_PATH ; /usr/lib/openmpi/1.2.7-gcc/bin/orted --debug --bootproxy 1 --name 0.0.1 --num_procs 2 --vpid_start 0 --nodename n06 --universe cluster@hankel.fred.com:default-universe-26997 --nsreplica &quot;0.0.0;tcp://<a href="http://192.168.0.99:54116">192.168.0.99:54116</a>&quot; --gprreplica &quot;0.0.0;tcp://<a href="http://192.168.0.99:54116">192.168.0.99:54116</a>&quot; [HOSTNAME=<a href="http://hankel.fred.com">hankel.fred.com</a> TERM=xterm-color SHELL=/bin/bash HISTSIZE=1000 SSH_CLIENT=130.149.86.77 50506 22 SSH_TTY=/dev/pts/12 USER=cluster LD_LIBRARY_PATH=:/usr/lib/openmpi/1.2.7-gcc/lib LS_COLORS=no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tz=01;31:*.rpm=01;31:*.cpio=01;31:*.jpg=01;35:*.gif=01;35:*.bmp=01;35:*.xbm=01;35:*.xpm=01;35:*.png=01;35:*.tif=01;35: MAIL=/var/spool/mail/cluster PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/lib/openmpi/1.2.7-gcc/bin:/home/cluster/bin INPUTRC=/etc/inputrc PWD=/home/cluster LANG=en_US.UTF-8 SSH_ASKPASS=/usr/libexec/openssh/gnome-ssh-askpass SHLVL=1 HOME=/home/cluster LOGNAME=cluster CVS_RSH=ssh SSH_CONNECTION=222.222.222.222 50506 111.111.111.111 22 LESSOPEN=|/usr/bin/lesspipe.sh %s G_BROKEN_FILENAMES=1 _=/usr/lib/openmpi/1.2.7-gcc/bin/mpirun OMPI_MCA_orte_debug=1 OMPI_MCA_btl=tcp,self OMPI_MCA_btl_tcp_if_exclude=lo,eth0 OMPI_MCA_oob_tcp_if_exclude=lo,eth0 OMPI_MCA_seed=0]</div>
<div><br></div></div></div>

