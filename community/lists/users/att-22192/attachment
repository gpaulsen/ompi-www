<div dir="ltr">Apologies if I am not supposed to respond that this worked, but it did!<div><br></div><div>Thank you Tom! You saved me hours of work and I learned something important. Now I have an executable!<br><br>Best,<br>

Jason</div></div><div class="gmail_extra"><br><br><div class="gmail_quote">On Mon, Jun 24, 2013 at 1:21 PM, Elken, Tom <span dir="ltr">&lt;<a href="mailto:tom.elken@intel.com" target="_blank">tom.elken@intel.com</a>&gt;</span> wrote:<br>

<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">





<div lang="EN-US" link="blue" vlink="purple">
<div>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">I saw a couple of issues noted below …<u></u><u></u></span></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d"><u></u> <u></u></span></p>
<div style="border:none;border-left:solid blue 1.5pt;padding:0in 0in 0in 4.0pt">
<div><div class="im">
<div>
<p class="MsoNormal"><b><span style="font-size:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:#1f497d"><u></u> <u></u></span></b></p>
<p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d"></span></i></b><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d"><u></u><u></u></span></p>


</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">Now I am still getting some undefined reference errors. Namely:<u></u><u></u></span></p>
</div>
</div><div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">[root@odie 060911_rmc_eam_gr_vk_t4]# make<u></u><u></u></span></p>
</div>
<div><div class="im">
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">ifort -g -debug all -check all -implicitnone -warn all -o rmc_test ran2.o globals.o read_inputs.o model.o rmc_functions.o scattering_factors.o fem1.o gr.o eam.o rmc_v_1_0.o
  -L /export/apps/openmpi_intel_20130618/lib -lmpi<u></u><u></u></span></p>
</div><p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">[Tom]
<u></u><u></u></span></i></b></p>
<p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">From your makefile below, this compile command is generated by your DEBUG target.  Fixes to the FC_DEBUG command noted below in your makefile…<u></u><u></u></span></i></b></p>


<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d"><u></u> <u></u></span></p>
</div><div class="im">
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">ifort: warning #10182: disabling optimization; runtime debug checks enabled<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">fem1.o: In function `fem&#39;:<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">/state/partition1/home/jjmaldonis/Jinwoo/2011/060911_rmc_eam_gr_vk_t4/fem1.f90:583: undefined reference to `mpi_reduce_&#39;<u></u><u></u></span></p>


</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">/state/partition1/home/jjmaldonis/Jinwoo/2011/060911_rmc_eam_gr_vk_t4/fem1.f90:584: undefined reference to `mpi_reduce_&#39;<u></u><u></u></span></p>


</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">fem1.o: In function `fem_update&#39;:<u></u><u></u></span></p>
</div>
</div><div>
<p class="MsoNormal"><b><i><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#1f497d">[Tom]
</span></i></b><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#1f497d"> &lt;snip&gt;</span><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u><u></u></span></p>


</div><div class="im">
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">The above undefined reference errors are my problem.<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">Below are my PATH and LD_LIBRARY_PATH variables, if they are of help.<u></u><u></u></span></p>
</div>
</div><div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">echo $PATH<u></u><u></u></span></p>
</div>
<div><div class="im">
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">/usr/lib64/qt-3.3/bin:/state/partition1/apps/intel_20130618/composer_xe_2013.3.163/bin/intel64:/state/partition1/apps/intel_20130618/composer_xe_2013.3.163/mpirt/bin/intel64:/state/partition1/apps/intel_20130618/composer_xe_2013.3.163/bin/intel64:/state/partition1/apps/intel_20130618/composer_xe_2013.3.163/bin/intel64_mic:/state/partition1/apps/intel_20130618/composer_xe_2013.3.163/debugger/gui/intel64:/export/apps/intel_20130618/advisor_xe_2013/bin64:/export/apps/intel_20130618/inspector_xe_2013/bin64:/export/apps/intel_20130618/vtune_amplifier_xe_2013/bin64:/usr/local/bin:/bin:/usr/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/eclipse:/opt/ganglia/bin:/opt/ganglia/sbin:/usr/java/latest/bin:/opt/maven/bin:/export/apps/openmpi_intel_20130618/:/opt/pdsh/bin:/opt/rocks/bin:/opt/rocks/sbin:/opt/condor/bin:/opt/condor/sbin:/usr/local/samba/sbin:/opt/gridengine/bin/linux-x64:/export/apps/openmpi_intel_20130618/bin/:/usr/local/samba/sbin:/export/apps/openmpi_intel_20130618/bin/<u></u><u></u></span></p>


</div><p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">[Tom]
<u></u><u></u></span></i></b></p>
<p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">You should try to get<u></u><u></u></span></i></b></p>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">/export/apps/openmpi_intel_20130618/bin
<u></u><u></u></span></p>
<p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">earlier in your path, ahead of this part:<u></u><u></u></span></i></b></p>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">/state/partition1/apps/intel_20130618/composer_xe_2013.3.163/mpirt/bin/intel64<u></u><u></u></span></p>
<p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">which comes from the intel compilers ‘compilervars.[c]sh’ script and points to the Intel MPI run-time libraries (which you don’t want, since you are using
 Open MPI).<u></u><u></u></span></i></b></p>
<p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">Either that, or use a full path to your OpenMPI/Intel mpirun when you are ready to run the app., such as:
<u></u><u></u></span></i></b></p>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">/export/apps/openmpi_intel_20130618/bin/mpirun …. ./rmc_test</span><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d"><u></u><u></u></span></i></b></p>


</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><b><i><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#1f497d">[Tom]
</span></i></b><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#1f497d">&lt;snip&gt;</span><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u><u></u></span></p>


</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
</div>
</div><div class="im">
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">Below I will paste my makefile, and attached are the compressed &quot;./configure ...&quot; and &quot;make all install&quot; command logs. Please let me know anything else that you need.<u></u><u></u></span></p>


</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
</div><div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">#<u></u><u></u></span></p>
</div><div class="im">
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># default makefile for ifort compiler with more or less<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># appropriate options for debugging and high performance<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">#<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># application name<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">APP = rmc_test<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># list of source files<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">SRC = ran2.f90 globals.f90 read_inputs.f90 model.f90 rmc_functions.f90 scattering_factors.f90 fem1.f90 gr.f90 eam.f90 rmc_v_1_0.f90<u></u><u></u></span></p>


</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># list of object files<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">OBJ = ran2.o globals.o read_inputs.o model.o rmc_functions.o scattering_factors.o fem1.o gr.o eam.o rmc_v_1_0.o<u></u><u></u></span></p>


</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># define libraries needed by the linker<u></u><u></u></span></p>
</div>
</div><div><div class="im">
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">LIBS = -L /export/apps/openmpi_intel_20130618/lib -lmpi<u></u><u></u></span></p>
</div><p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">[Tom]
<u></u><u></u></span></i></b></p>
<p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">Make this blank, so you will depend on ‘mpif90’ to provide the linking information:<u></u><u></u></span></i></b></p>


<p class="MsoNormal"><b><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">LIBS =<u></u><u></u></span></b></p>
<p class="MsoNormal"><b><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></b></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d"><u></u> <u></u></span></p>
</div><div class="im">
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># -rpath /state/partition1/apps/intel_20130618/composer_xe_2013.3.163/compiler/lib/<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># compiler options for debugging<u></u><u></u></span></p>
</div>
</div><div><div class="im">
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">FC_DEBUG = ifort -g -debug all -check all -implicitnone -warn all<u></u><u></u></span></p>
</div><p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">[Tom] You should make this more like your FC_OPT definition, using mpif90 rather than ifort, such as:<u></u><u></u></span></i></b></p>


<p class="MsoNormal"><b><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">FC_DEBUG = mpif90 -g -debug all -check all -implicitnone -warn all<u></u><u></u></span></b></p>
<p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d"><u></u> <u></u></span></p>
<p class="MsoNormal"><b><i><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d">[Tom] Cheers, Tom</span></i></b><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1f497d"><u></u><u></u></span></p>


</div><div class="im">
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># compiler options for optmized running<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">#FC_OPT = ifort -O3 -xO -ipo -no-prec-div -static<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">#FC_OPT = mpif90 -O3 -ipo -static<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">FC_OPT = mpif90 -O3<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"># build rules<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">.SUFFIXES: .f90 .o<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">.f90.o:<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">        ${FC_DEBUG} -c $&lt;<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">debug: ${OBJ}<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">        ${FC_DEBUG} -o ${APP} ${OBJ} ${LIBS}<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">opt: ${SRC}<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">        ${FC_OPT} -o ${APP} ${SRC} ${LIBS}<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><u></u> <u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">clean:<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">        rm -f *.mod *.o ${APP}<u></u><u></u></span></p>
</div>
<div>
<p class="MsoNormal"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">        ln -s /export/apps/openmpi_intel_20130618/lib/mpi.mod ./mpi.mod<u></u><u></u></span></p>
</div>
</div></div>
</div>
</div>
</div>
</div>

<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
<a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
<br></blockquote></div><br></div>

