<div dir="ltr">Hi Jeff<div><br></div><div>   Just came across your post against this ticket.  Here are the request files generated against 1.8.3 that exhibits the same problem.</div><div><br></div><div>    I am compiling on RHEL 6.4 using gcc 4.4.7</div><div><br></div><div>Thanks</div><div><br></div><div> Jamil</div><div><div>   </div></div></div><div class="gmail_extra"><br><div class="gmail_quote">On 25 April 2014 21:27, Jamil Appa <span dir="ltr">&lt;<a href="mailto:jamil.appa@zenotech.com" target="_blank">jamil.appa@zenotech.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><font face="&#39;Helvetica Neue&#39;, &#39;Helvetica Neue&#39;, Helvetica, Arial, sans-serif"><span style="font-size:14px;font-family:&#39;Helvetica Neue&#39;,&#39;Helvetica Neue&#39;,Helvetica,Arial,sans-serif"><div><br></div><div>  Hi </div><div><br></div><div>    The following program deadlocks in mpi_finalize with OMPI 1.8.1 but works correctly with OMPI 1.6.5</div><div><br></div><div>    Is there a work around?</div><div><br></div><div>  Thanks</div><div><br></div><div> Jamil</div><div><br></div><div><div>program mpiio</div><div>use mpi</div><div>implicit none</div><div>integer(kind=4) :: iprov, fh, ierr</div><div>call mpi_init_thread(MPI_THREAD_SERIALIZED, iprov, ierr)</div><div>if (iprov &lt; MPI_THREAD_SERIALIZED) stop &#39;mpi_init_thread&#39;</div><div>call mpi_file_open(MPI_COMM_WORLD, &#39;test.dat&#39;, &amp;</div><div>MPI_MODE_WRONLY + MPI_MODE_CREATE, MPI_INFO_NULL, fh, ierr)</div><div>call mpi_file_close(fh, ierr)</div><div>call mpi_finalize(ierr)</div><div>end program mpiio</div></div><div><br></div><div><div>(gdb) bt</div><div>#0  0x0000003155a0e054 in __lll_lock_wait () from /lib64/libpthread.so.0</div><div>#1  0x0000003155a09388 in _L_lock_854 () from /lib64/libpthread.so.0</div><div>#2  0x0000003155a09257 in pthread_mutex_lock () from /lib64/libpthread.so.0</div><div>#3  0x00007ffff7819f3c in ompi_attr_free_keyval () from /gpfs/thirdparty/zenotech/home/jappa/apps6.4/lib/libmpi.so.1</div><div>#4  0x00007ffff7857be1 in PMPI_Keyval_free () from /gpfs/thirdparty/zenotech/home/jappa/apps6.4/lib/libmpi.so.1</div><div>#5  0x00007ffff15b21f2 in ADIOI_End_call () from /gpfs/thirdparty/zenotech/home/jappa/apps6.4/lib/openmpi/mca_io_romio.so</div><div>#6  0x00007ffff781a325 in ompi_attr_delete_impl () from /gpfs/thirdparty/zenotech/home/jappa/apps6.4/lib/libmpi.so.1</div><div>#7  0x00007ffff781a4ec in ompi_attr_delete_all () from /gpfs/thirdparty/zenotech/home/jappa/apps6.4/lib/libmpi.so.1</div><div>#8  0x00007ffff7832ad5 in ompi_mpi_finalize () from /gpfs/thirdparty/zenotech/home/jappa/apps6.4/lib/libmpi.so.1</div><div>#9  0x00007ffff7b12e59 in pmpi_finalize__ () from /gpfs/thirdparty/zenotech/home/jappa/apps6.4/lib/libmpi_mpifh.so.2</div><div>#10 0x0000000000400b64 in mpiio () at t.f90:10</div><div>#11 0x0000000000400b9a in main ()</div><div>#12 0x000000315561ecdd in __libc_start_main () from /lib64/libc.so.6</div><div>#13 0x0000000000400a19 in _start ()</div></div></span></font></blockquote></div><br><br clear="all"><div><br></div>-- <br><div dir="ltr"><div style="text-align:left"><table border="0" cellpadding="2" cellspacing="2" style="color:rgb(0,0,0);font-family:Times;text-align:left;width:510px"><tbody><tr><td colspan="1" rowspan="1" style="vertical-align:top;width:399px"><span style="font-family:Helvetica,Arial,sans-serif;color:rgb(102,102,102)">Jamil Appa | Co-Founder and Director | Zenotech</span> <br><span style="font-family:Helvetica,Arial,sans-serif;color:rgb(102,102,102)">+447747606788 | </span><a href="http://uk.linkedin.com/pub/jamil-appa/1/165/120" style="text-decoration:none" target="_blank"><span style="font-family:Arial,sans-serif;font-size:13px;color:rgb(7,131,182)"><img src="http://www.linkedin.com/img/webpromo/btn_in_20x15.png" alt="View Jamil Appa&#39;s LinkedIn profile" border="0" height="15" width="20"></span></a> <br><span style="font-family:Helvetica,Arial,sans-serif;color:rgb(102,102,102)"><a href="mailto:jamil.appa@zenotech.com" target="_blank">jamil.appa@zenotech.com</a></span></td><td style="vertical-align:middle;text-align:center"><a href="http://www.zenotech.com" target="_blank"><img alt="Zenotech" src="https://sites.google.com/a/zenotech.com/external/zenotech.jpg" href="http://www.zenotech.com" style="border:0px solid;width:81px;height:59px"></a></td></tr><tr><td colspan="2" rowspan="1" style="vertical-align:top"><font color="#666666" face="Helvetica, Arial, sans-serif">Zenotech Ltd | Bristol &amp; Bath Science Park | Emmersons Green </font><span style="color:rgb(102,102,102);font-family:Helvetica,Arial,sans-serif">|</span><font color="#666666" face="Helvetica, Arial, sans-serif"> </font><span style="color:rgb(102,102,102);font-family:Helvetica,Arial,sans-serif">Bristol | </span><font color="#666666" face="Helvetica, Arial, sans-serif">BS16 7FR<br></font><hr noshade style="margin-left:0px;margin-right:auto;width:502px;height:1px"><font size="-1"><span style="font-family:Helvetica,Arial,sans-serif;color:rgb(102,102,102)">Registered Address: 1 Larkfield Grove | Chepstow | Monmouthshire | NP16 5UF | UK<br>Registered in England &amp; Wales No: 7926926 VAT No: 128198591</span></font></td></tr></tbody></table><table border="0" cellpadding="2" cellspacing="2" style="color:rgb(0,0,0);font-family:Times;text-align:left;width:510px"><tbody></tbody></table></div></div>
</div>

