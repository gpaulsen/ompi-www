<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Hard to say what could be the cause of the problem without a better understanding of the code, but the root cause appears to be some code path that allows you to call an MPI function after you called MPI_Finalize. From your description, it appears you have a race condition in the code that activates the code path.<div><br></div><div><br><div><div>On Jan 19, 2014, at 6:33 AM, <a href="mailto:thomas.forde@ulstein.com">thomas.forde@ulstein.com</a> wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div><p><font size="2" face="sans-serif">Yes. It's a shared NSF partition on the nodes. <br></font><font size="2" face="sans-serif"><br></font><font size="2" face="sans-serif">Sendt fra min iPhone<br></font><font size="2" face="sans-serif"><br></font><font size="2" face="sans-serif">&gt; Den 19. jan. 2014 kl. 13:29 skrev "Reuti" &lt;<a href="mailto:reuti@staff.uni-marburg.de">reuti@staff.uni-marburg.de</a>&gt;:<br></font><font size="2" face="sans-serif">&gt; <br></font><font size="2" face="sans-serif">&gt; Hi,<br></font><font size="2" face="sans-serif">&gt; <br></font><font size="2" face="sans-serif">&gt; Am 18.01.2014 um 22:43 schrieb <a href="mailto:thomas.forde@ulstein.com">thomas.forde@ulstein.com</a>:<br></font><font size="2" face="sans-serif">&gt; <br></font><font size="2" face="sans-serif">&gt; &gt; I have had a running cluster going good for a while, and 2 days ago we decided to upgrade it from 128 to 256 cores. <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; Most om my deployment of nodes goes through cobbler and scripting, and it has worked fine before.on the first 8 nodes. <br></font><font size="2" face="sans-serif">&gt; <br></font><font size="2" face="sans-serif">&gt; The same version of Open MPI is installed also on the new nodes?<br></font><font size="2" face="sans-serif">&gt; <br></font><font size="2" face="sans-serif">&gt; -- Reuti<br></font><font size="2" face="sans-serif">&gt; <br></font><font size="2" face="sans-serif">&gt; <br></font><font size="2" face="sans-serif">&gt; &gt; But after adding new nodes, everything is fucked up and i have no idea why:( <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; #*** The MPI_Comm_f2c() function was called after MPI_FINALIZE was invoked. <br></font><font size="2" face="sans-serif">&gt; &gt; *** This is disallowed by the MPI standard. <br></font><font size="2" face="sans-serif">&gt; &gt; *** Your MPI job will now abort. <br></font><font size="2" face="sans-serif">&gt; &gt; [dpn10.cfd.local:14994] Local abort after MPI_FINALIZE completed successfully; not able to aggregate error messages, and not able to guarantee that all other processes were killed! <br></font><font size="2" face="sans-serif">&gt; &gt; *** The MPI_Comm_f2c() function was called after MPI_FINALIZE was invoked. <br></font><font size="2" face="sans-serif">&gt; &gt; *** This is disallowed by the MPI standard. <br></font><font size="2" face="sans-serif">&gt; &gt; *** Your MPI job will now abort. <br></font><font size="2" face="sans-serif">&gt; &gt; # <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; The random strange issue that if i launch 8 32core jobs, 3 end of running, while the other 5 dies with this error, and its even using a few of new nodes in the job. <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; Any idea what is causing it?, its so random i dont know where to start.. <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; ./Thomas <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; Denne e-posten kan innehalde informasjon som er konfidensiell <br></font><font size="2" face="sans-serif">&gt; &gt; og/eller underlagt lovbestemt teieplikt. Kun den tiltenkte adressat har adgang <br></font><font size="2" face="sans-serif">&gt; &gt; til å lese eller vidareformidle denne e-posten eller tilhøyrande vedlegg. Dersom De ikkje er den tiltenkte mottakar, vennligst kontakt avsendar pr e-post, slett denne e-posten med vedlegg og makuler samtlige utskrifter og kopiar av den.<br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; This e-mail may contain confidential information, or otherwise <br></font><font size="2" face="sans-serif">&gt; &gt; be protected against unauthorised use. Any disclosure, distribution or other use of the information by anyone but the intended recipient is strictly prohibited. <br></font><font size="2" face="sans-serif">&gt; &gt; If you have received this e-mail in error, please advise the sender by immediate reply and destroy the received documents and any copies hereof.<br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; PBefore <br></font><font size="2" face="sans-serif">&gt; &gt; printing, think about the environment<br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; &gt; _______________________________________________<br></font><font size="2" face="sans-serif">&gt; &gt; users mailing list<br></font><font size="2" face="sans-serif">&gt; &gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br></font><font size="2" face="sans-serif">&gt; &gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></font><font size="2" face="sans-serif">&gt; &gt; <br></font><font size="2" face="sans-serif">&gt; <br></font><font size="2" face="sans-serif">&gt; _______________________________________________<br></font><font size="2" face="sans-serif">&gt; users mailing list<br></font><font size="2" face="sans-serif">&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br></font><font size="2" face="sans-serif">&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></font><font face="sans-serif">

<meta http-equiv="Content-Type">

</font></p><div><font face="sans-serif">
<br><br><p>Denne e-posten kan innehalde informasjon som er konfidensiell 
og/eller underlagt lovbestemt teieplikt. Kun den tiltenkte adressat har adgang 
til å lese eller vidareformidle denne e-posten eller tilhøyrande vedlegg. Dersom De ikkje er den tiltenkte mottakar, vennligst kontakt avsendar pr e-post, slett denne e-posten med vedlegg og makuler samtlige utskrifter og kopiar av den.</p><p>This e-mail may contain confidential information, or otherwise 
be protected against unauthorised use. Any disclosure, distribution or other use of the information by anyone but the intended recipient is strictly prohibited. 
If you have received this e-mail in error, please advise the sender by immediate reply and destroy the received documents and any copies hereof.</p><p align="LEFT" style="margin-bottom: 0cm; line-height: 100%"> 
<font color="#008000" face="Webdings" size="3">P</font><font color="#008000" face="Tahoma, sans-serif"><font size="1" style="font-size: 8pt; line-height: 100%">Before 
printing, think about the environment</font></font></p>
</font></div><font face="sans-serif">
</font>
</div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/users</blockquote></div><br></div></body></html>
