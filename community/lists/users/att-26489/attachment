<html><body><div style="color:#000; background-color:#fff; font-family:HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, Sans-Serif;font-size:16px"><div id="yui_3_16_0_1_1426624845349_5369"><span></span></div><br>  <div style="font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, Sans-Serif; font-size: 16px;" id="yui_3_16_0_1_1426624845349_5373"> <div style="font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, Sans-Serif; font-size: 16px;" id="yui_3_16_0_1_1426624845349_5372"> <div dir="ltr" id="yui_3_16_0_1_1426624845349_5371"> <hr size="1">  <font size="2" face="Arial" id="yui_3_16_0_1_1426624845349_5375"> <b><span style="font-weight:bold;">From:</span></b> Jeff Squyres (jsquyres) &lt;jsquyres@cisco.com&gt;<br> <b><span style="font-weight: bold;">To:</span></b> "tus@riseup.net" &lt;tus@riseup.net&gt;; Open MPI User's List &lt;users@open-mpi.org&gt; <br> <b><span style="font-weight: bold;">Sent:</span></b> Monday, 9 March 2015, 18:53:17<br> <b><span style="font-weight: bold;">Subject:</span></b> Re: [OMPI users] how to compile without ib support<br> </font> </div> <div class="y_msg_container" id="yui_3_16_0_1_1426624845349_5377"><br><div dir="ltr" id="yui_3_16_0_1_1426624845349_5379">On Mar 9, 2015, at 12:19 PM, Tus &lt;<a ymailto="mailto:tus@riseup.net" href="mailto:tus@riseup.net" id="yui_3_16_0_1_1426624845349_5417">tus@riseup.net</a>&gt; wrote:<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5381">&gt; <br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5383">&gt; I configured and installed 1.8.4 on my system. I was getting openfabric<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5385">&gt; erros and started to specify -mca btl ^openib which is working but very<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5387">&gt; slow.<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5389">&gt; <br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5391">&gt; I would like to complile again excluding openfabric or ib support. I do<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5393">&gt; have a 10GbE fast network in addition to 1G net. What flags are need to<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5395">&gt; ignore ib support and how can I verify/force openmpi to use my 10GbE net?<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5397"><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5399">You have several options:<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5401"><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5403">1. If you did a default Open MPI install, you can simply rm the "mca_btl_openib.so" plugin that was installed under $prefix/lib/openmpi.&nbsp; Open MPI then won't know that that plugin exists, and it won't try to use OpenFabrics-based devices.<br></div><div dir="ltr"><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_6707">2. You can set a system-wide MCA parameter to ignore the openib BTL.&nbsp; That way, you don't have to type it on the mpirun command line every time.<br></div><div dir="ltr"><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_6709">3. You can rebuild Open MPI with the --without-verbs configure command line switch.&nbsp; This will ultimately have the same effect as #1 (i.e., the openib plugin won't be in the installation tree).<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_6711"><br></div><div dir="ltr">As for using your 10G, I assume you mean over TCP sockets, right?<br></div><div dir="ltr"><br></div><div dir="ltr">If so, you can use --mca btl_tcp_if_include &lt;NAME_OF_10G_DEVICE&gt; or &lt;CIDR_OF_10G_NETWORK&gt;.&nbsp; E.g.:<br></div><div dir="ltr"><br></div><div dir="ltr">&nbsp;  mpirun --mca btl_tcp_if_include eth1 ...<br></div><div dir="ltr">&nbsp;  mpirun --mca btl_tcp_if_include 10.20.30.0/24 ...<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5464"><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5462">-- <br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5460">Jeff Squyres<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5458"><a ymailto="mailto:jsquyres@cisco.com" href="mailto:jsquyres@cisco.com" id="yui_3_16_0_1_1426624845349_5457">jsquyres@cisco.com</a><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5455">For corporate legal information go to: <a href="http://www.cisco.com/web/about/doing_business/legal/cri/" target="_blank">http://www.cisco.com/web/about/doing_business/legal/cri/</a><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5453"><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5451">_______________________________________________<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5449">users mailing list<br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5447"><a ymailto="mailto:users@open-mpi.org" href="mailto:users@open-mpi.org">users@open-mpi.org</a><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5443">Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" id="yui_3_16_0_1_1426624845349_5445">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div><div dir="ltr" id="yui_3_16_0_1_1426624845349_5441">Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26445.php" target="_blank" id="yui_3_16_0_1_1426624845349_5440">http://www.open-mpi.org/community/lists/users/2015/03/26445.php</a><br></div><br><br></div> </div> </div>  </div></body></html>
