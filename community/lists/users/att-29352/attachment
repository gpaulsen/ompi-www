<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns="http://www.w3.org/TR/REC-html40"><head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 14 (filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-priority:99;
	mso-style-link:"Sprechblasentext Zchn";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.SprechblasentextZchn
	{mso-style-name:"Sprechblasentext Zchn";
	mso-style-priority:99;
	mso-style-link:Sprechblasentext;
	font-family:"Tahoma","sans-serif";}
span.E-MailFormatvorlage19
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 2.0cm 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext="edit">
<o:idmap v:ext="edit" data="1" />
</o:shapelayout></xml><![endif]--></head><body lang=DE link=blue vlink=purple><div class=WordSection1><p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>Hi,<o:p></o:p></span></p><p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif"'><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>thank you Gilles for your suggestion.  I tried:  <span style='color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'>mpirun --prefix &lt;path to Open MPI&gt;  --host &lt;public IP&gt; hostname</span>, then it works.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>I’m sure both IPs are the ones of the VM on which mpirun is running, and they are unique. <o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>I also </span><span lang=EN-US>configured Open MPI with --enable-mpirun-prefix-by-default, but I still need to <span style='color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'>add </span></span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'>--prefix &lt;path to Open MPI&gt; </span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>to get mpirun work.<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>I used: </span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'>./configure --enable-mpirun-prefix-by-default =&quot;&lt;path to Open MPI&gt;  &quot;<br>             make<br>             make install</span><span lang=EN-US><o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>Did I miss something or I misunderstood the way to configure Open MPI? <o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>When I run: <span style='color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'>ssh &lt;</span></span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'> internal/public IP</span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'> &gt; </span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'>`which orted`</span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'><o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'>The output is: </span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%;background:#FCFDFE'>Warning: Permanently added </span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'>&lt;</span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'> internal/public IP</span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'> &gt; </span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%;background:#FCFDFE'>' (ECDSA) to the list of known hosts.</span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#558ED5;mso-style-textfill-fill-color:#558ED5;mso-style-textfill-fill-alpha:100.0%'><br><span style='background:#FCFDFE'>/usr/local/bin/orted<o:p></o:p></span></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";background:#FCFDFE'>Is it all right?<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";background:#FCFDFE'><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";background:#FCFDFE'>Cheers,<o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";background:#FCFDFE'>Ping</span><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif"'><o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497D'><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><span lang=EN-US style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497D'><o:p>&nbsp;</o:p></span></p><p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Tahoma","sans-serif"'>Von:</span></b><span style='font-size:10.0pt;font-family:"Tahoma","sans-serif"'> users [mailto:users-bounces@open-mpi.org] <b>Im Auftrag von </b>Gilles Gouaillardet<br><b>Gesendet:</b> Donnerstag, 2. Juni 2016 17:06<br><b>An:</b> Open MPI Users<br><b>Betreff:</b> Re: [OMPI users] Firewall settings for MPI communication<o:p></o:p></span></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal>are you saying both IP are the ones of the VM on which mpirun is running ?<o:p></o:p></p><div><p class=MsoNormal>orted is only launched on all the machines *except* the one running mpirun.<o:p></o:p></p></div><div><p class=MsoNormal><o:p>&nbsp;</o:p></p></div><div><p class=MsoNormal>can you double/triple check the IPs are ok and unique ?<o:p></o:p></p></div><div><p class=MsoNormal>for example, mpirun --host &lt;internal IP&gt; /sbin/ifconfig -a<o:p></o:p></p></div><div><p class=MsoNormal>can you also make sure Open MPI is installed on all your VMs in the same directory ?<o:p></o:p></p></div><div><p class=MsoNormal>also make sure Open MPI has all the dependencies on all the VMs<o:p></o:p></p></div><p class=MsoNormal>ssh xxx ldd `which orted`<o:p></o:p></p><div><p class=MsoNormal>should show no missing dependency<o:p></o:p></p><div><p class=MsoNormal><o:p>&nbsp;</o:p></p></div><div><p class=MsoNormal>generally speaking, I recommend you configure Open MPI with<o:p></o:p></p></div><div><p class=MsoNormal>--enable-mpirun-prefix-by-default<o:p></o:p></p></div><div><p class=MsoNormal><o:p>&nbsp;</o:p></p></div><div><p class=MsoNormal>you can also try to replace<o:p></o:p></p></div><div><p class=MsoNormal>mpirun<o:p></o:p></p></div><div><p class=MsoNormal>with<o:p></o:p></p></div><div><p class=MsoNormal>`which mpirun`<o:p></o:p></p></div><div><p class=MsoNormal>or<o:p></o:p></p></div><div><p class=MsoNormal>mpirun --prefix &lt;path to Open MPI&gt;<o:p></o:p></p></div><div><p class=MsoNormal><o:p>&nbsp;</o:p></p></div><div><p class=MsoNormal>Cheers,<o:p></o:p></p></div><div><p class=MsoNormal><o:p>&nbsp;</o:p></p></div><div><p class=MsoNormal>Gilles<br><br>On Thursday, June 2, 2016, Ping Wang &lt;<a href="mailto:ping.wang@asc-s.de">ping.wang@asc-s.de</a>&gt; wrote:<o:p></o:p></p><p class=MsoNormal>Hi,<br><br>I've installed Open MPI v1.10.2. Every VM on the cloud has two IPs (internal IP, public IP).<br>When I run: mpirun --host &lt;internal IP&gt; hostname, the output is the hostname of the VM.<br>But when I run: mpirun --host &lt;public IP&gt; hostname, the output is<br><br>bash: orted: command not found<br>--------------------------------------------------------------------------<br>ORTE was unable to reliably start one or more daemons.<br>This usually is caused by:<br><br>* not finding the required libraries and/or binaries on<br>&nbsp; one or more nodes. Please check your PATH and LD_LIBRARY_PATH<br>&nbsp; settings, or configure OMPI with --enable-orterun-prefix-by-default<br><br>* lack of authority to execute on one or more specified nodes.<br>&nbsp; Please verify your allocation and authorities.<br><br>* the inability to write startup files into /tmp (--tmpdir/orte_tmpdir_base).<br>&nbsp; Please check with your sys admin to determine the correct location to use.<br><br>*&nbsp; compilation of the orted with dynamic libraries when static are required<br>&nbsp; (e.g., on Cray). Please check your configure cmd line and consider using<br>&nbsp; one of the contrib/platform definitions for your system type.<br><br>* an inability to create a connection back to mpirun due to a<br>&nbsp; lack of common network interfaces and/or no route found between<br>&nbsp; them. Please check network connectivity (including firewalls<br>&nbsp; and network routing requirements).<br><br>Both IPs are the IP of the VM where MPI is running. Did I do something wrong in the configuration?<br><br>Thanks for any help.<br><br>Ping<br><br>-----Ursprüngliche Nachricht-----<br>Von: users [mailto:<a href="javascript:;">users-bounces@open-mpi.org</a>] Im Auftrag von Jeff Squyres (jsquyres)<br>Gesendet: Mittwoch, 1. Juni 2016 15:02<br>An: Open MPI User's List<br>Betreff: Re: [OMPI users] Firewall settings for MPI communication<br><br>In addition, you might want to consider upgrading to Open MPI v1.10.x (v1.6.x is fairly ancient).<br><br>&gt; On Jun 1, 2016, at 7:46 AM, Gilles Gouaillardet &lt;<a href="javascript:;">gilles.gouaillardet@gmail.com</a>&gt; wrote:<br>&gt;<br>&gt; which network are your VMs using for communications ?<br>&gt; if this is tcp, then you also have to specify a restricted set of<br>&gt; allowed ports for the tcp btl<br>&gt;<br>&gt; that would be something like<br>&gt; mpirun --mca btl_tcp_dynamic_ports 49990-50010 ...<br>&gt;<br>&gt; please double check the Open MPI 1.6.5 parameter and syntax with<br>&gt; ompi_info --all (or check the archives, I think I posted the correct<br>&gt; command line a few weeks ago)<br>&gt;<br>&gt; Cheers,<br>&gt;<br>&gt; Gilles<br>&gt;<br>&gt; On Wednesday, June 1, 2016, Ping Wang &lt;<a href="javascript:;">ping.wang@asc-s.de</a>&gt; wrote:<br>&gt; I'm using Open MPI 1.6.5 to run OpenFOAM in parallel on several VMs on<br>&gt; a cloud. mpirun hangs without any error messages. I think this is a<br>&gt; firewall issue. Because when I open all the TCP ports(1-65535) in the<br>&gt; security group of VMs, mpirun works well. However I was suggested to<br>&gt; open as less ports as possible. So I have to limit MPI to run on a<br>&gt; range of ports. I opened the port range 49990-50010 for MPI<br>&gt; communication. And use command<br>&gt;<br>&gt;<br>&gt;<br>&gt; mpirun --mca oob_tcp_dynamic_ports 49990-50010 -np 4 --hostfile machines simpleFoam –parallel.<br>&gt;<br>&gt;<br>&gt;<br>&gt; But it still hangs. How can I specify a port range that OpenMPI will use? I appreciate any help you can provide.<br>&gt;<br>&gt;<br>&gt;<br>&gt; Best,<br>&gt;<br>&gt; Ping Wang<br>&gt;<br>&gt;<br>&gt;<br>&gt; &lt;image001.png&gt;<br>&gt;<br>&gt; ------------------------------------------------------<br>&gt;<br>&gt; Ping Wang<br>&gt;<br>&gt; Automotive Simulation Center Stuttgart e.V.<br>&gt;<br>&gt; Nobelstraße 15<br>&gt;<br>&gt; D-70569 Stuttgart<br>&gt;<br>&gt; Telefon: +49 711 699659-14<br>&gt;<br>&gt; Fax: +49 711 699659-29<br>&gt;<br>&gt; E-Mail: <a href="javascript:;">ping.wang@asc-s.de</a><br>&gt;<br>&gt; Web: <a href="http://www.asc-s.de" target="_blank">http://www.asc-s.de</a><br>&gt;<br>&gt; Social Media: &lt;image002.gif&gt;/asc.stuttgart<br>&gt;<br>&gt; ------------------------------------------------------<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; <a href="javascript:;">users@open-mpi.org</a><br>&gt; Subscription: <a href="https://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">https://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>&gt; Link to this post:<br>&gt; <a href="http://www.open-mpi.org/community/lists/users/2016/06/29340.php" target="_blank">http://www.open-mpi.org/community/lists/users/2016/06/29340.php</a><br><br><br>--<br>Jeff Squyres<br><a href="javascript:;">jsquyres@cisco.com</a><br>For corporate legal information go to: <a href="http://www.cisco.com/web/about/doing_business/legal/cri/" target="_blank">http://www.cisco.com/web/about/doing_business/legal/cri/</a><br><br>_______________________________________________<br>users mailing list<br><a href="javascript:;">users@open-mpi.org</a><br>Subscription: <a href="https://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">https://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2016/06/29342.php" target="_blank">http://www.open-mpi.org/community/lists/users/2016/06/29342.php</a><br><br><br><br>_______________________________________________<br>users mailing list<br><a href="javascript:;">users@open-mpi.org</a><br>Subscription: <a href="https://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">https://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2016/06/29349.php" target="_blank">http://www.open-mpi.org/community/lists/users/2016/06/29349.php</a><o:p></o:p></p></div></div></div></body></html>

