<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Bonjour John,<div><br></div><div>&nbsp;First, Thanks for your feedback.</div><div><br><div><div>Le 17 déc. 10 à 16:13, John Hearns a écrit :</div><br class="Apple-interchange-newline"><blockquote type="cite"><div>On 17 December 2010 14:45, Gilbert Grosdidier<br>&lt;<a href="mailto:Gilbert.Grosdidier@cern.ch">Gilbert.Grosdidier@cern.ch</a>&gt; wrote:<br><blockquote type="cite">Bonjour,<br></blockquote><blockquote type="cite">&nbsp;About this issue, for which I got NO feedback ;-)<br></blockquote><br>Gilbert, as you have an SGI cluster, have you filed a support request to SGI?<br></div></blockquote><br><div>gg= Yes, I filed one, but with no more luck yet.</div><br><blockquote type="cite"><div>Also, which firmware do you have installed?<br>I have &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Firmware version: 2.5.0<br></div></blockquote><br><div>gg= I don't know, and&nbsp;firmware_revs does not seem to be available.</div><div>Only thing I got on a worker node was with lspci :</div><div><blockquote type="cite"><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div>03:00.0 InfiniBand: Mellanox Technologies MT26418 [ConnectX IB DDR, PCIe 2.0 5GT/s] (rev a0)</div></div></blockquote></div><br><blockquote type="cite"><div><br><a href="http://www.openfabrics.org/downloads/OFED/ofed-1.4/OFED-1.4-docs/mlx4_release_notes.txt">http://www.openfabrics.org/downloads/OFED/ofed-1.4/OFED-1.4-docs/mlx4_release_notes.txt</a><br></div></blockquote><br><div>gg= Looking into this one, I noticed pointers towards&nbsp;/etc/infiniband/connectx.conf</div><div>and&nbsp;/sbin/connectx_port_config, but they are not available either.</div><div><br></div><blockquote type="cite"><div><br>Features that are enabled with FW 2.5.0 only:<br>- Send with invalidate and Local invalidate send queue work requests.<br>- Resize CQ support.<br></div></blockquote><div><br></div><div>gg= I also spotted some special hooks inside openib code about&nbsp;</div><div>HAVE_IBV_GET_DEVICE_LIST,&nbsp;HAVE_IBV_CREATE_XRC_RCV_QP&nbsp;and&nbsp;HAVE_IBV_FORK_INIT.</div><div>Are any of them suspicious together with ConnectX HCAs, please ?</div><div><br></div><div><br></div><div>&nbsp;Thanks, &nbsp; &nbsp;Best, &nbsp; &nbsp;G.</div><div><br></div><br><blockquote type="cite"><div><br><br><br><br>I recently spotted<br><blockquote type="cite">into btl_openib.c code, that this error message could come from<br></blockquote><blockquote type="cite">some missing ConnectX HCA ibv_resize_cq function. Well ...<br></blockquote><blockquote type="cite">&nbsp;I was unable yet to figure out why/how this could occur, but I have<br></blockquote><blockquote type="cite">a now a closely related question about ConnectX Infiniband HCA :<br></blockquote><blockquote type="cite">does anybody know which other unimplemented IB functionalities<br></blockquote><blockquote type="cite">could be lacking for this ConnectX HCA ?<br></blockquote><blockquote type="cite">&nbsp;This could allow me to patch appropriately by hand the OpenMPI code,<br></blockquote><blockquote type="cite">since I currently believe these functionalities are going<br></blockquote><blockquote type="cite">undetected as missing by the configure step.<br></blockquote><blockquote type="cite">&nbsp;Thanks, &nbsp; &nbsp;Best, &nbsp; &nbsp;G.<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">Le 15 déc. 10 à 08:59, Gilbert Grosdidier a écrit :<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">Bonjour,<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">Running with OpenMPI 1.4.3 on an SGI Altix cluster with 2048 cores, I got<br></blockquote><blockquote type="cite">this error message on all cores, right at startup :<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">btl_openib.c:211:adjust_cq] cannot resize completion queue, error: 12<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">What could be the culprit please ?<br></blockquote><blockquote type="cite">Is there a workaround ?<br></blockquote><blockquote type="cite">What parameter is to be tuned ?<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">Thanks in advance for any help, &nbsp;&nbsp;&nbsp;Best, &nbsp;&nbsp;&nbsp;G.<br></blockquote><blockquote type="cite"><br></blockquote></div></blockquote></div><div apple-content-edited="true"><span class="Apple-style-span" style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Monaco; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; "><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><span class="Apple-style-span" style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; "><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><span class="Apple-style-span" style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; "><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div><div><font class="Apple-style-span" color="#2100FF" face="Monaco"><b><br></b></font></div></div></div></span><br class="Apple-interchange-newline"></div></span><br class="Apple-interchange-newline"></div></span><br class="Apple-interchange-newline"> </div><br></div></body></html>
