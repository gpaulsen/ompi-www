<div dir="ltr"><div class="gmail_default" style="font-family:tahoma,sans-serif">I&#39;ll try that as well.</div><div class="gmail_default" style="font-family:tahoma,sans-serif">Meanwhile, I found that my c++ code is running fine on a machine running OpenMPI 1.5.4, but I receive the same error under OpenMPI 1.8.4 for both Java and C++.</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Mon, Apr 6, 2015 at 2:21 PM, Howard Pritchard <span dir="ltr">&lt;<a href="mailto:hppritcha@gmail.com" target="_blank">hppritcha@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Hello HR,<div><br></div><div>Thanks!&nbsp; If you have Java 1.7 installed on your system would you mind trying to test against that version too?</div><div><br></div><div>Thanks,</div><div><br></div><div>Howard</div><div><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">2015-04-06 13:09 GMT-06:00 Hamidreza Anvari <span dir="ltr">&lt;<a href="mailto:hr.anvari@gmail.com" target="_blank">hr.anvari@gmail.com</a>&gt;</span>:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div><div class="h5"><div dir="ltr"><div class="gmail_default" style="font-family:tahoma,sans-serif">Hello,</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif">1. I&#39;m using Java/Javac version 1.8.0_20 under OS X 10.10.2.</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif">2. I have used the following configuration for making OpenMPI:</div><div class="gmail_default"><div><span style="font-stretch:normal;font-size:11px"><font face="monospace, monospace">./configure --enable-mpi-java --with-jdk-bindir=&quot;/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands&quot; --with-jdk-headers=&quot;/System/Library/Frameworks/JavaVM.framework/Versions/Current/Headers&quot; --prefix=&quot;/users/hamidreza/openmpi-1.8.4&quot;</font></span></div><div><span style="font-size:11px"><font face="monospace, monospace"><br></font></span></div><div><span style="font-size:11px"><font face="monospace, monospace">
<span style="font-stretch:normal">make all install</span></font></span></div><div style="font-family:tahoma,sans-serif"><span style="font-size:11px"><span style="font-family:Menlo"><span style="font-stretch:normal"><br></span></span></span></div></div><div class="gmail_default" style="font-family:tahoma,sans-serif">3. As a logical point of view, size2 is the maximum expected data to receive, which in turn might be less that this maximum.&nbsp;</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif">4. I will try to prepare a working reproducer of my error and send it to you.</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif">Thanks,</div><div class="gmail_default" style="font-family:tahoma,sans-serif">-- HR</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Mon, Apr 6, 2015 at 10:46 AM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">I&rsquo;ve talked to the folks who wrote the Java bindings. One possibility we identified is that there may be an error in your code when you did the translation<div><br></div><div><blockquote type="cite">My immediate thought is that each process can not receive more elements than it was sent to them. That&#39;s the reason of truncation error.<br><br>These are the correct values:<br><br>rank 0 - size2: 2,2,1,1<br>rank 1 - size2: 1,1,1,1<br>rank 2 - size2: 0,1,1,2<br>rank 3 - size2: 2,1,2,1<br></blockquote><div><br></div><div>Can you check your code to see if perhaps the values you are passing didn&rsquo;t get translated correctly from your C++ version to the Java version?</div><div><br></div><div><br></div><div><br><blockquote type="cite"><div><div><div>On Apr 6, 2015, at 5:03 AM, Howard Pritchard &lt;<a href="mailto:hppritcha@gmail.com" target="_blank">hppritcha@gmail.com</a>&gt; wrote:</div><br></div></div><div><div><div><div dir="ltr">Hello HR,<div><br></div><div>It would also be useful to know which java version you are using, as well</div><div>as the configure options used when building open mpi.</div><div><br></div><div>Thanks,</div><div><br></div><div>Howard</div><div><br></div><div><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">2015-04-05 19:10 GMT-06:00 Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span>:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">If not too much trouble, can you extract just the alltoallv portion and provide us with a small reproducer?<div><br></div><div><br><div><blockquote type="cite"><div>On Apr 5, 2015, at 12:11 PM, Hamidreza Anvari &lt;<a href="mailto:hr.anvari@gmail.com" target="_blank">hr.anvari@gmail.com</a>&gt; wrote:</div><br><div><div dir="ltr"><div class="gmail_default" style="font-family:tahoma,sans-serif">Hello,</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif">I am converting an existing MPI program in C++ to Java using OpenMPI 1.8.4,</div><div class="gmail_default" style="font-family:tahoma,sans-serif">At some point I have a allToAllv() code which works fine in C++ but receives error in Java version:</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default"><div class="gmail_default" style="font-family:tahoma,sans-serif">MPI.COMM_WORLD.allToAllv(data, subpartition_size, subpartition_offset, <a href="http://mpi.int/" target="_blank">MPI.INT</a>,</div><div class="gmail_default" style="font-family:tahoma,sans-serif">data2,subpartition_size2,subpartition_offset2,<a href="http://mpi.int/" target="_blank">MPI.INT</a>);</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif">Error:</div><div class="gmail_default"><div class="gmail_default"><font face="monospace, monospace">*** An error occurred in MPI_Alltoallv</font></div><div class="gmail_default"><font face="monospace, monospace">*** reported by process [3621322753,9223372036854775811]</font></div><div class="gmail_default"><font face="monospace, monospace">*** on communicator MPI_COMM_WORLD</font></div><div class="gmail_default"><font face="monospace, monospace">*** MPI_ERR_TRUNCATE: message truncated</font></div><div class="gmail_default"><font face="monospace, monospace">*** MPI_ERRORS_ARE_FATAL (processes in this communicator will now abort,</font></div><div class="gmail_default"><font face="monospace, monospace">*** &nbsp; &nbsp;and potentially your MPI job)</font></div><div class="gmail_default"><font face="monospace, monospace">3 more processes have sent help message help-mpi-errors.txt / mpi_errors_are_fatal</font></div><div class="gmail_default"><font face="monospace, monospace">Set MCA parameter &quot;orte_base_help_aggregate&quot; to 0 to see all help / error messages</font></div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif">Here are the values for parameters:</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif">data.length = 5</div><div class="gmail_default" style="font-family:tahoma,sans-serif">data2.length = 20</div><div class="gmail_default" style="font-family:tahoma,sans-serif"><br></div><div class="gmail_default" style="font-family:tahoma,sans-serif"><div class="gmail_default">---------- Rank 0 of 4 ----------</div><div class="gmail_default">subpartition_offset:0,2,3,3,</div><div class="gmail_default">subpartition_size:2,1,0,2,</div><div class="gmail_default">subpartition_offset2:0,5,10,15,</div><div class="gmail_default">subpartition_size2:5,5,5,5,</div><div class="gmail_default">----------</div><div class="gmail_default">---------- Rank 1 of 4 ----------</div><div class="gmail_default">subpartition_offset:0,2,3,4,</div><div class="gmail_default">subpartition_size:2,1,1,1,</div><div class="gmail_default">subpartition_offset2:0,5,10,15,</div><div class="gmail_default">subpartition_size2:5,5,5,5,</div><div class="gmail_default">----------</div><div class="gmail_default">---------- Rank 2 of 4 ----------</div><div class="gmail_default">subpartition_offset:0,1,2,3,</div><div class="gmail_default">subpartition_size:1,1,1,2,</div><div class="gmail_default">subpartition_offset2:0,5,10,15,</div><div class="gmail_default">subpartition_size2:5,5,5,5,</div><div class="gmail_default">----------</div><div class="gmail_default">---------- Rank 3 of 4 ----------</div><div class="gmail_default">subpartition_offset:0,1,2,4,</div><div class="gmail_default">subpartition_size:1,1,2,1,</div><div class="gmail_default">subpartition_offset2:0,5,10,15,</div><div class="gmail_default">subpartition_size2:5,5,5,5,</div><div class="gmail_default">----------</div><div><br></div><div>Again, this is a code which works in C++ version.</div><div><br></div><div>Any help or advice is greatly appreciated.</div><div><br></div><div>Thanks,</div><div>-- HR</div></div></div></div></div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26610.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26610.php</a></div></blockquote></div><br></div></div><br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26613.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26613.php</a><br></blockquote></div><br></div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26615.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26615.php</a></div></blockquote></div><br></div></div><br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26616.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26616.php</a><br></blockquote></div><br></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26617.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26617.php</a><br></blockquote></div><br></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/04/26620.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/04/26620.php</a><br></blockquote></div><br></div>

