<?
$subject_val = "[OMPI users] Assembler instruction errors for push and pop during make";
include("../../include/msg-header.inc");
?>
<!-- received="Sun Aug 18 00:29:20 2013" -->
<!-- isoreceived="20130818042920" -->
<!-- sent="Sat, 17 Aug 2013 21:29:18 -0700" -->
<!-- isosent="20130818042918" -->
<!-- name="Richard Haney" -->
<!-- email="rfhaney_at_[hidden]" -->
<!-- subject="[OMPI users] Assembler instruction errors for push and pop during make" -->
<!-- id="CACpvy6CmBUfUCt=MFqQF=f-ZXgth_KZW9cRR1c0EPPo-_M_EUg_at_mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- expires="-1" -->
<div class="center">
<table border="2" width="100%" class="links">
<tr>
<th><a href="date.php">Date view</a></th>
<th><a href="index.php">Thread view</a></th>
<th><a href="subject.php">Subject view</a></th>
<th><a href="author.php">Author view</a></th>
</tr>
</table>
</div>
<p class="headers">
<strong>Subject:</strong> [OMPI users] Assembler instruction errors for push and pop during make<br>
<strong>From:</strong> Richard Haney (<em>rfhaney_at_[hidden]</em>)<br>
<strong>Date:</strong> 2013-08-18 00:29:18
</p>
<ul class="links">
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="22501.php">John Hearns: "Re: [OMPI users] Mixing Linux's CPU-shielding with mpirun's bind-to-core"</a>
<li><strong>Previous message:</strong> <a href="22499.php">Siddhartha Jana: "[OMPI users] Mixing Linux's CPU-shielding with mpirun's bind-to-core"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr>
<!-- body="start" -->
<p>
During make I get several instruction errors for push, pushl, pop, and popl
<br>
&nbsp;at atomic-asm.S , which is included indirectly in asm.c .  For example,
<br>
for the first reported &quot;Error&quot;, the instruction
<br>
<p>pushl  %ebp
<br>
<p>apparently generates the error message
<br>
<p>atomic-asm.S:5: Error: invalid instruction suffix for `push'
<br>
<p>There are several more Error messages like that.
<br>
<p><pre>
---
And the instruction
push    %ebx
apparently generates the error message
atomic-asm.S:64: Error: operand type mismatch for `push'
---
And the instruction
pop   %ebx
apparently generates the error message
atomic-asm.S:68: Error: operand type mismatch for `pop'
---
And the instruction
popl  %ebp
apparently generates the error message
atomic-asm.S:75: Error: invalid instruction suffix for `pop'
-----------------------------------------------
It seems worth noting that make does a symbolic link involving &quot;atomic-asm.S&quot;
immediately before the processing of this file, which generates the errors,
but the configure output reports
checking whether ln -s works... no, using cp -p
as if symbolic links will not be used.
----------------------------------------
The configure output was generated by executing the script file &quot;
mpiconfigure&quot; via command
*$ mpiconfigure  &amp;&gt;  openmpi-1.6.5_configure.out*
&quot;mpiconfigure&quot; executes
*export LD_LIBRARY_PATH=/c/MinGW64/lib/gcc/x86_64-w64-mingw32/4.6.1*
just before executing ./configure ... so that I won't forget to set
LD_LIBRARY_PATH
.
The make command used was
*$ make -j 2     &amp;&gt;  make_-j_2.out*
I am using the Mingw MSYS 1.0 command-window/bash in a Windows 7
environment for processing the commands.
The compilers are Mingw 64-bit as reported in config.log ; these are not
&quot;official&quot; Mingw compiler versions, but supposedly are very nearly so --
see <a href="http://tdm-gcc.tdragon.net/">http://tdm-gcc.tdragon.net/</a> for details:
configure:5375: gcc --version &gt;&amp;5
gcc.exe (tdm64-1) 4.6.1
configure:15880: g++ --version &gt;&amp;5
g++.exe (tdm64-1) 4.6.1
configure:28191: gfortran.exe --version &gt;&amp;5
GNU Fortran (tdm64-1) 4.6.1
The processor is an Intel Sandybridge i5, with capability for parallel
execution of four threads.
My guess is that these errors are due simply to a mismatch between the
assembly instructions gcc can understand and the assembly instructions that
OpenMPI assumes gcc can understand.
Is there some flag I can set to tell gcc that a particular assembly
language (dialect) is being used?  And, if so, can I set it for make
without having to re-run configure?
-- 
*- Richard Haney*
*
*




</pre>
<hr>
<ul>
<li>text/html attachment: <a href="http://www.open-mpi.org/community/lists/users/att-22500/attachment">attachment</a>
</ul>
<!-- attachment="attachment" -->
<hr>
<ul>
<li>application/zip attachment: <a href="http://www.open-mpi.org/community/lists/users/att-22500/mpiconfigure.zip">mpiconfigure.zip</a>
</ul>
<!-- attachment="mpiconfigure.zip" -->
<hr>
<ul>
<li>application/zip attachment: <a href="http://www.open-mpi.org/community/lists/users/att-22500/openmpi-1.6.5_configure.zip">openmpi-1.6.5_configure.zip</a>
</ul>
<!-- attachment="openmpi-1.6.5_configure.zip" -->
<hr>
<ul>
<li>application/zip attachment: <a href="http://www.open-mpi.org/community/lists/users/att-22500/config.zip">config.zip</a>
</ul>
<!-- attachment="config.zip" -->
<hr>
<ul>
<li>application/zip attachment: <a href="http://www.open-mpi.org/community/lists/users/att-22500/make_-j_2.zip">make_-j_2.zip</a>
</ul>
<!-- attachment="make_-j_2.zip" -->
<!-- body="end" -->
<hr>
<ul class="links">
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="22501.php">John Hearns: "Re: [OMPI users] Mixing Linux's CPU-shielding with mpirun's bind-to-core"</a>
<li><strong>Previous message:</strong> <a href="22499.php">Siddhartha Jana: "[OMPI users] Mixing Linux's CPU-shielding with mpirun's bind-to-core"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div class="center">
<table border="2" width="100%" class="links">
<tr>
<th><a href="date.php">Date view</a></th>
<th><a href="index.php">Thread view</a></th>
<th><a href="subject.php">Subject view</a></th>
<th><a href="author.php">Author view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<? include("../../include/msg-footer.inc") ?>
