<html>
<head>
<style><!--
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Tahoma
}
--></style>
</head>
<body class='hmmessage'>
<br><br style="text-indent: 0px !important; ">thanks<div style="text-indent: 0px !important; "><br style="text-indent: 0px !important; "></div><div style="text-indent: 0px !important; ">But, I cannot see the attachment in the email.&nbsp;<br style="text-indent: 0px !important; "><div style="text-indent: 0px !important; "><br style="text-indent: 0px !important; "></div><div style="text-indent: 0px !important; ">Would you please send me again ?&nbsp;</div><div style="text-indent: 0px !important; "><br style="text-indent: 0px !important; "></div><div style="text-indent: 0px !important; ">and also copy to another my email:</div><div style="text-indent: 0px !important; "><br style="text-indent: 0px !important; "></div><div style="text-indent: 0px !important; ">tomviewisu@yahoo.com</div><div style="text-indent: 0px !important; "><br style="text-indent: 0px !important; "></div><div style="text-indent: 0px !important; ">thanks</div><div style="text-indent: 0px !important; "><br style="text-indent: 0px !important; "></div><div style="text-indent: 0px !important; ">Oct. 25 2010</div><div><br></div></div><hr id="stopSpelling">From: dtustudy68@hotmail.com<br>To: ashley@pittman.co.uk<br>Subject: RE: [OMPI users] Open MPI program cannot complete<br>Date: Mon, 25 Oct 2010 16:53:32 -0600<br><br>

<meta http-equiv="Content-Type" content="text/html; charset=unicode">
<meta name="Generator" content="Microsoft SafeHTML">
<style>
.ExternalClass .ecxhmmessage P
{padding:0px;}
.ExternalClass body.ecxhmmessage
{font-size:10pt;font-family:Tahoma;}

</style>




<style>
.ExternalClass .ecxhmmessage P
{padding:0px;}
.ExternalClass body.ecxhmmessage
{font-size:10pt;font-family:Tahoma;}

</style>

thanks<div><br></div><div>But, I cannot see the attachment in the email.&nbsp;<br><div><br></div><div>Would you please send me again ?&nbsp;</div><div><br></div><div>and also copy to another my email:</div><div><br></div><div>tomviewisu@yahoo.com</div><div><br></div><div>thanks</div><div><br></div><div>Oct. 25 2010</div><div><br><br>&gt; Subject: Re: [OMPI users] Open MPI program cannot complete<br>&gt; From: ashley@pittman.co.uk<br>&gt; Date: Mon, 25 Oct 2010 23:41:32 +0100<br>&gt; To: dtustudy68@hotmail.com<br>&gt; <br>&gt; <br>&gt; Thanks, that's tells me a lot.<br>&gt; <br>&gt; Try the attached padb, I've added the patch for you and remove the -w option.  Can you run it and send me back the output please.<br>&gt; <br>&gt; Ashley.<br>&gt; <br>&gt; On 25 Oct 2010, at 23:29, Jack Bryan wrote:<br>&gt; <br>&gt; &gt; Thanks<br>&gt; &gt; <br>&gt; &gt; Here is the <br>&gt; &gt; <br>&gt; &gt; -bash-3.2$ qstat -fB<br>&gt; &gt; Server: clusterName<br>&gt; &gt;     server_state = Active<br>&gt; &gt;     scheduling = True<br>&gt; &gt;     total_jobs = 26<br>&gt; &gt;     state_count = Transit:0 Queued:7 Held:0 Waiting:0 Running:18 Exiting:0<br>&gt; &gt;     acl_hosts = clustername<br>&gt; &gt;     default_queue = normal<br>&gt; &gt;     log_events = 511<br>&gt; &gt;     mail_from = adm<br>&gt; &gt;     query_other_jobs = True<br>&gt; &gt;     resources_assigned.nodect = 246<br>&gt; &gt;     scheduler_iteration = 600<br>&gt; &gt;     node_check_rate = 150<br>&gt; &gt;     tcp_timeout = 6<br>&gt; &gt;     mom_job_sync = True<br>&gt; &gt;     pbs_version = 2.4.2<br>&gt; &gt;     keep_completed = 300<br>&gt; &gt;     submit_hosts = clusterName<br>&gt; &gt;     next_job_number = 48293<br>&gt; &gt;     net_counter = 2 9 6<br>&gt; &gt; <br>&gt; &gt; -bash-3.2$ qstat -w -n<br>&gt; &gt; qstat: invalid option -- w<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; Which line should I put the <br>&gt; &gt; -----------------------------------------------------<br>&gt; &gt; --- padb (revision 401)<br>&gt; &gt; +++ padb (working copy)<br>&gt; &gt; @@ -2824,6 +2824,7 @@<br>&gt; &gt; foreach my $server (@servers) {<br>&gt; &gt; pbs_get_lqsub( $user, $server ); # get job list by qsub<br>&gt; &gt; }<br>&gt; &gt; + print Dumper \%pbs_tabjobs;<br>&gt; &gt; return \%pbs_tabjobs;<br>&gt; &gt; }<br>&gt; &gt; ----------------------------------------<br>&gt; &gt; <br>&gt; &gt; in the bin file   padb<br>&gt; &gt; <br>&gt; &gt; Any help is appreciated.<br>&gt; &gt; <br>&gt; &gt; thanks<br>&gt; &gt; <br>&gt; &gt; Jack <br>&gt; &gt; <br>&gt; &gt; Oct. 25 2010<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; &gt; Subject: Re: [OMPI users] Open MPI program cannot complete<br>&gt; &gt; &gt; From: ashley@pittman.co.uk<br>&gt; &gt; &gt; Date: Mon, 25 Oct 2010 22:54:21 +0100<br>&gt; &gt; &gt; To: dtustudy68@hotmail.com<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; <br>&gt; &gt; &gt; [off list]<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; The PBS support was added by a third-party so I've not used it in anger myself, it appears you are doing the correct thing as far as I can tell.<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; Can you send me the output of the following two commands and also apply the patch below to padb (you can do this just in the bin dir - it's a perl script) and send me the output when you run that as well?<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; qstat -fB<br>&gt; &gt; &gt; qstat -w -n<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; --- padb (revision 401)<br>&gt; &gt; &gt; +++ padb (working copy)<br>&gt; &gt; &gt; @@ -2824,6 +2824,7 @@<br>&gt; &gt; &gt; foreach my $server (@servers) {<br>&gt; &gt; &gt; pbs_get_lqsub( $user, $server ); # get job list by qsub<br>&gt; &gt; &gt; }<br>&gt; &gt; &gt; + print Dumper \%pbs_tabjobs;<br>&gt; &gt; &gt; return \%pbs_tabjobs;<br>&gt; &gt; &gt; }<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; On 25 Oct 2010, at 22:30, Jack Bryan wrote:<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; Thanks<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; I have downloaded <br>&gt; &gt; &gt; &gt; http://padb.googlecode.com/files/padb-3.2-beta1.tar.gz<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; and followed the instructions of INSTALL file and installed it at /mypath/padb32 <br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; But, I got:<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; -bash-3.2$ padb -Ormgr=pbs -Q 48279.cluster<br>&gt; &gt; &gt; &gt; Job 48279.cluster is not active<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; Actually, the job was running. <br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; I have installed <br>&gt; &gt; &gt; &gt; bin at <br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; /mypath/padb32/bin<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; libexec at<br>&gt; &gt; &gt; &gt; /lustre/jxding/padb32/libexec<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; When I installed it, I used <br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; ./configure --prefix=/mypath/padb32<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; I got <br>&gt; &gt; &gt; &gt; -----------------------------<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; checking for a BSD-compatible install... /usr/bin/install -c<br>&gt; &gt; &gt; &gt; checking whether build environment is sane... yes<br>&gt; &gt; &gt; &gt; checking for a thread-safe mkdir -p... /bin/mkdir -p<br>&gt; &gt; &gt; &gt; checking for gawk... gawk<br>&gt; &gt; &gt; &gt; checking whether make sets $(MAKE)... yes<br>&gt; &gt; &gt; &gt; checking for gcc... gcc<br>&gt; &gt; &gt; &gt; checking whether the C compiler works... yes<br>&gt; &gt; &gt; &gt; checking for C compiler default output file name... a.out<br>&gt; &gt; &gt; &gt; checking for suffix of executables...<br>&gt; &gt; &gt; &gt; checking whether we are cross compiling... no<br>&gt; &gt; &gt; &gt; checking for suffix of object files... o<br>&gt; &gt; &gt; &gt; checking whether we are using the GNU C compiler... yes<br>&gt; &gt; &gt; &gt; checking whether gcc accepts -g... yes<br>&gt; &gt; &gt; &gt; checking for gcc option to accept ISO C89... none needed<br>&gt; &gt; &gt; &gt; checking for style of include used by make... GNU<br>&gt; &gt; &gt; &gt; checking dependency style of gcc... gcc3<br>&gt; &gt; &gt; &gt; checking whether gcc and cc understand -c and -o together... yes<br>&gt; &gt; &gt; &gt; configure: creating ./config.status<br>&gt; &gt; &gt; &gt; config.status: creating Makefile<br>&gt; &gt; &gt; &gt; config.status: creating src/Makefile<br>&gt; &gt; &gt; &gt; config.status: executing depfiles commands<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; -------------------------------<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; -bash-3.2$ make<br>&gt; &gt; &gt; &gt; Making all in src<br>&gt; &gt; &gt; &gt; make[1]: Entering directory `/mypath/padb32/padb-3.2-beta1/src'<br>&gt; &gt; &gt; &gt; gcc -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"padb\" -DVERSION=\"3.2-beta1\" -I. -Wall -g -O2 -MT minfo-minfo.o -MD -MP -MF .deps/minfo-minfo.Tpo -c -o minfo-minfo.o `test -f 'minfo.c' || echo './'`minfo.c<br>&gt; &gt; &gt; &gt; minfo.c: In function âfind_symâ:<br>&gt; &gt; &gt; &gt; minfo.c:158: warning: dereferencing type-punned pointer will break strict-aliasing rules<br>&gt; &gt; &gt; &gt; minfo.c: In function âmainâ:<br>&gt; &gt; &gt; &gt; minfo.c:649: warning: type-punning to incomplete type might break strict-aliasing rules<br>&gt; &gt; &gt; &gt; minfo.c:650: warning: type-punning to incomplete type might break strict-aliasing rules<br>&gt; &gt; &gt; &gt; mv -f .deps/minfo-minfo.Tpo .deps/minfo-minfo.Po<br>&gt; &gt; &gt; &gt; gcc -Wall -g -O2 -ldl -o minfo minfo-minfo.o<br>&gt; &gt; &gt; &gt; make[1]: Leaving directory `/mypath/padb32/padb-3.2-beta1/src'<br>&gt; &gt; &gt; &gt; make[1]: Entering directory `/mypath/padb32/padb-3.2-beta1'<br>&gt; &gt; &gt; &gt; make[1]: Nothing to be done for `all-am'.<br>&gt; &gt; &gt; &gt; make[1]: Leaving directory `/mypath/padb32/padb-3.2-beta1'<br>&gt; &gt; &gt; &gt; -------------------------------------------------<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; -bash-3.2$ make install<br>&gt; &gt; &gt; &gt; Making install in src<br>&gt; &gt; &gt; &gt; make[1]: Entering directory `/mypath/padb32/padb-3.2-beta1/src'<br>&gt; &gt; &gt; &gt; make[2]: Entering directory `/mypath/padb32/padb-3.2-beta1/src'<br>&gt; &gt; &gt; &gt; test -z "/lustre/jxding/padb32/bin" || /bin/mkdir -p "/mypath/padb32/bin"<br>&gt; &gt; &gt; &gt; /usr/bin/install -c padb '/lustre/jxding/padb32/bin'<br>&gt; &gt; &gt; &gt; test -z "/lustre/jxding/padb32/libexec" || /bin/mkdir -p "/mypath/padb32/libexec"<br>&gt; &gt; &gt; &gt; /usr/bin/install -c minfo '/lustre/jxding/padb32/libexec'<br>&gt; &gt; &gt; &gt; make[2]: Nothing to be done for `install-data-am'.<br>&gt; &gt; &gt; &gt; make[2]: Leaving directory `/mypath/padb32/padb-3.2-beta1/src'<br>&gt; &gt; &gt; &gt; make[1]: Leaving directory `/mypath/padb32/padb-3.2-beta1/src'<br>&gt; &gt; &gt; &gt; make[1]: Entering directory `/mypath/padb32/padb-3.2-beta1'<br>&gt; &gt; &gt; &gt; make[2]: Entering directory `/mypath/padb32/padb-3.2-beta1'<br>&gt; &gt; &gt; &gt; make[2]: Nothing to be done for `install-exec-am'.<br>&gt; &gt; &gt; &gt; make[2]: Nothing to be done for `install-data-am'.<br>&gt; &gt; &gt; &gt; make[2]: Leaving directory `/mypath/padb32/padb-3.2-beta1'<br>&gt; &gt; &gt; &gt; make[1]: Leaving directory `/mypath/padb32/padb-3.2-beta1'<br>&gt; &gt; &gt; &gt; -bash-3.2$ make installcheck<br>&gt; &gt; &gt; &gt; Making installcheck in src<br>&gt; &gt; &gt; &gt; make[1]: Entering directory `/mypath/padb32/padb-3.2-beta1/src'<br>&gt; &gt; &gt; &gt; make[1]: Nothing to be done for `installcheck'.<br>&gt; &gt; &gt; &gt; make[1]: Leaving directory `/mypath/padb32/padb-3.2-beta1/src'<br>&gt; &gt; &gt; &gt; make[1]: Entering directory `/mypath/padb32/padb-3.2-beta1'<br>&gt; &gt; &gt; &gt; make[1]: Nothing to be done for `installcheck-am'.<br>&gt; &gt; &gt; &gt; make[1]: Leaving directory `/mypath/padb32/padb-3.2-beta1'<br>&gt; &gt; &gt; &gt; --------------------------------------------------<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; Are there something wrong with what I have done ?<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; Any help is appreciated. <br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; thanks<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; Jack<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; Oct. 25 2010<br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; From: ashley@pittman.co.uk<br>&gt; &gt; &gt; &gt; &gt; Date: Mon, 25 Oct 2010 20:40:18 +0100<br>&gt; &gt; &gt; &gt; &gt; To: users@open-mpi.org<br>&gt; &gt; &gt; &gt; &gt; Subject: Re: [OMPI users] Open MPI program cannot complete<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; On 25 Oct 2010, at 20:18, Jack Bryan wrote:<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; &gt; Thanks<br>&gt; &gt; &gt; &gt; &gt; &gt; I have downloaded <br>&gt; &gt; &gt; &gt; &gt; &gt; http://padb.googlecode.com/files/padb-3.0.tgz<br>&gt; &gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; &gt; and compile it.<br>&gt; &gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; &gt; But, no user manual, I can not use it by padb -aQ.<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; The -a flag is a shortcut to all jobs, if you are providing a jobid (which is normally numeric) then don't set the -a flag.<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; &gt; Do you have use manual about how to use it ? <br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; In my previous mail I was assuming you were using orte to launch the jobs but if you are using PBS then you'll need to use the 3.2 beta as the PBS code is new, alternatively you could find the host where the PBS script itself runs and check of the "ompi-ps" command gives you any output, if it does then you could run it from there giving it the orte jobid.<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; A bit of background about resource managers (in which I'm including orte and PBS), padb supports many resource managers and tries to automatically detect which ones you have installed on your system. If you don't specify one then it'll see what is installed, if there is more than one resource manager installed then it'll see which of them claim to have active jobs - if only one resource manager meets this criteria then it'll pick that one - hence 99% of the time it should just work. If more than one resource manager claims to have active jobs then padb will refuse to run but ask the user to specify one explicitly.<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; You should try the following in order once you have 3.2 installed.<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; padb -Ormgr=pbs -Q &lt;myjob&gt;<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; Or - find the node where the PBS script is being executed, check that the ompi-ps command is returning the jobid and then run<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; padb -Ormgr=orte -Q &lt;openmpi_jobid&gt;<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; Ashley,<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; -- <br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; Ashley Pittman, Bath, UK.<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; Padb - A parallel job inspection tool for cluster computing<br>&gt; &gt; &gt; &gt; &gt; http://padb.pittman.org.uk<br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; <br>&gt; &gt; &gt; &gt; &gt; _______________________________________________<br>&gt; &gt; &gt; &gt; &gt; users mailing list<br>&gt; &gt; &gt; &gt; &gt; users@open-mpi.org<br>&gt; &gt; &gt; &gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt; &gt; &gt; _______________________________________________<br>&gt; &gt; &gt; &gt; users mailing list<br>&gt; &gt; &gt; &gt; users@open-mpi.org<br>&gt; &gt; &gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; -- <br>&gt; &gt; &gt; <br>&gt; &gt; &gt; Ashley Pittman, Bath, UK.<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; Padb - A parallel job inspection tool for cluster computing<br>&gt; &gt; &gt; http://padb.pittman.org.uk<br>&gt; &gt; &gt; <br>&gt; <br>&gt; -- <br>&gt; <br>&gt; Ashley Pittman, Bath, UK.<br>&gt; <br>&gt; Padb - A parallel job inspection tool for cluster computing<br>&gt; http://padb.pittman.org.uk<br>&gt; <br></div></div> 		 	   		  </body>
</html>
