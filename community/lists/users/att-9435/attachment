<html>
<head>
<style>
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Verdana
}
</style>
</head>
<body class='hmmessage'>
<br>I finally got it.<div><br></div><div>Thanks</div><div><br></div><div><br>&gt; From: jsquyres@cisco.com<br>&gt; To: users@open-mpi.org<br>&gt; Date: Tue, 26 May 2009 20:49:34 -0400<br>&gt; Subject: Re: [OMPI users] MPI_COMM_WORLD Error<br>&gt; <br>&gt; Don't use the mpif.h from that site; Open MPI ships with its own.   <br>&gt; mpif90 will find it -- you don't need to copy it into the same  <br>&gt; directory as your .f sources.<br>&gt; <br>&gt; <br>&gt; On May 26, 2009, at 8:21 PM, &lt;mtcreekmore@broncs.utpa.edu&gt; wrote:<br>&gt; <br>&gt; &gt; Thanks for your reply Eugene.<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt; Here is the result of the mpif90 -showme<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt; /state/partition1/apps/intel/fce/10.1.015/bin/ifort -I/share/apps/ <br>&gt; &gt; openmpi-1.2.6-intel/include -pthread -I/share/apps/openmpi-1.2.6- <br>&gt; &gt; intel/lib -L/usr/pbs/lib -L/share/apps/openmpi-1.2.6-intel/lib - <br>&gt; &gt; lmpi_f90 -lmpi_f77 -lmpi -lopen-rte -lopen-pal -lrt -lpbs -lnuma - <br>&gt; &gt; ldl -Wl,--export-dynamic -lnsl -lutil<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt; The mpif.h file I got off the site. I used the Google "site:  <br>&gt; &gt; mcs.anl.gov  mpif.h" search and placed it into the same directory as  <br>&gt; &gt; the main program.<br>&gt; &gt;<br>&gt; &gt; So if it is the correct one, I am not sure.<br>&gt; &gt;<br>&gt; &gt; Trent<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt; Date: Tue, 26 May 2009 16:54:02 -0700<br>&gt; &gt; From: Eugene.Loh@Sun.COM<br>&gt; &gt; To: users@open-mpi.org<br>&gt; &gt; Subject: Re: [OMPI users] MPI_COMM_WORLD Error<br>&gt; &gt;<br>&gt; &gt; mtcreekmore@broncs.utpa.edu wrote:<br>&gt; &gt;<br>&gt; &gt; I and new to OpenMPI and  have looked for this, but not getting  <br>&gt; &gt; anywhere.<br>&gt; &gt;<br>&gt; &gt; I got an example program off this site:<br>&gt; &gt;<br>&gt; &gt; The compute PI in Fortran example.<br>&gt; &gt; http://www.mcs.anl.gov/research/projects/mpi/usingmpi/examples/simplempi/main.htm<br>&gt; &gt;<br>&gt; &gt; Compiled it with "mpif90" and no errors.<br>&gt; &gt; Then used the qsub -I and tried both executing directly and "mpirun"  <br>&gt; &gt; and still receive these errors:<br>&gt; &gt;<br>&gt; &gt; [MGT-2-1:02994] *** An error occurred in MPI_Comm_rank<br>&gt; &gt; [MGT-2-1:02994] *** on communicator MPI_COMM_WORLD<br>&gt; &gt; [MGT-2-1:02994] *** MPI_ERR_COMM: invalid communicator<br>&gt; &gt; [MGT-2-1:02994] *** MPI_ERRORS_ARE_FATAL (goodbye)<br>&gt; &gt;<br>&gt; &gt; Any guidance in the right direction would be appreciated.<br>&gt; &gt; First, the example works fine for me.<br>&gt; &gt;<br>&gt; &gt; You seem to be bombing in MPI_Comm_rank and before it asks you for  <br>&gt; &gt; any input.  I guess it's having problems with the MPI_COMM_WORLD  <br>&gt; &gt; communicator being passed to MPI_Comm_rank?  Maybe it's having  <br>&gt; &gt; problems finding the mpif.h include file?  It's finding *some*  <br>&gt; &gt; mpif.h include file, but presumably not the right one.  Make sure  <br>&gt; &gt; the mpif90 and mpirun commands are the ones you think you should be  <br>&gt; &gt; getting and, if they are, try adding -showme to the mpif90 line to  <br>&gt; &gt; see where it's looking for the mpif.h include file.<br>&gt; &gt; _______________________________________________<br>&gt; &gt; users mailing list<br>&gt; &gt; users@open-mpi.org<br>&gt; &gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br>&gt; <br>&gt; <br>&gt; -- <br>&gt; Jeff Squyres<br>&gt; Cisco Systems<br>&gt; <br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; users@open-mpi.org<br>&gt; http://www.open-mpi.org/mailman/listinfo.cgi/users<br></div></body>
</html>
