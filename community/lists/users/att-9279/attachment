<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">maybe add the slots=1 for example to your first node<div><br><div><div>Le 09-05-09 à 11:42, Venu Gopal a écrit :</div><br class="Apple-interchange-newline"><blockquote type="cite"><span class="gI"></span>I am venu,<br><br>I have tried to setup a simple 2 node openmpi system.<br><br>on two machines one is running debian lenny (ip 10.0.3.1)<br>other is running ubuntu hardy (ip 10.0.3.3)<br><br>I am getting error when i try to execute a file using mpiexec, i am sure password is correct. as ssh is working<br> and the file pi3 is in directory code which in turn is in my home directory venu.<br><br>the file pi.c is below<br><br><br><br>/* To run this program:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>/*---------------------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br> /*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>/*&nbsp;&nbsp;&nbsp; Issue:&nbsp;&nbsp; time&nbsp; mpirun&nbsp; -np&nbsp; [nprocs]&nbsp; ./pi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (SGI, Beowulf)&nbsp; */<br> /*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>/* ------------------------------------------------------------------ */<br> <br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br><br>#include "mpi.h"<br><br>int main(int argc, char *argv[])<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int&nbsp;&nbsp;&nbsp; i, n;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double h, pi, x;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int&nbsp;&nbsp;&nbsp; me, nprocs;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double piece;<br> <br>/* --------------------------------------------------- */<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Init (&amp;argc, &amp;argv);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Comm_size (MPI_COMM_WORLD, &amp;nprocs);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Comm_rank (MPI_COMM_WORLD, &amp;me);<br><br> /* --------------------------------------------------- */<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (me == 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%s", "Input number of intervals:\n");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scanf ("%d", &amp;n);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br> <br>/* --------------------------------------------------- */<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Bcast (&amp;n, 1, MPI_INT,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0, MPI_COMM_WORLD);<br><br>/* --------------------------------------------------- */<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; h&nbsp;&nbsp;&nbsp;&nbsp; = 1. / (double) n;<br> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; piece = 0.;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (i=me+1; i &lt;= n; i+=nprocs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x&nbsp;&nbsp;&nbsp;&nbsp; = (i-1)*h;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; piece = piece + (<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4/<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1+(x)*(x))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4/<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1+(x+h)*(x+h))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ) / 2 * h;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%d: pi = %25.15f\n", me, piece);<br> <br>/* --------------------------------------------------- */<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Reduce (&amp;piece, &amp;pi, 1, MPI_DOUBLE,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_SUM, 0, MPI_COMM_WORLD);<br><br>/* --------------------------------------------------- */<br> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (me == 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("pi = %25.15f\n", pi);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>/* --------------------------------------------------- */<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Finalize();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br>}<br> <br><br><br>the code directory is nfs shared and mounted on the client system which is 10.0.3.3.<br>the server system is 10.0.3.1<br><br>i can ping the client from server and also server from client. ssh is working bothways.<br> <br>the /etc/openmpi/openmpi-default-hostfile is having the line on the first node ie. 10.0.3.1<br><br>10.0.3.3 slots=2<br><br><br>the other nodes file is just empty. i mean only comments are there.<br><br><br>this is the error is get when i execute.<br> <br><br>venu@mainframe:~$ mpiexec -np 3 ./code/pi3<br><a href="mailto:venu@10.0.3.3">venu@10.0.3.3</a>'s password: <br>--------------------------------------------------------------------------<br>Could not execute the executable "./code/pi3": Exec format error<br> <br>This could mean that your PATH or executable name is wrong, or that you do not<br>have the necessary permissions.&nbsp; Please ensure that the executable is able to be<br>found and executed.<br><br>--------------------------------------------------------------------------<br> --------------------------------------------------------------------------<br>Could not execute the executable "./code/pi3": Exec format error<br><br>This could mean that your PATH or executable name is wrong, or that you do not<br> have the necessary permissions.&nbsp; Please ensure that the executable is able to be<br>found and executed.<br><br>--------------------------------------------------------------------------<br>--------------------------------------------------------------------------<br> Could not execute the executable "./code/pi3": Exec format error<br><br>This could mean that your PATH or executable name is wrong, or that you do not<br>have the necessary permissions.&nbsp; Please ensure that the executable is able to be<br> found and executed.<br><br>--------------------------------------------------------------------------<br><br><br><br>now, when i remove that line from /etc/openmpi/openmpi-default-hostfile on the first node<br><br>the program compiles and executes on the first node node.<br> <br>same, when i compile it and execute it on the second node, it works.<br><br>only problem is when i try to run it on both.<br><br>i get the error mesage as above.<br><br><br>someone, please help me. as i am trying to setup this system for the first time.<br> <br>and i am stuck.<br><br>i am fairly good with linux. so i know my way around linux. but am stuck with open mpi.<br clear="all">-- <br><br>Regards,<br><br>Venu Gopal<br><br><br><br> _______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></blockquote></div><br></div></body></html>
