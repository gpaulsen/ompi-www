<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Using direct can cause scaling issues as every process will open a socket to every other process in the job. You would at least have to ensure you have enough file descriptors available on every node.<div><br></div><div>The most likely cause is either (a) a different OMPI version getting picked up on one of the nodes, or (b) something blocking communication between at least one of your other nodes. I would suspect the latter - perhaps a firewall or something?</div><div><br></div><div>I''m disturbed by your not seeing any error output - that seems strange. Try adding --debug-daemons to the cmd line. That should definitely generate output from every daemon (at the least, they report they are alive).</div><div><br></div><div>Ralph</div><div><br><div><div>On Jul 29, 2009, at 2:06 PM, David Doria wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div class="gmail_quote">On Wed, Jul 29, 2009 at 3:42 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"> It sounds like perhaps IOF messages aren't getting relayed along the daemons. Note that the daemon on each node does have to be able to send TCP messages to all other nodes, not just mpirun.<br> <br> Couple of things you can do to check:<br> <br> 1. -mca routed direct - this will send all messages direct instead of across the daemons<br> <br> 2. --leave-session-attached - will allow you to see any errors reported by the daemons, including those from attempting to relay messages<br> <br> Ralph<div><div></div><div class="h5"><br> </div></div></blockquote><div><br>Ralph, thanks for the quick response.<br> <br> With<br> -mca routed direct<br> it works correctly.<br> <br> With this:<br> mpirun -H 10.1.2.126,10.1.2.122,10.1.2.123,10.1.2.125 --leave-session-attached -np 4 /home/doriad/MPITest/hello-mpi<br> <br> I still get no output nor errors from the daemons.<br><br>Is there a downside to using 'mca routed direct'? Or should I fix whatever is causing this daemon issue? You have any other tests for me to try to see what's wrong?<br> <br clear="all">Thanks,<br><br>David <br></div></div> _______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/users</blockquote></div><br></div></body></html>
