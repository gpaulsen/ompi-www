<html><head></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">MPI won't do this - if a node dies, the entire MPI job is terminated.<div><br></div><div>Take a look at OpenRCM, a subproject of Open MPI:</div><div><br></div><div><a href="http://www.open-mpi.org/projects/orcm/">http://www.open-mpi.org/projects/orcm/</a></div><div><br></div><div><a href="http://www.open-mpi.org/projects/orcm/"></a>This is designed to do what you describe as we have a similar (open source) project underway at Cisco. If I were writing your system, I would:</div><div><br></div><div>(a) add my sensors to the orte/mca/sensor framework. You'll find that we already monitor memory usage, for example. Use the orte/mca/db framework to store your data in a database. Several different databases are already supported, though it is easy to add another if you want (e.g., sqlite support).</div><div><br></div><div>(b) add my desired error response to the src/orte/mca/errmgr/orcm module. The ability to migrate processes is already implemented, but you may need to do something additional to migrate a VM.&nbsp;If you prefer, you can create your own module in that area and use one of the other components as an example.</div><div><br></div><div>Then let orcm start its daemons across your nodes. Orcm daemons will do the monitoring and reporting for you, and will start and monitor the virtual machines. If you set the max local restarts to 0, and max global restarts to some number, the system will automatically migrate any failures to other nodes.</div><div><br></div><div>See the June 2010 presentation under "Publications" on the web page above for an overview of how it all works. If you decide to go this route, I'll be happy to provide advice and further explanation. And of course, you are welcome to participate in ORCM if you choose.</div><div><br></div><div>Ralph</div><div><br></div><div><div><div>On Oct 22, 2010, at 6:09 AM, Vasiliy G Tolstov wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div>On Fri, 2010-10-22 at 14:07 +0200, Reuti wrote:<br><blockquote type="cite">Hi,<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">Am 22.10.2010 um 10:58 schrieb Vasiliy G Tolstov:<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite"><blockquote type="cite">Hello. May be this question already answered, but i can't see it in list<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">archive.<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite"><br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">I'm running about 60 Xen nodes with about 7-20 virtual machines under<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">it. I want to gather disk,cpu,memory,network utilisation from virtual<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">machines and get it into database for later processing.<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite"><br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">As i see, my architecture like this - One or two master servers with mpi<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">process with rank 0, that can insert data into database. This master<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">servers spawns on each Xen node mpi process, that gather statistics from<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">virtual machines on that node and send it to masters (may be with<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">multicast request). On each virtual machine i have process (mpi) that<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">can get and send data to mpi process on each Xen node. Virtual machine<br></blockquote></blockquote><blockquote type="cite"><blockquote type="cite">have ability to migrate on other Xen node....<br></blockquote></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">do you want just to monitor the physical and virtual machines by an application running under MPI? It sounds like it could be done by Ganglia or Nagios then.<br></blockquote><br>No.. I want to get realtime data to decide what virtual machine i need<br>to migrate to other Xen, becouse it need more resources.<br><br><br>-- <br>Vasiliy G Tolstov &lt;<a href="mailto:v.tolstov@selfip.ru">v.tolstov@selfip.ru</a>&gt;<br><a href="http://Selfip.Ru">Selfip.Ru</a><br><br>_______________________________________________<br>users mailing list<br>users@open-mpi.org<br>http://www.open-mpi.org/mailman/listinfo.cgi/users<br></div></blockquote></div><br></div></body></html>
