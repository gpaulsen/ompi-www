<div dir="ltr"><div>Superb, thanks for the clarification!<br></div><div><br></div><div>I will look into it!</div></div><div class="gmail_extra"><br><div class="gmail_quote">2014-09-15 16:33 GMT+02:00 Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span>:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">Not really &quot;removed&quot; - say rather &quot;renamed&quot;. The PLPA system was replaced by HWLOC starting with the 1.7 series. The binding directives were replaced with --bind-to &lt;x&gt; options as they became much more fine-grained than before - you can bind all the way do the hardware thread level.<div><br></div><div>If you don&#39;t want to bind at all, you now use --bind-to none</div><div><br></div><div>Memory affinity options are likewise now implemented as part of hwloc. You can see all these new params using ompi_info:</div><div><br></div><div>ompi_info --param hwloc all --level 9</div><div><br></div><div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc&quot; (current value: &quot;&quot;, data source:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          default, level: 2 user/detail, type: string)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Default selection set of components for the hwloc</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          framework (&lt;none&gt; means use all components that can</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          be found)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_verbose&quot; (current value: &quot;0&quot;,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          data source: default, level: 8 dev/detail, type:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          int)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Verbosity level for the hwloc framework (0 = no</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          verbosity)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_mem_alloc_policy&quot; (current</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          value: &quot;none&quot;, data source: default, level: 9</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          dev/all, type: int)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          General memory allocations placement policy (this</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          is not memory binding). &quot;none&quot; means that no memory</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          policy is applied. &quot;local_only&quot; means that a</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          process&#39; memory allocations will be restricted to</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          its local NUMA node. If using direct launch, this</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          policy will not be in effect until after MPI_INIT.</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Note that operating system paging policies are</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          unaffected by this setting. For example, if</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          &quot;local_only&quot; is used and local NUMA node memory is</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          exhausted, a new memory allocation may cause</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          paging.</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Valid values: 0:&quot;none&quot;, 1:&quot;local_only&quot;</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_mem_bind_failure_action&quot;</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          (current value: &quot;warn&quot;, data source: default,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          level: 9 dev/all, type: int)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          What Open MPI will do if it explicitly tries to</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          bind memory to a specific NUMA location, and fails.</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                           Note that this is a different case than the</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          general allocation policy described by</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          hwloc_base_alloc_policy.  A value of &quot;silent&quot; means</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          that Open MPI will proceed without comment. A value</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          of &quot;warn&quot; means that Open MPI will warn the first</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          time this happens, but allow the job to continue</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          (possibly with degraded performance).  A value of</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          &quot;error&quot; means that Open MPI will abort the job if</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          this happens.</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Valid values: 0:&quot;silent&quot;, 1:&quot;warn&quot;, 2:&quot;error&quot;</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_binding_policy&quot; (current</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          value: &quot;&quot;, data source: default, level: 9 dev/all,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          type: string)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Policy for binding processes. Allowed values: none,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          hwthread, core, l1cache, l2cache, l3cache, socket,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          numa, board (&quot;none&quot; is the default when</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          oversubscribed, &quot;core&quot; is the default when np&lt;=2,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          and &quot;socket&quot; is the default when np&gt;2). Allowed</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          qualifiers: overload-allowed, if-supported</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_bind_to_core&quot; (current value:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          &quot;false&quot;, data source: default, level: 9 dev/all,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          type: bool)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Bind processes to cores</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Valid values: 0: f|false|disabled, 1:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          t|true|enabled</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_bind_to_socket&quot; (current</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          value: &quot;false&quot;, data source: default, level: 9</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          dev/all, type: bool)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Bind processes to sockets</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Valid values: 0: f|false|disabled, 1:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          t|true|enabled</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_report_bindings&quot; (current</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          value: &quot;false&quot;, data source: default, level: 9</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          dev/all, type: bool)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Report bindings to stderr</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Valid values: 0: f|false|disabled, 1:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          t|true|enabled</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_slot_list&quot; (current value:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          &quot;&quot;, data source: default, level: 9 dev/all, type:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          string)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          List of processor IDs to bind processes to</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          [default=NULL]</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_cpu_set&quot; (current value: &quot;&quot;,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          data source: default, level: 9 dev/all, type:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          string)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Comma-separated list of ranges specifying logical</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          cpus allocated to this job [default: none]</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_use_hwthreads_as_cpus&quot;</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          (current value: &quot;false&quot;, data source: default,</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          level: 9 dev/all, type: bool)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Use hardware threads as independent cpus</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Valid values: 0: f|false|disabled, 1:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          t|true|enabled</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">               MCA hwloc: parameter &quot;hwloc_base_topo_file&quot; (current value:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          &quot;&quot;, data source: default, level: 9 dev/all, type:</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          string)</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          Read local topology from file instead of directly</div><div style="margin:0px;font-size:11px;font-family:Menlo;background-color:rgb(254,244,156)">                          sensing it</div><div><br></div><div><br></div><div><div><div class="h5"><div>On Sep 15, 2014, at 7:13 AM, Nick Papior Andersen &lt;<a href="mailto:nickpapior@gmail.com" target="_blank">nickpapior@gmail.com</a>&gt; wrote:</div><br></div></div><blockquote type="cite"><div><div class="h5"><div dir="ltr">Dear all<br><br>maffinity, paffinity parameters have been removed since 1.7.<br><br>For the uninitiated is this because it has been digested by the code so as the code would automatically decide on these values?<br><br>For instance I have always been using paffinity_alone=1 for single node jobs with entire occupation.<br>From what it seems, this is not necessary any more?<br><br>Hence what does &quot;removed&quot; cover and are there anything that we as users should take care of when having previously dealt with these parameters?<br><br>I have tried searching the users-list, to no avail, and the NEWS file does not cover it (simply says &quot;removed&quot;).<br><br>-- <br>Kind regards Nick
</div></div></div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2014/09/25331.php" target="_blank">http://www.open-mpi.org/community/lists/users/2014/09/25331.php</a></blockquote></div><br></div></div><br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2014/09/25332.php" target="_blank">http://www.open-mpi.org/community/lists/users/2014/09/25332.php</a><br></blockquote></div><br><br clear="all"><br>-- <br><div dir="ltr"><div>Kind regards Nick</div></div>
</div>

