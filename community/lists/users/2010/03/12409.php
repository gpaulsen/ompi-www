<?
$subject_val = "[OMPI users] error depends on the number of processors";
include("../../include/msg-header.inc");
?>
<!-- received="Tue Mar 23 12:06:04 2010" -->
<!-- isoreceived="20100323160604" -->
<!-- sent="Tue, 23 Mar 2010 12:06:00 -0400" -->
<!-- isosent="20100323160600" -->
<!-- name="Junwei Huang" -->
<!-- email="jwhuang1982_at_[hidden]" -->
<!-- subject="[OMPI users] error depends on the number of processors" -->
<!-- id="bf245f131003230906g282c99e6y4c251d0a4db0a47d_at_mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- expires="-1" -->
<div class="center">
<table border="2" width="100%" class="links">
<tr>
<th><a href="date.php">Date view</a></th>
<th><a href="index.php">Thread view</a></th>
<th><a href="subject.php">Subject view</a></th>
<th><a href="author.php">Author view</a></th>
</tr>
</table>
</div>
<p class="headers">
<strong>Subject:</strong> [OMPI users] error depends on the number of processors<br>
<strong>From:</strong> Junwei Huang (<em>jwhuang1982_at_[hidden]</em>)<br>
<strong>Date:</strong> 2010-03-23 12:06:00
</p>
<ul class="links">
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="12410.php">fengguang tian: "Re: [OMPI users] ompi-checkpoint hangs when using in multiple clusters"</a>
<li><strong>Previous message:</strong> <a href="12408.php">fengguang tian: "Re: [OMPI users] questions about checkpoint/restart on multiple clusters of MPI"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="12418.php">Jeff Squyres: "Re: [OMPI users] error depends on the number of processors"</a>
<li><strong>Reply:</strong> <a href="12418.php">Jeff Squyres: "Re: [OMPI users] error depends on the number of processors"</a>
<!-- reply="end" -->
</ul>
<hr>
<!-- body="start" -->
<p>
Hello,
<br>
I am still using LAM/MPI on an old cluster and wonder if I can get
<br>
some help from this mail list. Here is the problem. I am using a 18
<br>
node cluster, each node has 2 CPU and each CPU supports up to 2
<br>
threads. So I assume I can use 18*4 number of processors. As running
<br>
the following code, an error message will always pops up for np=30 or
<br>
np=60. But works fine for np=12, np=1. The error message is always the
<br>
same, something like: one of  the processor n15, exit with (0), ip
<br>
192......,
<br>
<p>Here is a part of the code, where the n15 exit. All other PE can
<br>
finish writing the file, except PE15. Then I see the error message
<br>
about n15 and the written of file by PE15 is not completed.  An quick
<br>
question here, is PE15 necessarily generated by node 15 on the
<br>
cluster? Appreciate if anyone would share experiences in debuging
<br>
errors like this.
<br>
<p>code:
<br>
....
<br>
sprintf(p_obsfile,&quot;%s%d&quot;,obsfile,my_rank); //my_rank is processor ID,
<br>
each PE opens a different file
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ((fp=fopen(p_obsfile,&quot;w&quot;))==NULL)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&quot;PE_%d: The file %s cannot be opened\n&quot;,my_rank,p_obsfile);
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (int id=loc*my_rank;id&lt;loc*(my_rank+1);id++){  // loc=TotalNum/NumofPE
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//call a function to calculate U, the function will return the
<br>
finishing message
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// no communication is needed among processors
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (int j=0;j&lt;NUM;j++)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf (fp, &quot;%f\n&quot;,U[j]); //output updated U
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br>
<!-- body="end" -->
<hr>
<ul class="links">
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="12410.php">fengguang tian: "Re: [OMPI users] ompi-checkpoint hangs when using in multiple clusters"</a>
<li><strong>Previous message:</strong> <a href="12408.php">fengguang tian: "Re: [OMPI users] questions about checkpoint/restart on multiple clusters of MPI"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="12418.php">Jeff Squyres: "Re: [OMPI users] error depends on the number of processors"</a>
<li><strong>Reply:</strong> <a href="12418.php">Jeff Squyres: "Re: [OMPI users] error depends on the number of processors"</a>
<!-- reply="end" -->
</ul>
<div class="center">
<table border="2" width="100%" class="links">
<tr>
<th><a href="date.php">Date view</a></th>
<th><a href="index.php">Thread view</a></th>
<th><a href="subject.php">Subject view</a></th>
<th><a href="author.php">Author view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<? include("../../include/msg-footer.inc") ?>
