<div dir="ltr">(Correction; I mixed up the output of the two first examples in my first mail, so it fails on the first one)<div><br></div><div><div>ubuntu@node0:~$ mpirun --leave-session-attached -mca plm_base_verbose 5 -np 4 -host node0,node1,node2,node3 hostname</div>

<div>[node0:01486] mca:base:select:(  plm) Querying component [slurm]</div><div>[node0:01486] mca:base:select:(  plm) Skipping component [slurm]. Query failed to return a module</div><div>[node0:01486] mca:base:select:(  plm) Querying component [rsh]</div>

<div>[node0:01486] mca:base:select:(  plm) Query of component [rsh] set priority to 10</div><div>[node0:01486] mca:base:select:(  plm) Selected component [rsh]</div><div>[node2:26962] mca:base:select:(  plm) Querying component [rsh]</div>

<div>[node2:26962] mca:base:select:(  plm) Query of component [rsh] set priority to 10</div><div>[node2:26962] mca:base:select:(  plm) Selected component [rsh]</div><div>[node1:11477] mca:base:select:(  plm) Querying component [rsh]</div>

<div>[node1:11477] mca:base:select:(  plm) Query of component [rsh] set priority to 10</div><div>[node1:11477] mca:base:select:(  plm) Selected component [rsh]</div><div>Host key verification failed.</div><div><br></div>
<div>
<br></div><div>ubuntu@node0:~$ mpirun -mca plm_rsh_no_tree_spawn 1 -np 4 -host node0,node1,node2,node3 hostname</div><div>node0</div><div>node1</div><div>node2</div><div>node3</div></div><div><br></div><div>So it definetely looks like a problem with the tree spawn. Any clue how I could proceed?<br>

</div><div><br></div><div>/Christoffer</div></div><div class="gmail_extra"><br><br><div class="gmail_quote">2013/11/11 Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span><br>

<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">Add --enable-debug to your configure and run it with the following additional options<div>

<br></div><div>--leave-session-attached -mca plm_base_verbose 5</div><div><br></div><div>Let&#39;s see where it fails during the launch phase. Offhand, the only thing that message means to me is that the ssh keys are botched on at least one node. Keep in mind that we use a tree-based launch, and so when you have more than two nodes, one or more of the intermediate nodes are executing an ssh.</div>

<div><br></div><div>One way to see if that&#39;s the problem is to launch without the tree spawn: add</div><div><br></div><div>-mca plm_rsh_no_tree_spawn 1</div><div><br></div><div>to your cmd line and see if it works.</div>

<div><br></div><div><br></div><div><br><div><div><div class="h5"><div>On Nov 10, 2013, at 9:24 AM, Christoffer Hamberg &lt;<a href="mailto:christoffer.hamberg@gmail.com" target="_blank">christoffer.hamberg@gmail.com</a>&gt; wrote:</div>

<br></div></div><blockquote type="cite"><div><div class="h5"><div dir="ltr"><span style="font-family:arial,sans-serif;font-size:13px">Hi,</span><div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">

I&#39;m having some strange problems running Open MPI(1.9a1r29559) with Java bindings on a Calxeda highbank ARM Server running Ubuntu 12.10 (GNU/Linux 3.5.0-43-highbank armv7l).</div>

<div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">The problem arises when I try to run a job on more than 3 nodes (I have a total of 8).</div><div style="font-family:arial,sans-serif;font-size:13px">



Note: It&#39;s the same error for any of the node[0-7].</div><div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">ubuntu@node0:~$ mpirun -np 4 -host node0,node1,node2 hostname</div>



<div style="font-family:arial,sans-serif;font-size:13px">Host key verification failed.<br></div><div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">


ubuntu@node0:~$ mpirun -np 4 -host node0,node1,node2,node3 hostname<br>
</div><div style="font-family:arial,sans-serif;font-size:13px">node0</div><div style="font-family:arial,sans-serif;font-size:13px">node0</div><div style="font-family:arial,sans-serif;font-size:13px">node1</div><div style="font-family:arial,sans-serif;font-size:13px">



node2<br></div><div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">and not running the job on the current node also gives Host key verification failed for only 3 nodes.</div>



<div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">ubuntu@node0:~$ mpirun -np 4 -host node1,node3,node5 hostname<br></div><div style="font-family:arial,sans-serif;font-size:13px">



Host key verification failed.<br></div><div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">But not on 2 nodes:</div><div style="font-family:arial,sans-serif;font-size:13px">



ubuntu@node0:~$ mpirun -np 4 -host node1,node3 hostname<br></div><div style="font-family:arial,sans-serif;font-size:13px">node1</div><div style="font-family:arial,sans-serif;font-size:13px">node1</div><div style="font-family:arial,sans-serif;font-size:13px">



node3</div><div style="font-family:arial,sans-serif;font-size:13px">node3<br></div><div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">I&#39;ve configured it with the following:</div>



<div style="font-family:arial,sans-serif;font-size:13px">./configure --prefix=/opt/openmpi-1.9-java --without-openib --enable-static --with-threads=posix --enable-mpi-thread-multiple --enable-mpi-java --with-jdk-bindir=/usr/lib/jvm/java-7-openjdk-armhf/bin --with-jdk-headers=/usr/lib/jvm/java-7-openjdk-armhf/include</div>



<div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">I have Open MPI 1.6.5 (without Java-binding) installed and it runs without any problems on all nodes, so there should be no problem with SSH that the error points to.</div>



<div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">Any ideas?</div><div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">



Regards,</div><div style="font-family:arial,sans-serif;font-size:13px">Christoffer</div></div></div></div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></blockquote>

</div><br></div></div><br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
<a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></blockquote></div><br></div>

