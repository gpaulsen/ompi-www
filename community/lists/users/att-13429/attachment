<font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; ">Dear OpenMPI list,<br>
<br>I am using  a MPI-parallelized simulation program,  with a domain-decomposition in 6-Dimensions.</span></span></font><div><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; "><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; "></span></span><font class="Apple-style-span" color="#333333" face="&#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif"><span class="Apple-style-span" style="border-collapse: collapse; line-height: 15px;">In order to improve the scalability of my program I would like to know according to what preferences</span></font></div>
<div><font class="Apple-style-span" color="#333333" face="&#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif"><span class="Apple-style-span" style="border-collapse: collapse; line-height: 15px;">is MPI distributing the ranks when using MPI_Cart_create( reorder allowed).</span></font></div>
<div><div><div><div><div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; "><br>
</span></span></font></div><div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; ">To explain my inquiry, imagine a 3-dimensional solver in  X-Y-M and 4 computing</span></span></font></div>
<div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; ">nodes, each nodes consist of 4 Quad-Core CPUs (4(Node)x[ 4(CPUs) x 4(Cores))] CPUs=64CPUs). </span></span></font></div>
<div><font class="Apple-style-span" color="#333333" face="&#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif"><span class="Apple-style-span" style="border-collapse: collapse; line-height: 15px;"><br>
</span></font></div><div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; ">Now I decompose  all 3 dimensions by 4 (4x4x4 = 64) using  </span></span></font><span class="Apple-style-span" style="font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; border-collapse: collapse; color: rgb(51, 51, 51); line-height: 15px; ">MPI_Cart_create. </span></div>
<div><span class="Apple-style-span" style="font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; border-collapse: collapse; color: rgb(51, 51, 51); line-height: 15px; ">MPI has now several  possibilities to map the problem e.g. X-M (locally) on a node and</span></div>
<div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; ">Y across the nodes, or Y-M (locally) and X across the nodes. </span></span></font></div>
<div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; "><br>
Now my question is, how can I tell MPI that I want to distribute X-Y locally while <br>M is distributed across nodes. The reason is that X-Y <br>communication ratio is much large (FFT) compared to M where we have only <br>
2 communications per time-step via an Allreduce. </span></span></font></div><div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; ">An MPI implementation for the BlueGENE for example has an option <br>
called mapfile where on can tell MPI how to map the dimensions onto <br>the Nodes. I did not found somethings similar for openmpi. </span></span></font></div><div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; "><br>
</span></span></font></div><div><font class="Apple-style-span" face="Times"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 4px; -webkit-border-vertical-spacing: 4px; font-size: medium;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: collapse; color: rgb(51, 51, 51); font-family: &#39;ヒラギノ角ゴ Pro W3&#39;, &#39;Hiragino Kaku Gothic Pro&#39;, Osaka, &#39;ＭＳ Ｐゴシック&#39;, sans-serif; font-size: 13px; line-height: 15px; ">Does anybody know how to achieve this mapping or could anybody <br>
tell me where I could find some examples or tutorials ? <br><br>Thank you very much for your help and best wishes <br><br>Paul Hilscher</span></span></font></div></div></div></div></div>

