<div dir="ltr"><div>George and Gilles, thank you for your answers. <br><br></div><div></div><div><br></div><div>@George,  honestly I didn&#39;t know that the decision is rechecked for every new communicator creation operation. I will try it. In fact we used sub-communicators for some other research work previously and indeed it outweigh the benefits for small message sizes in collectives.  <br><br></div><div>In my opinion, it would be beneficial for researchers to have similar collective operation APIs in MPI implementations with additional algorithm parameter where applicable.<br></div><div><br><br></div><div>Best regards,<br></div><div>Khalid<br></div><div><br><br><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Mar 10, 2015 at 2:45 PM, George Bosilca <span dir="ltr">&lt;<a href="mailto:bosilca@icl.utk.edu" target="_blank">bosilca@icl.utk.edu</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">Khalid,<div><br></div><div>The decision is rechecked every time we create a new communicator. So, you might create a solution that force the algorithm to whatever you think it is best (using the environment variables you mentioned), then create a communicator, and free it once you’re done.</div><div><br></div><div>I have no idea what you’re trying to achieve, but be aware there is a burden associated with the creation of a communicator, so this approach might outweigh the benefits.</div><div><br></div><div>  George.</div><div><br><div><blockquote type="cite"><div><div class="h5"><div>On Mar 10, 2015, at 10:31 , Gilles Gouaillardet &lt;<a href="mailto:gilles.gouaillardet@gmail.com" target="_blank">gilles.gouaillardet@gmail.com</a>&gt; wrote:</div><br></div></div><div><div><div class="h5"><div dir="ltr">Khalid,<div><br></div><div>i am not aware of such a mechanism.</div><div><br></div><div>/* there might be a way to use MPI_T_* mechanisms to force the algorithm,</div><div>and i will let other folks comment on that */</div><div><br></div><div>you definetly cannot directly invoke <span style="font-family:verdana,arial,helvetica;font-size:12px">ompi_coll_tuned_bcast_intra_</span><span style="font-family:verdana,arial,helvetica;font-size:12px">binomial</span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px">(abstraction violation, non portable, and you miss the some parameters)</span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px"><br></span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px">out of curiosity, what do you have in mind for (some_condition) ?</span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px">/* since it seems implicit (some_condition) is independant of communicator size, and message size */</span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px"><br></span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px">Cheers,</span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px"><br></span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px">Gilles</span></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Mar 10, 2015 at 10:04 PM, Khalid Hasanov <span dir="ltr">&lt;<a href="mailto:xalid.h@gmail.com" target="_blank">xalid.h@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><div><div><div><div><div><div><div><div><div><div><div><div>Hello,<br><br></div>I would like to know if Open MPI provides some kind of mechanism to select collective algorithms such as MPI broadcast during run time depending on some logic. For example, I would like to<br></div></div>use something like this:<br><br></div>if (some_condition)  ompi_binomial_broadcast(...);<br></div>else   ompi_pipeline_broadcast(...);<br><br></div>I know it is possible to use some fixed algorithm by <span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important">coll_tuned_use_dynamic_rules or </span>to define a custom selection rule using <span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important">coll_tuned_dynamic_rules_filename<span>. But<br></span></span></div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span>I think it is not suitable in this situation as the dynamic rules mainly based on the message size, segment size and communicator size.<br><br></span></span></div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span>Another option could be using Open MPI internal APIS like <br><br>ompi_coll_tuned_bcast_intra_binomial( buf, count, dtype, root, comm, module, segsize);<br><br></span></span></div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span>But it highly depends on Open MPI internals as it uses mca_coll_base_module_t . <br><br></span></span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span>Is there any better option? (except using my own implementation of collectives)<br></span></span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span><br></span></span></div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span>Any suggestion highly appreciated.<br><br></span></span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span>Thanks<br></span></span></div><div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span><br></span></span></div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span>Regards,<br></span></span></div><span style="font-family:verdana,arial,helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);display:inline!important"><span>Khalid<br></span></span></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26446.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/03/26446.php</a><br></blockquote></div><br></div></div>
_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br></div></div>Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26447.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/03/26447.php</a></div></blockquote></div><br></div></div><br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/03/26449.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/03/26449.php</a><br></blockquote></div><br></div>

