<div dir="ltr"><div><div><div><div><div><div>Hello all<br><br></div>I don&#39;t mean to be competing for the &#39;silliest question of the year award&#39;, but I can&#39;t figure this out on my own:<br><br></div>My &#39;cluster&#39; has 2 machines, bigMPI and smallMPI. They are connected via several (types of) networks and the connectivity is OK.<br><br></div>In this setup, the following program hangs after printing<br><br>Hello world from processor smallMPI, rank 0 out of 2 processors<br>Hello world from processor bigMPI, rank 1 out of 2 processors<br>smallMPI sent haha!<br><br><br></div>Obviously it is hanging at MPI_Recv(). But why? My command line is as follows, but this happens if I try openib BTL (instead of TCP) as well.<br><br>mpirun -np 2 -hostfile ~/hostfile -mca btl self,tcp ./mpitest<br><br></div>It must be something *really* trivial, but I am drawing a blank right now.<br><br></div>Please help!<br><br>#include &lt;mpi.h&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br><br>int main(int argc, char** argv)<br>{<br>    int world_size, world_rank, name_len;<br>    char hostname[MPI_MAX_PROCESSOR_NAME], buf[8];<br><br>    MPI_Init(&amp;argc, &amp;argv);<br>    MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);<br>    MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);<br>    MPI_Get_processor_name(hostname, &amp;name_len);<br>    printf(&quot;Hello world from processor %s, rank %d out of %d processors\n&quot;, hostname, world_rank, world_size);<br>    if (world_rank == 1)<br>    {<br>    MPI_Recv(buf, 6, MPI_CHAR, 0, 99, MPI_COMM_WORLD, MPI_STATUS_IGNORE);<br>    printf(&quot;%s received %s\n&quot;, hostname, buf);<br>    }<br>    else<br>    {<br>    strcpy(buf, &quot;haha!&quot;);<br>    MPI_Send(buf, 6, MPI_CHAR, 1, 99, MPI_COMM_WORLD);<br>    printf(&quot;%s sent %s\n&quot;, hostname, buf);<br>    }<br>    MPI_Barrier(MPI_COMM_WORLD);<br>    MPI_Finalize();<br>    return 0;<br>}<br><br><div><div><div><div><div><div><div><div><br><br clear="all"><div><div class="gmail_signature"><div dir="ltr"><div>We learn from history that we never learn from history.<br></div></div></div></div>
</div></div></div></div></div></div></div></div></div>

