<div>Hi Gus Correa,</div>
<div> </div>
<div>Thank you so much for such a detail explanation:)</div>
<div>i understand that now.</div>
<div> </div>
<div>Best wishes ^_^<br><br></div>
<div class="gmail_quote">On Mon, Dec 6, 2010 at 7:41 AM, Gustavo Correa <span dir="ltr">&lt;<a href="mailto:gus@ldeo.columbia.edu">gus@ldeo.columbia.edu</a>&gt;</span> wrote:<br>
<blockquote style="BORDER-LEFT: #ccc 1px solid; MARGIN: 0px 0px 0px 0.8ex; PADDING-LEFT: 1ex" class="gmail_quote">Hi Daofeng<br><br>It is hard to tell what is happening in the Infiniband side of the problem.<br>Did somebody perhaps remove the Infiniband card from this machine?<br>
Was it ever there?<br>Did somebody perhaps changed the Linux kernel modules that are loaded<br>(perhaps changing /etc/module.config or similar)?<br>Maybe other people in your organization know.<br><br>If this is a single computer, not a cluster, you don&#39;t loose anything by not<br>
having Infinband.<br>In this case, you can reinstall OpenMPI without Infiniband support, by just<br>doing &quot;make distclean&quot; in the OpenMPI build directory (to cleanup what is there),<br>then &quot;./configure --prefix=/wherever/you/want/to/install --without-openib&quot;,<br>
then &quot;make&quot;, and &quot;make install&quot;.<br><br>Alternatively, you can continue to use what you already have with the &quot;-mca btl ^openib&quot; flag.<br><br>If this is a cluster, of course you would benefit from Infiniband, which is a faster<br>
network than Ethernet or Gigabit Ethernet.<br>In this case you need to ask for help of somebody that knows more about your cluster<br>hardware, to restore the Infiniband to a sane and healthy state.<br>Or, if there is no Infinband hardware, or if it is broken, just reinstall OpenMPi following<br>
the little recipe above.  You will be able to run your programs using Ethernet (I assume<br>the cluster would have Ethernet).  Not very fast, but will work.<br><br>My two cents,<br><font color="#888888">Gus Correa<br></font>
<div>
<div></div>
<div class="h5"><br><br>On Dec 4, 2010, at 4:47 AM, Daofeng Li wrote:<br><br>&gt; Hi Gus,<br>&gt;<br>&gt; thank you for your response.<br>&gt; i think this is much about hardware which i know little about them:)<br>&gt; might be the machine i used dont have the card you mentioned as i run:<br>
&gt;  /usr/sbin/ibstat<br>&gt; ibwarn: [4260] umad_init: can&#39;t read ABI version from /sys/class/infiniband_mad/abi_version (No such file or directory): is ib_umad module loaded?<br>&gt; ibpanic: [4260] main: can&#39;t init UMAD library: (No such file or directory)<br>
&gt;<br>&gt; but you really helped me as:<br>&gt;<br>&gt; $ mpirun -mca btl ^openib -n 8 hello_cxx<br>&gt; Hello, world!  I am 6 of 8<br>&gt; Hello, world!  I am 0 of 8<br>&gt; Hello, world!  I am 4 of 8<br>&gt; Hello, world!  I am 7 of 8<br>
&gt; Hello, world!  I am 5 of 8<br>&gt; Hello, world!  I am 2 of 8<br>&gt; Hello, world!  I am 1 of 8<br>&gt; Hello, world!  I am 3 of 8<br>&gt;<br>&gt; that&#39;s really cool~<br>&gt;<br>&gt; thank you all:)<br>&gt;<br>&gt; Best Wishes.<br>
&gt; On Sat, Dec 4, 2010 at 11:12 AM, Gus Correa &lt;<a href="mailto:gus@ldeo.columbia.edu">gus@ldeo.columbia.edu</a>&gt; wrote:<br>&gt; Hi Daofeng<br>&gt;<br>&gt; Do you have an Infiniband card in the machine where you are<br>
&gt; running the program?<br>&gt; (Open Fabrics / OFED is the software support for Infiniband.<br>&gt; I guess you need the same version installed in all machines.)<br>&gt;<br>&gt; Does the directory referred in the error message actually<br>
&gt; exist in your machine (i.e,  /dev/infiniband) ?<br>&gt;<br>&gt; Are you running it in the same machine where you installed OpenMPI?<br>&gt;<br>&gt; What output do you get from:<br>&gt; /usr/sbin/ibstat<br>&gt; ?<br>&gt;<br>
&gt; Did you compile the programs with the mpicc,mpiCC, mpif77<br>&gt; from the same OpenMPI that you built?<br>&gt; (Some Linux distributions and compilers come with<br>&gt; their own flavors of MPI, or you may also<br>&gt; have installed MPICH or MVAPICH, so it is not uncommon to mix up.)<br>
&gt;<br>&gt; Have you tried to suppress the use of Infinband, i.e.:<br>&gt;<br>&gt; mpirun -mca btl ^openib -n 8 hello_cxx<br>&gt;<br>&gt; (Well, &quot;openib&quot; is the OpenMPI support for Infiniband.<br>&gt; The &quot;^&quot; means &quot;don&#39;t use it&quot;)<br>
&gt;<br>&gt; I hope this helps,<br>&gt; Gus Correa<br>&gt;<br>&gt; Daofeng Li wrote:<br>&gt; Dear Jeff,<br>&gt;  actually i didnot understand this....can you or anyone tell me what to do?<br>&gt;  Thx.<br>&gt;  Best.<br>&gt;<br>
&gt; On Fri, Dec 3, 2010 at 9:41 PM, Jeff Squyres (jsquyres) &lt;<a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a> &lt;mailto:<a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt;&gt; wrote:<br>&gt;<br>&gt;    It means that you probably have a version mismatch with your<br>
&gt;    OpenFabrics drivers and or you have no OpenFabrics hardware and you<br>&gt;    should probably disable those drivers.<br>&gt;    Sent from my PDA. No type good.<br>&gt;    On Dec 3, 2010, at 4:56 AM, &quot;Daofeng Li&quot; &lt;<a href="mailto:lidaof@gmail.com">lidaof@gmail.com</a><br>
&gt;    &lt;mailto:<a href="mailto:lidaof@gmail.com">lidaof@gmail.com</a>&gt;&gt; wrote:<br>&gt;<br>&gt;    Dear list,<br>&gt;         i am currently try to use the OpenMPI package<br>&gt;    i install it at my home directory<br>
&gt;    ./configure --prefix=$HOME --enable-mpi-threads<br>&gt;    make<br>&gt;    make install<br>&gt;         and the i add the ~/bin to the path and ~/lib to the<br>&gt;    ld_library_path to my .bashrc file<br>&gt;         everything seems normal as i can run the example programs:<br>
&gt;    mpirun -n 8 hello_cxx<br>&gt;    mpirun -n 8 hello_f77<br>&gt;    mpirun -n 8 hello_c<br>&gt;    etc...<br>&gt;         but error messages appeas:<br>&gt;         $ mpirun -n 8 hello_cxx<br>&gt;    librdmacm: couldn&#39;t read ABI version.<br>
&gt;    librdmacm: assuming: 4<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    CMA: unable to open /dev/infiniband/rdma_cm<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>
&gt;    --------------------------------------------------------------------------<br>&gt;    [[32727,1],1]: A high-performance Open MPI point-to-point<br>&gt;    messaging module<br>&gt;    was unable to find any relevant network interfaces:<br>
&gt;    Module: OpenFabrics (openib)<br>&gt;      Host: localhost.localdomain<br>&gt;    Another transport will be used instead, although this may result in<br>&gt;    lower performance.<br>&gt;    --------------------------------------------------------------------------<br>
&gt;    librdmacm: couldn&#39;t read ABI version.<br>&gt;    librdmacm: assuming: 4<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    CMA: unable to open /dev/infiniband/rdma_cm<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>
&gt;    librdmacm: couldn&#39;t read ABI version.<br>&gt;    librdmacm: assuming: 4<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    CMA: unable to open /dev/infiniband/rdma_cm<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>
&gt;    librdmacm: couldn&#39;t read ABI version.<br>&gt;    librdmacm: assuming: 4<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    CMA: unable to open /dev/infiniband/rdma_cm<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>
&gt;    librdmacm: couldn&#39;t read ABI version.<br>&gt;    librdmacm: assuming: 4<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    CMA: unable to open /dev/infiniband/rdma_cm<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>
&gt;    librdmacm: couldn&#39;t read ABI version.<br>&gt;    librdmacm: assuming: 4<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    CMA: unable to open /dev/infiniband/rdma_cm<br>&gt;    librdmacm: couldn&#39;t read ABI version.<br>
&gt;    librdmacm: assuming: 4<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    CMA: unable to open /dev/infiniband/rdma_cm<br>
&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    CMA: unable to open /dev/infiniband/rdma_cm<br>&gt;    librdmacm: couldn&#39;t read ABI version.<br>&gt;    librdmacm: assuming: 4<br>&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>
&gt;    libibverbs: Fatal: couldn&#39;t read uverbs ABI version.<br>&gt;    Hello, world!  I am 1 of 8<br>&gt;    Hello, world!  I am 0 of 8<br>&gt;    Hello, world!  I am 3 of 8<br>&gt;    Hello, world!  I am 5 of 8<br>&gt;    Hello, world!  I am 7 of 8<br>
&gt;    Hello, world!  I am 4 of 8<br>&gt;    Hello, world!  I am 6 of 8<br>&gt;    Hello, world!  I am 2 of 8<br>&gt;    [localhost.localdomain:30503] 7 more processes have sent help<br>&gt;    message help-mpi-btl-base.txt / btl:no-nics<br>
&gt;    [localhost.localdomain:30503] Set MCA parameter<br>&gt;    &quot;orte_base_help_aggregate&quot; to 0 to see all help / error messages<br>&gt;         i am wondering whether i install openmpi the right way<br>&gt;    anyone would give some suggestions?<br>
&gt;         thanks in advance.<br>&gt;         Best Regards.<br>&gt;    --     Daofeng Li<br>&gt;    College of Biological Science<br>&gt;    China Agricultural University<br>&gt;    Beijing<br>&gt;    China<br>&gt;<br>&gt;    _______________________________________________<br>
&gt;    users mailing list<br>&gt;    <a href="mailto:users@open-mpi.org">users@open-mpi.org</a> &lt;mailto:<a href="mailto:users@open-mpi.org">users@open-mpi.org</a>&gt;<br>&gt;<br>&gt;    <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
&gt;<br>&gt;    _______________________________________________<br>&gt;    users mailing list<br>&gt;    <a href="mailto:users@open-mpi.org">users@open-mpi.org</a> &lt;mailto:<a href="mailto:users@open-mpi.org">users@open-mpi.org</a>&gt;<br>
&gt;<br>&gt;    <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; --<br>&gt; Daofeng Li<br>&gt; College of Biological Science<br>
&gt; China Agricultural University<br>&gt; Beijing<br>&gt; China<br>&gt;<br>&gt;<br>&gt; ------------------------------------------------------------------------<br>&gt;<br>&gt;<br>&gt; _______________________________________________<br>
&gt; users mailing list<br>&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
&gt;<br>&gt; _______________________________________________<br>&gt; users mailing list<br>&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
&gt;<br>&gt;<br>&gt;<br>&gt; --<br>&gt; Daofeng Li<br>&gt; College of Biological Science<br>&gt; China Agricultural University<br>&gt; Beijing<br>&gt; China<br>&gt;<br>&gt; _______________________________________________<br>
&gt; users mailing list<br>&gt; <a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
<br><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
</div></div></blockquote></div><br><br clear="all"><br>-- <br>
<div><font color="#999999">Daofeng Li<br>College of Biological Science<br>China Agricultural University<br>Beijing<br>China</font></div><br>

