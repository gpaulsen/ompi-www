Open MPI Version = 1.4.2<br>OS = Ubuntu 10.04 LTS and CentOS 5.3<br><br>When I run the mpi program below in the terminal, the function fgets hangs. <br>How do I know it? I do a printf before and later the call of fgets and only the message &quot;before fgets()&quot; is showed.<br>
<br>However, when I run the same program at Eclipse 3.6 with CDT 7.0.0.201006141710 or using gdb it runs normally. <br>If you change the command in the function popen  to another one(for instance: &quot;ls -l&quot;), it will run correctly. <br>
<br>I use the following commands to compile and run the program:<br><br>compile : mpicc teste.c -o teste.run<br><br>run : mpirun -np 4 ./teste.run<br><br><br>Does anyone know why the program behaves like that?<br> <br>Thanks in advance,<br>
<br>Matheus Bersot. <br><br>MPI_PROGRAM:<br><br>#include &lt;stdio.h&gt;<br>#include &quot;mpi.h&quot;<br><br>int main(int argc, char *argv[])<br>{<br>   int rank, nprocs;<br>   FILE * pFile = NULL;<br>   char mystring [100];<br>
<br>    MPI_Init(&amp;argc,&amp;argv);<br>    MPI_Comm_size(MPI_COMM_WORLD,&amp;nprocs);<br>    MPI_Comm_rank(MPI_COMM_WORLD,&amp;rank);<br><br>   if(rank == 0)<br>   {<br>   pFile = popen (&quot;ompi-ps&quot; , &quot;r&quot;);<br>
   if (pFile == NULL) perror (&quot;Error opening file&quot;);<br>   else {<br>     while(!feof(pFile))<br>     {   <br>       printf(&quot;before fgets()\n&quot;);<br>       fgets (mystring , 100 , pFile);  <br>       printf(&quot;after fgets()\n&quot;);         <br>
       puts (mystring);<br>     }<br>     pclose (pFile);<br>   }<br>  }<br><br>  MPI_Finalize();<br>   return 0;<br>}<br>

