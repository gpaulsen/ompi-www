<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns="http://www.w3.org/TR/REC-html40">

<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=us-ascii">
<meta name=Generator content="Microsoft Word 12 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p
	{mso-style-priority:99;
	mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
span.EmailStyle18
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1" />
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'>Thanks, Nysal.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'>The only problem I&#8217;m having now is connecting a libtool version
(e.g. 2.2.8) with an OpenMPI version.&nbsp; I&#8217;m sorry if it&#8217;s a silly question, but
can you tell me in which version of OpenMPI this problem will go away?<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'>Thanks, again.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'>Brian<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:11.0pt;font-family:"Calibri","sans-serif";
color:#1F497D'><o:p>&nbsp;</o:p></span></p>

<div style='border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0in 0in 0in'>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Tahoma","sans-serif"'>From:</span></b><span
style='font-size:10.0pt;font-family:"Tahoma","sans-serif"'> users-bounces@open-mpi.org
[mailto:users-bounces@open-mpi.org] <b>On Behalf Of </b>Nysal Jan<br>
<b>Sent:</b> Wednesday, November 10, 2010 12:19 AM<br>
<b>To:</b> Open MPI Users<br>
<b>Subject:</b> EXTERNAL: Re: [OMPI users] Creating 64-bit objects?<o:p></o:p></span></p>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-bottom:12.0pt'>Hi Brian,<br>
This problem was first reported by Paul H. Hargrove in the developer mailing
list. It is a bug in libtool and has been fixed in the latest release (2.2.8).
More details are available here - <a
href="http://www.open-mpi.org/community/lists/devel/2010/10/8606.php">http://www.open-mpi.org/community/lists/devel/2010/10/8606.php</a><br>
<br>
Regards<br>
--Nysal<o:p></o:p></p>

<div>

<p class=MsoNormal>On Wed, Nov 10, 2010 at 1:04 AM, Price, Brian M (N-KCI) &lt;<a
href="mailto:brian.m.price@lmco.com">brian.m.price@lmco.com</a>&gt; wrote:<o:p></o:p></p>

<div>

<div>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>OpenMPI
version: 1.3.3 &amp; 1.4.3<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Platform:
IBM P5<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Issue:&nbsp;
I want OpenMPI to support some existing 64-bit FORTRAN software, but I can&#8217;t
seem to get 64-bit objects from OpenMPI without some modification to the
Makefile in ompi/mpi/f90.<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>I
can configure, build, and install just fine with the following compilers:<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>CC = xlC_r<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>CXX = xlC_r<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>F77 = xlf95_r<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>FC = xlf95_r<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>But,
this configuration produces 32-bit objects for all languages.<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>So,
to produce 64-bit objects for all languages, I supply the following flags:<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>CFLAGS = -q64<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>CXXFLAGS = -q64<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>FFLAGS = -q64<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>FCFLAGS = -q64<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>This
configuration results in the following error during the build (more
specifically, link) phase:<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>When creating <a href="http://libmpi_f90.la" target="_blank">libmpi_f90.la</a>
in ompi/mpi/f90<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>COMMANDS:<o:p></o:p></p>

<p style='margin-left:1.0in'><span style='font-family:"Courier New"'>o</span><span
style='font-size:7.0pt'>&nbsp;&nbsp; </span>/bin/sh ../../../libtool&nbsp;
--mode=link xlf95_r -I../../../ompi/include -I../../../ompi/include -I. -I.
-I../../../ompi/mpi/f90&nbsp; -q64 -version-info 0:1:0&nbsp;
-export-dynamic&nbsp; -o <a href="http://libmpi_f90.la" target="_blank">libmpi_f90.la</a>
-rpath &lt;prefix&gt;/lib mpi.lo mpi_sizeof.lo mpi_comm_spawn_multiple_f90.lo
mpi_testall_f90.lo mpi_testsome_f90.lo mpi_waitall_f90.lo mpi_waitsome_f90.lo
mpi_wtick_f90.lo mpi_wtime_f90.lo&nbsp; ../../../ompi/<a href="http://libmpi.la"
target="_blank">libmpi.la</a> -lnsl -lutil<o:p></o:p></p>

<p style='margin-left:1.0in'><span style='font-family:"Courier New"'>o</span><span
style='font-size:7.0pt'>&nbsp;&nbsp; </span>libtool: link: /usr/bin/ld -m
elf64ppc -shared&nbsp; .libs/mpi.o .libs/mpi_sizeof.o
.libs/mpi_comm_spawn_multiple_f90.o .libs/mpi_testall_f90.o
.libs/mpi_testsome_f90.o .libs/mpi_waitall_f90.o .libs/mpi_waitsome_f90.o
.libs/mpi_wtick_f90.o .libs/mpi_wtime_f90.lo&nbsp; -L&lt;topdir&gt;/orte/.libs
-L&lt;topdir&gt;/opal/.libs ../../../ompi/.libs/libmpi.so
&lt;topdir&gt;/orte/.libs/libopen-rte.so
&lt;topdir&gt;/opal/.libs/libopen-pal.so -ldl -lnsl -lutil&nbsp; -q64&nbsp;
-soname libmpi_f90.so.0 -o .libs/libmpi_f90.so.0.0.1<o:p></o:p></p>

<p>-<span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>OUTPUT:<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>/usr/bin/ld:
unrecognized option &#8216;-q64&#8217;<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>/usr/bin/ld:
use the --help option for usage information<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make[4]:
*** [<a href="http://libmpi_f90.la" target="_blank">libmpi_f90.la</a>] Error 1<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make[4]:
Leaving directory `&lt;topdir&gt;/ompi/mpi/f90`<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make[3]:
*** [all-recursive] Error 1<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make[3]:
Leaving directory `&lt;topdir&gt;/ompi/mpi/f90`<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make[2]:
*** [all] Error 2<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make[2]:
Leaving directory `&lt;topdir&gt;/ompi/mpi/f90`<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make[1]:
*** [all-recursive] Error 1<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make[1]:
Leaving directory `&lt;topdir&gt;/ompi`<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>make: ***
[all-recursive] Error 1<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:.75in'>&nbsp;<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
-q64 option, while valid for the xlf95_r compiler, is not a valid option for
/usr/bin/ld.&nbsp; So, I&#8217;m wondering why this option got passed to
/usr/bin/ld.&nbsp; After looking at &lt;topdir&gt;/ompi/mpi/f90/Makefile, I see
that FCFLAGS shows up in link lines (&#8220;libmpi_f90_la_LINK&#8221; and &#8220;FCLINK&#8221;).&nbsp;
This direction seems to come from Makefile.in.<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>If
I remove these FCFLAGS references from the Makefile, I am able to complete the
build and install of OpenMPI, and it seems to correctly support my existing
software.<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>So,&nbsp;
now for my question:<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Should
FCFLAGS show up on these links lines and, if so, how would I get 64-bit
objects?<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Thanks,<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Brian
Price<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;<o:p></o:p></p>

</div>

</div>

<p class=MsoNormal><br>
_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
<a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><o:p></o:p></p>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>

