<div dir="ltr"><br><div class="gmail_extra"><br><div class="gmail_quote">On Sat, Feb 13, 2016 at 2:27 PM, Nick Papior <span dir="ltr">&lt;<a href="mailto:nickpapior@gmail.com" target="_blank">nickpapior@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><br><div class="gmail_extra"><br><div class="gmail_quote"><span class="">2016-02-13 23:07 GMT+01:00 Kim Walisch <span dir="ltr">&lt;<a href="mailto:kim.walisch@gmail.com" target="_blank">kim.walisch@gmail.com</a>&gt;</span>:<br></span><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><div>Hi,</div><span><div><br></div><span class="">&gt; <span style="font-size:12.8px">You may be interested in reading:</span><div style="font-size:12.8px"><a href="https://www.open-mpi.org/software/ompi/versions/" target="_blank">https://www.open-mpi.org/software/ompi/versions/</a></div><div style="font-size:12.8px"><br></div></span></span><span class="">Thanks for your answer. I found:<br><br>&gt; Specifically: v1.10.x is not guaranteed to be backwards<br>compatible with other v1.x releases.<br><br>And:<br><br>&gt; However, this definition only applies when the same version of Open<br>MPI is used with all instances ... If the versions are not exactly the<br>same everywhere, Open MPI is not guaranteed to work properly in any<br>scenario.<br><br>So statically linking against Open MPI seems to be a bad idea.<br><br><div>What about linking against a rather old shared Open MPI library<br>from e.g. 3 years ago? Will my program likely run on most systems<br>which have a more recent Open MPI version installed?</div></span></div></blockquote><div>Most probably this will rarely work. If it does, you are lucky... :)</div><div>The link still applies. As it says, if it works it works, if not you have to do something else.</div><span class=""><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><div><br></div><div>Or is it better to not distribute any binaries which link against Open MPI</div><div>and instead put compilation instructions on the website?</div></div></blockquote></span><div>Yes, and/or provide serial equivalents of your program. </div><div>Besides, providing binaries for specific MPI-implementations may seem like easing it for users, however in my experience many users do not know that MPI is implementation specific, i.e. OpenMPI and MPICH and hence they will subsequently ask why it doesn&#39;t work using an intel-suite of compilers (for instance). </div><div><div class="h5"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><div><br></div></div></blockquote></div></div></div></div></div></blockquote><div><br></div><div>You can rely upon e.g. <a href="https://www.mpich.org/abi/">https://www.mpich.org/abi/</a> when redistributing MPI binaries built with MPICH, but a better option would be to wrap all of your MPI code in an implementation-agnostic wrapper and then ship a binary that can dlopen a different version wrapper depending on which MPI implementation the user has.  That would allow you to ship a single binary that could use both MPICH and OpenMPI.</div><div><br>Jeff</div><div> </div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><div class="gmail_extra"><div class="gmail_quote"><div><div class="h5"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><div></div><div>Thanks,</div><div>Kim</div></div><div><div><div class="gmail_extra"><br><div class="gmail_quote">On Sat, Feb 13, 2016 at 10:45 PM, Nick Papior <span dir="ltr">&lt;<a href="mailto:nickpapior@gmail.com" target="_blank">nickpapior@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr">You may be interested in reading:<div><a href="https://www.open-mpi.org/software/ompi/versions/" target="_blank">https://www.open-mpi.org/software/ompi/versions/</a><br></div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>2016-02-13 22:30 GMT+01:00 Kim Walisch <span dir="ltr">&lt;<a href="mailto:kim.walisch@gmail.com" target="_blank">kim.walisch@gmail.com</a>&gt;</span>:<br></div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div><div><div dir="ltr"><div>Hi,</div><div><br></div><div>In order to make life of my users easier I have built a fully</div><div>statically linked version of my primecount program. So the program</div><div>also statically links against Open MPI. I have built this binary on</div><div>CentOS-7-x86_64 using gcc. The good news is that the binary runs</div><div>without any issues on Ubuntu 15.10 x64 (uses mpiexec (OpenRTE) 1.10.2).</div><div><br></div><div>The bad news is that the binary does not work on Ubuntu 14.04 x64</div><div>which uses mpiexec (OpenRTE) 1.6.5. Here is the error message:</div><div><br></div><div><br></div><div>$ mpirun -n 1 ./primecount 1e10 -t1</div><div>[ip-XXX:02671] [[8243,0],0] mca_oob_tcp_recv_handler: invalid message type: 15</div><div>--------------------------------------------------------------------------</div><div>mpirun noticed that the job aborted, but has no info as to the process</div><div>that caused that situation.</div><div>--------------------------------------------------------------------------</div><div>ubuntu@ip-XXX:~$ mpiexec --version</div><div>mpiexec (OpenRTE) 1.6.5</div><div><br></div><div><br></div><div>Questions:</div><div><br></div><div>1) Is this backwards incompatibility issue an Open MPI bug?</div><div><br></div><div>2) Can I expect that my binary will work with future mpiexec</div><div>versions &gt;= 1.10 (which it was built with)?</div><div><br></div><div>Thanks and best regards,</div><div>Kim</div></div>
<br></div></div>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2016/02/28522.php" rel="noreferrer" target="_blank">http://www.open-mpi.org/community/lists/users/2016/02/28522.php</a><span><font color="#888888"><br></font></span></blockquote></div><span><font color="#888888"><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><div>Kind regards Nick</div></div></div>
</font></span></div>
</blockquote></div><br></div>
</div></div></blockquote></div></div></div><span class=""><font color="#888888"><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><div>Kind regards Nick</div></div></div>
</font></span></div></div>
<br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2016/02/28525.php" rel="noreferrer" target="_blank">http://www.open-mpi.org/community/lists/users/2016/02/28525.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature">Jeff Hammond<br><a href="mailto:jeff.science@gmail.com" target="_blank">jeff.science@gmail.com</a><br><a href="http://jeffhammond.github.io/" target="_blank">http://jeffhammond.github.io/</a></div>
</div></div>

