<div dir="ltr">Hey Ben,<div><br></div><div>It looks like HCOLL v2.x is too old for OMPI v1.10.</div><div>Could you download HPCx from <a href="http://mellanox.com/poducts/hpcx">http://mellanox.com/poducts/hpcx</a> which contains latest hcoll and use it to compile OMPI?</div><div><br></div><div>(also HPCx contains OMPI sources and precompiled w/ HCOLL)</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Thu, Dec 24, 2015 at 2:29 AM, Ben Menadue <span dir="ltr">&lt;<a href="mailto:ben.menadue@nci.org.au" target="_blank">ben.menadue@nci.org.au</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div lang="EN-AU" link="blue" vlink="purple"><div><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d">Hi Mike,<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">11:18 bjm900@raijin7 ~ &gt; rpm -qi hcoll<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Name        : hcoll                        Relocations: /opt/mellanox/hcoll <u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Version     : 2.0.472                           Vendor: mellanox<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Release     : 1                             Build Date: Sun Jan  5 23:40:18 2014<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Install Date: Fri Jun 12 15:00:23 2015         Build Host: localhost<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Group       : Applications                  Source RPM: hcoll-2.0.472-1.src.rpm<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Size        : 14074151                         License: Proprietary<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Signature   : DSA/SHA1, Sun Feb 23 23:20:58 2014, Key ID c5ed83e26224c050<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Packager    : mellanox<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">URL         : <a href="http://www.mellanox.com" target="_blank">http://www.mellanox.com</a><u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Summary     : Hierarchical collectives (HCOLL)<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">Description :<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">HCOLL...<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d">I also just realised that it doesn’t work for any OpenMPI 1.8.x series or 1.10.0 either – while it is able to build (unlike for 1.10.1) it fails at runtime with a symbol lookup error:<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">symbol lookup error: /apps/openmpi/1.8.8/lib/openmpi/mca_coll_hcoll.so: undefined symbol: hcoll_check_mem_release_cb_needed<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d">That symbol doesn’t appear to be in any of the .so files in /opt/mellanox/hcoll, so I’m guessing it’s from a newer version of hcoll. This would also explain why it warned about an implicit declaration of this symbol during the builds:<u></u><u></u></span></p><span class=""><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d"><u></u> <u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:Consolas;color:#1f497d">../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c:263: warning: implicit declaration of function &#39;hcoll_check_mem_release_cb_needed&#39;<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d"><u></u> <u></u></span></p></span><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d">Cheers,<u></u><u></u></span></p><p class="MsoNormal"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d">Ben<u></u><u></u></span></p><p class="MsoNormal"><a name="151d164c1e20605e__MailEndCompose"><span style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif;color:#1f497d"><u></u> <u></u></span></a></p><p class="MsoNormal"><b><span lang="EN-US" style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif">From:</span></b><span lang="EN-US" style="font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif"> users [mailto:<a href="mailto:users-bounces@open-mpi.org" target="_blank">users-bounces@open-mpi.org</a>] <b>On Behalf Of </b>Mike Dubman<br><b>Sent:</b> Thursday, 24 December 2015 7:14 AM<br><b>To:</b> Open MPI Users &lt;<a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a>&gt;<br><b>Subject:</b> Re: [OMPI users] hcoll API in 1.10.1<u></u><u></u></span></p><div><div class="h5"><p class="MsoNormal"><u></u> <u></u></p><div><p class="MsoNormal">Hi,<u></u><u></u></p><div><p class="MsoNormal">hcoll is part of MOFED or comes from HPCx.<u></u><u></u></p></div><div><p class="MsoNormal">what version of hcoll do you have on your system?<u></u><u></u></p></div><div><p class="MsoNormal"><u></u> <u></u></p></div><div><p class="MsoNormal">Thx<u></u><u></u></p></div></div><div><p class="MsoNormal"><u></u> <u></u></p><div><p class="MsoNormal">On Wed, Dec 23, 2015 at 4:58 AM, Ben Menadue &lt;<a href="mailto:ben.menadue@nci.org.au" target="_blank">ben.menadue@nci.org.au</a>&gt; wrote:<u></u><u></u></p><blockquote style="border:none;border-left:solid #cccccc 1.0pt;padding:0cm 0cm 0cm 6.0pt;margin-left:4.8pt;margin-right:0cm"><p class="MsoNormal">Hi,<br><br>It&#39;s probably in plain sight somewhere and I missed it, but is there a<br>minimum version of hcoll needed to build 1.10.1?<br><br>We have 2.0.0, which allows us to build 1.10.0, but 1.10.1 fails with<br>missing entries in the hcoll_collectives_t structure:<br><br>  CC       coll_hcoll_module.lo<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c: In function<br>&#39;mca_coll_hcoll_mem_release_cb&#39;:<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c:60: warning:<br>implicit declaration of function &#39;hcoll_mem_unmap&#39;<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c: In function<br>&#39;hcoll_comm_attr_del_fn&#39;:<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c:166:<br>warning: implicit declaration of function &#39;hcoll_group_destroy_notify&#39;<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c: In function<br>&#39;mca_coll_hcoll_comm_query&#39;:<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c:263:<br>warning: implicit declaration of function<br>&#39;hcoll_check_mem_release_cb_needed&#39;<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c:317: error:<br>&#39;hcoll_collectives_t&#39; has no member named &#39;coll_alltoallv&#39;<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c:318: error:<br>&#39;hcoll_collectives_t&#39; has no member named &#39;coll_gatherv&#39;<br>../../../../../../../../ompi/mca/coll/hcoll/coll_hcoll_module.c:324: error:<br>&#39;hcoll_collectives_t&#39; has no member named &#39;coll_igatherv&#39;<br><br>It looks like PR567 in the 1.10 branch that added the new references.<br><br>Cheers,<br>Ben<br><br><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" target="_blank">users@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/12/28200.php" target="_blank">http://www.open-mpi.org/community/lists/users/2015/12/28200.php</a><u></u><u></u></p></blockquote></div><p class="MsoNormal"><br><br clear="all"><u></u><u></u></p><div><p class="MsoNormal"><u></u> <u></u></p></div><p class="MsoNormal">-- <u></u><u></u></p><div><div><p class="MsoNormal"><u></u> <u></u></p><div><p class="MsoNormal">Kind Regards,<u></u><u></u></p></div><div><p class="MsoNormal"><u></u> <u></u></p></div><div><p class="MsoNormal">M.<u></u><u></u></p></div></div></div></div></div></div></div></div><br>_______________________________________________<br>
users mailing list<br>
<a href="mailto:users@open-mpi.org">users@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" rel="noreferrer" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/users/2015/12/28202.php" rel="noreferrer" target="_blank">http://www.open-mpi.org/community/lists/users/2015/12/28202.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><br><div>Kind Regards,</div><div><br></div><div>M.</div></div></div>
</div>

