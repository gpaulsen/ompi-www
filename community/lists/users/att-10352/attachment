<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><br><div><div>On Aug 12, 2009, at &nbsp;19:09 PM, Ralph Castain wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Hmmm...well, I'm going to ask our TCP friends for some help here.<div><br></div><div>Meantime, I do see one thing that stands out. Port 4 is an awfully low port number that usually sits in the reserved range. I checked the /etc/services file on my Mac, and it was commented out as unassigned, which should mean it was okay.</div><div><br></div><div>Still, that is an unusual number. The default minimum port number is 1024, so I'm puzzled how you wound up down there. Of course, could just be an error in the print statement, but let's try moving it to be safe? Set</div><div><br></div><div>-mca btl_tcp_port_min_v4 36900 -mca btl_tcp_port_range_v4 32</div></div></blockquote><blockquote type="cite"><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div>and see what happens.</div></div></blockquote><div><br></div><div>What happens is that everything works now! &nbsp;Both connectivity_c and the MITgcm. &nbsp;I haven't tried under torque yet, but lets declare an openMPI victory at this point. &nbsp;</div><div><br></div><div><span class="Apple-style-span" style="font-family: monospace; "><div>On Aug 13, 2009, at &nbsp;8:28 AM, Jeff Squyres wrote:</div><br><blockquote type="cite"><div>Agreed -- ports 4 and 260 should be in the reserved ports range. &nbsp;Are you running as root, perchance?<br></div></blockquote><br></span></div><div><font class="Apple-style-span" face="monospace">Errrr, no, but yes. &nbsp;My user account has admin privledges. &nbsp;A sloppy workstation OS X habit I now regret propagating to my cluster. I'm sorry to not mention it earlier as possibly relevant.</font></div><div><font class="Apple-style-span" face="monospace"><br></font></div><div><font class="Apple-style-span" face="monospace">As a suggestion,&nbsp;btl_base_verbose could be mentioned as a good debugging tool in the troubleshooting section of the FAQ. &nbsp;Its on the page to do with tcp, which I admit I should have read as soon as I realized there was a communication issue, but having it in the troubleshooting section would be helpful too. &nbsp;i.e. maybe a more erudite version of:&nbsp;</font></div><div><font class="Apple-style-span" face="monospace"><br></font></div><div><font class="Apple-style-span" face="monospace">Checking connections between nodes:</font></div><div><font class="Apple-style-span" face="monospace"><br></font></div><div><span class="Apple-style-span" style="font-family: verdana, arial, helvetica; font-size: 12px; "><a name="tcp-routability-1.3"><p style="display: inline !important; "><code><font class="Apple-style-span" color="#000000" face="monospace"><span class="Apple-style-span" style="font-size: medium;">S</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">o</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">m</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">e</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">t</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">i</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">m</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">e</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">s</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">t</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">h</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">e</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">c</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">o</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">n</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">f</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">i</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">g</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">u</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">r</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">a</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">t</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">i</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">o</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">n</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">o</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">f</span><font class="Apple-style-span" face="monospace"><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><span class="Apple-style-span" style="font-size: medium;">a</span><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><span class="Apple-style-span" style="font-size: medium;">c</span><span class="Apple-style-span" style="font-size: medium;">l</span><span class="Apple-style-span" style="font-size: medium;">u</span><span class="Apple-style-span" style="font-size: medium;">s</span><span class="Apple-style-span" style="font-size: medium;">t</span><span class="Apple-style-span" style="font-size: medium;">e</span><span class="Apple-style-span" style="font-size: medium;">r</span><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><span class="Apple-style-span" style="font-size: medium;">m</span><span class="Apple-style-span" style="font-size: medium;">a</span><span class="Apple-style-span" style="font-size: medium;">k</span><span class="Apple-style-span" style="font-size: medium;">e</span><span class="Apple-style-span" style="font-size: medium;">s</span><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><span class="Apple-style-span" style="font-size: medium;">i</span><span class="Apple-style-span" style="font-size: medium;">t</span><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><span class="Apple-style-span" style="font-size: medium;">i</span><span class="Apple-style-span" style="font-size: medium;">m</span><span class="Apple-style-span" style="font-size: medium;">p</span><span class="Apple-style-span" style="font-size: medium;">o</span><span class="Apple-style-span" style="font-size: medium;">s</span><span class="Apple-style-span" style="font-size: medium;">s</span><span class="Apple-style-span" style="font-size: medium;">i</span><span class="Apple-style-span" style="font-size: medium;">b</span><span class="Apple-style-span" style="font-size: medium;">l</span><span class="Apple-style-span" style="font-size: medium;">e</span><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><span class="Apple-style-span" style="font-size: medium;">f</span><span class="Apple-style-span" style="font-size: medium;">o</span><span class="Apple-style-span" style="font-size: medium;">r</span><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><span class="Apple-style-span" style="font-size: medium;">n</span><span class="Apple-style-span" style="font-size: medium;">o</span><span class="Apple-style-span" style="font-size: medium;">d</span><span class="Apple-style-span" style="font-size: medium;">e</span><span class="Apple-style-span" style="font-size: medium;">s</span><span class="Apple-style-span" style="font-size: medium;">&nbsp;</span><span class="Apple-style-span" style="font-size: medium;">t</span><span class="Apple-style-span" style="font-size: medium;">o</span><span class="Apple-style-span" style="font-size: medium;">&nbsp;communicate properly. &nbsp;To debug this it helps to include &nbsp;<span class="Apple-style-span" style="font-family: verdana, arial, helvetica; font-size: 12px; "><a name="tcp-routability-1.3"><p style="display: inline !important; "><code>--mca btl_base_verbose 30 as a command line argument (see&nbsp;http://www.open-mpi.org/faq/?category=tcp for more information). &nbsp;The program example/connectivity_c.c is also a useful minimal program for testing communication on the cluster. &nbsp;</code></p></a></span></span></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></code></p></a></span></div><div><font class="Apple-style-span" face="monospace"><br></font></div><div><font class="Apple-style-span" face="monospace">Thanks again for everyone's help, particularly Ralph, Jeff and Gus. &nbsp;</font></div><div><font class="Apple-style-span" face="monospace"><br></font></div><div><font class="Apple-style-span" face="monospace">Cheers, &nbsp;Jody</font></div><div><br></div></div></body></html>
