<html><body><div style="color:#000; background-color:#fff; font-family:times new roman, new york, times, serif;font-size:12pt"><div><span>Good. :)</span></div><div><br><span></span></div><div><span>It works.&nbsp;</span></div><div>integer(kind=4) nprocs, myrank, dest, source, tag, ierr, tagi<br><span></span></div><div><span><br></span></div><div><span>Thank you,</span></div><div><span>Ali</span></div><div><span>RWTH Aachen</span></div><div><br></div>  <div style="font-family: times new roman, new york, times, serif; font-size: 12pt;"> <div style="font-family: times new roman, new york, times, serif; font-size: 12pt;"> <div dir="ltr"> <font size="2" face="Arial"> <hr size="1">  <b><span style="font-weight:bold;">From:</span></b> "Iliev, Hristo" &lt;iliev@rz.rwth-aachen.de&gt;<br> <b><span style="font-weight: bold;">To:</span></b> Open MPI Users &lt;users@open-mpi.org&gt; <br> <b><span style="font-weight: bold;">Sent:</span></b> Wednesday, June 27, 2012
 9:00 PM<br> <b><span style="font-weight: bold;">Subject:</span></b> [OMPI users] Fwd:  MPI Problem<br> </font> </div> <br>
<div id="yiv519916908"><div>Hit Reply by mistake instead of Reply to all...<br><div><br><div>Begin forwarded message:</div><br class="yiv519916908Apple-interchange-newline"><blockquote type="cite"><div style="margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;"><span style="font-family:'Helvetica';font-size:medium;"><b>From: </b></span><span style="font-family:'Helvetica';font-size:medium;">Hristo Iliev &lt;<a rel="nofollow" ymailto="mailto:iliev@rz.rwth-aachen.de" target="_blank" href="mailto:iliev@rz.rwth-aachen.de">iliev@rz.rwth-aachen.de</a>&gt;<br></span></div><div style="margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;"><span style="font-family:'Helvetica';font-size:medium;"><b>Subject: </b></span><span style="font-family:'Helvetica';font-size:medium;"><b>Re: [OMPI users] MPI Problem</b><br></span></div><div style="margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;"><span
 style="font-family:'Helvetica';font-size:medium;"><b>Date: </b></span><span style="font-family:'Helvetica';font-size:medium;">27 юни 2012 20:58:55 CEST<br></span></div><div style="margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;"><span style="font-family:'Helvetica';font-size:medium;"><b>To: </b></span><span style="font-family:'Helvetica';font-size:medium;">Mohamad Ali Rostami &lt;<a rel="nofollow" ymailto="mailto:ma.rostami@yahoo.com" target="_blank" href="mailto:ma.rostami@yahoo.com">ma.rostami@yahoo.com</a>&gt;<br></span></div><br><div style="word-wrap:break-word;">Hi,<div><br></div><div>I spotted "-fdefault-integer-8" in the long list of parameters that you pass to the compiler in your Makefile. This would make all INTEGER variables to be of the 8-byte kind which is incompatible with the Open MPI interface (its INTEGERs are of the 4-byte kind). Try to change the definition of the error argument to MPI_INIT
 to&nbsp;INTEGER(KIND=4).</div><div><br></div><div>Kind regards,</div><div><br></div><div>Hristo</div><div><br><div><div>On 27.06.2012, at 20:34, Mohamad Ali Rostami wrote:</div><br class="yiv519916908Apple-interchange-newline"><blockquote type="cite">

 
<div><div style="color:rgb(0, 0, 0);background-color:rgb(255, 255, 255);font-family:times, serif;font-size:12pt;"><div><span>Hey</span></div><div><br><span></span></div><div><span>Yes, I am from RWTH Aachen, doing Hybrid Parallelization of some code on HPC.</span></div><div><br><span></span></div><div><span>These are the outputs from the command line:</span></div><div><br></div><div><span style="font-weight:bold;">$ mpif90 --showme</span><br><span></span></div><div><span>gfortran -I/opt/MPI/openmpi-1.5.3/linux/gcc/include -fexceptions -pthread -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -Wl,-rpath,/opt/MPI/openmpi-1.5.3/linux/gcc/lib -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -L/opt/MPI/openmpi-1.5.3/linux/gcc/lib -lmpi_f90 -lmpi_f77 -lmpi -ldl -Wl,--export-dynamic -lnsl -lutil -lm -ldl<br></span></div><div><br></div><div><br>
</div>
<div><span style="font-weight:bold;">$ mpif77 --showme</span></div><div><span>gfortran -I/opt/MPI/openmpi-1.5.3/linux/gcc/include -fexceptions -pthread -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -Wl,-rpath,/opt/MPI/openmpi-1.5.3/linux/gcc/lib -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -L/opt/MPI/openmpi-1.5.3/linux/gcc/lib -lmpi_f77 -lmpi -ldl -Wl,--export-dynamic -lnsl -lutil -lm -ldl<br></span></div><div><br></div><div>About the make file, I pass all of these parameters as FFLAGS!!! It is a lot, I know. :D</div><div><br><span></span></div><div><span>gfortran -c -I./ -Isolve/ -Inonlinear/ -Iforward/ -Isimul/ -Isimul/gs/ -Isimul/sgsim/ -Ig_taf/ -Iad_taf/ -Iinverse/ -Iinverse/g_taf/ -Iinverse/ad_taf/ -Initsol/ -Iprops/bas/ -Iuser/none/ -m64 -fno-second-underscore -march=k8 -O3 -ffast-math -funroll-all-loops -fprefetch-loop-arrays -mno-ieee-fp -DG95 -DCLopt -fdefault-integer-8 -frepack-arrays -ftree-vectorize -funit-at-a-time -fopenmp -DPROPS_bas -DSIMUL_sgsim
 -DUSER_none -DfOMP -DQDDOT -Dhead_base -DSTBAY -DstdFW -Dsetg_taf -DnoHDF -I/opt/MPI/openmpi-1.5.3/linux/gcc/include -fexceptions -pthread -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -Wl,-rpath,/opt/MPI/openmpi-1.5.3/linux/gcc/lib -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -L/opt/MPI/openmpi-1.5.3/linux/gcc/lib -lmpi_f90 -lmpi_f77 -lmpi -ldl -Wl,--export-dynamic -lnsl -lutil -lm -ldl -x f95-cpp-input simul/simul_wrapper.f90 -o simul/simul_wrapper.o -I/opt/MPI/openmpi-1.5.3/linux/gcc/include -fexceptions -pthread -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib -I/opt/MPI/openmpi-1.5.3/linux/gcc/lib<br></span></div><div><br><span></span></div><div><span>Regards,</span></div><div><span>Ali</span></div><div>RWTH Aachen<br></div>  <div style="font-family:times new roman, new york, times, serif;font-size:12pt;"> <div style="font-family:times new roman, new york, times, serif;font-size:12pt;"> <div dir="ltr"> <font size="2" face="Arial">
 <hr size="1">  <b><span style="font-weight:bold;">From:</span></b> "Iliev, Hristo" &lt;<a rel="nofollow" ymailto="mailto:iliev@rz.rwth-aachen.de" target="_blank" href="mailto:iliev@rz.rwth-aachen.de">iliev@rz.rwth-aachen.de</a>&gt;<br> <b><span style="font-weight:bold;">To:</span></b> Mohamad Ali Rostami &lt;<a rel="nofollow" ymailto="mailto:ma.rostami@yahoo.com" target="_blank" href="mailto:ma.rostami@yahoo.com">ma.rostami@yahoo.com</a>&gt;; Open MPI Users &lt;<a rel="nofollow" ymailto="mailto:users@open-mpi.org" target="_blank" href="mailto:users@open-mpi.org">users@open-mpi.org</a>&gt; <br> <b><span style="font-weight:bold;">Sent:</span></b> Wednesday, June 27, 2012 2:59 PM<br> <b><span style="font-weight:bold;">Subject:</span></b> RE: [OMPI users] MPI Problem<br> </font> </div> <br>
<div id="yiv519916908"><style><!--
#yiv519916908   
 filtered  {font-family:Calibri;panose-1:2 15 5 2 2 2 4 3 2 4;}
#yiv519916908 filtered  {font-family:Tahoma;panose-1:2 11 6 4 3 5 4 4 2 4;}
#yiv519916908 filtered  {font-family:Consolas;panose-1:2 11 6 9 2 2 4 3 2 4;}
#yiv519916908   
 p.yiv519916908MsoNormal, #yiv519916908  li.yiv519916908MsoNormal, #yiv519916908  div.yiv519916908MsoNormal
	{margin:0cm;margin-bottom:.0001pt;font-size:12.0pt;font-family:"serif";}
#yiv519916908  a:link, #yiv519916908  span.yiv519916908MsoHyperlink
	{color:blue;text-decoration:underline;}
#yiv519916908  a:visited, #yiv519916908  span.yiv519916908MsoHyperlinkFollowed
	{color:purple;text-decoration:underline;}
#yiv519916908  p.yiv519916908MsoAcetate, #yiv519916908  li.yiv519916908MsoAcetate, #yiv519916908  div.yiv519916908MsoAcetate
	{margin:0cm;margin-bottom:.0001pt;font-size:8.0pt;font-family:"sans-serif";}
#yiv519916908  span.yiv519916908EmailStyle17
	{font-family:"sans-serif";color:#1F497D;}
#yiv519916908  span.yiv519916908BalloonTextChar
	{font-family:"sans-serif";}
#yiv519916908  .yiv519916908MsoChpDefault
	{font-size:10.0pt;}
#yiv519916908 filtered  {margin:70.85pt 70.85pt 2.0cm 70.85pt;}
#yiv519916908  div.yiv519916908WordSection1
	{}
--></style><div><div class="yiv519916908WordSection1"><div class="yiv519916908MsoNormal"><span style="font-size:11.0pt;color:#1F497D;">Hi,</span></div><div class="yiv519916908MsoNormal"><span style="font-size:11.0pt;color:#1F497D;"> &nbsp;</span></div><div class="yiv519916908MsoNormal"><span style="font-size:11.0pt;color:#1F497D;">Could you please compare the output from “mpif77/mpif90 -showme” when executed from the command line and from inside the Makefile? Could you also check that the argument to MPI_INIT is a normal INTEGER and is not getting some funny KIND or preprocessor treatment?</span></div><div class="yiv519916908MsoNormal"><span style="font-size:11.0pt;color:#1F497D;"> &nbsp;</span></div><div class="yiv519916908MsoNormal"><span style="font-size:11.0pt;color:#1F497D;">Regards,</span></div><div><div class="yiv519916908MsoNormal"><span style="font-size:11.0pt;color:#1F497D;">--</span></div><div class="yiv519916908MsoNormal"><span
 style="font-size:11.0pt;color:#1F497D;">Hristo Iliev, Ph.D. -- High Performance Computing</span></div><div class="yiv519916908MsoNormal"><span style="font-size:11.0pt;color:#1F497D;">RWTH Aachen University, Center for Computing and Communication</span></div></div><div class="yiv519916908MsoNormal"> &nbsp;</div><div style="border-top-style:none;border-right-style:none;border-bottom-style:none;border-color:initial;border-left-style:solid;border-left-color:blue;border-left-width:1.5pt;padding-top:0cm;padding-right:0cm;padding-bottom:0cm;padding-left:4pt;"><div><div style="border-right-style:none;border-bottom-style:none;border-left-style:none;border-color:initial;border-top-style:solid;border-top-color:rgb(181, 196, 223);border-top-width:1pt;padding-top:3pt;padding-right:0cm;padding-bottom:0cm;padding-left:0cm;"><div class="yiv519916908MsoNormal"><b><span style="font-size:10.0pt;">From:</span></b><span style="font-size:10.0pt;"> <a rel="nofollow"
 ymailto="mailto:users-bounces@open-mpi.org" target="_blank" href="mailto:users-bounces@open-mpi.org">users-bounces@open-mpi.org</a> [mailto:users-bounces@open-mpi.org] <b>On Behalf Of </b>Mohamad Ali Rostami<br><b>Sent:</b> Wednesday, June 27, 2012 9:36 AM<br><b>To:</b> Jeff Squyres<br><b>Cc:</b> Open MPI Users<br><b>Subject:</b> Re: [OMPI users] MPI Problem</span></div></div></div><div class="yiv519916908MsoNormal"> &nbsp;</div><div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;">Something strange,</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;"> &nbsp;</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;">By adding all the libraries which I found from mpif90/mpif77 --showme,</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span
 style="color:black;">Fortran 77 version worked
 finally,</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;">but Fortran 90 version still has the problem.</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;"> &nbsp;</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;">Error: There is no specific subroutine for the generic 'mpi_init' at (1)</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;"> &nbsp;</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;">any idea??</span></div></div><div><div class="yiv519916908MsoNormal" style="background-color:white;"><span style="color:black;"> &nbsp;</span></div></div><div><div><div><div class="yiv519916908MsoNormal"
 style="text-align:center;background:white;" align="center"><span style="font-size:10.0pt;color:black;"><hr align="center" size="1" width="100%"></span></div><div class="yiv519916908MsoNormal" style="background-color:white;"><b><span style="font-size:10.0pt;color:black;">From:</span></b><span style="font-size:10.0pt;color:black;"> Jeff Squyres &lt;<a rel="nofollow" ymailto="mailto:jsquyres@cisco.com" target="_blank" href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt;<br><b>To:</b> Mohamad Ali Rostami &lt;<a rel="nofollow" ymailto="mailto:ma.rostami@yahoo.com" target="_blank" href="mailto:ma.rostami@yahoo.com">ma.rostami@yahoo.com</a>&gt; <br><b>Cc:</b> Open MPI Users &lt;<a rel="nofollow" ymailto="mailto:users@open-mpi.org" target="_blank" href="mailto:users@open-mpi.org">users@open-mpi.org</a>&gt; <br><b>Sent:</b> Monday, June 25, 2012 10:22 PM<br><b>Subject:</b> Re: [OMPI users] MPI
 Problem</span><span style="color:black;"></span></div></div><div class="yiv519916908MsoNormal" style="margin-bottom:12pt;background-color:white;"><span style="color:black;"><br>On Jun 25, 2012, at 3:59 PM, Mohamad Ali Rostami wrote:<br><br>&gt; &gt;&nbsp; &nbsp; mpif90 my_application.f90 -o my_application<br>&gt; <br>&gt; Yes, as I told you out of make file, it works.<br>&gt; The problem is something strange in the make file.<br><br>I'm sorry; I must have mis-parsed your issue, then.&nbsp; So just to make sure I understand:<br><br>shell$ mpif90 my_application.f90 -o my_application<br><br>Works fine, but:<br><br>shell$ make<br>...something that eventually invokes "mpif90 my_application.f90 -o my_application"<br><br>doesn't work.&nbsp; Right?<br><br>If you're invoking the exact same command in both cases (interactive shell and makefile), the *usual* cause of this kind of problem is that the "mpif90" in your Makefile is picking up a different mpif90 than
 the
 one that is picked up by your shell.&nbsp; Meaning: your PATH has been reset in the sub-process where "make" is executed, and so when make forks off "mpif90", it finds a different one than the one you execute interactively in the shell.<br><br>Check what your path is and/or exactly which mpif90 is getting invoked by your Makefile.<br><br>-- <br>Jeff Squyres<br><a rel="nofollow" ymailto="mailto:jsquyres@cisco.com" target="_blank" href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a><br>For corporate legal information go to: <a rel="nofollow" target="_blank" href="http://www.cisco.com/web/about/doing_business/legal/cri/">http://www.cisco.com/web/about/doing_business/legal/cri/</a><br><br><br></span></div></div></div></div></div></div></div></div><br><br> </div> </div>  </div></div></blockquote></div><br><div>
<span class="yiv519916908Apple-style-span" style="border-collapse:separate;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;font-size:medium;">--<br>Hristo Iliev, Ph.D. -- High Performance Computing,<br>RWTH Aachen University, Center for Computing and Communication<br><br></span>
</div>
<br></div></div></blockquote></div><br><div>
<span class="yiv519916908Apple-style-span" style="border-collapse:separate;color:rgb(0, 0, 0);font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;font-size:medium;">--<br>Hristo Iliev, Ph.D. -- High Performance Computing,<br>RWTH Aachen University, Center for Computing and Communication<br></span></div><div><span class="yiv519916908Apple-style-span" style="border-collapse:separate;color:rgb(0, 0, 0);font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;font-size:medium;"><br></span></div></div></div><br>_______________________________________________<br>users mailing list<br><a ymailto="mailto:users@open-mpi.org"
 href="mailto:users@open-mpi.org">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><br><br> </div> </div>  </div></body></html>
