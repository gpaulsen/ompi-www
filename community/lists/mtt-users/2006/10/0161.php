<? include("../../include/msg-header.inc"); ?>
<!-- received="Fri Oct 27 10:32:09 2006" -->
<!-- isoreceived="20061027143209" -->
<!-- sent="Fri, 27 Oct 2006 10:31:44 -0400" -->
<!-- isosent="20061027143144" -->
<!-- name="Josh Hursey" -->
<!-- email="jjhursey_at_[hidden]" -->
<!-- subject="Re: [MTT users] Discussion on teleconf yesterday?" -->
<!-- id="AE06FC0C-FCC0-4C2E-BFF1-3AF248FE1A50_at_open-mpi.org" -->
<!-- charset="US-ASCII" -->
<!-- inreplyto="B344F29C-2052-4BFE-A440-A9E75D414582_at_cisco.com" -->
<!-- expires="-1" -->
<div class="center">
<table border="2" width="100%" class="links">
<tr>
<th><a href="date.php">Date view</a></th>
<th><a href="index.php">Thread view</a></th>
<th><a href="subject.php">Subject view</a></th>
<th><a href="author.php">Author view</a></th>
</tr>
</table>
</div>
<p class="headers">
<strong>From:</strong> Josh Hursey (<em>jjhursey_at_[hidden]</em>)<br>
<strong>Date:</strong> 2006-10-27 10:31:44
</p>
<ul class="links">
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0162.php">Ethan Mallove: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<li><strong>Previous message:</strong> <a href="0160.php">Josh Hursey: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<li><strong>In reply to:</strong> <a href="0159.php">Jeff Squyres: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0162.php">Ethan Mallove: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<li><strong>Reply:</strong> <a href="0162.php">Ethan Mallove: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<li><strong>Reply:</strong> <a href="0163.php">Jeff Squyres: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<!-- reply="end" -->
</ul>
<hr>
<!-- body="start" -->
<p>
On Oct 27, 2006, at 7:39 AM, Jeff Squyres wrote:
<br>
<p><span class="quotelev1">&gt; On Oct 25, 2006, at 10:37 AM, Josh Hursey wrote:
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev2">&gt;&gt; The discussion started with the bug characteristics of v1.2 versus
</span><br>
<span class="quotelev2">&gt;&gt; the trunk.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Gotcha.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev2">&gt;&gt; It seemed from the call that IU was the only institution that can
</span><br>
<span class="quotelev2">&gt;&gt; asses this via MTT as noone else spoke up. Since people were
</span><br>
<span class="quotelev2">&gt;&gt; interested in seeing things that were breaking I suggested that I
</span><br>
<span class="quotelev2">&gt;&gt; start forwarding the IU internal MTT reports (run nightly and
</span><br>
<span class="quotelev2">&gt;&gt; weekly) to the testing_at_open-mpi.org. This was meet by Brain
</span><br>
<span class="quotelev2">&gt;&gt; insisting that it would result in &quot;thousands&quot; of emails to the
</span><br>
<span class="quotelev2">&gt;&gt; development list. I clarified that it is only 3 - 4 messages a day
</span><br>
<span class="quotelev2">&gt;&gt; from IU. However if all other institutions do this then it would be
</span><br>
<span class="quotelev2">&gt;&gt; a bunch of email (where 'a bunch' would still be less than
</span><br>
<span class="quotelev2">&gt;&gt; 'thousands'). That's how we got to a 'we need a single summary
</span><br>
<span class="quotelev2">&gt;&gt; presented to the group' comment. It should be noted that we brought
</span><br>
<span class="quotelev2">&gt;&gt; up IU sending to the 'testing_at_[hidden]' list as a bandaid until
</span><br>
<span class="quotelev2">&gt;&gt; MTT could do it better.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; How about sending them to me and Ethan?
</span><br>
<p>Sure I can add you both to the list if you like.
<br>
<p><span class="quotelev1">&gt;
</span><br>
<span class="quotelev2">&gt;&gt; This single summary can be email or a webpage that people can
</span><br>
<span class="quotelev2">&gt;&gt; check. Rich said that he would prefer a webpage, and noone else
</span><br>
<span class="quotelev2">&gt;&gt; really had a comment. That got us talking about the current summary
</span><br>
<span class="quotelev2">&gt;&gt; page that MTT generates. Tim M mentioned that the current website
</span><br>
<span class="quotelev2">&gt;&gt; is difficult to figure out how to get the answers you need. I
</span><br>
<span class="quotelev2">&gt;&gt; agree, it is hard [usability] for someone to go to the summary page
</span><br>
<span class="quotelev2">&gt;&gt; and answer the question &quot;So what failed from IU last night, and how
</span><br>
<span class="quotelev2">&gt;&gt; does that differ from Yesterday -- e.g., what regressed and
</span><br>
<span class="quotelev2">&gt;&gt; progressed yesterday at IU?&quot;. The website is flexible enough to due
</span><br>
<span class="quotelev2">&gt;&gt; it, but having a couple of basic summary pages would be nice for
</span><br>
<span class="quotelev2">&gt;&gt; basic users. What that should look like we can discuss further.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Agreed; we aren't super-fond of the current web page, either.  Do you
</span><br>
<span class="quotelev1">&gt; guys want to have a teleconf to go over the current status of MTT,
</span><br>
<span class="quotelev1">&gt; where you want it to go, etc.?  I consider IU's input here quite
</span><br>
<span class="quotelev1">&gt; important, since you're the ones pushing the boundaries, flexing
</span><br>
<span class="quotelev1">&gt; MTT's muscles, etc.
</span><br>
<p>In my previous email I suggested a couple of questions that I would  
<br>
like a webpage to answer. A teleconf might be good to talk about some  
<br>
of the various items that IU is trying to do around MTT.
<br>
<p><span class="quotelev1">&gt;
</span><br>
<span class="quotelev2">&gt;&gt; The IU group really likes the emails that we currently generate. A
</span><br>
<span class="quotelev2">&gt;&gt; plain-text summary of the previous run. I posted copies on the MTT
</span><br>
<span class="quotelev2">&gt;&gt; bug tracker here:
</span><br>
<span class="quotelev2">&gt;&gt; <a href="http://svn.open-mpi.org/trac/mtt/ticket/61">http://svn.open-mpi.org/trac/mtt/ticket/61</a>
</span><br>
<span class="quotelev2">&gt;&gt; Currently we have not put the work in to aggregate the runs, so for
</span><br>
<span class="quotelev2">&gt;&gt; each ini file that we run we get 1 email to the IU group. This is
</span><br>
<span class="quotelev2">&gt;&gt; fine for the moment, but as we add the rest of the clusters and
</span><br>
<span class="quotelev2">&gt;&gt; dimensions in the testing matrix we will need MTT to aggregate the
</span><br>
<span class="quotelev2">&gt;&gt; results for us and generate such an email.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Ok.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; We created another ticket yesterday to make a new MTT Reporter (our
</span><br>
<span class="quotelev1">&gt; internal plugins) that duplicates this output format.  It actually
</span><br>
<span class="quotelev1">&gt; shouldn't be that hard -- we don't have to do parsing to get the
</span><br>
<span class="quotelev1">&gt; numbers that you're reporting; we have access to the actual data.  So
</span><br>
<span class="quotelev1">&gt; it's mostly caching the data, calculating the totals that you're
</span><br>
<span class="quotelev1">&gt; calculating, and printing in your output format.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Ethan has some other short tasks to do before he gets to this, but
</span><br>
<span class="quotelev1">&gt; its near the top of the priority list.  You can see the current
</span><br>
<span class="quotelev1">&gt; workflow on the wiki (this is a living document; it keeps changing as
</span><br>
<span class="quotelev1">&gt; requirements, etc. change):
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt;      <a href="http://svn.open-mpi.org/trac/mtt/wiki/TaskPlan">http://svn.open-mpi.org/trac/mtt/wiki/TaskPlan</a>
</span><br>
<span class="quotelev1">&gt;
</span><br>
<p>Awesome Thanks! :)
<br>
<p><span class="quotelev2">&gt;&gt; So I think the general feel of the discussion is that we need the
</span><br>
<span class="quotelev2">&gt;&gt; following from MTT:
</span><br>
<span class="quotelev2">&gt;&gt;  - A 'basic' summary page providing answers to some general
</span><br>
<span class="quotelev2">&gt;&gt; frequently asked queries. The current interface is too advanced for
</span><br>
<span class="quotelev2">&gt;&gt; the current users.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; We have the summary.php page, but I personally have never found it
</span><br>
<span class="quotelev1">&gt; too useful.  :-)
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; We're getting towards a full revamp of reporter.php (got some other
</span><br>
<span class="quotelev1">&gt; tasks to complete first, but we're definitely starting to think about
</span><br>
<span class="quotelev1">&gt; it) -- got any ideas / input?  Our &quot;haven't thought about it much
</span><br>
<span class="quotelev1">&gt; yet&quot; idea is to be more menu/Q-A driven with a few common queries
</span><br>
<span class="quotelev1">&gt; easily available (rather than a huge, complicated single screen).
</span><br>
<p>See previous email for some general ideas. Tim M might have a few  
<br>
more that he would like to see since he is the one at IU that is  
<br>
watching the nightly results the closest.
<br>
<p><span class="quotelev1">&gt;
</span><br>
<span class="quotelev2">&gt;&gt;  - A summary email [in plain-text preferably] similar to the one
</span><br>
<span class="quotelev2">&gt;&gt; that IU generated showing an aggregation of the previous nights
</span><br>
<span class="quotelev2">&gt;&gt; results for (a) all reporters (b) my institution [so I can track
</span><br>
<span class="quotelev2">&gt;&gt; them down and file bugs].
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; For the moment, we don't have the dynamic capability for you to login
</span><br>
<span class="quotelev1">&gt; to the web page, create a report, and say &quot;mail this to me nightly&quot;.
</span><br>
<span class="quotelev1">&gt; However, Ethan can make up custom reports on the server quite easily
</span><br>
<span class="quotelev1">&gt; -- if you want some IU-specific reports, just file a ticket and  
</span><br>
<span class="quotelev1">&gt; Ethan  
</span><br>
<span class="quotelev1">&gt; can Make It So.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<p>Cool. We'll talk it over and see what we would like.
<br>
<p><p><span class="quotelev2">&gt;&gt;  - 1 email a day on the previous nights testing results.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; That's what we intended for the mails that are coming today, but it
</span><br>
<span class="quotelev1">&gt; seemed to not be sufficient -- we ended up with 4 nightly mails, one
</span><br>
<span class="quotelev1">&gt; for each relevant phase failures and a 4th for showing stderr of mpi
</span><br>
<span class="quotelev1">&gt; installs.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev2">&gt;&gt; Some relevant bugs currently in existence:
</span><br>
<span class="quotelev2">&gt;&gt; <a href="http://svn.open-mpi.org/trac/mtt/ticket/92">http://svn.open-mpi.org/trac/mtt/ticket/92</a>
</span><br>
<span class="quotelev2">&gt;&gt; <a href="http://svn.open-mpi.org/trac/mtt/ticket/61">http://svn.open-mpi.org/trac/mtt/ticket/61</a>
</span><br>
<span class="quotelev2">&gt;&gt; <a href="http://svn.open-mpi.org/trac/mtt/ticket/94">http://svn.open-mpi.org/trac/mtt/ticket/94</a>
</span><br>
<span class="quotelev2">&gt;&gt;
</span><br>
<span class="quotelev2">&gt;&gt;
</span><br>
<span class="quotelev2">&gt;&gt; The other concern is that given the frequency of testing as bugs
</span><br>
<span class="quotelev2">&gt;&gt; appear from the testing someone needs to make sure the bug tracker
</span><br>
<span class="quotelev2">&gt;&gt; is updated. I think the group is unclear about how this is done.
</span><br>
<span class="quotelev2">&gt;&gt; Meaning when a MTT identifies a test as failed whom is responsible
</span><br>
<span class="quotelev2">&gt;&gt; for putting the bug in the bug tracker?
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; At the moment, I've been manually examining the mails every day and
</span><br>
<span class="quotelev1">&gt; firing off e-mails to those responsible.  However, due to travel last
</span><br>
<span class="quotelev1">&gt; week and this week, I've gotten quite behind.  :-(
</span><br>
<p>I wonder if there is a way to do something more automated. Probably  
<br>
too advanced for MTT 2.0 or 3.0, but something to think about. Maybe  
<br>
tie it in with the bug tracker, so send a &quot;Bug Master Engineer&quot; an  
<br>
aggregated list of failures that can be easily put into TRAC. Donno..  
<br>
just an idea to help take the burden off of you.
<br>
<p><span class="quotelev1">&gt;
</span><br>
<span class="quotelev2">&gt;&gt; The obvious solution is the institution that identified the bug.
</span><br>
<span class="quotelev2">&gt;&gt; [Warning: My opinion] But then that becomes unwieldy for IU since
</span><br>
<span class="quotelev2">&gt;&gt; we have a large testing matrix, and would need to commit someone to
</span><br>
<span class="quotelev2">&gt;&gt; doing this everyday (and it may take all day to properly track a
</span><br>
<span class="quotelev2">&gt;&gt; set of bugs). Also this kind of punishes an institution for testing
</span><br>
<span class="quotelev2">&gt;&gt; more instead of providing incentive to test.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; True.  I don't know the proper answer to this, either -- I know the
</span><br>
<span class="quotelev1">&gt; &quot;Jeff look at e-mail&quot; solution doesn't scale well.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev2">&gt;&gt; ------ Page Break -- Context switch ------
</span><br>
<span class="quotelev2">&gt;&gt;
</span><br>
<span class="quotelev2">&gt;&gt; In case you all want to know what we are doing here at IU. I
</span><br>
<span class="quotelev2">&gt;&gt; attached to this email our planed MTT testing matrix. Currently we
</span><br>
<span class="quotelev2">&gt;&gt; have BigRed and Odin running the complete matrix less the BLACS
</span><br>
<span class="quotelev2">&gt;&gt; tests. Wotan and Thor will come online as we get more resources to
</span><br>
<span class="quotelev2">&gt;&gt; support them.
</span><br>
<span class="quotelev2">&gt;&gt;
</span><br>
<span class="quotelev2">&gt;&gt; In order to do such a complex testing matrix we have various .ini
</span><br>
<span class="quotelev2">&gt;&gt; files that we use. And since some of the dimensions in the matrix
</span><br>
<span class="quotelev2">&gt;&gt; are large we break some of the tests into a couple .ini files that
</span><br>
<span class="quotelev2">&gt;&gt; are submitted concurrently to have them run in a reasonable time.
</span><br>
<span class="quotelev2">&gt;&gt;
</span><br>
<span class="quotelev2">&gt;&gt; &lt;MTT-testing-matrix.txt&gt;
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; Awesome.
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; I would like to schedule some phone time with you guys and Ethan and
</span><br>
<span class="quotelev1">&gt; me to talk about what's working, what's not working, etc.  One
</span><br>
<span class="quotelev1">&gt; obvious question I have is: is the INI config file format suitable?
</span><br>
<span class="quotelev1">&gt; Do we need to do something more complex that would allow
</span><br>
<span class="quotelev1">&gt; consolidation of your various configurations?  ...etc.
</span><br>
<p>Tim M and I spent the better part of two days revamping our current  
<br>
setup to do some more 'advanced' things (Parallel builds, etc...). We  
<br>
are putting all of these scripts in ompi-tests/iu/mtt in case anyone  
<br>
wants to see how we are doing it and use that as an example for doing  
<br>
something similar.
<br>
<p>Basically our problems are:
<br>
&nbsp;&nbsp;- Testing results come in at various times as they complete, we  
<br>
would really like a 'status report' at 8 am every day finished or not.
<br>
&nbsp;&nbsp;- Due to the combinatorial effect of MTT this lends itself to some  
<br>
obvious parallelism. Can we harness that to reduce the time to  
<br>
complete the testing cycle.
<br>
&nbsp;&nbsp;- We will soon have 4 clusters [wotan, bigred, odin, thor] each  
<br>
running 3 branches [trunk, v1.2, v1.1], 2 different builds [64 bit  
<br>
gcc, 32 bit gcc] every night! That 24 sets of the nightly tests, and  
<br>
we have biweekly tests in there as well :o. That means a lot of ini  
<br>
files that basically say the same thing.
<br>
<p>What we are trying to do:
<br>
&nbsp;&nbsp;- Generalize the INI files with default sets that can be plugged in.
<br>
&nbsp;&nbsp;- Make the scripts more general so they can be used easily across  
<br>
all clusters
<br>
&nbsp;&nbsp;- Reduce the number of emails to at most 2 from the nightly runs  
<br>
per cluster [Progress, and Final] -- we are not using SLURM, LL, and  
<br>
a hostlist in or runs.
<br>
&nbsp;&nbsp;- Increase the parallelism per stage as much as possible, in as  
<br>
general a way as possible.
<br>
&nbsp;&nbsp;- 8 am (or 10 am) status report from our script to check on the run  
<br>
as it goes.
<br>
<p>We already have a list of refinements that we would like to add to  
<br>
this new script setup, but those are a bit more advanced (e.g., using  
<br>
a mgr/worker model to use allocations as they become available, using  
<br>
a queue to order the tests into the most important, etc.)
<br>
<p>One thing that would be nice if MTT could do, but would be initially  
<br>
institution specific would be a custom trigger for aggregation from  
<br>
the MTT server. The problem is that we currently get 2 emails from  
<br>
each cluster every night (this does not include the weekly runs) so  
<br>
that will be 8 emails a day, which can be a bit hard to parse. If we  
<br>
put the aggregation code close to the server (or just had a way for  
<br>
us to query the DB from the IU side via ODBC stuff) then we could  
<br>
have the aggregation function generate 2 emails which include results  
<br>
from all clusters. So 2 giant emails instead of 8 smaller emails.
<br>
Just an idea, but if you gave me the information so that I can send  
<br>
queries to the MTT database I can mock up something and we can all  
<br>
experiment with it to see if we can generalize a bit. Obviously the  
<br>
'guest' user access to the DB that this aggregation function will use  
<br>
would only have read access since we don't want it modifying the DB.
<br>
<p>So generally yeah I think we would like to have a teleconf to talk  
<br>
about our experiences with MTT, and what we have done around it to  
<br>
fit our needs. We realize that we are pushing it a bit further than  
<br>
others, so we are fine with doing a home brewed solution for a while  
<br>
until MTT is able to replicate the functionality.
<br>
<p>Thanks!
<br>
Josh
<br>
<p><span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; -- 
</span><br>
<span class="quotelev1">&gt; Jeff Squyres
</span><br>
<span class="quotelev1">&gt; Server Virtualization Business Unit
</span><br>
<span class="quotelev1">&gt; Cisco Systems
</span><br>
<span class="quotelev1">&gt;
</span><br>
<span class="quotelev1">&gt; _______________________________________________
</span><br>
<span class="quotelev1">&gt; mtt-users mailing list
</span><br>
<span class="quotelev1">&gt; mtt-users_at_[hidden]
</span><br>
<span class="quotelev1">&gt; <a href="http://www.open-mpi.org/mailman/listinfo.cgi/mtt-users">http://www.open-mpi.org/mailman/listinfo.cgi/mtt-users</a>
</span><br>
<p><pre>
----
Josh Hursey
jjhursey_at_[hidden]
<a href="http://www.open-mpi.org/">http://www.open-mpi.org/</a>
</pre>
<!-- body="end" -->
<hr>
<ul class="links">
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0162.php">Ethan Mallove: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<li><strong>Previous message:</strong> <a href="0160.php">Josh Hursey: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<li><strong>In reply to:</strong> <a href="0159.php">Jeff Squyres: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0162.php">Ethan Mallove: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<li><strong>Reply:</strong> <a href="0162.php">Ethan Mallove: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<li><strong>Reply:</strong> <a href="0163.php">Jeff Squyres: "Re: [MTT users] Discussion on teleconf yesterday?"</a>
<!-- reply="end" -->
</ul>
<div class="center">
<table border="2" width="100%" class="links">
<tr>
<th><a href="date.php">Date view</a></th>
<th><a href="index.php">Thread view</a></th>
<th><a href="subject.php">Subject view</a></th>
<th><a href="author.php">Author view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<? include("../../include/msg-footer.inc") ?>
