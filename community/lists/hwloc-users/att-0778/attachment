<html><head/><body><html><head></head><body>Ask nvidia to make their cuda driver free, and to add them to sysfs :)<br>
<br>
There&#39;s a cuda hwloc branch that will solve this. In the meantime, there are no nvidia osdevs.<br>
Maybe look at hwloc/cuda.h and cudart.h, they give cuda device affinity without osdevs.<br>
<br>
Brice<br>
<br><br><div class="gmail_quote"><br>
Guillermo Miranda &lt;guillermo.miranda@bsc.es&gt; a écrit :<blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt 0.8ex; border-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">
<pre style="white-space: pre-wrap; word-wrap:break-word; font-family: monospace; margin-top: 0px">Hello,<br /><br />I am trying to detect GPus when traversing through the topology tree,<br />but they appear as PCI devices instead of OS devices, so I can't compare<br />the OS type against HWLOC_OBJ_OSDEV_GPU.<br /><br />I have enabled IO device discovery (HWLOC_TOPOLOGY_FLAG_IO_DEVICES) and<br />made sure that hwloc's configure properly recognised Cuda (4.1).<br /><br />Here's what lstopo prints:<br />&lt;object type="PCIDev" os_index="536576"<br />pci_busid="0000:83:00.0" pci_type="0302 [10de:1091] [00de:0042] a1"<br />pci_link_speed="0.000000"&gt;<br />&lt;info name="PCIVendor" value="nVidia Corporation"/&gt;<br />&lt;/object&gt;<br /><br />Is this the expected behaviour? What can I do to make that GPU be marked<br />as an OSDEV GPU object?<br /><br />Thanks in advance.<br /><br />WARNING / LEGAL TEXT: This message is intended only for the use of the<br />individual or entity to
which it is addressed and may contain<br />information which is privileged, confidential, proprietary, or exempt<br />from disclosure under applicable law. If you are not the intended<br />recipient or the person responsible for delivering the message to the<br />intended recipient, you are strictly prohibited from disclosing,<br />distributing, copying, or in any way using this message. If you have<br />received this communication in error, please notify the sender and<br />destroy and delete any copies you may have received.<br /><br /><a href="http://www.bsc.es/disclaimer">http://www.bsc.es/disclaimer</a><br /><hr /><br />hwloc-users mailing list<br />hwloc-users@open-mpi.org<br /><a href="http://www.open-mpi.org/mailman/listinfo.cgi/hwloc-users">http://www.open-mpi.org/mailman/listinfo.cgi/hwloc-users</a><br /></pre></blockquote></div></body></html></body></html>
