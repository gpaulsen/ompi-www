<table cellspacing="0" cellpadding="0" border="0" ><tr><td valign="top" style="font: inherit;"><font class="Apple-style-span" face="arial" size="2">Good day,</font><div style="font-family: arial; font-size: 10pt; "><br></div><div><font class="Apple-style-span" face="arial" size="2">I'm studying the impact of MPI process binding on communication costs in my project, and would like to use hwloc-bind to achieve fine-grained mapping control. I install hwloc 1.1.1 on a 2-socket 4-core machine (with 2 dual-core dies in each socket), and run hwloc-ps to verify the binding:</font></div><div><font class="Apple-style-span" face="arial" size="2"><br></font></div><div><font class="Apple-style-span" face="arial" size="2"><div>$ mpirun -V</div><div>mpirun (Open MPI) 1.5.1</div></font></div><div><font class="Apple-style-span" face="arial" size="2">$ mpirun -np 4 hwloc-bind&nbsp;socket:0.core:0-3 ./test</font></div><div><font class="Apple-style-span" face="arial"
 size="2"><br></font></div><div><font class="Apple-style-span" face="arial" size="2">hwloc-ps shows the following output:</font></div><div><font class="Apple-style-span" face="arial" size="2"><br></font></div><div><font class="Apple-style-span" face="arial" size="2"><div>$ hwloc-ps -p</div><div>1497 &nbsp; &nbsp;Socket:0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1498 &nbsp; &nbsp;Socket:0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1499 &nbsp; &nbsp;Socket:0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1500 &nbsp; &nbsp;Socket:0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>$ hwloc-ps -l</div><div>1497 &nbsp; &nbsp;Socket:0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1498 &nbsp; &nbsp;Socket:0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1499 &nbsp; &nbsp;Socket:0 &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1500 &nbsp; &nbsp;Socket:0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>$ hwloc-ps -c</div><div>1497 &nbsp; &nbsp;0x00000055 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1498 &nbsp; &nbsp;0x00000055 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1499 &nbsp; &nbsp;0x00000055 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div><div>1500 &nbsp; &nbsp;0x00000055 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;./test</div></font></div><div><font class="Apple-style-span" face="arial" size="2"><br></font></div><div><font class="Apple-style-span" face="arial" size="2"><br></font></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; ">Questions:&nbsp;</span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; ">1. Does hwloc-bind map the processes *sequentially* on *successive*
 cores of the socket?</span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; ">2. How could hwloc-ps help verify this binding, i.e.,</span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; "><br></span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; ">process 1497 (rank 0) on socket.0:core.0</span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; ">process 1498</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">(rank 1)</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">on&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small;
 ">socket.0:core.1</span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; ">process 1499</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">(rank 2)</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">on&nbsp;<span class="Apple-style-span" style="font-family: arial; font-size: small; ">socket.0:core.2</span></span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; "><span class="Apple-style-span" style="font-family: arial; font-size: small; ">process 1500</span></span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">(rank
 3)</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">on&nbsp;<span class="Apple-style-span" style="font-family: arial; font-size: small; ">socket.0:core.3</span></span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; "><span class="Apple-style-span" style="font-family: arial; font-size: small; "><span class="Apple-style-span" style="font-family: arial; font-size: small; "><br></span></span></span></div><div><span class="Apple-style-span" style="font-family: arial; font-size: small; "><span class="Apple-style-span" style="font-family: arial; font-size: small; "><span class="Apple-style-span" style="font-family: arial; font-size: small; "><br></span></span></span></div><div><font class="Apple-style-span" face="arial" size="2">Equivalently, does the binding of `socket:0.core:0-1
 socket:1.core:0-1' with hwloc-ps showing</font></div><div style="font-family: arial; font-size: 10pt; "><br></div><div><div><font class="Apple-style-span" face="arial" size="2">$ hwloc-ps -l</font></div><div><font class="Apple-style-span" face="arial" size="2">1315 &nbsp; &nbsp;L2Cache:0 L2Cache:2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ./</font><span class="Apple-style-span" style="font-family: arial; font-size: small; ">test</span></div><div><font class="Apple-style-span" face="arial" size="2">1316 &nbsp; &nbsp;L2Cache:0 L2Cache:2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ./</font><span class="Apple-style-span" style="font-family: arial; font-size: small; ">test</span></div><div><font class="Apple-style-span" face="arial" size="2">1317 &nbsp; &nbsp;L2Cache:0 L2Cache:2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ./</font><span class="Apple-style-span" style="font-family: arial; font-size: small; ">test</span></div><div><font class="Apple-style-span"
 face="arial" size="2">1318 &nbsp; &nbsp;L2Cache:0 L2Cache:2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ./</font><span class="Apple-style-span" style="font-family: arial; font-size: small; ">test</span></div></div><div style="font-family: arial; font-size: 10pt; "><br></div><div style="font-family: arial; font-size: 10pt; ">indicate the the following? I.e.,</div><div style="font-family: arial; font-size: 10pt; "><br></div><div><div style="font-family: 'Times New Roman'; font-size: medium; "><span class="Apple-style-span" style="font-family: arial; font-size: small; ">process&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">1315&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">(rank 0)&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">on socket.0:core.0</span></div><div style="font-family: 'Times New Roman'; font-size: medium; "><span
 class="Apple-style-span" style="font-family: arial; font-size: small; ">process&nbsp;1316&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">(rank 1)</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">on&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">socket.0:core.1</span></div><div style="font-family: 'Times New Roman'; font-size: medium; "><span class="Apple-style-span" style="font-family: arial; font-size: small; ">process&nbsp;1317&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">(rank 2)</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">on&nbsp;<span class="Apple-style-span"
 style="font-family: arial; font-size: small; ">socket.1:core.0</span></span></div><div style="font-family: 'Times New Roman'; font-size: medium; "><span class="Apple-style-span" style="font-family: arial; font-size: small; "><span class="Apple-style-span" style="font-family: arial; font-size: small; ">process&nbsp;1318&nbsp;</span></span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">(rank 3)</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">&nbsp;</span><span class="Apple-style-span" style="font-family: arial; font-size: small; ">on&nbsp;<span class="Apple-style-span" style="font-family: arial; font-size: small; ">socket.1:core.1</span></span></div><div style="font-family: 'Times New Roman'; font-size: medium; "><span class="Apple-style-span" style="font-family: arial; font-size: small; "><span class="Apple-style-span" style="font-family: arial; font-size: small; "><span
 class="Apple-style-span" style="font-family: arial; font-size: small; "><br></span></span></span></div></div><div style="font-family: arial; font-size: 10pt; "><br></div><div style="font-family: arial; font-size: 10pt; ">The topology of the machine is as follows:</div><div><div><font class="Apple-style-span" face="arial" size="2"><br></font></div><div><font class="Apple-style-span" face="arial" size="2">$ hwloc-info -l</font></div><div><font class="Apple-style-span" face="arial" size="2">depth 0: &nbsp; &nbsp; &nbsp; &nbsp;1 Machine (type #1)</font></div><div><font class="Apple-style-span" face="arial" size="2">&nbsp;depth 1: &nbsp; &nbsp; &nbsp; 2 Sockets (type #3)</font></div><div><font class="Apple-style-span" face="arial" size="2">&nbsp;&nbsp;depth 2: &nbsp; &nbsp; &nbsp;4 Caches (type #4)</font></div><div><font class="Apple-style-span" face="arial" size="2">&nbsp;&nbsp; depth 3: &nbsp; &nbsp; 8 Caches (type #4)</font></div><div><font
 class="Apple-style-span" face="arial" size="2">&nbsp;&nbsp; &nbsp;depth 4: &nbsp; &nbsp;8 Cores (type #5)</font></div><div><font class="Apple-style-span" face="arial" size="2">&nbsp;&nbsp; &nbsp; depth 5: &nbsp; 8 PUs (type #6)</font></div></div><div><font class="Apple-style-span" face="arial" size="2"><br></font></div><div style="font-size: 10pt; "><div style="font-family: arial; ">$ lstopo</div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">Machine (16GB)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp;Socket L#0</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp;L2 L#0 (4096KB)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp; &nbsp;L1 L#0 (32KB) + Core L#0 + PU L#0 (P#0)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp;
 &nbsp;L1 L#1 (32KB) + Core L#1 + PU L#1 (P#2)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp;L2 L#1 (4096KB)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp; &nbsp;L1 L#2 (32KB) + Core L#2 + PU L#2 (P#4)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp; &nbsp;L1 L#3 (32KB) + Core L#3 + PU L#3 (P#6)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp;Socket L#1</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp;L2 L#2 (4096KB)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp; &nbsp;L1 L#4 (32KB) + Core L#4 + PU L#4 (P#1)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp; &nbsp;L1 L#5 (32KB) +
 Core L#5 + PU L#5 (P#3)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp;L2 L#3 (4096KB)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp; &nbsp;L1 L#6 (32KB) + Core L#6 + PU L#6 (P#5)</font></div><div><font class="Apple-style-span" face="arial, helvetica, sans-serif">&nbsp;&nbsp; &nbsp; &nbsp;L1 L#7 (32KB) + Core L#7 + PU L#7 (P#7)</font></div></div><div style="font-family: arial; font-size: 10pt; "><br></div><div style="font-family: arial; font-size: 10pt; "><br></div><div style="font-family: arial; font-size: 10pt; ">Thanks.</div><div style="font-family: arial; font-size: 10pt; ">Chan</div></td></tr></table><br>

<hr size=1>It's here! Your new message!<br>Get
<a href="http://us.rd.yahoo.com/evt=49938/*http://tools.search.yahoo.com/toolbar/features/mail/"> new email alerts</a> with the free <a href="
http://us.rd.yahoo.com/evt=49938/*http://tools.search.yahoo.com/toolbar/features/mail/">Yahoo! Toolbar.</a>
