<div dir="ltr"><div>Hi</div><div><br></div><div>I am getting the following error when building hwloc on 32bit ubuntu 14.10 (utopic) with optimizations (CFLAGS=&#39;-O3&#39;):</div><div><br></div><div>... snip ...</div><div><div>  CC       topology-x86.lo</div><div>/home/vagrant/src/hwloc/include/private/cpuid-x86.h: Assembler messages:</div><div>/home/vagrant/src/hwloc/include/private/cpuid-x86.h:40: Error: symbol `Lhwloc1&#39; is already defined</div><div>Makefile:878: recipe for target &#39;topology-x86.lo&#39; failed</div><div>make[1]: *** [topology-x86.lo] Error 1</div><div>make[1]: Leaving directory &#39;/home/vagrant/src/hwloc/hwloc&#39;</div><div>Makefile:615: recipe for target &#39;all-recursive&#39; failed</div><div>make: *** [all-recursive] Error 1</div></div><div><br></div><div>I used these steps to verify that the build works without optimizations and reproduce the error above with optimizations:</div><div><br></div><div><div>git clone <a href="https://github.com/open-mpi/hwloc">https://github.com/open-mpi/hwloc</a></div><div>cd hwloc/</div><div>./autogen.sh </div><div>./configure </div><div>make</div><div># This works, but no optimizations.</div><div><br></div><div># This fails with the error above...</div><div>git clean -dxf</div><div>./autogen.sh </div><div>./configure CFLAGS=&#39;-O3&#39; CXXFLAGS=&#39;-O3&#39;</div><div>make</div></div><br clear="all"><div><div class="gmail_signature">Is this expected to work? Do you have recommendations for fixing? I first saw this on hwloc 1.9.1 and verified it also happens on 1.10.0.</div><div class="gmail_signature"><br></div><div class="gmail_signature">I attached the configure and make V=1 output, as well as the config.log for the build against master (sha: 77fbe8f) that fails.</div><div class="gmail_signature"><br></div><div class="gmail_signature">I am using the utopic32 vagrant box from Ubuntu: <a href="http://cloud-images.ubuntu.com/vagrant/utopic/current/">http://cloud-images.ubuntu.com/vagrant/utopic/current/</a></div><div class="gmail_signature"><br></div><div class="gmail_signature">Please let me know if you need any other information.</div><div class="gmail_signature"><br></div><div class="gmail_signature">Thanks!</div>







<div class="gmail_signature"><br></div><div class="gmail_signature">Thomas Van Doren<br><a href="mailto:thomas.vandoren@gmail.com" target="_blank">thomas.vandoren@gmail.com</a></div></div>
</div>

