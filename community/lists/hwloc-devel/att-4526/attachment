<div dir="ltr"><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Jul 28, 2015 at 3:00 PM, Paul Hargrove <span dir="ltr">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div class="gmail_extra">I noticed an early-clobber applied to &quot;1&quot; and &quot;3&quot; in master.</div><div class="gmail_extra">I am retesting that now (still as applied to 1.11.0)</div></blockquote></div><br>Ok, with the 1.11.0 tarball patched to use the same inline asm as master we have:</div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div class="gmail_extra"><div class="gmail_extra"><font face="monospace, monospace">#elif defined(HWLOC_X86_32_ARCH)</font></div></div><div class="gmail_extra"><div class="gmail_extra"><font face="monospace, monospace">  __asm__(</font></div></div><div class="gmail_extra"><div class="gmail_extra"><font face="monospace, monospace">  &quot;mov %%ebx,%1\n\t&quot;</font></div></div><div class="gmail_extra"><div class="gmail_extra"><font face="monospace, monospace">  &quot;cpuid\n\t&quot;</font></div></div><div class="gmail_extra"><div class="gmail_extra"><font face="monospace, monospace">  &quot;xchg %%ebx,%1\n\t&quot;</font></div></div><div class="gmail_extra"><div class="gmail_extra"><font face="monospace, monospace">  : &quot;+a&quot; (*eax), &quot;=&amp;SD&quot; (*ebx), &quot;+c&quot; (*ecx), &quot;=&amp;d&quot; (*edx));</font></div></div><div class="gmail_extra"><div class="gmail_extra"><font face="monospace, monospace">#else</font></div></div></blockquote><div class="gmail_extra"><div><br></div><div>This too works on all 28 platform/compiler combinations for which I have test scripts setup.</div><div><br></div><div>Interestingly, this error:</div><div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex">All looked fine *except* the following with icc-15 with -m32 on a x86-64 Ubuntu 12.04.5 system:<br>   FAIL: 256ia64-64n2s2c.output<br>I don&#39;t see how that could possibly be related to the inline asm for cpuid, and have confirmed that the same failure occurs without the patch (but it is absent w/o -m32).</blockquote><div>Occurred with both icc-14 and icc-15 on different hosts this time.</div><div><br></div><div>-Paul</div><div> </div></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div></div>

