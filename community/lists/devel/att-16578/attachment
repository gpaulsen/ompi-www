<div dir="ltr">Ralph,<div><br></div><div>If preserved at all, the existing code should probably be made to act more intelligently when it encounters an unknown escape code.&nbsp; I would suggest advancing the length by some value (say 128?) that should be &quot;big enough&quot; and printing a prominent warning.&nbsp; So, the next time this bug surfaces it will be (a) non-fatal and (b) easy to pin down.</div><div><br></div><div>-Paul</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Fri, Dec 12, 2014 at 5:46 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">Looking at the comments in the code, it appears that the rationale when written was to provide support for REALLY ancient systems that didn&rsquo;t have some of these functions. Since that time, we added a configure check for vsnprintf, so I&rsquo;m adding Paul/Larry&rsquo;s suggested code, protected by that configure.<div><br></div><div>Since I suspect the configure check will always pass on any system of interest today, I think this will solve the problem. We can then address the broader question (e.g., do we even need this stuff any more at all?) in a more leisurely way.</div><div><div class="h5"><div><br></div><div><br><div><blockquote type="cite"><div>On Dec 12, 2014, at 5:42 PM, Larry Baker &lt;<a href="mailto:baker@usgs.gov" target="_blank">baker@usgs.gov</a>&gt; wrote:</div><br><div><div style="word-wrap:break-word"><div><div>On 12 Dec 2014, at 5:22 PM, Paul Hargrove wrote:</div><br><blockquote type="cite"><span style="border-collapse:separate;font-family:&#39;Helvetica Neue&#39;;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:-webkit-auto;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;border-spacing:0px;font-size:inherit"><div>HOWEVER, while the patch catches the &quot;%u&quot; case, there are plenty of potential ways to hit the same problem if, for instance, one uses &quot;%zu&quot; for size_t.&nbsp; Additionally, I&#39;ve already noted that the code for &quot;%ld&quot;, &quot;%lx&quot;, &quot;%lX&quot;, &quot;%lf&quot; are all currently incorrect.</div></span></blockquote></div><div><br></div>Not sure if it is applicable, but C99 has an &lt;inttypes.h&gt; header which #include&#39;s &lt;stdint.h&gt; and provides additional capabilities, such as printf()/scanf() format macros for the types defined in &lt;stdint.h&gt;.<br><div><br></div><div><div><span style="border-collapse:separate;font-family:&#39;Helvetica Neue&#39;;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:-webkit-auto;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;border-spacing:0px;font-size:inherit">Larry Baker<br>US Geological Survey<br><a href="tel:650-329-5608" value="+16503295608" target="_blank">650-329-5608</a><br><a href="mailto:baker@usgs.gov" target="_blank">baker@usgs.gov</a><br><br></span></div><div></div></div></div></div></blockquote></div><br></div></div></div></div></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font></div></div></div>
</div>

