<html><head><meta http-equiv="Content-Type" content="text/html charset=windows-1252"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Apr 17, 2015, at 1:27 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" class="">phhargrove@lbl.gov</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Ralph,<div class=""><br class=""></div><div class="">I think David's concern is that because Slurm has changed their default behavior, Open MPI's default behavior has changed as well.<div class="">The request (on which I have no opinion) appears to be that ORTE make an explicit request for the behavior that was the previous default in Slurm.</div><div class="">That would ensure that the behavior of Open MPI remains independent of the Slurm version.</div></div></div></div></blockquote><div><br class=""></div><div>Understood. However, my comment stands. Open MPI’s behavior has not changed at all - Slurm’s has. I’m willing to give them their due that they made this decision for a valid reason, and I suspect communicated it in their NEWS in the release. I’m not about to override their settings under the covers.</div><div><br class=""></div><div>As noted below and in the initial note, the users and sys admins can easily obtain the desired behavior by changing Slurm settings or using appropriate OMPI configure and/or cmd line options. I see no reason for making a change to the code.</div><div><br class=""></div><div>HTH</div><div>Ralph</div><div><br class=""></div><blockquote type="cite" class=""><div class=""><div dir="ltr" class=""><div class=""><div class=""><br class=""></div><div class="">David,</div><div class=""><br class=""></div><div class="">The problem here appears to be that the new (--export=NONE) behavior means that $PATH and/or $LD_LIBRARY_PATH are not propagated, and thus orted could not be found.</div><div class="">I believe you can configure Open MPI with --enable-mpirun-prefix-by-default to resolve the reported "<span style="font-size:12.8000001907349px" class="">orted: No such file or directory"</span></div><div class=""><br class=""></div><div class="">-Paul</div></div></div><div class="gmail_extra"><br class=""><div class="gmail_quote">On Fri, Apr 17, 2015 at 1:13 PM, Ralph Castain <span dir="ltr" class="">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hmmm…but what if a user -doesn’t- want their environment forwarded? Seems presumptuous of us to arbitrarily decide to do so on their behalf.<br class="">
<br class="">
<br class="">
&gt; On Apr 16, 2015, at 7:42 PM, David Singleton &lt;<a href="mailto:david.b.singleton@gmail.com" class="">david.b.singleton@gmail.com</a>&gt; wrote:<br class="">
&gt;<br class="">
&gt;<br class="">
&gt; Our site effectively runs all slurm jobs with sbatch --export=NONE ...&nbsp; and creates the necessary environment inside the batch script.&nbsp; After upgading to 14.11,&nbsp; OpenMPI mpirun jobs hit<br class="">
&gt;<br class="">
&gt; 2015-04-15T08:53:54+08:00 nod0138 slurmstepd[3122]: error: execve(): orted: No such file or directory<br class="">
&gt;<br class="">
&gt; The issue appears to be that, as of 14.11, srun now recognizes --export=NONE and, more importantly, the SLURM_EXPORT_ENV=NONE set in the jobs environment if you submit with sbatch --export=NONE .&nbsp; &nbsp;The simple workaround is to unset SLURM_EXPORT_ENV before mpirun.&nbsp; Possibly mpirun should add --export=ALL to its srun commands.<br class="">
&gt;<br class="">
&gt; Cheers<br class="">
&gt; David<br class="">
&gt;<br class="">
&gt; _______________________________________________<br class="">
&gt; devel mailing list<br class="">
&gt; <a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">
&gt; Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">
&gt; Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2015/04/17236.php" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2015/04/17236.php</a><br class="">
<br class="">
_______________________________________________<br class="">
devel mailing list<br class="">
<a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2015/04/17252.php" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2015/04/17252.php</a></blockquote></div><br class=""><br clear="all" class=""><div class=""><br class=""></div>-- <br class=""><div class="gmail_signature"><div dir="ltr" class=""><div class=""><font face="courier new, monospace" class=""><div class="">Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank" class="">PHHargrove@lbl.gov</a></div><div class="">Computer Languages &amp; Systems Software (CLaSS) Group</div><div class="">Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: +1-510-495-2352</div><div class="">Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font></div></div></div>
</div>
_______________________________________________<br class="">devel mailing list<br class=""><a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/devel<br class="">Link to this post: http://www.open-mpi.org/community/lists/devel/2015/04/17255.php</div></blockquote></div><br class=""></body></html>
