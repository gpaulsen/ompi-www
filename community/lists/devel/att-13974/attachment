<div dir="ltr">I see the following warnings when building 1.7.4rc3 on Solaris10 on SPARC w/ the Solaris Studio 12.3 compilers.<div><br></div><div><div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_</font><span style="font-family:&#39;courier new&#39;,monospace;font-size:x-small">posix_common_utils.c&quot;, line 75: warning: implicit function declaration: shm_open</span></div>
<div><span style="font-family:&#39;courier new&#39;,monospace;font-size:x-small">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_</span></div><div><font size="1" face="courier new, monospace">posix_component.c&quot;, line 186: warning: implicit function declaration: shm_unlink</font></div>
<div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c&quot;, line 212: warning: assignment type mismatch:</font></div>
<div><font size="1" face="courier new, monospace">        pointer to struct opal_shmem_seg_hdr_t {struct opal_atomic_lock_t {..} lock, int cpid} &quot;=&quot; pointer to char</font></div><div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c&quot;, line 285: warning: implicit function declaration: shm_unlink</font></div>
<div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c&quot;, line 288: warning: argument #1 is incompatible with prototype:</font></div>
<div><font size="1" face="courier new, monospace">        prototype: pointer to char : &quot;/usr/include/sys/mman.h&quot;, line 165</font></div><div><font size="1" face="courier new, monospace">        argument : pointer to struct opal_shmem_seg_hdr_t {struct opal_atomic_lock_t {..} lock, int cpid}</font></div>
<div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c&quot;, line 306: warning: implicit function declaration: shm_open</font></div>
<div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c&quot;, line 315: warning: assignment type mismatch:</font></div>
<div><font size="1" face="courier new, monospace">        pointer to unsigned char &quot;=&quot; pointer to char</font></div><div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c&quot;, line 378: warning: argument #1 is incompatible with prototype:</font></div>
<div><font size="1" face="courier new, monospace">        prototype: pointer to char : &quot;/usr/include/sys/mman.h&quot;, line 165</font></div><div><font size="1" face="courier new, monospace">        argument : pointer to unsigned char</font></div>
<div><font size="1" face="courier new, monospace">  </font></div><div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/sysv/shmem_s</font><span style="font-family:&#39;courier new&#39;,monospace;font-size:x-small">ysv_module.c&quot;, line 278: warning: argument #1 is incompatible with prototype:</span></div>
<div><font size="1" face="courier new, monospace">        prototype: pointer to char : &quot;/usr/include/sys/shm.h&quot;, line 131</font></div><div><font size="1" face="courier new, monospace">        argument : pointer to struct opal_shmem_seg_hdr_t {struct opal_atomic_lock_t {..} lock, int cpid}</font></div>
<div><font size="1" face="courier new, monospace">&quot;/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/sysv/shmem_sysv_module.c&quot;, line 342: warning: argument #1 is incompatible with prototype:</font></div>
<div><font size="1" face="courier new, monospace">        prototype: pointer to char : &quot;/usr/include/sys/shm.h&quot;, line 131</font></div><div><font size="1" face="courier new, monospace">        argument : pointer to unsigned char</font></div>
</div><div><br></div><div>Some appear to be missing casts for pointer types (as args and in assignments).</div><div><br></div><div>Others seem to be missing prototypes for shm_*(), despite including the right headers.</div>
<div>In GASNet we found we need to deal with POSIX shared memory as follows on Solaris:</div><div><div><br></div><div>#if PLATFORM_OS_SOLARIS &amp;&amp; !defined(_POSIX_C_SOURCE)</div><div>  #define _POSIX_C_SOURCE 200112L /* Required for shm_{open,unlink} decls */</div>
<div>  #include &lt;sys/mman.h&gt;</div><div>  #undef _POSIX_C_SOURCE</div></div><div>#elif HAVE_SYS_MMAN_H</div><div><div>  #include &lt;sys/mman.h&gt;</div></div><div>#else</div><div>  ....</div><div>#endif</div><div><br>
</div><div>-Paul<br clear="all"><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>
Future Technologies Group</div><div>Computer and Data Sciences Department     Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font>
</div></div>

