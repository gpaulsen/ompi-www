<div dir="ltr"><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">Nathan,</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">&gt; Looks like this is a scif bug. From the documentation: </p>
<p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">and from the source code, scif_poll(...) simply calls poll(...)</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">
at least in MPSS 2.1</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">&gt; Since that is not the case I will look through the documentation and see <br></p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">
if there is a way other than pthread_cancel. <br></p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"><br></p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">what about :</p>
<p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">- use a global variable (a boolean called &quot;close_requested&quot;)</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">
- update the scif thread so it checks close_requested after each scif_poll,</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">and exits if true</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">
- when closing btl/scif :</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"> * set close_requested to true</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">
 * scif_connect to myself</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"> * close this connection</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"> * pthread_join(...)</p>
<p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"><br></p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">that&#39;s a bit heavyweight, but it does the job</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">
( and we keep an infinite timeout for scif_poll() so overhead at runtime is null)</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"><br></p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">
i can test this approach from tomorrow if needed</p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px"><br></p><p style="color:rgb(0,0,0);font-family:verdana,arial,helvetica;font-size:12px">Gilles</p>
</div>

