<div dir="ltr">When running &quot;make dist&quot; (several times) today, I noticed the following:<div><br></div><span style="font-family:monospace,monospace"> - WARNING: Got bad config.guess from <a href="http://ftp.gnu.org">ftp.gnu.org</a> (non-existent or empty)</span><br><div><div><font face="monospace, monospace"> - WARNING: using included versions for both config.sub and config.guess</font></div></div><br>Nevermind for the moment that the wget is NOT from <a href="http://ftp.gnu.org">ftp.gnu.org</a> any longer.<div>The part that worried me is the &quot;non-existent or empty&quot; claim.</div><div><br></div><div>A quick look shows that logic in distscript.csh uses the non-portable &quot;-s&quot; operator[1].</div><div>One should be using &quot;-z&quot; instead of &quot;! -s&quot;:</div><div><br></div><div><div><font face="monospace, monospace">--- a/config/distscript.csh</font></div><div><font face="monospace, monospace">+++ b/config/distscript.csh</font></div><div><font face="monospace, monospace">@@ -108,14 +108,14 @@ chmod +x config.guess config.sub</font></div><div><font face="monospace, monospace"> # unreleased software...</font></div><div><font face="monospace, monospace"> </font></div><div><font face="monospace, monospace"> set happy=0</font></div><div><font face="monospace, monospace">-if (! -f config.guess || ! -s config.guess) then</font></div><div><font face="monospace, monospace">+if (! -f config.guess || -z config.guess) then</font></div><div><font face="monospace, monospace">     echo &quot; - WARNING: Got bad config.guess from <a href="http://ftp.gnu.org">ftp.gnu.org</a> (non-existent or empty)&quot;</font></div><div><font face="monospace, monospace"> else</font></div><div><font face="monospace, monospace">     ./config.guess &gt;&amp; /dev/null</font></div><div><font face="monospace, monospace">     if ($status != 0) then</font></div><div><font face="monospace, monospace">         echo &quot; - WARNING: Got bad config.guess from <a href="http://ftp.gnu.org">ftp.gnu.org</a> (not executable)&quot;</font></div><div><font face="monospace, monospace">     else</font></div><div><font face="monospace, monospace">-        if (! -f config.sub || ! -s config.sub) then</font></div><div><font face="monospace, monospace">+        if (! -f config.sub || -z config.sub) then</font></div><div><font face="monospace, monospace">             echo &quot; - WARNING: Got bad config.sub from <a href="http://ftp.gnu.org">ftp.gnu.org</a> (non-existent or empty)&quot;</font></div><div><font face="monospace, monospace">         else</font></div><div><font face="monospace, monospace">             ./config.sub `./config.guess` &gt;&amp; /dev/null</font></div></div><div><br></div><div><br></div><div>-Paul</div><div><br></div><div>[1] Two key excerpts from &quot;man 1 tcsh&quot;:</div><div><br></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div> Throughout  this  manual,  features  of  tcsh  not found in most csh(1)</div></div><div><div> implementations (specifically, the 4.4BSD csh) are labeled with  `(+)&#39;,</div></div></blockquote><div><br></div><div><br></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div> File inquiry operators</div></div><div><div>  [...]</div></div><div><div>           z   Zero size</div></div><div><div>           s   Non-zero size (+)</div></div></blockquote><div><div><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div></div></div>

