<div dir="ltr">Hello,<div><br></div><div>I did few more experiments.  Built-in atomics are disabled by default and can be enabled by &quot;--enable-builtin-atomics&quot;.  With this option, a different atomic file is include  (I mean, different from the other three mentioned in the earlier email).</div><div><br></div><div>opal/include/opal/sys/sync_builtin/atomic.h<br></div><div><br></div><div> By enabling &quot;--enable-builtin-atomics&quot;, the OpenMPI library will not only get the latest optimizations from GCC __sync functions, but also get all additional functions, such as &lt;<span style="font-size:medium;color:rgb(0,0,0);font-family:monospace">__sync_or_and_fetch</span>&gt;  &lt;<span style="font-size:medium;color:rgb(0,0,0);font-family:monospace">__sync_and_and_fetch</span>&gt; etc.  Also, this way, the arch/*.asm files need not be maintained.</div><div><br></div><div>Seems there is more of an advantage to have &quot;--enable-builtin-atomics&quot;.  Am I missing something ?  Please let me know your thoughts.</div><div><br></div><div>Thanks,</div><div>- Sreenidhi.</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Wed, Mar 30, 2016 at 10:33 AM, Sreenidhi Bharathkar Ramesh <span dir="ltr">&lt;<a href="mailto:sreenidhi-bharathkar.ramesh@broadcom.com" target="_blank">sreenidhi-bharathkar.ramesh@broadcom.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Hello,<div><br></div><div>With respect to atomic operations in assembly, I can see three source files, for the same AMD64 architecture.</div><div><br></div><div>1. opal/asm/base/AMD64.asm</div><div>2. opal/include/opal/sys/amd64/atomic.h</div><div>3. opal/include/opal/sys/atomic_impl.h</div><div><br></div><div>What is the need for three files ?  How are they inter-related ?</div><div><br></div><div>Please let me know.</div><div><br></div><div>Thanks,</div><div>- Sreenidhi.</div></div>
</blockquote></div><br></div>

