<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:p="urn:schemas-microsoft-com:office:powerpoint" xmlns:a="urn:schemas-microsoft-com:office:access" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema" xmlns:b="urn:schemas-microsoft-com:office:publisher" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:c="urn:schemas-microsoft-com:office:component:spreadsheet" xmlns:odc="urn:schemas-microsoft-com:office:odc" xmlns:oa="urn:schemas-microsoft-com:office:activation" xmlns:html="http://www.w3.org/TR/REC-html40" xmlns:q="http://schemas.xmlsoap.org/soap/envelope/" xmlns:rtc="http://microsoft.com/officenet/conferencing" xmlns:D="DAV:" xmlns:Repl="http://schemas.microsoft.com/repl/" xmlns:mt="http://schemas.microsoft.com/sharepoint/soap/meetings/" xmlns:x2="http://schemas.microsoft.com/office/excel/2003/xml" xmlns:ppda="http://www.passport.com/NameSpace.xsd" xmlns:ois="http://schemas.microsoft.com/sharepoint/soap/ois/" xmlns:dir="http://schemas.microsoft.com/sharepoint/soap/directory/" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:dsp="http://schemas.microsoft.com/sharepoint/dsp" xmlns:udc="http://schemas.microsoft.com/data/udc" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sub="http://schemas.microsoft.com/sharepoint/soap/2002/1/alerts/" xmlns:ec="http://www.w3.org/2001/04/xmlenc#" xmlns:sp="http://schemas.microsoft.com/sharepoint/" xmlns:sps="http://schemas.microsoft.com/sharepoint/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:udcs="http://schemas.microsoft.com/data/udc/soap" xmlns:udcxf="http://schemas.microsoft.com/data/udc/xmlfile" xmlns:udcp2p="http://schemas.microsoft.com/data/udc/parttopart" xmlns:wf="http://schemas.microsoft.com/sharepoint/soap/workflow/" xmlns:dsss="http://schemas.microsoft.com/office/2006/digsig-setup" xmlns:dssi="http://schemas.microsoft.com/office/2006/digsig" xmlns:mdssi="http://schemas.openxmlformats.org/package/2006/digital-signature" xmlns:mver="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns:mrels="http://schemas.openxmlformats.org/package/2006/relationships" xmlns:spwp="http://microsoft.com/sharepoint/webpartpages" xmlns:ex12t="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:ex12m="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:pptsl="http://schemas.microsoft.com/sharepoint/soap/SlideLibrary/" xmlns:spsl="http://microsoft.com/webservices/SharePointPortalServer/PublishedLinksService" xmlns:Z="urn:schemas-microsoft-com:" xmlns:st="&#1;" xmlns="http://www.w3.org/TR/REC-html40">

<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=us-ascii">
<meta name=Generator content="Microsoft Word 12 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
pre
	{mso-style-priority:99;
	mso-style-link:"HTML Preformatted Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
span.EmailStyle17
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-priority:99;
	mso-style-link:"HTML Preformatted";
	font-family:Consolas;}
span.EmailStyle20
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1" />
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple>

<div class=Section1>

<p class=MsoNormal><span style='color:#1F497D'>Fwd&#8217;ing to devel list as a bug
report&#8230;<o:p></o:p></span></p>

<p class=MsoNormal><span style='color:#1F497D'>Thanks.<o:p></o:p></span></p>

<div>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif";
color:#1F497D'>--------------------------------</span><span style='color:#1F497D'><o:p></o:p></span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Arial","sans-serif";
color:#1F497D'>Jacob M. Katz</span></b><span style='font-size:10.0pt;
font-family:"Arial","sans-serif";color:#1F497D'> | </span><span
style='font-size:10.0pt;font-family:"Arial","sans-serif";color:#1F497D'><a
href="mailto:jacob.katz@intel.com"><span style='color:#1F497D'>jacob.katz@intel.com</span></a>
| <b>Work:</b> +972-4-865-5726 | </span><b><span style='font-size:10.0pt;
font-family:"Arial","sans-serif";color:#1F497D'>iNet: </span></b><span
style='font-size:10.0pt;font-family:"Arial","sans-serif";color:#1F497D'>(8)-465-5726</span><span
style='color:#1F497D'><o:p></o:p></span></p>

</div>

<p class=MsoNormal><span style='color:#1F497D'><o:p>&nbsp;</o:p></span></p>

<div>

<div style='border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0in 0in 0in'>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Tahoma","sans-serif"'>From:</span></b><span
style='font-size:10.0pt;font-family:"Tahoma","sans-serif"'>
users-bounces@open-mpi.org [mailto:users-bounces@open-mpi.org] <b>On Behalf Of </b>Katz,
Jacob<br>
<b>Sent:</b> Sunday, May 10, 2009 12:52<br>
<b>To:</b> Open MPI Users<br>
<b>Subject:</b> [OMPI users] Bug in return status of MPI_WAIT()?<o:p></o:p></span></p>

</div>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Hi,<o:p></o:p></p>

<p class=MsoNormal>While trying error-related functionality of OMPI, I came
across a situation where when I use MPI_ERRORS_RETURN error handler, the errors
do not come out correctly from WAIT calls.<o:p></o:p></p>

<p class=MsoNormal>The program below correctly terminates with a fatal &#8220;message
truncated&#8221; error, but when the line setting the error handler to
MPI_ERRORS_RETURN is uncommented, it silently completes. I expected the print
out that checks the status after WAIT call to be executed, but it wasn&#8217;t.<o:p></o:p></p>

<p class=MsoNormal>The issue didn&#8217;t happen when using blocking recv.<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>A bug or my incorrect usage?<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Thanks!<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>// mpic++ -o test test.cpp<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>// mpirun -np2 ./test<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>#include &quot;mpi.h&quot;<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>#include &lt;iostream&gt;<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>using namespace std;<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>int main (int argc, char *argv[])<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>{<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; int rank;<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; char buf[100] =
&quot;hmmmm&quot;;<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; MPI::Status
stat;<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; MPI::Init(argc,
argv);<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; rank = MPI::COMM_WORLD.Get_rank();<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>//&nbsp;&nbsp;&nbsp;
MPI::COMM_WORLD.Set_errhandler(MPI::ERRORS_RETURN);<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; if (rank == 0) <o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; {<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MPI::Request r = MPI::COMM_WORLD.Irecv(buf, 1, MPI_CHAR, MPI::ANY_SOURCE,
MPI::ANY_TAG);<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;r.Wait(stat);<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (stat.Get_error() != MPI::SUCCESS)<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
cout &lt;&lt; &quot;0: Error during recv&quot; &lt;&lt; endl;<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; }<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; else<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; {<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MPI::COMM_WORLD.Send(buf, 2, MPI_CHAR, 0, 0);<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; }<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; MPI::Finalize();<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;&nbsp;&nbsp; return (0);<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>}<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>--------------------------------</span><o:p></o:p></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Jacob
M. Katz</span></b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>
| <a href="mailto:jacob.katz@intel.com"><span style='color:windowtext'>jacob.katz@intel.com</span></a>
| <b>Work:</b> +972-4-865-5726 | <b>iNet: </b>(8)-465-5726</span><o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

<pre>---------------------------------------------------------------------
Intel Israel (74) Limited

This e-mail and any attachments may contain confidential material for
the sole use of the intended recipient(s). Any review or distribution
by others is strictly prohibited. If you are not the intended
recipient, please contact the sender and delete all copies.
</pre></body>

</html>

