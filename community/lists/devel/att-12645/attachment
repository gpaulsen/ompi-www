<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Thanks Piotr - I'll apply that and move it to the 1.7 branch.<div><br></div><div><div>Some of us are trying to test the pmi2 support in 2.6.0 and hitting a problem. We have verified that the pmi2 support was built/installed, and that both slurmctld and slurmd are at 2.6.0 level. When we run "srun --mpi-list", we get:</div><div><br></div><div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: MPI types are...&nbsp;<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/mvapich<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/pmi2<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/mpich1_shmem<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/mpich1_p4<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/none<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/lam<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/openmpi<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/mpichmx<o:p></o:p></span></div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">srun: mpi/mpichgm<o:p></o:p></span></div></div><div><br></div><div><font color="#1f497d">So it looks like the install is correct. However, when we attempt to run a job with "srun --mpi=pmi2 foo", we get an error from the slurmd on the remote node:</font></div><div><font color="#1f497d"><br></font></div><div><div style="margin: 0in 0in 0.0001pt; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); ">slurmd[n1]: mpi/pmi2: no value for key&nbsp; in req<o:p></o:p></span></div></div><div><span style="font-size: 11pt; font-family: Consolas; color: rgb(31, 73, 125); "><br></span></div><div><span style="color: rgb(31, 73, 125); ">and the PMI calls in the app fail. Any ideas as to the source of the problem? Do we have to configure something else, or start slurmd with some option?</span></div><div><span style="color: rgb(31, 73, 125); "><br></span></div><div><span style="color: rgb(31, 73, 125); ">Thanks</span></div><div><span style="color: rgb(31, 73, 125); ">Ralph</span></div><div><span style="color: rgb(31, 73, 125); "><br></span></div><img src="http://smd-server/cgi-bin/dada/mail.cgi/spacer_image/slurmdev/20130717131607/spacer.png" width="1" height="1"><br><div><div>On Jul 18, 2013, at 2:02 AM, Piotr Lesnicki &lt;<a href="mailto:piotr.lesnicki@ext.bull.net">piotr.lesnicki@ext.bull.net</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">Hello,<br><br>I think there a few things still missing in openmpi pmi2 to make it work with slurm. We are the ones at Bull who integrated the pmi2 code from mpich2 to slurm. The attached patch should fix the issue (call slurm with --mpi=pmi2). This still needs to be checked with other pmi2 implemenations (we use pmi2.h but some use pmi.h ? constants are prefixed with PMI2_ but some use PMI_ ?).<br><br>Piotr Lesnicki<br><span>&lt;pmi2.patch&gt;</span></blockquote></div><br></div></body></html>
