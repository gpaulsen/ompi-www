<div dir="ltr">I am using Oracle&#39;s Studio 12.4 compilers for Linux/x86-64 to build the current master tarball.<div>However, I am passing &quot;-m32&quot; to generate x86 (ILP32 ABI) executables.</div><div><br></div><div>The full configure mess is:</div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><font face="monospace, monospace" size="1">--prefix=[...] --enable-debug \</font></div><div><span style="font-family:monospace,monospace;font-size:x-small">CC=cc  CFLAGS=&quot;-m32&quot;   --with-wrapper-cflags=&quot;-m32&quot; \</span><br></div><div><font face="monospace, monospace" size="1">CXX=CC CXXFLAGS=&quot;-m32&quot; --with-wrapper-cxxflags=&quot;-m32&quot; \</font></div><div><font face="monospace, monospace" size="1">FC=f90 FCFLAGS=&quot;-m32&quot;  --with-wrapper-fcflags=&quot;-m32&quot;</font></div></blockquote><div><br clear="all"><div>The failing output from &quot;make V=1&quot; is</div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div><div><font face="monospace, monospace" size="1">/bin/sh ../../../libtool  --tag=CC   --mode=link cc  -m32 -g -mt  -export-dynamic    -o opal_wrapper opal_wrapper.o ../../../opal/<a href="http://libopen-pal.la">libopen-pal.la</a> -lrt -lm -lutil   -lrt -lm -lutil</font></div></div></div><div><div><div><font face="monospace, monospace" size="1">libtool: link: cc -m32 -g -mt -o .libs/opal_wrapper opal_wrapper.o -Wl,--export-dynamic  ../../../opal/.libs/libopen-pal.so -ldl -lrt -lm -lutil -mt -Wl,-rpath -Wl,/scratch/phargrov/OMPI/openmpi-master-linux-x86_64-ss12u4-m32/INST/lib</font></div></div></div><div><div><div><font face="monospace, monospace" size="1">../../../opal/.libs/libopen-pal.so: undefined reference to `ebx&#39;</font></div></div></div></blockquote><div><div><br></div><div>Now clearly &quot;ebx&quot; should be referring to the CPU register, not an external symbol, right?</div><div>HOWEVER, in x86 PIC code (e.g. a .so file) one CANNOT generally use &#39;ebx&#39; in inline asm because it is used as the GOT pointer.</div><div>So, their might be more than one problem here.</div><div><br></div><div>The same is seen with the older Studio 12.3 compilers for Linux.</div><div>However, the problem is *NOT* seen with Studio 12.3 compilers on Solaris-11 and the identical configure options. </div><div><br></div><div>-Paul</div><div><br></div><div>BTW:</div><div>Can somebody tell me if I really need to specify &quot;-m32&quot; in *both* CFLAGS and --with-wrapper-cflags (etc.)?</div><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div></div>

