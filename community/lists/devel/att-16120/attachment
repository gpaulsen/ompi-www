<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Oct 28, 2014, at 1:05 PM, Howard Pritchard &lt;<a href="mailto:hppritcha@gmail.com" class="">hppritcha@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Hi Folks,<div class=""><br class=""></div><div class="">The simplest and best way on cray is to use the pkg-config command.</div><div class="">No looking for odd header file names, etc.&nbsp; There is a minor issue</div><div class="">with external login nodes running very old (like CLE 4.X) that one has</div><div class="">to workaround, but otherwise works well.</div><div class=""><br class=""></div><div class="">pkg-config --cflags cray-pmi</div><div class=""><br class=""></div><div class="">etc. etc.</div><div class=""><br class=""></div><div class="">The pc files for the various cray software packages are suppose to include</div><div class="">all dependencies on headers files, libs, etc. from other cay packages.</div></div></div></blockquote><div><br class=""></div>Given that difference, perhaps you should just add a —with flag that specifically addresses Cray? We can’t use that method for Slurm or any other PMI-based system, and I’m not sure how you can generalize things adequately.</div><div><br class=""><blockquote type="cite" class=""><div class=""><div dir="ltr" class=""><div class=""><br class=""></div><div class="">Howard</div><div class=""><br class=""></div><div class=""><br class=""></div><div class=""><br class=""></div><div class=""><div class="gmail_extra"><br class=""><div class="gmail_quote">2014-10-28 13:20 GMT-06:00 Ralph Castain <span dir="ltr" class="">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt;</span>:<br class=""><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word" class=""><br class=""><div class=""><blockquote type="cite" class=""><div class="">On Oct 28, 2014, at 12:17 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" target="_blank" class="">phhargrove@lbl.gov</a>&gt; wrote:</div><br class=""><div class=""><div dir="ltr" class="">Ralph,<div class=""><br class=""></div><div class="">The Cray's at NERSC have *both* pmi_cray.h and pmi.h (and pmi2.h as well).</div></div></div></blockquote><div class=""><br class=""></div>I understand that - I was questioning if that is universally true or not. IF we are guaranteed that nobody with a Cray ever renames pmi_cray.h to pmi.h, THEN your check will be fine. Otherwise, we can’t trust it.</div><div class=""><br class=""></div><div class="">And I seem to recall that the earlier Crays, at least, didn’t have this naming distinction - or at least, not at LANL. Hence my question.</div><div class=""><br class=""></div><div class=""><br class=""></div><div class=""><blockquote type="cite" class=""><div class=""><div dir="ltr" class=""><div class="">That is why I said our configure logic checks for pmi_cray.h *first*.</div><div class="">Sorry if that wasn't clear.</div><div class=""><br class=""></div><div class="">On NERSC's XE6:</div><blockquote style="margin:0 0 0 40px;border:none;padding:0px" class=""><div class=""><div class=""><font face="courier new, monospace" size="1" class="">{hargrove@hopper06 ~}$ ls /opt/cray/pmi/default/include/</font></div></div><div class=""><div class=""><font face="courier new, monospace" size="1" class="">pmi2.h &nbsp;pmi_cray_ext.h &nbsp;pmi_cray.h &nbsp;pmi.h &nbsp;pmi_version.h</font></div></div><div class=""><div class=""><font face="courier new, monospace" size="1" class="">{hargrove@hopper06 ~}$ rpm -qf /opt/cray/pmi/default/include/pmi_cray.h</font></div></div><div class=""><div class=""><font face="courier new, monospace" size="1" class="">cray-libpmi-devel-4.0.1-1.0000.9753.86.3.gem</font></div></div></blockquote><div class=""><br class=""></div><div class="">On NERSC's XC30:</div><blockquote style="margin:0 0 0 40px;border:none;padding:0px" class=""><div class=""><div class=""><font face="courier new, monospace" size="1" class="">{hargrove@edison08 ~}$ ls /opt/cray/pmi/default/include/</font></div></div><div class=""><div class=""><font face="courier new, monospace" size="1" class="">pmi.h &nbsp;pmi2.h &nbsp;pmi_cray.h &nbsp;pmi_cray_ext.h &nbsp;pmi_version.h</font></div></div><div class=""><div class=""><font face="courier new, monospace" size="1" class="">{hargrove@edison08 ~}$ rpm -qf /opt/cray/pmi/default/include/pmi_cray.h</font></div></div><div class=""><div class=""><font face="courier new, monospace" size="1" class="">cray-libpmi-devel-5.0.5-1.0000.10300.134.8.ari</font></div></div></blockquote><div class=""><br class=""></div><div class="">-Paul</div><div class="gmail_extra"><br class=""><div class="gmail_quote">On Tue, Oct 28, 2014 at 12:02 PM, Ralph Castain <span dir="ltr" class="">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div style="word-wrap:break-word" class=""><br class=""><div class=""><blockquote type="cite" class=""><div class="">On Oct 28, 2014, at 11:59 AM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" target="_blank" class="">phhargrove@lbl.gov</a>&gt; wrote:</div><br class=""><div class=""><div dir="ltr" class=""><div class="gmail_extra"><br class=""><div class="gmail_quote">On Tue, Oct 28, 2014 at 11:53 AM, Howard Pritchard <span dir="ltr" class="">&lt;<a href="mailto:hppritcha@gmail.com" target="_blank" class="">hppritcha@gmail.com</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><br class="">
We may no longer require those as you have separated the Cray check out, but the original problem is that we would pickup the Slurm components on the Cray because we would find pmi.h<br class="">
<br class=""></blockquote><div class="">Oh, &nbsp;I forgot about that .&nbsp;</div></blockquote></div><br class="">In GASNet's configure logic we look for "pmi_cray.h" before "pmi.h”.</div></div></div></blockquote><div class=""><br class=""></div>Hmmm…on LANL’s Cray systems, it was still labeled “pmi.h”</div><div class=""><br class=""><blockquote type="cite" class=""><div class=""><div dir="ltr" class=""><div class="gmail_extra">So far that has been sufficient to disambiguate the implementations.</div><div class="gmail_extra">One might also try checking libpmi for Cray's extensions.</div><div class="gmail_extra"><br class=""></div><div class="gmail_extra">-Paul<br class=""><br clear="all" class=""><span class=""><font color="#888888" class=""><div class=""><br class=""></div>-- <br class=""><font face="courier new, monospace" class=""><div class="">Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank" class="">PHHargrove@lbl.gov</a></div><div class="">Future Technologies Group</div><div class="">Computer and Data Sciences Department &nbsp; &nbsp; Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank" class="">+1-510-495-2352</a></div><div class="">Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank" class="">+1-510-486-6900</a></div></font>
</font></span></div></div><span class=""><font color="#888888" class="">
_______________________________________________<br class="">devel mailing list<br class=""><a href="mailto:devel@open-mpi.org" target="_blank" class="">devel@open-mpi.org</a><br class="">Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16114.php" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2014/10/16114.php</a></font></span></div></blockquote></div><br class=""></div><br class="">_______________________________________________<br class="">
devel mailing list<br class="">
<a href="mailto:devel@open-mpi.org" target="_blank" class="">devel@open-mpi.org</a><br class="">
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16115.php" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2014/10/16115.php</a><br class=""></blockquote></div><br class=""><br clear="all" class=""><span class="HOEnZb"><font color="#888888" class=""><div class=""><br class=""></div>-- <br class=""><font face="courier new, monospace" class=""><div class="">Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank" class="">PHHargrove@lbl.gov</a></div><div class="">Future Technologies Group</div><div class="">Computer and Data Sciences Department &nbsp; &nbsp; Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank" class="">+1-510-495-2352</a></div><div class="">Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank" class="">+1-510-486-6900</a></div></font>
</font></span></div></div><span class="HOEnZb"><font color="#888888" class="">
_______________________________________________<br class="">devel mailing list<br class=""><a href="mailto:devel@open-mpi.org" target="_blank" class="">devel@open-mpi.org</a><br class="">Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16116.php" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2014/10/16116.php</a></font></span></div></blockquote></div><br class=""></div><br class="">_______________________________________________<br class="">
devel mailing list<br class="">
<a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16117.php" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2014/10/16117.php</a><br class=""></blockquote></div><br class=""></div></div></div>
_______________________________________________<br class="">devel mailing list<br class=""><a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/devel<br class="">Link to this post: http://www.open-mpi.org/community/lists/devel/2014/10/16118.php</div></blockquote></div><br class=""></body></html>
