<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div><div>This bug applies to OpenMPI 1.4.x and 1.5.x.</div><div><br></div></div><div>Inline assembly does not work for PGI compilers. &nbsp;configure disables inline assembly for PGI C, but neglects to do the same for PGI C++. &nbsp;The code that disables inline assembly for PGI C needs to be copied to the section that handles inline assembly for C++.</div><div><br></div>Here's the diff -u from OpenMPI 1.4.3 (same code, same bug):<div><br></div><div><div><blockquote type="cite"></blockquote></div></div><blockquote type="cite"><div><font class="Apple-style-span" color="#000000">[root@hydra openmpi-1.4.3]# diff -u configure{.original,}</font></div><div><font class="Apple-style-span" color="#000000">--- configure.original</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">	</font></span><font class="Apple-style-span" color="#000000">2010-10-05 15:48:18.000000000 -0700</font></div><div><font class="Apple-style-span" color="#000000">+++ configure</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">	</font></span><font class="Apple-style-span" color="#000000">2011-05-17 18:35:04.000000000 -0700</font></div><div><font class="Apple-style-span" color="#000000">@@ -34690,6 +34690,11 @@</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; { $as_echo "$as_me:$LINENO: checking if $CXX supports GCC inline assembly" &gt;&amp;5</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;$as_echo_n "checking if $CXX supports GCC inline assembly... " &gt;&amp;6; }</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;</font></div><div><font class="Apple-style-span" color="#000000">+ &nbsp; &nbsp;if test "$ompi_cv_cxx_compiler_vendor" = "portland group" ; then</font></div><div><font class="Apple-style-span" color="#000000">+ &nbsp; &nbsp; &nbsp; &nbsp;# PGI seems to have some issues with our inline assembly.</font></div><div><font class="Apple-style-span" color="#000000">+ &nbsp; &nbsp; &nbsp; &nbsp;# Disable for now.</font></div><div><font class="Apple-style-span" color="#000000">+ &nbsp; &nbsp; &nbsp; &nbsp;asm_result="no (Portland Group)"</font></div><div><font class="Apple-style-span" color="#000000">+ &nbsp; &nbsp;else</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; case $host in</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; *-aix*)</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # the AIX compilers and linkers really don't do gcc</font></div><div><font class="Apple-style-span" color="#000000">@@ -34813,6 +34818,7 @@</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; &nbsp; conftest$ac_exeext conftest.$ac_ext</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; fi</font></div><div><font class="Apple-style-span" color="#000000">+ &nbsp; &nbsp;fi</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; { $as_echo "$as_me:$LINENO: result: $asm_result" &gt;&amp;5</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;$as_echo "$asm_result" &gt;&amp;6; }</font></div></blockquote><div><div><br></div></div><div apple-content-edited="true"> <div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div><div><div><div><div><div><div><div><div><div>Larry Baker</div><div>US Geological Survey</div><div>650-329-5608</div><div><a href="mailto:baker@usgs.gov">baker@usgs.gov</a></div></div></div></div></div></div></div></div></div></div></div> </div><br><div><div>On 5 May 2011, at 7:15 AM, Jeff Squyres wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div>Fixed the ROMIO attribute problem properly this time -- it's in the usual place:<br><br> &nbsp;&nbsp;&nbsp;<a href="http://www.open-mpi.org/software/ompi/v1.4/">http://www.open-mpi.org/software/ompi/v1.4/</a><br><br>-- <br>Jeff Squyres<br><a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a><br>For corporate legal information go to:<br>http://www.cisco.com/web/about/doing_business/legal/cri/<br><br><br>_______________________________________________<br>devel mailing list<br>devel@open-mpi.org<br>http://www.open-mpi.org/mailman/listinfo.cgi/devel<br></div></blockquote></div><br></body></html>
