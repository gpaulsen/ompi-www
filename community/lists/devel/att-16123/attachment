<div dir="ltr">By Howard&#39;s definition I guess NERSC&#39;s Hopper (XE6) qualifies as &quot;very old&quot; at PrgEnv 4.2.34<div><br></div><div><div>{hargrove@hopper06 ~}$ pkg-config --cflags cray-pmi</div><div>Package cray-alpslli was not found in the pkg-config search path.</div><div>Perhaps you should add the directory containing `cray-alpslli.pc&#39;</div><div>to the PKG_CONFIG_PATH environment variable</div><div>Package &#39;cray-alpslli&#39;, required by &#39;cray-pmi&#39;, not found</div></div><div><br></div><div>-Paul</div><div><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Oct 28, 2014 at 1:05 PM, Howard Pritchard <span dir="ltr">&lt;<a href="mailto:hppritcha@gmail.com" target="_blank">hppritcha@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Hi Folks,<div><br></div><div>The simplest and best way on cray is to use the pkg-config command.</div><div>No looking for odd header file names, etc.&nbsp; There is a minor issue</div><div>with external login nodes running very old (like CLE 4.X) that one has</div><div>to workaround, but otherwise works well.</div><div><br></div><div>pkg-config --cflags cray-pmi</div><div><br></div><div>etc. etc.</div><div><br></div><div>The pc files for the various cray software packages are suppose to include</div><div>all dependencies on headers files, libs, etc. from other cay packages.</div><div><br></div><div>Howard</div><div><br></div><div><br></div><div><br></div><div><div class="gmail_extra"><br><div class="gmail_quote">2014-10-28 13:20 GMT-06:00 Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span>:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div><div class="h5"><div style="word-wrap:break-word"><br><div><blockquote type="cite"><div>On Oct 28, 2014, at 12:17 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt; wrote:</div><br><div><div dir="ltr">Ralph,<div><br></div><div>The Cray&#39;s at NERSC have *both* pmi_cray.h and pmi.h (and pmi2.h as well).</div></div></div></blockquote><div><br></div>I understand that - I was questioning if that is universally true or not. IF we are guaranteed that nobody with a Cray ever renames pmi_cray.h to pmi.h, THEN your check will be fine. Otherwise, we can&rsquo;t trust it.</div><div><br></div><div>And I seem to recall that the earlier Crays, at least, didn&rsquo;t have this naming distinction - or at least, not at LANL. Hence my question.</div><div><br></div><div><br></div><div><blockquote type="cite"><div><div dir="ltr"><div>That is why I said our configure logic checks for pmi_cray.h *first*.</div><div>Sorry if that wasn&#39;t clear.</div><div><br></div><div>On NERSC&#39;s XE6:</div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div><font face="courier new, monospace" size="1">{hargrove@hopper06 ~}$ ls /opt/cray/pmi/default/include/</font></div></div><div><div><font face="courier new, monospace" size="1">pmi2.h &nbsp;pmi_cray_ext.h &nbsp;pmi_cray.h &nbsp;pmi.h &nbsp;pmi_version.h</font></div></div><div><div><font face="courier new, monospace" size="1">{hargrove@hopper06 ~}$ rpm -qf /opt/cray/pmi/default/include/pmi_cray.h</font></div></div><div><div><font face="courier new, monospace" size="1">cray-libpmi-devel-4.0.1-1.0000.9753.86.3.gem</font></div></div></blockquote><div><br></div><div>On NERSC&#39;s XC30:</div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div><font face="courier new, monospace" size="1">{hargrove@edison08 ~}$ ls /opt/cray/pmi/default/include/</font></div></div><div><div><font face="courier new, monospace" size="1">pmi.h &nbsp;pmi2.h &nbsp;pmi_cray.h &nbsp;pmi_cray_ext.h &nbsp;pmi_version.h</font></div></div><div><div><font face="courier new, monospace" size="1">{hargrove@edison08 ~}$ rpm -qf /opt/cray/pmi/default/include/pmi_cray.h</font></div></div><div><div><font face="courier new, monospace" size="1">cray-libpmi-devel-5.0.5-1.0000.10300.134.8.ari</font></div></div></blockquote><div><br></div><div>-Paul</div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Oct 28, 2014 at 12:02 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div style="word-wrap:break-word"><br><div><blockquote type="cite"><div>On Oct 28, 2014, at 11:59 AM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt; wrote:</div><br><div><div dir="ltr"><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Oct 28, 2014 at 11:53 AM, Howard Pritchard <span dir="ltr">&lt;<a href="mailto:hppritcha@gmail.com" target="_blank">hppritcha@gmail.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><br>
We may no longer require those as you have separated the Cray check out, but the original problem is that we would pickup the Slurm components on the Cray because we would find pmi.h<br>
<br></blockquote><div>Oh, &nbsp;I forgot about that .&nbsp;</div></blockquote></div><br>In GASNet&#39;s configure logic we look for &quot;pmi_cray.h&quot; before &quot;pmi.h&rdquo;.</div></div></div></blockquote><div><br></div>Hmmm&hellip;on LANL&rsquo;s Cray systems, it was still labeled &ldquo;pmi.h&rdquo;</div><div><br><blockquote type="cite"><div><div dir="ltr"><div class="gmail_extra">So far that has been sufficient to disambiguate the implementations.</div><div class="gmail_extra">One might also try checking libpmi for Cray&#39;s extensions.</div><div class="gmail_extra"><br></div><div class="gmail_extra">-Paul<br><br clear="all"><span><font color="#888888"><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Future Technologies Group</div><div>Computer and Data Sciences Department &nbsp; &nbsp; Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font>
</font></span></div></div><span><font color="#888888">
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16114.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/10/16114.php</a></font></span></div></blockquote></div><br></div><br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16115.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/10/16115.php</a><br></blockquote></div><br><br clear="all"><span><font color="#888888"><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Future Technologies Group</div><div>Computer and Data Sciences Department &nbsp; &nbsp; Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font>
</font></span></div></div><span><font color="#888888">
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16116.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/10/16116.php</a></font></span></div></blockquote></div><br></div><br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16117.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/10/16117.php</a><br></blockquote></div><br></div></div></div>
<br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/10/16118.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/10/16118.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Future Technologies Group</div><div>Computer and Data Sciences Department &nbsp; &nbsp; Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font>
</div>

