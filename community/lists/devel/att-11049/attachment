<div dir="ltr"><div><font size="3" face="Times New Roman"></font> </div><div><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3"><font face="Calibri">Not good:</font></font></span></p>

<font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri"> </font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3"><font face="Calibri">/labhome/alexm/workspace/openmpi-1.6.1a1hge06c2f2a0859/inst/bin/mpirun
--host h-qa-017,h-qa-017,h-qa-017,h-qa-017,h-qa-018,h-qa-018,h-qa-018,h-qa-018
-np 8 --bind-to-core -bynode -display-map
/usr/mpi/gcc/mlnx-openmpi-1.6rc4/tests/osu_benchmarks-3.1.1/osu_alltoall</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri"> </font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span>========================<span style>   </span>JOB MAP<span style>  
</span>========================</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri"> </font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span>Data for node: h-qa-017<span style>               </span>Num procs: 4</font></font></span></p>

<font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span><span style>               </span>Process
OMPI jobid: [36855,1] Process rank: 0</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span><span style>               </span>Process
OMPI jobid: [36855,1] Process rank: 2</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span><span style>               </span>Process
OMPI jobid: [36855,1] Process rank: 4</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span><span style>               </span>Process
OMPI jobid: [36855,1] Process rank: 6</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri"> </font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span>Data for node: h-qa-018<span style>               </span>Num procs: 4</font></font></span></p>

<font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span><span style>               </span>Process
OMPI jobid: [36855,1] Process rank: 1</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span><span style>               </span>Process
OMPI jobid: [36855,1] Process rank: 3</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span><span style>               </span>Process
OMPI jobid: [36855,1] Process rank: 5</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span><span style>               </span>Process
OMPI jobid: [36855,1] Process rank: 7</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri"> </font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3"><span style> </span>=============================================================</font></font></span></p>

<font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3"><font face="Calibri">--------------------------------------------------------------------------</font></font></span></p>

<font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3"><font face="Calibri">An invalid physical processor ID
was returned when attempting to bind</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3"><font face="Calibri">an MPI process to a unique
processor.</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri"> </font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3"><font face="Calibri">This usually means that you
requested binding to more processors than</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3"><font face="Calibri">exist (e.g., trying to bind N
MPI processes to M processors, where N &gt;</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font face="Calibri"><font size="3">M).<span style>  </span>Double check that you have enough unique
processors for all the</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3"><font face="Calibri">MPI processes that you are launching
on this host.</font></font></span></p><font size="3" face="Times New Roman">

</font><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri"> </font></span></p><p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri"></font></span> </p>

<p style="margin:0in 0in 0pt" class="MsoNormal"><span style="color:rgb(31,73,125)"><font size="3" face="Calibri">$hwloc-ls --of console<br></font></span><span style="color:rgb(31,73,125)">Machine (32GB)<br>  NUMANode L#0 (P#0 16GB) + Socket L#0 + L3 L#0 (20MB) + L2 L#0 (256KB) + L1 L#0 (32KB) + Core L#0<br>

    PU L#0 (P#0)<br>    PU L#1 (P#2)<br>  NUMANode L#1 (P#1 16GB) + Socket L#1 + L3 L#1 (20MB) + L2 L#1 (256KB) + L1 L#1 (32KB) + Core L#1<br>    PU L#2 (P#1)<br>    PU L#3 (P#3)<br></span></p><font size="3" face="Times New Roman">

</font><br><br></div><div class="gmail_quote">On Tue, May 29, 2012 at 11:00 PM, Jeff Squyres <span dir="ltr">&lt;<a href="mailto:jsquyres@cisco.com" target="_blank">jsquyres@cisco.com</a>&gt;</span> wrote:<br><blockquote style="margin:0px 0px 0px 0.8ex;padding-left:1ex;border-left-color:rgb(204,204,204);border-left-width:1px;border-left-style:solid" class="gmail_quote">

Per ticket #3108, there were still some unfortunate bugs in the affinity code in 1.6.  :-(<br>
<br>
These have now been fixed.  ...but since is the 2nd or 3rd time we have &quot;fixed&quot; the 1.5/1.6 series w.r.t. processor affinity, I&#39;d really like people to test this stuff before it&#39;s committed and we ship 1.6.1.  I&#39;ve put tarballs containing the fixes here:<br>


<br>
    <a href="http://www.open-mpi.org/~jsquyres/unofficial/" target="_blank">http://www.open-mpi.org/~jsquyres/unofficial/</a><br>
<br>
Can you please try mpirun options like --bind-to-core and --bind-to-socket and ensure that they still work for you?  (even on machines with hyperthreading enabled, if you have access to such things)<br>
<br>
IBM: I&#39;d particularly like to hear that we haven&#39;t made anything worse on POWER systems.  Thanks.<br>
<span class="HOEnZb"><font color="#888888"><br>
--<br>
Jeff Squyres<br>
<a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a><br>
For corporate legal information go to: <a href="http://www.cisco.com/web/about/doing_business/legal/cri/" target="_blank">http://www.cisco.com/web/about/doing_business/legal/cri/</a><br>
<br>
<br>
_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
<a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
</font></span></blockquote></div><br></div>

