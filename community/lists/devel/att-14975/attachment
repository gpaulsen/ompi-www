<div dir="ltr"><div><div><div><div>Folks,<br><br></div>on my single socket four cores VM (no batch manager), i am running the intercomm_create test from the ibm test suite.<br><br></div>mpirun -np 1 ./intercomm_create<br></div>
=&gt; OK<br><br>mpirun -np 2 ./intercomm_create<br></div>=&gt; HANG :-(<br><br>mpirun -np 2 --mca coll ^ml  ./intercomm_create<br><div><div>=&gt; OK<br><br></div><div>basically, this first two tasks will call twice MPI_Comm_spawn(2 tasks) followed by MPI_Intercomm_merge<br>
and the 4 spawned tasks will call MPI_Intercomm_merge followed by MPI_Intercomm_create<br><br></div><div>i digged a bit into that issue and found two distinct issues :<br></div><div><br>1) binding :<br></div><div>tasks [0-1] (launched with mpirun) are bound on cores [0-1] =&gt; OK<br>
tasks[2-3] (first spawn) are bound on cores [0-1] =&gt; ODD, i would have expected [2-3]<br></div><div>tasks[4-5] (second spawn) are not bound at all =&gt; ODD again, could have made sense if tasks[2-3] were bound on cores [2-3]<br>
</div><div>i observe the same behaviour  with the --oversubscribe mpirun parameter<br><br></div><div>2) coll/ml<br></div><div>coll/ml hangs when -np 2 (total 6 tasks, including 2 unbound tasks)<br></div><div>i suspect coll/ml is unable to handle unbound tasks.<br>
</div><div>if i am correct, should coll/ml detect this and simply automatically disqualify itself ?<br><br></div><div>Cheers,<br><br>Gilles<br></div><div><br></div></div></div>

