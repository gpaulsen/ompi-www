<html><head><meta http-equiv="Content-Type" content="text/html charset=us-ascii"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">Fix setup here:&nbsp;<a href="https://github.com/open-mpi/ompi-release/pull/1129" class="">https://github.com/open-mpi/ompi-release/pull/1129</a><div class=""><br class=""></div><div class=""><br class=""><div style=""><blockquote type="cite" class=""><div class="">On May 2, 2016, at 5:13 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" class="">phhargrove@lbl.gov</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">AFTER fixing the inline asm problem detailed in&nbsp;<a href="https://www.open-mpi.org/community/lists/devel/2016/05/18886.php" class="">https://www.open-mpi.org/community/lists/devel/2016/05/18886.php</a>, I still cannot build with xlc.<div class="">The issue arises in the pmix code and originates from a disagreement between pmix_hash_table.h and pmix_hash_table.c.</div><div class=""><br class=""></div><div class="">The header declares 8 functions with a return type of "pmix_status_t" (which is an enum), while pmix_hash_table.c defines the same functions with a return type of "int".&nbsp; Meanwhile 1 function has the "opposite" problem (integer decl vs enum defn).</div><div class=""><br class=""></div><div class="">The errors seen:</div><div class=""><br class=""></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">libtool: compile: &nbsp;xlc -DHAVE_CONFIG_H -I. -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix -I./include/private/autogen -I./include/pmix/autogen -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/BLD/opal/mca/pmix/pmix112/pmix -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/include -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/BLD/opal/mca/pmix/pmix112/pmix/include -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2 -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/BLD -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/include -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/BLD/opal/include -D_REENTRANT -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/hwloc/hwloc1112/hwloc/include -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/BLD/opal/mca/hwloc/hwloc1112/hwloc/include -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/event/libevent2022/libevent -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/event/libevent2022/libevent/include -I/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/BLD/opal/mca/event/libevent2022/libevent/include -q64 -g -c /home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c -Wp,-qmakedep=gcc,-MFsrc/class/.deps/pmix_hash_table.TPlo &nbsp;-qpic -DPIC -o src/class/.libs/pmix_hash_table.o</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 73.15: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_init differs from previous declaration on line 73 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 73.15: 1506-050 (I) Return type "enum {...}" in redeclaration is not compatible with the previous return type "int".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 299.5: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_remove_value_uint64 differs from previous declaration on line 181 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 299.5: 1506-050 (I) Return type "int" in redeclaration is not compatible with the previous return type "enum {...}".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 365.5: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_get_value_ptr differs from previous declaration on line 196 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 365.5: 1506-050 (I) Return type "int" in redeclaration is not compatible with the previous return type "enum {...}".</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 392.5: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_set_value_ptr differs from previous declaration on line 209 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 392.5: 1506-050 (I) Return type "int" in redeclaration is not compatible with the previous return type "enum {...}".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 433.5: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_remove_value_ptr differs from previous declaration on line 220 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 433.5: 1506-050 (I) Return type "int" in redeclaration is not compatible with the previous return type "enum {...}".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 466.1: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_get_first_key_uint32 differs from previous declaration on line 245 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 466.1: 1506-050 (I) Return type "int" in redeclaration is not compatible with the previous return type "enum {...}".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 493.1: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_get_next_key_uint32 differs from previous declaration on line 263 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 493.1: 1506-050 (I) Return type "int" in redeclaration is not compatible with the previous return type "enum {...}".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 538.1: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_get_first_key_uint64 differs from previous declaration on line 281 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 538.1: 1506-050 (I) Return type "int" in redeclaration is not compatible with the previous return type "enum {...}".</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 565.1: 1506-343 (S) Redeclaration of opal_pmix_pmix112_pmix_hash_table_get_next_key_uint64 differs from previous declaration on line 299 of "/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.h".</font></div><div class=""><font face="monospace, monospace" size="1" class="">"/home/hargrove/SCRATCH/OMPI/openmpi-2.0.0rc2-linux-ppc64-xlc-12.1/openmpi-2.0.0rc2/opal/mca/pmix/pmix112/pmix/src/class/pmix_hash_table.c", line 565.1: 1506-050 (I) Return type "int" in redeclaration is not compatible with the previous return type "enum {...}".</font></div><div class=""><font face="monospace, monospace" size="1" class="">make[4]: *** [src/class/pmix_hash_table.lo] Error 1</font></div></div><div class=""><br class=""></div><div class=""><br class=""></div><div class="">I suspect that all of these functions should be returning the enum type.<br class=""></div><div class=""><br class=""></div><div class="">-Paul</div><div class=""><div class=""><br class=""></div>-- <br class=""><div class="gmail_signature"><div dir="ltr" class=""><div class=""><font face="courier new, monospace" class=""><div class="">Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank" class="">PHHargrove@lbl.gov</a></div><div class="">Computer Languages &amp; Systems Software (CLaSS) Group</div><div class="">Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: +1-510-495-2352</div><div class="">Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font></div></div></div>
</div></div>
_______________________________________________<br class="">devel mailing list<br class=""><a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">Subscription: https://www.open-mpi.org/mailman/listinfo.cgi/devel<br class="">Link to this post: http://www.open-mpi.org/community/lists/devel/2016/05/18887.php</div></blockquote></div><br class=""></div></body></html>
