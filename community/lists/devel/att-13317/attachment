<html><head><meta http-equiv="Content-Type" content="text/html charset=windows-1252"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">The cuda support in the 1.7 series has been evolving - a number of patches have been applied since 1.7.3 was released, and I see another (for optimization) scheduled.<div><br></div><div>You might try the 1.7.4 nightly tarball and see if the problem has been fixed.</div><div><br></div><div><br><div><div>On Nov 24, 2013, at 7:11 AM, Jörg Bornschein &lt;<a href="mailto:jb@capsec.org">jb@capsec.org</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div style="font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">On 23.11.2013, at 22:56, Dmitry N. Mikushin &lt;<a href="mailto:maemarcus@gmail.com">maemarcus@gmail.com</a>&gt; wrote:<br><br><blockquote type="cite">VT is getting out of sync with CUDA from time to time, this already<br>happened before.<br></blockquote><br>Yes, thats what I thought and thats why I didn’t mention it as my main issue.<span class="Apple-converted-space">&nbsp;</span><br><br><br><br>I’m rather stuck because cuda support and ob1 don’t seem to fit together — at least on my systems.<br><br><br>&nbsp;&nbsp;j<br><br><br><br><blockquote type="cite">- D.<br><br><br>2013/11/24 Jörg Bornschein &lt;<a href="mailto:jb@capsec.org">jb@capsec.org</a>&gt;:<br><blockquote type="cite">On 23.11.2013, at 21:42, Jörg Bornschein &lt;<a href="mailto:jb@capsec.org">jb@capsec.org</a>&gt; wrote:<br><br>Sorry,<br><br><blockquote type="cite">I’m typically compiling with<br><br>./configure —with-cuda<br></blockquote><br><br>I’m actually compiling with<br><br>./configure —with-cuda —disable-vt<br><br>because otherwise I get a compile time error:<br><br>make[5]: Entering directory `/u/bornj/software-old/src/openmpi-1.7.3/ompi/contrib/vt/vt/vtlib'<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libvt_la-vt_cudart.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libvt_mpi_la-vt_pform_linux.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libvt_mpi_la-vt_thrd.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libvt_mpi_la-vt_trc.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libvt_mpi_la-vt_user_comment.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libvt_mpi_la-vt_user_control.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libvt_mpi_la-vt_user_count.lo<br>CC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libvt_mpi_la-vt_user_marker.lo<br>vt_cudart.c: In function 'cudaLaunch':<br>vt_cudart.c:2725:15: error: 'vt_cupti_events_enabled' undeclared (first use in this function)<br>vt_cudart.c:2725:15: note: each undeclared identifier is reported only once for each function it appears in<br><br><br><br>&nbsp;&nbsp;j<br><br><br><br><blockquote type="cite">but I tried combining it with various other options. OMPI builds fine, but when I try to run programs compiled against it I always get:<br><br>/a.out: symbol lookup error: /usr/local/lib/openmpi/mca_pml_ob1.so: undefined symbol: progress_one_cuda_htod_event<br><br>That error even seems to make sense, because the code in ompi/mca/pml/ob1/ refers to common_cuda.[ch], but it does not<br>seem to link against it's dynamic binary.<br><br>Am I missing something?<br><br><br>Thanks!<br><br><br>&nbsp;jb<br><br>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel<br></blockquote><br>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel<br></blockquote>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel<br></blockquote><br>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a></div></blockquote></div><br></div></body></html>
