<div dir="ltr"><div>I am trying to build Open MPI 1.8.5rc1 wit AMDs Open64 4.5.2.1.</div><div>I see the following failure (from &quot;make V=1&quot;) while building VT:</div><div><br></div><div><br></div><div>openCC -DHAVE_CONFIG_H -I. -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter -I../..  -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/extlib/otf/otflib -I../../extlib/otf/otflib -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter/old -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/include -I../../include -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/rfg -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/vtlib -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt -DINSIDE_OPENMPI   -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/opal/mca/hwloc/hwloc191/hwloc/include -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/BLD/opal/mca/hwloc/hwloc191/hwloc/include -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/opal/mca/event/libevent2021/libevent -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/opal/mca/event/libevent2021/libevent/include -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/BLD/opal/mca/event/libevent2021/libevent/include -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/../../../include -I/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/BLD/ompi/contrib/vt/vt/../../../include -fopenmp -DVT_FILTER_OLD -O3 -DNDEBUG -finline-functions -pthread -MT vtfilter-vt_filter.o -MD -MP -MF .deps/vtfilter-vt_filter.Tpo -c -o vtfilter-vt_filter.o `test -f &#39;vt_filter.cc&#39; || echo &#39;/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter/&#39;`vt_filter.cc</div><div>In file included from /scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter/vt_filter.h:16,</div><div>                 from /scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter/vt_filter.cc:13:</div><div>/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter/vt_filter_config.h:39:12: error: floating constant in preprocessor expression</div><div>In file included from /scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter/vt_filter.h:16,</div><div>                 from /scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter/vt_filter.cc:13:</div><div>/scratch/phargrov/OMPI/openmpi-1.8.5rc1-linux-x86_64-open64/openmpi-1.8.5rc1/ompi/contrib/vt/vt/tools/vtfilter/vt_filter_config.h:39:12: error: floating constant in preprocessor expression</div><div>make[7]: *** [vtfilter-vt_filter.o] Error 1</div><div><br></div><div><br></div><div>The offending line is</div><div><br></div><div><font face="monospace, monospace">#     if !(__OPENCC_PATCHLEVEL__ + 0)</font><br></div><div><br></div><div>And the reason for the error is that __OPENCC_PATCHLEVEL__ is defined, but is not an INTEGER:</div><div><br></div><div><div><font face="monospace, monospace">$ /opt/amd/x86_open64-4.5.2.1/bin/openCC -dM -E ~/empty.c | grep OPENCC</font></div><div><font face="monospace, monospace">#define __OPENCC_MINOR__ 5</font></div><div><font face="monospace, monospace">#define __OPENCC__ 4</font></div><div><font face="monospace, monospace">#define __OPENCC_PATCHLEVEL__ 2.1</font></div></div><div><br></div><div><br></div><div>The same usage of __OPENCC_PATCHLEVEL__ as an integer appears in vt_unify_config.h.</div><div><br></div><div>-Paul</div><div> </div><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div>

