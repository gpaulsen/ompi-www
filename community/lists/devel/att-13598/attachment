<div dir="ltr">When trying to configure the OMPI trunk on a Solaris-11/x86-64 with --enable-openib, I see the following error not seen with the 1.7 branch:<div><br></div><div><div><font face="courier new, monospace">*** Compiler flags</font></div>
<div><font face="courier new, monospace">checking which of CFLAGS are ok for debugger modules...  -DNDEBUG -m64 -mt</font></div><div><font face="courier new, monospace">checking for debugger extra CFLAGS... -g</font></div>
<div><font face="courier new, monospace">checking for the C compiler vendor... (cached) sun</font></div><div><font face="courier new, monospace">checking if want to add padding to the openib BTL control header... no</font></div>
<div><font face="courier new, monospace">checking for fcntl.h... (cached) yes</font></div><div><font face="courier new, monospace">checking for sys/poll.h... (cached) yes</font></div><div><font face="courier new, monospace">checking infiniband/verbs.h usability... yes</font></div>
<div><font face="courier new, monospace">checking infiniband/verbs.h presence... yes</font></div><div><font face="courier new, monospace">checking for infiniband/verbs.h... yes</font></div><div><font face="courier new, monospace">looking for library without search path</font></div>
<div><font face="courier new, monospace">checking for ibv_open_device in -libverbs... no</font></div><div><font face="courier new, monospace">checking if ConnectX XRC support is enabled... no</font></div><div><font face="courier new, monospace">checking if dynamic SL is enabled... no</font></div>
<div><font face="courier new, monospace">configure: WARNING: Verbs support requested (via --with-verbs) but not found.</font></div><div><font face="courier new, monospace">configure: WARNING: If you are using libibverbs v1.0 (i.e., OFED v1.0 or v1.1), you *MUST* have both the libsysfs headers and libraries installed.  Later versions of libibverbs do not require libsysfs.</font></div>
<div><font face="courier new, monospace">configure: error: Aborting.</font></div></div><div><br></div><div>This is despite an earlier:</div><div><font face="courier new, monospace">checking if MCA component btl:openib can compile... yes</font></div>
<div><br></div><div>The error above is with the Solaris Studio compilers, but the same happens with the GNU compilers.</div><div>The (compressed) full configure output for the GNU case is attached.</div><div><br></div><div>
This is a regression relative to the current 1.7.4rc, in which the openib btl works fine on Solaris-11/x86-64, by which I mean I can configure with --enable-openib and the following command line works:</div><div><font face="courier new, monospace">mpirun -host pcp-j-19,pcp-j-20 -mca btl openib,self -np 2 examples/ring_c<br>
</font></div><div><br></div><div>My best guess is that either the libsysfs requirement itself OR its associated test is Linux-specific.</div><div><br></div><div>-Paul<br clear="all"><div><br></div>-- <br><font face="courier new, monospace"><div>
Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Future Technologies Group</div><div>Computer and Data Sciences Department     Tel: +1-510-495-2352</div>
<div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font>
</div></div>

