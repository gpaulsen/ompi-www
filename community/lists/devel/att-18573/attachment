Michael,<div><br></div><div>does your two systems have the same endianness ?</div><div><br></div><div>do you know how openmpi was configure&#39;d on both systems ?</div><div>(is --enable-heterogeneous enabled or disabled on both systems ?)</div><div><br></div><div>fwiw, openmpi 1.6.5 is old now and no more maintained.</div><div>I strongly encourage you to use openmpi 1.10.2</div><div><br></div><div>Cheers,</div><div><br></div><div>Gilles</div><div><br>On Thursday, February 11, 2016, Michael Rezny &lt;<a href="mailto:michael.rezny@monash.edu">michael.rezny@monash.edu</a>&gt; wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><div><div><div><div><div><div>Hi,<br></div>I am running Ubuntu 14.04 LTS with OpenMPI 1.6.5 and gcc 4.8.4<br><br></div>On a single rank program which just packs and unpacks two ints using MPI_Pack_external and MPI_Unpack_external<br></div>the unpacked ints are in the wrong endian order.<br><br></div>However, on a HPC, (not Ubuntu), using OpenMPI 1.6.5 and gcc 4.8.4 the unpacked ints are correct.<br><br></div><div>Is it possible to get some assistance to track down what is going on?<br></div><div><br></div>Here is the output from the program:<br><br> <span style="font-family:monospace,monospace">~/tests/mpi/Pack test1<br>send data 000004d2 0000162e <br>MPI_Pack_external: 0<br>buffer size: 8<br>MPI_unpack_external: 0<br>recv data d2040000 2e160000 </span><br><br></div>And here is the source code:<br><br><span style="font-family:monospace,monospace">#include &lt;stdio.h&gt;<br>#include &lt;mpi.h&gt;<br><br>int main(int argc, char *argv[]) {<br>  int numRanks, myRank, error;<br><br>  int send_data[2] = {1234, 5678};<br>  int recv_data[2];<br><br>  MPI_Aint buffer_size = 1000;<br>  char buffer[buffer_size];<br><br>  MPI_Init(&amp;argc, &amp;argv);<br>  MPI_Comm_size(MPI_COMM_WORLD, &amp;numRanks);<br>  MPI_Comm_rank(MPI_COMM_WORLD, &amp;myRank);<br><br>  printf(&quot;send data %08x %08x \n&quot;, send_data[0], send_data[1]);<br><br>  MPI_Aint position = 0;<br>  error = MPI_Pack_external(&quot;external32&quot;, (void*) send_data, 2, MPI_INT,<br>          buffer, buffer_size, &amp;position);<br>  printf(&quot;MPI_Pack_external: %d\n&quot;, error);<br><br>  printf(&quot;buffer size: %d\n&quot;, (int) position);<br><br>  position = 0;<br>  error = MPI_Unpack_external(&quot;external32&quot;, buffer, buffer_size, &amp;position,<br>          recv_data, 2, MPI_INT);<br>  printf(&quot;MPI_unpack_external: %d\n&quot;, error);<br><br>  printf(&quot;recv data %08x %08x \n&quot;, recv_data[0], recv_data[1]);<br><br>  MPI_Finalize();<br><br>  return 0;<br>}<br></span><br><br></div>
</blockquote></div>

