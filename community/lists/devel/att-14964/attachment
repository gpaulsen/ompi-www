<div dir="ltr"><div><div><div><div><div><div><div><div><div><div><div><div><div><div><div><div>Ralph,<br><br></div>i get no more complains about rtc :-)<br><br></div>but MPI_Abort still hangs :-(<br><br></div>i reviewed my configuration and the hang is not related to one node having one IB port and the other node having two IB ports.<br>
<br></div>the two nodes can establish TCP connections via :<br></div>- eth0 (but they are *not* on the same subnet)<br></div>- ib0 (and they *are* on the same subnet)<br><br></div>from the logs, it seems eth0 is &quot;discarded&quot; and only ib0 is used.<br>
</div>when the task abort, it hangs ...<br><br><br><br></div>i attached the logs i took on two VM with a &quot;simpler&quot; config :<br></div>- slurm0 has one eth port (eth0)<br></div>  * eth0 is on <a href="http://192.168.122.100/24">192.168.122.100/24</a> (network 0)<br>
</div>  * eth0:1 is on <a href="http://10.0.0.1/24">10.0.0.1/24</a> (network 0)<br></div>- slurm3 has two eth ports (eth0 and eth1)<br></div>  * eth0 is on <a href="http://192.168.222.0/24">192.168.222.0/24</a> (network 1)<br>
</div>  * eth1 is on <a href="http://10.0.0.2/24">10.0.0.2/24</a> (network 0)<br><br></div><div>network0 and network1 are connected to a router.<br><br></div><div><br></div>from slurm0, i launch :<br><br><div><div><div><div>
<div><div><div><div><div><div><div><div><div><div>mpirun -np 1 -host slurm3 --mca btl tcp,self --mca oob_base_verbose 10 ./abort<br><br></div><div>the oob logs are attached<br></div><div><div class="gmail_extra"><br></div>
<div class="gmail_extra">Cheers,<br><br>Gilles<br><br></div><div class="gmail_extra"><div class="gmail_quote">On Tue, Jun 3, 2014 at 12:10 AM, Gilles Gouaillardet <span dir="ltr">&lt;<a href="mailto:gilles.gouaillardet@gmail.com" target="_blank">gilles.gouaillardet@gmail.com</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr">Thanks Ralph,<div><br></div><div>i will try this tomorrow</div><div><br></div><div>Cheers,</div>
<div><br></div><div>Gilles</div><div><br></div><div class="gmail_extra"><br><br><div class="gmail_quote"><div><div class="h5">On Tue, Jun 3, 2014 at 12:03 AM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br>

</div></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div><div class="h5"><div style="word-wrap:break-word">I think I have this fixed with r<span style="background-color:rgb(254,244,156);font-family:Menlo;font-size:11px">31928, but have no way to test it on my machine. Please see if it works for you.</span><div>

<div><div><font face="Menlo"><span style="font-size:11px;background-color:rgb(254,244,156)"><br></span></font></div><div><font face="Menlo"><span style="font-size:11px;background-color:rgb(254,244,156)"><br></span></font><div>

<div>On Jun 2, 2014, at 7:09 AM, Ralph Castain &lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt; wrote:</div><br><blockquote type="cite"><div style="word-wrap:break-word">This is indeed the problem - we are trying to send a message and don&#39;t know how to get it somewhere. I&#39;ll break the loop, and then ask that you run this again with -mca oob_base_verbose 10 so we can see the intended recipient.<div>

<br><div><div>On Jun 2, 2014, at 3:55 AM, Gilles Gouaillardet &lt;<a href="mailto:gilles.gouaillardet@gmail.com" target="_blank">gilles.gouaillardet@gmail.com</a>&gt; wrote:</div><br><blockquote type="cite"><span style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important">#7  0x00007fe8fab67ce3 in mca_oob_tcp_component_hop_unknown () from /.../local/ompi-trunk/lib/openmpi/mca_oob_tcp.so</span><br style="font-family:Helvetica;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px">

</blockquote></div><br></div></div></blockquote></div><br></div></div></div></div><br></div></div><div class="">_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/06/14954.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/06/14954.php</a><br></blockquote></div><br></div></div>
</blockquote></div><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>

