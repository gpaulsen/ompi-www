<html><head><meta http-equiv="Content-Type" content="text/html charset=us-ascii"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">That would be correct - we restored some configure flags that are required to make multi-thread programs work. Jeff can probably provide more info.<div class=""><br class=""></div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Nov 4, 2014, at 9:15 AM, Alina Sklarevich &lt;<a href="mailto:alinas@dev.mellanox.co.il" class="">alinas@dev.mellanox.co.il</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Hi,<div class=""><br class=""></div><div class="">We observe a hang when running the multi-threading support test "latency.c" (attached to this report), which uses MPI_THREAD_MULTIPLE.</div><div class=""><br class=""></div><div class="">The hang happens immediately at the begining of the test and is reproduced in the v1.8 release branch.</div><div class=""><br class=""></div><div class="">The command line to reproduce the behavior is:</div><div class=""><br class=""></div><div class="">$ mpirun --map-by node --bind-to core -display-map -np 2 -mca pml ob1 -mca btl tcp,self ./thread-tests-1.1/latency<br class=""></div><div class=""><br class=""></div><div class="">The last commit with which the hang doesn't reproduce is:<br class=""></div><div class=""><p class="MsoNormal">commit: e4d4266d9c69e</p><p class="MsoNormal"><br class=""></p><p class="MsoNormal">And problems begin after commit:</p><p class="MsoNormal"><br class=""></p><p class="MsoNormal">commit 09b867374e9618007b81bfaf674ec6df04548bed</p><p class="MsoNormal">Author: Jeff Squyres &lt;<a href="mailto:jsquyres@cisco.com" class="">jsquyres@cisco.com</a>&gt;</p><p class="MsoNormal">Date: &nbsp; Fri Oct 31 12:42:50 2014 -0700</p><p class="MsoNormal"><br class=""></p><p class="MsoNormal">&nbsp; &nbsp; Revert most of open-mpi/ompi@6ef938de3fa9ca0fed2c5bcb0736f65b0d8803af</p><p class="MsoNormal"><br class=""></p><p class="MsoNormal">Is this expected behavior? In other words, should we not expect any stable release in the 1.8.x series to be able to use MPI_THREAD_MULTIPLE with even the TCP and SM BTLs?</p><p class="MsoNormal"><br class=""></p><p class="MsoNormal">Please advise.&nbsp;</p><p class="MsoNormal"><br class=""></p><p class="MsoNormal">Thanks,</p><p class="MsoNormal">Alina.</p><p class="MsoNormal"><br class=""></p><p class="MsoNormal"><br class=""></p></div></div>
<span id="cid:3B17E60A-393F-4455-B95B-9D2892475BC4">&lt;latency.c&gt;</span>_______________________________________________<br class="">devel mailing list<br class=""><a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/devel<br class="">Link to this post: http://www.open-mpi.org/community/lists/devel/2014/11/16175.php</div></blockquote></div><br class=""></div></body></html>
