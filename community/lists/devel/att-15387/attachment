<div dir="ltr"><div class="gmail_extra"><br><div class="gmail_quote">On Wed, Jul 30, 2014 at 8:53 PM, Paul Hargrove <span dir="ltr">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt;</span> wrote:</div>
<div class="gmail_quote">[...]<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div>I have a clear answer to *what* is different (below) and am next looking into the why/how now.</div>
<div>It seems that 1.8.1 has included all dependencies into libmpi_usempif08 while 1.8.2rc2 does not.</div></blockquote><div> [...]</div><div><br></div><div>The difference appears to stem from the following difference in ompi/mpi/fortran/use-mpi-f08/Makefile.am:</div>
<div><br></div><div>1.8.1:</div><div>libmpi_usempif08_la_LIBADD = \</div><div>        $(module_sentinel_file) \</div><div>        $(OMPI_MPIEXT_USEMPIF08_LIBS) \</div><div>        $(top_builddir)/ompi/<a href="http://libmpi.la">libmpi.la</a> </div>
</div><div class="gmail_extra"><br></div>1.8.2rc2:</div><div class="gmail_extra"><div class="gmail_extra">libmpi_usempif08_la_LIBADD = \</div><div class="gmail_extra">        $(OMPI_MPIEXT_USEMPIF08_LIBS) \</div><div class="gmail_extra">
        $(top_builddir)/ompi/<a href="http://libmpi.la">libmpi.la</a></div><div class="gmail_extra">libmpi_usempif08_la_DEPENDENCIES = $(module_sentinel_file)</div><div class="gmail_extra"><br></div><div class="gmail_extra">
Where in both cases one has:</div><div class="gmail_extra"><br></div><div class="gmail_extra"><div class="gmail_extra">module_sentinel_file = \</div><div class="gmail_extra">        <a href="http://libforce_usempif08_internal_modules_to_be_built.la">libforce_usempif08_internal_modules_to_be_built.la</a></div>
<div class="gmail_extra"><br></div><div class="gmail_extra">which contains all of the symbols which my previous testing found had &quot;disappeared&quot; from libmpi_usempif08.so between 1.8.1 and 1.8.2rc2. </div></div><div class="gmail_extra">
<br></div><div class="gmail_extra"><div class="gmail_extra">I don&#39;t have recent enough autotools to attempt the change the Makefile.am, but instead restored the removed item from libmpi_usempif08_la_LIBADD directly in Makefile.in.  However, rather than fixing the problem, that resulted in multiple definitions of a bunch of _eq and _ne functions (e.g. mpi_f08_types_ompi_request_op_ne_).  So, I am uncertain how to proceed.</div>
</div><div class="gmail_extra"><br></div>Use svn blame points at a &quot;bulk&quot; CMR of many fortran related changes, including one related to the eq/ne operators.  So, I am turning over this investigation to Jeff and/or Ralph to figure out what actually is required to fix this without loss of whatever benefits were in that CMR.  I am still available to test the proposed fixes.  Happy hunting...</div>
<div class="gmail_extra"><br></div><div class="gmail_extra"><div class="gmail_extra">Somebody owes me a virtual beer (or nihonshu) ;-)</div></div><div class="gmail_extra">-Paul<br><br clear="all"><div><br></div>-- <br><font face="courier new, monospace"><div>
Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Future Technologies Group</div><div>Computer and Data Sciences Department     Tel: +1-510-495-2352</div>
<div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font>
</div></div>

