<div dir="ltr"><div>The &quot;smoke testing&quot; has completed.</div><div><br></div>While {Free,Net,Open}BSD were a mess, the following worked fine with Jeff&#39;s tarball:<div>   Mac OS X 10.6, 10.7 and 10.8 on x86-64 (LP64 and ILP32 ABIs)</div><div>   Solaris-10 on SPARC (v8+ and v9 ABIs)</div><div>   Solaris-11 on X86-64 (LP64 and ILP32 ABIs)</div><div>   The *BSD platforms when configured with &quot;--enable-static --disable-shared&quot;</div><div>   All my x86, x86-64, ppc and ppc64 Linux platforms</div><div><br></div><div>I did not test Linux on IA64, MIPS or ARM</div><div><br></div><div>-Paul</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Feb 24, 2015 at 2:44 PM, Paul Hargrove <span dir="ltr">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><br><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Feb 24, 2015 at 1:45 PM, Paul Hargrove <span dir="ltr">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt;</span> wrote:</div><div class="gmail_quote">[...] <span class=""><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr"><div class="gmail_extra"><div class="gmail_quote"><div>Smoke testing will begin momentarily...</div></div></div></div></blockquote></span><div>[...]</div><div><br></div><div>I am choking on all the smoke.</div><div>Somebody call the fire marshall!</div><div><br></div><div>It looks like with Jeff&#39;s tarball all the BSDs are failing in the same way:</div><div><br></div></div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">--------------------------------------------------------------------------</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">It looks like opal_init failed for some reason; your parallel process is</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">likely to abort.  There are many reasons that a parallel process can</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">fail during opal_init; some of which are due to configuration or</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">environment problems.  This failure appears to be an internal failure;</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">here&#39;s some additional information (which may only be relevant to an</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">Open MPI developer):</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1"><br></font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">  opal_shmem_base_select failed</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">  --&gt; Returned value -1 instead of OPAL_SUCCESS</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">--------------------------------------------------------------------------</font></div></div></div></div></blockquote><div class="gmail_extra"><div class="gmail_quote"><div><br></div><div>The most recent master tarball (openmpi-dev-1063-g6c3ddf9.tar.bz2) does NOT fail.</div><div>Also, BSDs configured with &quot;--enable-static --disable-shared&quot; do NOT fail.</div><div><br></div><div>I took a closer look at the FreeBSD-9/amd64 system (the only non-VM among my BSDs).</div><div>The following caught my attention:</div><div><br></div></div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">+++ Configuring MCA framework dl   </font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for no configure components in framework dl...</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for m4 configure components in framework dl... libltdl, dlopen</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1"><br></font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">--- MCA component dl:dlopen (m4 configuration macro, priority 80)</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for MCA component dl:dlopen compile mode... static</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking dlfcn.h usability... yes</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking dlfcn.h presence... yes</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for dlfcn.h... yes</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">looking for library without search path</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for dlopen in -ldl... no</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking if MCA component dl:dlopen can compile... no</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1"><br></font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">--- MCA component dl:libltdl (m4 configuration macro, priority 50)</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for MCA component dl:libltdl compile mode... static</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking --with-libltdl value... simple ok (unspecified)</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking --with-libltdl-libdir value... simple ok (unspecified)</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for libltdl dir... compiler default</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for libltdl library dir... linker default</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking ltdl.h usability... no</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking ltdl.h presence... no</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking for ltdl.h... no</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">checking if MCA component dl:libltdl can compile... no</font></div></div></div></div></blockquote><div class="gmail_extra"><div class="gmail_quote"><div><br></div><div>If I read that right there is NO dl component available!</div><div><br></div><div>FIRST:</div><div>I believe that *something* should have occurred when no dl component could be built.</div><div>Either the build should have been aborted or it could/should have switched to building everything static.</div><div>However, the failure at runtime should not have been the eventual outcome.</div><div><br></div><div>SECOND:</div><div>On {Free,Net,Open}BSD dlopen() appears in libc, not in libdl.</div><div>So, I suspect one *should* be able to compile dl:dlopen on all these systems with the proper configure tests.</div><div><br></div><div>I will gladly send any logs and/or output that will help.</div><span class="HOEnZb"><font color="#888888"><div><br></div><div>-Paul</div><div> </div></font></span></div><span class=""><div><br></div>-- <br><div><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory     Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font></div></div></div>
</span></div></div>
</blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div>

