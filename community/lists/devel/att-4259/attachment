<div>Hi, all, <br>since there are no objections I will commit the patch to trunk and 1.3 branch.</div>
<div>see also comments below.</div>
<div><br>&nbsp;</div>
<div class="gmail_quote">2008/6/29 Ralph Castain &lt;<a href="mailto:rhc@lanl.gov">rhc@lanl.gov</a>&gt;:<br>
<blockquote class="gmail_quote" style="PADDING-LEFT: 1ex; MARGIN: 0px 0px 0px 0.8ex; BORDER-LEFT: #ccc 1px solid">
<div><font face="Verdana, Helvetica, Arial"><span style="FONT-SIZE: 12px">I believe this would help reduce the confusion a great deal. While the current carto syntax is the expected for a mathematician, computer users and developers have a well-established definition for the term "node" that conflicts with that used in carto.<br>
<br>Some thoughts to add: &nbsp;in carto, do you want to create a definition for CORE as well as SOCKET? That way, someone could provide info down to either level of granularity. In our subsequent frameworks, we could assume that all cores in a socket have the same graph analysis unless the core was described separately.</span></font></div>
</blockquote>
<div>&nbsp;</div>
<div>For my best knowledge all cores on the same socket have same distance on the graph, so I dont see any need to add more code and definitions for now.</div>
<div>&nbsp;</div>
<blockquote class="gmail_quote" style="PADDING-LEFT: 1ex; MARGIN: 0px 0px 0px 0.8ex; BORDER-LEFT: #ccc 1px solid">
<div><font face="Verdana, Helvetica, Arial"><span style="FONT-SIZE: 12px"><span id=""></span><br><br>Likewise, you may want to support a NODE that describes connectivity between computing nodes. Again, one could assume that all sockets on the node share the same graph unless the socket was described separately – or perhaps allow someone to describe the graph for the socket to get to the edge of the node, and then let the node description handle comm between nodes.</span></font></div>
</blockquote>
<div>&nbsp;</div>
<div>Interesting idea, I suppose it can be implemented in the future.</div>
<div>&nbsp;</div>
<blockquote class="gmail_quote" style="PADDING-LEFT: 1ex; MARGIN: 0px 0px 0px 0.8ex; BORDER-LEFT: #ccc 1px solid">
<div><font face="Verdana, Helvetica, Arial"><span style="FONT-SIZE: 12px"><span id=""></span><br><br>Up to you – I'm just trying to think of ways we could bring this closer to the topo description required in other modules elsewhere in the code to avoid having multiple files.<br>
<br>Ralph </span></font></div></blockquote>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<blockquote class="gmail_quote" style="PADDING-LEFT: 1ex; MARGIN: 0px 0px 0px 0.8ex; BORDER-LEFT: #ccc 1px solid">
<div><font face="Verdana, Helvetica, Arial"><span style="FONT-SIZE: 12px"><span id=""></span><br><br>On 6/29/08 7:44 AM, &quot;Lenny Verkhovsky&quot; &lt;<a href="mailto:lenny.verkhovsky@gmail.com" target="_blank">lenny.verkhovsky@gmail.com</a>&gt; wrote:<br>
<br></span></font>
<blockquote><font face="Verdana, Helvetica, Arial"><span style="FONT-SIZE: 12px">
<div>
<div></div>
<div class="Wj3C7c">Hi all,<br>We have ambiquite definitions of &quot;slot&quot; in rankfile, hostfile and carto components.<br>Since &quot;slot&quot; is well defined as a processor in the hostfile and rankfile ( &quot;slot&quot; is defined as processing unit which can be processor number or socket:core pair ).<br>
I propose to change carto file syntax and make it more graph oriented. This won&#39;t have any effect on the code. <br>&nbsp;<br>In new carto syntax <br>&nbsp;<br>NODE will be changed to EDGE<br>CONNECTION will be changed to BRANCH<br>
SLOT will be changed to SOCKET.<br>&nbsp;<br>Any comments are welcome.<br>few words about carto can be found at <a href="https://svn.open-mpi.org/trac/ompi/wiki/OnHostTopologyDescription" target="_blank">https://svn.open-mpi.org/trac/ompi/wiki/OnHostTopologyDescription</a> <br>
&nbsp;<br>&nbsp;&nbsp;Index: opal/mca/carto/file/help-opal-carto-file.txt<br>===================================================================<br>--- opal/mca/carto/file/help-opal-carto-file.txt &nbsp;&nbsp;&nbsp;(revision 18772)<br>+++ opal/mca/carto/file/help-opal-carto-file.txt &nbsp;&nbsp;&nbsp;(working copy)<br>
@@ -27,27 +27,27 @@<br>&nbsp;#<br>&nbsp;[expected node type]<br>-File: %s line: %d expected node type (free string). received %s<br>+File: %s line: %d expected Edge type (free string). received %s<br>&nbsp;#<br>&nbsp;[expected node name]<br>
-File: %s line: %d expected Node name (free string). received %s<br>+File: %s line: %d expected Edge name (free string). received %s<br>&nbsp;#<br>&nbsp;[expected Connection]<br>-File: %s line: %d expected Node connection (node name:weight). received %s<br>
+File: %s line: %d expected Edge branch (edge name:weight). received %s<br>&nbsp;#<br>&nbsp;[expected deceleration]<br>-File: %s line: %d expected Node deceleration (NODE) or connection deceleration (CONNECTION). received %s<br>+File: %s line: %d expected Edge declaration (EDGE) or branch declaration (BRANCH). received %s<br>
&nbsp;#<br>&nbsp;[incorrect connection]<br>-File: %s line: %d - %s - incorrect connection<br>+File: %s line: %d - %s - incorrect branch<br>&nbsp;#<br>&nbsp;[vertex not found]<br>-File: %s line: %d - Node %s is not in the graph<br>+File: %s line: %d - Edge %s is not in the graph<br>
&nbsp;#<br>&nbsp;[unknown token]<br>Index: opal/mca/carto/file/carto_file_lex.l<br>===================================================================<br>--- opal/mca/carto/file/carto_file_lex.l &nbsp;&nbsp;&nbsp;(revision 18772)<br>+++ opal/mca/carto/file/carto_file_lex.l &nbsp;&nbsp;&nbsp;(working copy)<br>
@@ -80,13 +80,13 @@<br>&nbsp;<br>-NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ carto_file_value.sval = yytext;<br>+EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ carto_file_value.sval = yytext;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return OPAL_CARTO_FILE_NODE_DECELERATION; }<br>-CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ carto_file_value.sval = yytext;<br>
+BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ carto_file_value.sval = yytext;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return OPAL_CARTO_FILE_CONNECTION_DECELERATION; }<br>-CON_BI_DIR &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ carto_file_value.sval = yytext;<br>+BRANCH_BI_DIR &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ carto_file_value.sval = yytext;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return OPAL_CARTO_FILE_BIDIRECTION_CONNECTION; }<br>&nbsp;[0-9] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ carto_file_value.ival = atol(yytext);<br>Index: opal/mca/carto/file/carto_file.h<br>===================================================================<br>
--- opal/mca/carto/file/carto_file.h &nbsp;&nbsp;&nbsp;(revision 18772)<br>+++ opal/mca/carto/file/carto_file.h &nbsp;&nbsp;&nbsp;(working copy)<br>@@ -21,49 +21,49 @@<br>&nbsp;/**<br>&nbsp;&nbsp;* @file#this is a comment<br>&nbsp;# Node declaration &nbsp;&nbsp;Node type (Free string) &nbsp;&nbsp;Node name (Free string)<br>
-# (Reserve word) &nbsp;&nbsp;&nbsp;&nbsp;(slot is a reserve word &nbsp;&nbsp;(free string)<br>-# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for CPU slot)<br>+# (Reserve word) &nbsp;&nbsp;&nbsp;&nbsp;(socket is a reserve word &nbsp;&nbsp;(free string)<br>+# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for CPU socket)<br>&nbsp;#=======================================================================<br>
- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem0<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem1<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem2<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem3<br>
+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem0<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem1<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem2<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem3<br>
&nbsp;#<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot0<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot1<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot2<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot3<br>
+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket0<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket1<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket2<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket3<br>
&nbsp;#<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Infiniband &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mthca0<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Infiniband &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mthca1<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Infiniband &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mthca0<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Infiniband &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mthca1<br>
&nbsp;#<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ethernet &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth0<br>- &nbsp;NODE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ethernet &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth1<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ethernet &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth0<br>+ &nbsp;EDGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ethernet &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth1<br>
&nbsp;#<br>&nbsp;#<br>&nbsp;# Connection decleration &nbsp;From node &nbsp;&nbsp;To node:weight &nbsp;&nbsp;To node:weight &nbsp;&nbsp;......<br>&nbsp;# (Reserve word) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(declered &nbsp;&nbsp;(declered &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(declered<br>&nbsp;# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;above) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;above) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;above)<br>
&nbsp;#===============================================================================================<br>- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot0:0<br>- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot3:0<br>+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket0:0<br>
+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket3:0<br>&nbsp;#<br>- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem0:0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot1:1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot2:1 mthca0:1 eth0:1<br>- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot0:1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot3:1<br>
- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot1:1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot3:1<br>- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem3:0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot1:1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot2:1 mthca1:1 eth1:1<br>+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem0:0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket1:1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket2:1 mthca0:1 eth0:1<br>
+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket0:1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket3:1<br>+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket1:1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket3:1<br>+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem3:0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket1:1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket2:1 mthca1:1 eth1:1<br>
&nbsp;#<br>&nbsp;#<br>- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mthca0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot0:1<br>- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mthca1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot3:1<br>+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mthca0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket0:1<br>+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mthca1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket3:1<br>&nbsp;#<br>- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot0:1<br>
- &nbsp;CONNECTION &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot3:1<br>+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket0:1<br>+ &nbsp;BRANCH &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket3:1<br>&nbsp;#Bi-Directional connection<br>&nbsp;#<br>- &nbsp;CON_BI_DIR &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem1:0<br>
- &nbsp;CON_BI_DIR &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem2:0<br>+ &nbsp;BRANCH_BI_DIR &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem1:0<br>+ &nbsp;BRANCH_BI_DIR &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem2:0<br>&nbsp;#<br>&nbsp;# end of carto file.<br>Index: opal/mca/carto/file/carto_file_module.c<br>
===================================================================<br>--- opal/mca/carto/file/carto_file_module.c (revision 18772)<br>+++ opal/mca/carto/file/carto_file_module.c (working copy)<br>@@ -171,7 +171,7 @@<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case OPAL_CARTO_FILE_NAME:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node = (opal_carto_base_node_t *)malloc(sizeof(opal_carto_base_node_t));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-&gt;node_type = strdup(carto_file_value.sval);<br>- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (0 == strcmp(&quot;slot&quot;,node-&gt;node_type)) {<br>
+ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (0 == strcmp(&quot;socket&quot;,node-&gt;node_type)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-&gt;is_cpu = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<br></div></div>
<hr align="center" width="95%" size="3">
</span></font><font size="2"><font face="Monaco, Courier New"><span style="FONT-SIZE: 10px">_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>
<a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></span></font></font></blockquote><font size="2"><font face="Monaco, Courier New"><span style="FONT-SIZE: 10px"><br>
</span></font></font></div><br>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
</blockquote></div><br>

