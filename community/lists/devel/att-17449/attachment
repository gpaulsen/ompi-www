<div dir="ltr">I have determined that 1.8.5 also fails in the same manner on this host.<div>Configuring with --disable-io-romio allows 1.8.6rc1 to build correctly.<br><div><div>So, the problem appears to be in ROMIO as it relates to OpenBSD-5.7.</div><div><br></div><div><div>Since this is *not* a regression I feel this should not delay a 1.8.6 release unless there is an existing fix upstream in romio.</div><div>A quick look at their trac didn&#39;t show anything promising.</div><div><br></div><div><br></div><div>Notice the following difference in the configure output (from romio) between an old saved test of 1.8.5rc3 on OpenBSD-5.6 and a fresh test of 1.8.6rc1 on OpenBSD-5.7:</div><div><br></div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><div><font face="monospace, monospace" size="1"> checking sys/param.h usability... yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking sys/param.h presence... yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking for sys/param.h... yes</font></div></div><div><div><font face="monospace, monospace" size="1">-checking sys/mount.h usability... no</font></div></div><div><div><font face="monospace, monospace" size="1">+checking sys/mount.h usability... yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking sys/mount.h presence... yes</font></div></div><div><div><font face="monospace, monospace" size="1">-configure: WARNING: sys/mount.h: present but cannot be compiled</font></div></div><div><div><font face="monospace, monospace" size="1">-configure: WARNING: sys/mount.h:     check for missing prerequisite headers?</font></div></div><div><div><font face="monospace, monospace" size="1">-configure: WARNING: sys/mount.h: see the Autoconf documentation</font></div></div><div><div><font face="monospace, monospace" size="1">-configure: WARNING: sys/mount.h:     section &quot;Present But Cannot Be Compiled&quot;</font></div></div><div><div><font face="monospace, monospace" size="1">-configure: WARNING: sys/mount.h: proceeding with the compiler&#39;s result</font></div></div><div><div><font face="monospace, monospace" size="1">-configure: WARNING:     ## -------------------------------- ##</font></div></div><div><div><font face="monospace, monospace" size="1">-configure: WARNING:     ## Report this to <a href="mailto:discuss@mpich.org">discuss@mpich.org</a> ##</font></div></div><div><div><font face="monospace, monospace" size="1">-configure: WARNING:     ## -------------------------------- ##</font></div></div><div><div><font face="monospace, monospace" size="1">-checking for sys/mount.h... no</font></div></div><div><div><font face="monospace, monospace" size="1">+checking for sys/mount.h... yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking sys/statvfs.h usability... yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking sys/statvfs.h presence... yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking for sys/statvfs.h... yes</font></div></div><div><div><font face="monospace, monospace" size="1">-checking whether struct statfs properly defined... no</font></div></div><div><div><font face="monospace, monospace" size="1">+checking whether struct statfs properly defined... yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking for f_fstypename member of statfs structure... yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking for sys/stat.h... (cached) yes</font></div></div><div><div><font face="monospace, monospace" size="1"> checking for sys/types.h... (cached) yes</font></div></div></blockquote><div><br></div><div>This suggests to me that code that may have been unreachable under OpenBSD 5.6 is now being built (unsuccessfully) under OpenBSD 5.7.</div><div>Specifically the &quot;struct statfs properly defined&quot; test result has changed from &quot;no&quot; to &quot;yes&quot;.</div><div>To me it looks like the failing code assumes that if that configure test passed, then struct statfs contains a f_type field.</div><div>I do notice that Open MPI&#39;s configure actually checks rather than assuming this:</div></div></div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div><div><div><div><font face="monospace, monospace" size="1">checking for struct statfs.f_type... no</font></div></div></div></div></div></blockquote><div><div><br></div><div><br></div><div>-Paul<br><div class="gmail_extra"><br><div class="gmail_quote">On Sun, May 24, 2015 at 5:57 PM, Paul Hargrove <span dir="ltr">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div dir="ltr">I see a failure on OpenBSD when building ROMIO:<div><br></div><div><div><font face="monospace, monospace" size="1">libtool: compile:  gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio -I./adio/include -DOMPI_BUILDING=1 -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/../../../../.. -I/home/phargrov/OMPI/openmpi-1.8.6r</font></div><div><font face="monospace, monospace" size="1">c1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/../../../../../opal/include -I./../../../../../opal/include -I./../../../../../ompi/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc</font></div><div><font face="monospace, monospace" size="1">1/ompi/mca/io/romio/romio/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/include -I./include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.</font></div><div><font face="monospace, monospace" size="1">6rc1/ompi/mca/io/romio/romio/include -I./mpi-io -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-</font></div><div><font face="monospace, monospace" size="1">1.8.6rc1/ompi/mca/io/romio/romio/mpi-io -I./adio/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64</font></div><div><font face="monospace, monospace" size="1">/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/o</font></div><div><font face="monospace, monospace" size="1">penmpi-1.8.6rc1/opal/mca/hwloc/hwloc191/hwloc/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/BL</font></div><div><font face="monospace, monospace" size="1">D/opal/mca/hwloc/hwloc191/hwloc/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1</font></div><div><font face="monospace, monospace" size="1">/opal/mca/event/libevent2021/libevent -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/o</font></div><div><font face="monospace, monospace" size="1">pal/mca/event/libevent2021/libevent/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/BLD/opal/mca</font></div><div><font face="monospace, monospace" size="1">/event/libevent2021/libevent/include -g -finline-functions -fno-strict-aliasing -pthread -DHAVE_ROMIOCONF_H -I</font></div><div><font face="monospace, monospace" size="1">./include -MT adio/common/ad_fstype.lo -MD -MP -MF adio/common/.deps/ad_fstype.Tpo -c /home/phargrov/OMPI/open</font></div><div><font face="monospace, monospace" size="1">mpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fstype.c  -fPIC -DPIC -o a</font></div><div><font face="monospace, monospace" size="1">dio/common/.libs/ad_fstype.o</font></div><div><font face="monospace, monospace" size="1">/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fs</font></div><div><font face="monospace, monospace" size="1">type.c: In function &#39;ADIO_FileSysType_fncall&#39;:</font></div><div><font face="monospace, monospace" size="1">/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fstype.c:374: error: &#39;struct statfs&#39; has no member named &#39;f_type&#39;</font></div><div><font face="monospace, monospace" size="1">/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fstype.c:398: error: &#39;struct statfs&#39; has no member named &#39;f_type&#39;</font></div><div><font face="monospace, monospace" size="1">/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fstype.c:419: error: &#39;struct statfs&#39; has no member named &#39;f_type&#39;</font></div><div><font face="monospace, monospace" size="1">*** Error 1 in ompi/mca/io/romio/romio (Makefile:3335 &#39;adio/common/ad_fstype.lo&#39;)</font></div><div><font face="monospace, monospace" size="1">*** Error 1 in ompi/mca/io/romio/romio (Makefile:4196 &#39;all-recursive&#39;)</font></div><div><font face="monospace, monospace" size="1">*** Error 1 in ompi/mca/io/romio (Makefile:1840 &#39;all-recursive&#39;)</font></div><div><font face="monospace, monospace" size="1">*** Error 1 in ompi (Makefile:3164 &#39;all-recursive&#39;)</font></div><div><font face="monospace, monospace" size="1">*** Error 1 in /home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/BLD (Makefile:1724 &#39;all-recursive&#39;)</font></div></div><div><br></div><div>This was NOT present in my testing of 1.8.5rc3.</div><div>HOWEVER the host has been updated from OpenBSD-5.6 to 5.7.</div><div>So, I don&#39;t yet know if the problem is due to a change in OMPI or in the host.</div><div>I will report again when I know more.</div><div><br></div><div>-Paul</div></div><div class="gmail_extra"><div><div class="h5"><br><div class="gmail_quote">On Sat, May 23, 2015 at 1:28 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex">Usual place:<br>
<br>
<a href="http://www.open-mpi.org/software/ompi/v1.8/" target="_blank">http://www.open-mpi.org/software/ompi/v1.8/</a><br>
<br>
1.8.6<br>
-----<br>
<br>
- Fixed memory leak on Mac OS-X exposed by TCP keepalive<br>
- Fixed keepalive support to ensure that daemon/node failure<br>
  results in complete job cleanup<br>
- Update Java binding support<br>
- Fixed MPI_THREAD_MULTIPLE bug in vader shared memory BTL<br>
- Fixed issue during shutdown when CUDA initialization wasn&#39;t complete<br>
- Fixed orted environment when no prefix given<br>
- Fixed trivial typo in MPI_Neighbor_allgather manpage<br>
- Fixed tree-spawn support for sh and ksh shells<br>
- Several data type fixes<br>
<br>
_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2015/05/17447.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2015/05/17447.php</a><br>
</blockquote></div><br><br clear="all"><div><br></div></div></div><span class=""><font color="#888888">-- <br><div><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory     Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font></div></div></div>
</font></span></div>
</blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div></div></div></div>

