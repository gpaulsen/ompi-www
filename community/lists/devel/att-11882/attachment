<html><head></head><body bgcolor="#FFFFFF"><div>I had originally installed v1.6.3 in /usr/local but had problems with it hanging on some commands. The installation of the development version in the same directory probably is the reason for the errors I am getting. I will do a clean install in a different directory. Thanks for your help.</div><div><br>On Dec 23, 2012, at 5:28 PM, Ralph Castain &lt;<a href="mailto:rhc@open-mpi.org">rhc@open-mpi.org</a>&gt; wrote:<br><br></div><div></div><blockquote type="cite"><div><meta http-equiv="Content-Type" content="text/html charset=windows-1252">Wow - strange. How was this configured?<div><br></div><div>Something clearly is messed up as there is no such thing as a "basic" grpcomm module, or an ess "slurmd" module, etc. any more. My best guess is that you wound up installing this on top of an existing OMPI install, and have now created a massive library confusion problem.</div><div><br></div><div>Try configuring it --with-prefix=&lt;foo&gt;, where foo is under your home directory. This will provide a clean place to install without confusion. Then put that location at the front of your path and ld_library_path - I suspect things will be okay from there.</div><div><br></div><div><br></div><div><div><div>On Dec 23, 2012, at 1:43 PM, R C &lt;<a href="mailto:recifx@gmail.com">recifx@gmail.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">I put /usr/local/lib at the beginning of LD_LIBRARY_PATH and I get:<div><div>$ ompi_info</div><div>[RCAsus1:20105] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_errmgr_default: /usr/local/lib/openmpi/mca_errmgr_default.so: undefined symbol: orte_errmgr_base_output (ignored)</div>
<div>[RCAsus1:20105] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_ess_slurmd: /usr/local/lib/openmpi/mca_ess_slurmd.so: undefined symbol: orte_nid_t_class (ignored)</div><div>[RCAsus1:20105] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_grpcomm_basic: /usr/local/lib/openmpi/mca_grpcomm_basic.so: undefined symbol: opal_profile_file (ignored)</div>
<div>[RCAsus1:20105] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_routed_cm: /usr/local/lib/openmpi/mca_routed_cm.so: undefined symbol: orte_message_event_t_class (ignored)</div><div>[RCAsus1:20105] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_routed_linear: /usr/local/lib/openmpi/mca_routed_linear.so: undefined symbol: orte_message_event_t_class (ignored)</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Package: Open MPI rc@RCAsus1 Distribution</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Open MPI: 1.9a1r27719</div><div>&nbsp; Open MPI repo revision: r27719</div><div>&nbsp; &nbsp;Open MPI release date: Unreleased developer copy</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Open RTE: 1.9a1r27719</div><div><br></div><div><br></div><div>and now when I try:</div><div><blockquote type="cite">$ mpicc -o hw hello.c</blockquote></div><div>it seems to compile, but from:</div><div>
$mpirun -np 4 hw</div><div><div>RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_ess_slurmd: /usr/local/lib/openmpi/mca_ess_slurmd.so: undefined symbol: orte_nid_t_class (ignored)</div><div>
[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_errmgr_default: /usr/local/lib/openmpi/mca_errmgr_default.so: undefined symbol: orte_errmgr_base_output (ignored)</div><div>[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_routed_cm: /usr/local/lib/openmpi/mca_routed_cm.so: undefined symbol: orte_message_event_t_class (ignored)</div>
<div>[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_routed_linear: /usr/local/lib/openmpi/mca_routed_linear.so: undefined symbol: orte_message_event_t_class (ignored)</div><div>[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_grpcomm_basic: /usr/local/lib/openmpi/mca_grpcomm_basic.so: undefined symbol: opal_profile_file (ignored)</div>
<div>[RCAsus1:26668] *** Process received signal ***</div><div>[RCAsus1:26668] Signal: Segmentation fault (11)</div><div>[RCAsus1:26668] Signal code: &nbsp;(128)</div><div>[RCAsus1:26668] Failing at address: (nil)</div><div>[RCAsus1:26668] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfcb0) [0x7f0e31d54cb0]</div>
<div>[RCAsus1:26668] [ 1] /usr/local/lib/openmpi/mca_rmaps_load_balance.so(+0xca8) [0x7f0e2f720ca8]</div><div>[RCAsus1:26668] [ 2] /usr/local/lib/libopen-rte.so.0(orte_rmaps_base_map_job+0x1ba) [0x7f0e3226b09a]</div><div>
[RCAsus1:26668] [ 3] /usr/local/lib/libopen-pal.so.0(opal_libevent2019_event_base_loop+0x626) [0x7f0e31fb97e6]</div><div>[RCAsus1:26668] [ 4] /usr/local/lib/libopen-pal.so.0(opal_progress+0xb3) [0x7f0e31f87483]</div><div>
[RCAsus1:26668] [ 5] mpirun(orterun+0x10fb) [0x404b8d]</div><div>[RCAsus1:26668] [ 6] mpirun(main+0x20) [0x4036ec]</div><div>[RCAsus1:26668] [ 7] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f0e319a776d]</div>
<div>[RCAsus1:26668] [ 8] mpirun() [0x4035e9]</div><div>[RCAsus1:26668] *** End of error message ***</div><div>Segmentation fault (core dumped)</div></div><div><br></div><div><br></div><div><br></div><div><div>504:5 $ mpicc -o hw hello.c</div>
<div>[04:37 PM][rc@RCAsus1] [~/Dropbox/tst]</div><div>505:6 $ mpirun -np 4 hw</div><div>[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_ess_slurmd: /usr/local/lib/openmpi/mca_ess_slurmd.so: undefined symbol: orte_nid_t_class (ignored)</div>
<div>[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_errmgr_default: /usr/local/lib/openmpi/mca_errmgr_default.so: undefined symbol: orte_errmgr_base_output (ignored)</div><div>[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_routed_cm: /usr/local/lib/openmpi/mca_routed_cm.so: undefined symbol: orte_message_event_t_class (ignored)</div>
<div>[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_routed_linear: /usr/local/lib/openmpi/mca_routed_linear.so: undefined symbol: orte_message_event_t_class (ignored)</div><div>[RCAsus1:26668] mca: base: component_find: unable to open /usr/local/lib/openmpi/mca_grpcomm_basic: /usr/local/lib/openmpi/mca_grpcomm_basic.so: undefined symbol: opal_profile_file (ignored)</div>
<div>[RCAsus1:26668] *** Process received signal ***</div><div>[RCAsus1:26668] Signal: Segmentation fault (11)</div><div>[RCAsus1:26668] Signal code: &nbsp;(128)</div><div>[RCAsus1:26668] Failing at address: (nil)</div><div>[RCAsus1:26668] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfcb0) [0x7f0e31d54cb0]</div>
<div>[RCAsus1:26668] [ 1] /usr/local/lib/openmpi/mca_rmaps_load_balance.so(+0xca8) [0x7f0e2f720ca8]</div><div>[RCAsus1:26668] [ 2] /usr/local/lib/libopen-rte.so.0(orte_rmaps_base_map_job+0x1ba) [0x7f0e3226b09a]</div><div>
[RCAsus1:26668] [ 3] /usr/local/lib/libopen-pal.so.0(opal_libevent2019_event_base_loop+0x626) [0x7f0e31fb97e6]</div><div>[RCAsus1:26668] [ 4] /usr/local/lib/libopen-pal.so.0(opal_progress+0xb3) [0x7f0e31f87483]</div><div>
[RCAsus1:26668] [ 5] mpirun(orterun+0x10fb) [0x404b8d]</div><div>[RCAsus1:26668] [ 6] mpirun(main+0x20) [0x4036ec]</div><div>[RCAsus1:26668] [ 7] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f0e319a776d]</div>
<div>[RCAsus1:26668] [ 8] mpirun() [0x4035e9]</div><div>[RCAsus1:26668] *** End of error message ***</div><div>Segmentation fault (core dumped)</div></div><div><br></div><div><br></div><div>Thanks for your assistance.</div>
<div><br></div><div><br></div><br><div class="gmail_quote">On Sun, Dec 23, 2012 at 4:08 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<div style="word-wrap:break-word">Do you have your LD_LIBRARY_PATH set correctly? You want your prefix location to be at the front so you don't pickup something from the default system installation.<div><div class="h5">
<div><br><div><div>On Dec 23, 2012, at 12:39 PM, R C &lt;<a href="mailto:recifx@gmail.com" target="_blank">recifx@gmail.com</a>&gt; wrote:</div><br><blockquote type="cite">Thanks, r27719 compiles but I get an error when I try:<div>
<div>$/usr/local/bin/ompi_info&nbsp;</div><div>/usr/local/bin/ompi_info: symbol lookup error: /usr/local/bin/ompi_info: undefined symbol: mca_fbtl_base_components_opened</div>
<div><br></div>and when I tried to compile a test program:</div><div><div>$ mpicc -o hw hello.c</div><div>mpicc: Symbol `opal_show_help' has different size in shared object, consider re-linking</div></div><div><br></div>

<div><br></div><div><br><div class="gmail_quote">On Sun, Dec 23, 2012 at 2:55 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">

<div style="word-wrap:break-word">Sigh - sorry about that. Guess we'll have to feel our way down the various tools. I've committed a fix that -should- resolve this for the rest of the tools in the OMPI layer. Please let me know how it works for you.<span><font color="#888888"><div>

<br></div><div>Ralph</div></font></span><div><br><div><div><div>On Dec 23, 2012, at 10:56 AM, R C &lt;<a href="mailto:recifx@gmail.com" target="_blank">recifx@gmail.com</a>&gt; wrote:</div><br></div>
<blockquote type="cite"><div><br></div><div>Thanks again for looking into this.</div><div>With&nbsp;r27717, 'make all' gives me the error:</div><div><br></div><div>Making all in tools/ompi_info</div>
<div>make[2]: Entering directory `/home/rc/Downloads/ompi/objd/ompi/tools/ompi_info'</div>
<div>&nbsp; CC &nbsp; &nbsp; ompi_info.o</div><div>&nbsp; CC &nbsp; &nbsp; param.o</div><div>../../../../ompi/tools/ompi_info/param.c: In function ‘ompi_info_do_config’:</div><div>../../../../ompi/tools/ompi_info/param.c:238:17: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div>


<div>../../../../ompi/tools/ompi_info/param.c:252:17: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div><div>../../../../ompi/tools/ompi_info/param.c:259:17: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div>


<div>../../../../ompi/tools/ompi_info/param.c:271:13: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div><div>../../../../ompi/tools/ompi_info/param.c:274:13: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div>


<div>&nbsp; CC &nbsp; &nbsp; components.o</div><div>../../../../ompi/tools/ompi_info/components.c: In function ‘ompi_info_register_components’:</div><div>../../../../ompi/tools/ompi_info/components.c:106:17: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div>


<div>../../../../ompi/tools/ompi_info/components.c:109:21: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div><div>../../../../ompi/tools/ompi_info/components.c:113:21: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div>


<div>&nbsp; CC &nbsp; &nbsp; version.o</div><div>../../../../ompi/tools/ompi_info/version.c: In function ‘ompi_info_show_ompi_version’:</div><div>../../../../ompi/tools/ompi_info/version.c:125:13: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div>


<div>../../../../ompi/tools/ompi_info/version.c:134:13: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div><div>../../../../ompi/tools/ompi_info/version.c:137:13: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]</div>


<div>&nbsp; CCLD &nbsp; ompi_info</div><div>/usr/bin/ld: version.o: undefined reference to symbol 'orte_info_type_orte'</div><div>/usr/bin/ld: note: 'orte_info_type_orte' is defined in DSO /home/rc/Downloads/ompi/objd/orte/.libs/libopen-rte.so.0 so try adding it to the linker command line</div>


<div>/home/rc/Downloads/ompi/objd/orte/.libs/libopen-rte.so.0: could not read symbols: Invalid operation</div><div>collect2: error: ld returned 1 exit status</div><div>make[2]: *** [ompi_info] Error 1</div><div>make[2]: Leaving directory `/home/rc/Downloads/ompi/objd/ompi/tools/ompi_info'</div>


<div>make[1]: *** [all-recursive] Error 1</div><div>make[1]: Leaving directory `/home/rc/Downloads/ompi/objd/ompi'</div><div>make: *** [all-recursive] Error 1</div><div><br></div></blockquote></div>
</div></div></blockquote></div></div></blockquote></div></div></div></div></div></blockquote></div><br></div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a></blockquote></div><br></div></div></blockquote><blockquote type="cite"><div><span>_______________________________________________</span><br><span>devel mailing list</span><br><span><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a></span><br><span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a></span></div></blockquote></body></html>
