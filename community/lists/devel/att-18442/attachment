<div dir="ltr">I am using the 12.4 release of the Solaris Studio compilers on a Solaris system that was fine with 1.10.1.<div>I am configuring with</div><div><br></div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><font face="monospace, monospace">







configure --prefix=[...] --enable-debug CC=cc CXX=CC FC=f90 \</font></div><div><font face="monospace, monospace">    CFLAGS=-m64 --with-wrapper-cflags=-m64 \</font></div><div><font face="monospace, monospace">    CXXFLAGS=&#39;-m64 -library=stlport4&#39; --with-wrapper-cxxflags=&#39;-m64 -library=stlport4&#39; \</font></div><div><font face="monospace, monospace">    FCFLAGS=-m64 --with-wrapper-fcflags=-m64 \</font></div><div><font face="monospace, monospace">    --with-verbs --enable-mpi-java --with-jdk-dir=/usr/jdk/latest</font></div></blockquote><div><div><br></div><div>The build fails to link <a href="http://libmpi_usempi_ignore_tkr.la">libmpi_usempi_ignore_tkr.la</a>, apparently because &quot;-m64&quot; is missing from the link command (note that the default compiler output is &quot;-m32&quot;):</div><div><br></div></div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><font face="monospace, monospace">libtool: compile:  f90 -DHAVE_CONFIG_H -I. -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/ompi/mpi/fortran/use-mpi-ignore-tkr -I../../../../opal/include -I../../../../orte/include -I../../../../ompi/include -I../../../../oshmem/include -I../../../../opal/mca/hwloc/hwloc191/hwloc/include/private/autogen -I../../../../opal/mca/hwloc/hwloc191/hwloc/include/hwloc/autogen -DOMPI_PROFILE_LAYER=0 -DOMPI_COMPILING_FORTRAN_WRAPPERS=1 -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1 -I../../../.. -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/opal/include -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/orte/include -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/ompi/include -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/oshmem/include -D_REENTRANT -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/opal/mca/hwloc/hwloc191/hwloc/include -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/BLD/opal/mca/hwloc/hwloc191/hwloc/include -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/opal/mca/event/libevent2021/libevent -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/opal/mca/event/libevent2021/libevent/include -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/BLD/opal/mca/event/libevent2021/libevent/include -I../../../../ompi/include -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/ompi/include -I../../../.. -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1 -c /shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/ompi/mpi/fortran/use-mpi-ignore-tkr/mpi-ignore-tkr.F90  -KPIC -o .libs/mpi-ignore-tkr.o</font></div><div><font face="monospace, monospace">/bin/sh ../../../../libtool  --tag=FC   --mode=link f90 -I../../../../ompi/include -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1/ompi/include -I../../../.. -I/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/openmpi-1.10.2rc1   -version-info 6:0:0   -o <a href="http://libmpi_usempi_ignore_tkr.la">libmpi_usempi_ignore_tkr.la</a> -rpath /shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/INST/lib mpi-ignore-tkr.lo   /shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/BLD/opal/<a href="http://libopen-pal.la">libopen-pal.la</a> -lm -lsocket -lnsl</font></div><div><font face="monospace, monospace">libtool: link: f90 -G -h libmpi_usempi_ignore_tkr.so.6 -o .libs/libmpi_usempi_ignore_tkr.so.6.0.0  .libs/mpi-ignore-tkr.o   -R/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/BLD/opal/.libs -R/shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/INST/lib /shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/BLD/opal/.libs/libopen-pal.so -lsendfile -lpicl -lkstat -llgrp -lpciaccess -lm -lsocket -lnsl</font></div><div><font face="monospace, monospace">ld: fatal: file /shared/OMPI/openmpi-1.10.2rc1-solaris11-x64-ib-ss12u4/BLD/opal/.libs/libopen-pal.so: <span style="background-color:rgb(255,255,0)">wrong ELF class: ELFCLASS64</span></font></div><div><font face="monospace, monospace">gmake[2]: *** [<a href="http://libmpi_usempi_ignore_tkr.la">libmpi_usempi_ignore_tkr.la</a>] Error 2</font></div></blockquote><div><div><br></div><div>-Paul</div><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div></div>

