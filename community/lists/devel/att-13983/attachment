<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Committed a fix for these in the trunk - I've asked Jeff to review for 1.7.4, but let me know if you get a chance to verify it<div><br></div><div>Thanks!</div><div>Ralph</div><div><br><div><div>On Feb 2, 2014, at 1:46 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov">phhargrove@lbl.gov</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div dir="ltr">I see the following warnings when building 1.7.4rc3 on Solaris10 on SPARC w/ the Solaris Studio 12.3 compilers.<div><br></div><div><div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_</font><span style="font-family:'courier new',monospace;font-size:x-small">posix_common_utils.c", line 75: warning: implicit function declaration: shm_open</span></div>
<div><span style="font-family:'courier new',monospace;font-size:x-small">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_</span></div><div><font size="1" face="courier new, monospace">posix_component.c", line 186: warning: implicit function declaration: shm_unlink</font></div>
<div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c", line 212: warning: assignment type mismatch:</font></div>
<div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; pointer to struct opal_shmem_seg_hdr_t {struct opal_atomic_lock_t {..} lock, int cpid} "=" pointer to char</font></div><div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c", line 285: warning: implicit function declaration: shm_unlink</font></div>
<div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c", line 288: warning: argument #1 is incompatible with prototype:</font></div>
<div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; prototype: pointer to char : "/usr/include/sys/mman.h", line 165</font></div><div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; argument : pointer to struct opal_shmem_seg_hdr_t {struct opal_atomic_lock_t {..} lock, int cpid}</font></div>
<div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c", line 306: warning: implicit function declaration: shm_open</font></div>
<div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c", line 315: warning: assignment type mismatch:</font></div>
<div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; pointer to unsigned char "=" pointer to char</font></div><div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/posix/shmem_posix_module.c", line 378: warning: argument #1 is incompatible with prototype:</font></div>
<div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; prototype: pointer to char : "/usr/include/sys/mman.h", line 165</font></div><div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; argument : pointer to unsigned char</font></div>
<div><font size="1" face="courier new, monospace">&nbsp;&nbsp;</font></div><div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/sysv/shmem_s</font><span style="font-family:'courier new',monospace;font-size:x-small">ysv_module.c", line 278: warning: argument #1 is incompatible with prototype:</span></div>
<div><font size="1" face="courier new, monospace">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;prototype: pointer to char : "/usr/include/sys/shm.h", line 131</font></div><div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; argument : pointer to struct opal_shmem_seg_hdr_t {struct opal_atomic_lock_t {..} lock, int cpid}</font></div>
<div><font size="1" face="courier new, monospace">"/home/hargrove/OMPI/openmpi-1.7.4rc2-solaris10-sparcT2-ss12u3-v9/openmpi-1.7.4rc2/opal/mca/shmem/sysv/shmem_sysv_module.c", line 342: warning: argument #1 is incompatible with prototype:</font></div>
<div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; prototype: pointer to char : "/usr/include/sys/shm.h", line 131</font></div><div><font size="1" face="courier new, monospace">&nbsp; &nbsp; &nbsp; &nbsp; argument : pointer to unsigned char</font></div>
</div><div><br></div><div>Some appear to be missing casts for pointer types (as args and in assignments).</div><div><br></div><div>Others seem to be missing prototypes for shm_*(), despite including the right headers.</div>
<div>In GASNet we found we need to deal with POSIX shared memory as follows on Solaris:</div><div><div><br></div><div>#if PLATFORM_OS_SOLARIS &amp;&amp; !defined(_POSIX_C_SOURCE)</div><div>&nbsp; #define _POSIX_C_SOURCE 200112L /* Required for shm_{open,unlink} decls */</div>
<div>&nbsp; #include &lt;sys/mman.h&gt;</div><div>&nbsp; #undef _POSIX_C_SOURCE</div></div><div>#elif HAVE_SYS_MMAN_H</div><div>&nbsp; #include &lt;sys/mman.h&gt;</div><div>#else</div><div>&nbsp; ....</div><div>#endif</div><div><br>
</div><div>-Paul<br clear="all"><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>
Future Technologies Group</div><div>Computer and Data Sciences Department &nbsp; &nbsp; Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font>
</div></div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel</blockquote></div><br></div></body></html>
