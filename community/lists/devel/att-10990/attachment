<font face="Default Sans Serif,Verdana,Arial,Helvetica,sans-serif" size="2"><div>Well, looking at the libverbs sources, it seems that there is a patch for devinfo (cf below).</div><div><br></div><div>Thus, the correct speeds, according to the libibverbs patch. And, if I understand well, they must be&nbsp;</div><div>multiplied by the coding ratio&nbsp;to get the real link speed.</div><div><br></div><div>I joined another patch. I don't know if we should remove the case 4 and fall through case 8 or just keep it as I do.</div><div><br></div><div>Regards,</div><div><br></div><div>Ludovic</div><div><br></div><div>libibverbs/fixes/add_support_for_extended_speends.patch</div><div><br></div><div>[PATCH]libibverbs: Add support for extended speeds</div><div><br></div><div><div>8: &nbsp;FDR-10 is a proprietary link speed which is 10.3125 Gbps at 64/66</div><div>&nbsp; &nbsp; encoding rather than 8b10b encoding.</div><div>16: FDR - 14.0625 Gbps</div><div>32: EDR - 25.78125 Gbps</div></div><div><br></div><div><div>+--- a/examples/devinfo.c</div><div>++++ b/examples/devinfo.c</div><div>+@@ -139,7 +139,12 @@ static const char *speed_str(uint8_t speed)</div><div>+ switch (speed) {</div><div>+ case 1: &nbsp;return "2.5 Gbps";</div><div>+ case 2: &nbsp;return "5.0 Gbps";</div><div>+-<span class="Apple-tab-span" style="white-space:pre">	</span>case 4: &nbsp;return "10.0 Gbps";</div><div>++</div><div>++<span class="Apple-tab-span" style="white-space:pre">	</span>case 4: &nbsp;/* fall through */</div><div>++<span class="Apple-tab-span" style="white-space:pre">	</span>case 8: &nbsp;return "10.0 Gbps";</div><div>++</div><div>++<span class="Apple-tab-span" style="white-space:pre">	</span>case 16: return "14.0 Gbps";</div><div>++<span class="Apple-tab-span" style="white-space:pre">	</span>case 32: return "25.0 Gbps";</div><div>+ default: return "invalid speed";</div><div>+ }</div><div>+ }</div></div><div><br></div><div><br></div><br><font color="#990099">-----devel-bounces@open-mpi.org a écrit : -----</font><div><blockquote style="padding-right:0px;padding-left:5px;margin-left:5px;border-left:solid black 2px;margin-right:0px">A : devel@open-mpi.org<br>De : Peter Kjellström <cap@nsc.liu.se><br>Envoyé par : devel-bounces@open-mpi.org<br>Date : 09/05/2012 16:35<br>Objet : Re: [OMPI devel] FDR: bad patch?  (was:  1.6rc3 is out)<br><br>

<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">On Wednesday 09 May 2012 10.20.47 Jeff Squyres wrote:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">...</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; I don't have any QDR or FDR equipment -- what's the typical active_width for</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; QDR and FDR?</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; QDR is 32000, so is that active_speed of 4 and active_width of 4? (8000 * 4</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; = 32000)?</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; FDR is 56000 (right?</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">Pretty much all IB is 4x to host.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">4x QDR is 40 Gbps at link level =&gt; 8 Gbps data per link (8/10 coding)</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">4x FDR10 is 40 Gbps at link level =&gt; ~9.7 Gbps data per link (64/66 coding)</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">4x FDR is 56 Gbps at link level =&gt; ~13.5 Gbps data per link (64/66 coding)</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">/Peter</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; I haven't kept up with IB specs since Cisco killed</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&gt; IB...), so what are its active_speed and active_width values?</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">-- </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">-= Peter Kjellström</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">-= National Supercomputer Centre</p><font face="Courier New,Courier,monospace" size="3">_______________________________________________<br>devel mailing list<br>devel@open-mpi.org<br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a></font></cap@nsc.liu.se></blockquote><br><br>[pièce jointe "signature.asc" supprimée par Ludovic Hablot/EXT/FR/BULL]</div><div></div></font>
