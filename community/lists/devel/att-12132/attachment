<html><head><meta http-equiv="Content-Type" content="text/html charset=us-ascii"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Here's what I found:<div><br></div><div><blockquote type="cite">In Java, a&nbsp;<code>long</code>&nbsp;is always 64 bits. In C and Objective-C, a&nbsp;<code>long</code>&nbsp;might be 64 bits, or it might be 32 bits, or (in less common cases) it might be something else entirely; the C standard doesn't specify an exact bit width.</blockquote></div><div><div><div><br></div><div><br></div><div>So we may need a configure test to map the Java "long" data type to the right thing to get int64_t?</div><div><br></div><div><br></div><div><div>On Feb 20, 2013, at 7:41 AM, Jeff Squyres (jsquyres) &lt;<a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">I guess the question is whether a java "long" is equivalent to a C "long", "long long", or "long int"...<br><br>Do you know? &nbsp;(I'm not much of a Java guy)<br><br><br>On Feb 19, 2013, at 7:22 PM, Steve Angelovich &lt;<a href="mailto:SAngelovich@lgc.com">SAngelovich@lgc.com</a>&gt; wrote:<br><br><blockquote type="cite">All,<br><br>We ran into a &nbsp;problem using openmpi from java with a Java data type of long when doing bcast and reduce operations.<br><br>*** An error occurred in MPI_Allreduce: the reduction operation MPI_MIN is not defined on the MPI_LONG_INT datatype<br>*** reported by process [211105480705,0]<br>*** on communicator MPI COMMUNICATOR 4 DUP FROM 0<br>*** MPI_ERR_OP: invalid reduce operation<br>*** MPI_ERRORS_ARE_FATAL (processes in this communicator will now abort,<br>*** &nbsp;&nbsp;&nbsp;and potentially your MPI job)<br>3 more processes have sent help message help-mpi-errors.txt / mpi_errors_are_fatal<br>Set MCA parameter "orte_base_help_aggregate" to 0 to see all help / error messages<br><br>Looking at ompi/mpi/java/c/mpi_Datatype.c it looks like an MPI_LONG_INT type is being used. &nbsp;It seems this should be an MPI_LONG_LONG. &nbsp;If I change this data type I'm able to do bcast and reduce operations via the java interface. &nbsp;Does this look like a bug or am I missing something else?<br><br><br><br>--- openmpi-1.7rc6/ompi/mpi/java/c/mpi_Datatype.c &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2013-02-19 15:44:13.299046000 -0600<br>+++ openmpi-1.9a1r28069/ompi/mpi/java/c/mpi_Datatype.c &nbsp;2013-02-17 20:00:14.000000000 -0600<br>@@ -60,7 +60,7 @@<br><br>MPI_Datatype Dts[] = { MPI_DATATYPE_NULL, MPI_BYTE, &nbsp;MPI_SHORT,<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_SHORT, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_BYTE, &nbsp;MPI_INT,<br>- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_LONG_LONG, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_FLOAT, MPI_DOUBLE,<br>+ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_LONG_INT, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_FLOAT, MPI_DOUBLE,<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_PACKED, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_LB, &nbsp;&nbsp;&nbsp;MPI_UB,<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPI_BYTE };<br><br><br>Thanks,<br>Steve<br><br>----------------------------------------------------------------------<br>This e-mail, including any attached files, may contain confidential and privileged information for the sole use of the intended recipient. &nbsp;Any review, use, distribution, or disclosure by others is strictly prohibited. &nbsp;If you are not the intended recipient (or authorized to receive information for the intended recipient), please contact the sender by reply e-mail and delete all copies of this message.<br><br>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel<br></blockquote><br><br>-- <br>Jeff Squyres<br><a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a><br>For corporate legal information go to: http://www.cisco.com/web/about/doing_business/legal/cri/<br><br><br>_______________________________________________<br>devel mailing list<br>devel@open-mpi.org<br>http://www.open-mpi.org/mailman/listinfo.cgi/devel<br></blockquote></div><br></div></div></body></html>
