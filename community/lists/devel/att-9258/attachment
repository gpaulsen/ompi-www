<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div>This bug applies to OpenMPI 1.4.x and 1.5.x.</div><div><br></div>The libtool.m4 in config and opal/libltdl/m4 do not properly determine the version of the PGI compiler, which then set the wrong compile/link options. &nbsp;They interpret V11.4 (version no. begins with a 1), for example, as being a V1 to V5 compiler. &nbsp;There is a missing period in the pattern, so that only text like 1.x through 5.x matches.<div><br></div><div>Here's the diff -u from OpenMPI 1.4.3 (same code, same bug):<div><br></div><div><div><blockquote type="cite"><div><font class="Apple-style-span" color="#000000">[root@hydra openmpi-1.4.3]# diff -u config/libtool.m4{.original,}</font></div><div><font class="Apple-style-span" color="#000000">--- config/libtool.m4.original</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">	</font></span><font class="Apple-style-span" color="#000000">2010-10-05 15:45:44.000000000 -0700</font></div><div><font class="Apple-style-span" color="#000000">+++ config/libtool.m4</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">	</font></span><font class="Apple-style-span" color="#000000">2011-05-17 15:32:31.000000000 -0700</font></div><div><font class="Apple-style-span" color="#000000">@@ -5896,7 +5896,7 @@</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pgCC* | pgcpp*)</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Portland Group C++ compiler</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">	</font></span><font class="Apple-style-span" color="#000000"> &nbsp; &nbsp;case `$CC -V` in</font></div><div><font class="Apple-style-span" color="#000000">-</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">	</font></span><font class="Apple-style-span" color="#000000"> &nbsp; &nbsp;*pgCC\ [[1-5]]* | *pgcpp\ [[1-5]]*)</font></div><div><font class="Apple-style-span" color="#000000">+</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">	</font></span><font class="Apple-style-span" color="#000000"> &nbsp; &nbsp;*pgCC\ [[1-5]].* | *pgcpp\ [[1-5]].*)</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">	</font></span><font class="Apple-style-span" color="#000000"> &nbsp; &nbsp; &nbsp;_LT_TAGVAR(prelink_cmds, $1)='tpldir=Template.dir~</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">		</font></span><font class="Apple-style-span" color="#000000">rm -rf $tpldir~</font></div><div><font class="Apple-style-span" color="#000000">&nbsp;</font><span class="Apple-tab-span" style="white-space:pre"><font class="Apple-style-span" color="#000000">		</font></span><font class="Apple-style-span" color="#000000">$CC --prelink_objects --instantiation_dir $tpldir $objs $libobjs $compile_deplibs~</font></div></blockquote></div></div><div><div><br></div></div><div><div apple-content-edited="true"> <div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div><div><div><div><div><div><div><div><div><div>Larry Baker</div><div>US Geological Survey</div><div>650-329-5608</div><div><a href="mailto:baker@usgs.gov">baker@usgs.gov</a></div></div></div></div></div></div></div></div></div></div></div> </div><div><br></div><div><div>On 5 May 2011, at 7:15 AM, Jeff Squyres wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div>Fixed the ROMIO attribute problem properly this time -- it's in the usual place:<br><br> &nbsp;&nbsp;&nbsp;<a href="http://www.open-mpi.org/software/ompi/v1.4/">http://www.open-mpi.org/software/ompi/v1.4/</a><br><br>-- <br>Jeff Squyres<br><a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a><br>For corporate legal information go to:<br>http://www.cisco.com/web/about/doing_business/legal/cri/<br><br><br>_______________________________________________<br>devel mailing list<br>devel@open-mpi.org<br>http://www.open-mpi.org/mailman/listinfo.cgi/devel<br></div></blockquote></div><br></div></div></body></html>
