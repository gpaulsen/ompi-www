<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">Thanks Paul!!<div class=""><br class=""><div style=""><blockquote type="cite" class=""><div class="">On May 24, 2015, at 6:53 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" class="">phhargrove@lbl.gov</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">I have determined that 1.8.5 also fails in the same manner on this host.<div class="">Configuring with&nbsp;--disable-io-romio allows 1.8.6rc1 to build correctly.<br class=""><div class=""><div class="">So, the problem appears to be in ROMIO as it relates to OpenBSD-5.7.</div><div class=""><br class=""></div><div class=""><div class="">Since this is *not* a regression I feel this should not delay a 1.8.6 release unless there is an existing fix upstream in romio.</div><div class="">A quick look at their trac didn't show anything promising.</div><div class=""><br class=""></div><div class=""><br class=""></div><div class="">Notice the following difference in the configure output (from romio) between an old saved test of 1.8.5rc3 on OpenBSD-5.6 and a fresh test of 1.8.6rc1 on OpenBSD-5.7:</div><div class=""><br class=""></div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;" class=""><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking sys/param.h usability... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking sys/param.h presence... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking for sys/param.h... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-checking sys/mount.h usability... no</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">+checking sys/mount.h usability... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking sys/mount.h presence... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-configure: WARNING: sys/mount.h: present but cannot be compiled</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-configure: WARNING: sys/mount.h: &nbsp; &nbsp; check for missing prerequisite headers?</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-configure: WARNING: sys/mount.h: see the Autoconf documentation</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-configure: WARNING: sys/mount.h: &nbsp; &nbsp; section "Present But Cannot Be Compiled"</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-configure: WARNING: sys/mount.h: proceeding with the compiler's result</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-configure: WARNING: &nbsp; &nbsp; ## -------------------------------- ##</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-configure: WARNING: &nbsp; &nbsp; ## Report this to<span class="Apple-converted-space">&nbsp;</span><a href="mailto:discuss@mpich.org" class="">discuss@mpich.org</a><span class="Apple-converted-space">&nbsp;</span>##</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-configure: WARNING: &nbsp; &nbsp; ## -------------------------------- ##</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-checking for sys/mount.h... no</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">+checking for sys/mount.h... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking sys/statvfs.h usability... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking sys/statvfs.h presence... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking for sys/statvfs.h... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">-checking whether struct statfs properly defined... no</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">+checking whether struct statfs properly defined... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking for f_fstypename member of statfs structure... yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking for sys/stat.h... (cached) yes</font></div></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">&nbsp;checking for sys/types.h... (cached) yes</font></div></div></blockquote><div class=""><br class=""></div><div class="">This suggests to me that code that may have been unreachable under OpenBSD 5.6 is now being built (unsuccessfully) under OpenBSD 5.7.</div><div class="">Specifically the "struct statfs properly defined" test result has changed from "no" to "yes".</div><div class="">To me it looks like the failing code assumes that if that configure test passed, then struct statfs contains a f_type field.</div><div class="">I do notice that Open MPI's configure actually checks rather than assuming this:</div></div></div></div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;" class=""><div class=""><div class=""><div class=""><div class=""><div class=""><font face="monospace, monospace" size="1" class="">checking for struct statfs.f_type... no</font></div></div></div></div></div></blockquote><div class=""><div class=""><br class=""></div><div class=""><br class=""></div><div class="">-Paul<br class=""><div class="gmail_extra"><br class=""><div class="gmail_quote">On Sun, May 24, 2015 at 5:57 PM, Paul Hargrove<span class="Apple-converted-space">&nbsp;</span><span dir="ltr" class="">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank" class="">phhargrove@lbl.gov</a>&gt;</span><span class="Apple-converted-space">&nbsp;</span>wrote:<br class=""><blockquote class="gmail_quote" style="margin: 0px 0px 0px 0.8ex; border-left-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; padding-left: 1ex;"><div dir="ltr" class="">I see a failure on OpenBSD when building ROMIO:<div class=""><br class=""></div><div class=""><div class=""><font face="monospace, monospace" size="1" class="">libtool: compile: &nbsp;gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio -I./adio/include -DOMPI_BUILDING=1 -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/../../../../.. -I/home/phargrov/OMPI/openmpi-1.8.6r</font></div><div class=""><font face="monospace, monospace" size="1" class="">c1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/../../../../../opal/include -I./../../../../../opal/include -I./../../../../../ompi/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc</font></div><div class=""><font face="monospace, monospace" size="1" class="">1/ompi/mca/io/romio/romio/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/include -I./include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.</font></div><div class=""><font face="monospace, monospace" size="1" class="">6rc1/ompi/mca/io/romio/romio/include -I./mpi-io -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-</font></div><div class=""><font face="monospace, monospace" size="1" class="">1.8.6rc1/ompi/mca/io/romio/romio/mpi-io -I./adio/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64</font></div><div class=""><font face="monospace, monospace" size="1" class="">/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/o</font></div><div class=""><font face="monospace, monospace" size="1" class="">penmpi-1.8.6rc1/opal/mca/hwloc/hwloc191/hwloc/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/BL</font></div><div class=""><font face="monospace, monospace" size="1" class="">D/opal/mca/hwloc/hwloc191/hwloc/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1</font></div><div class=""><font face="monospace, monospace" size="1" class="">/opal/mca/event/libevent2021/libevent -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/o</font></div><div class=""><font face="monospace, monospace" size="1" class="">pal/mca/event/libevent2021/libevent/include -I/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/BLD/opal/mca</font></div><div class=""><font face="monospace, monospace" size="1" class="">/event/libevent2021/libevent/include -g -finline-functions -fno-strict-aliasing -pthread -DHAVE_ROMIOCONF_H -I</font></div><div class=""><font face="monospace, monospace" size="1" class="">./include -MT adio/common/ad_fstype.lo -MD -MP -MF adio/common/.deps/ad_fstype.Tpo -c /home/phargrov/OMPI/open</font></div><div class=""><font face="monospace, monospace" size="1" class="">mpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fstype.c &nbsp;-fPIC -DPIC -o a</font></div><div class=""><font face="monospace, monospace" size="1" class="">dio/common/.libs/ad_fstype.o</font></div><div class=""><font face="monospace, monospace" size="1" class="">/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fs</font></div><div class=""><font face="monospace, monospace" size="1" class="">type.c: In function 'ADIO_FileSysType_fncall':</font></div><div class=""><font face="monospace, monospace" size="1" class="">/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fstype.c:374: error: 'struct statfs' has no member named 'f_type'</font></div><div class=""><font face="monospace, monospace" size="1" class="">/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fstype.c:398: error: 'struct statfs' has no member named 'f_type'</font></div><div class=""><font face="monospace, monospace" size="1" class="">/home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/openmpi-1.8.6rc1/ompi/mca/io/romio/romio/adio/common/ad_fstype.c:419: error: 'struct statfs' has no member named 'f_type'</font></div><div class=""><font face="monospace, monospace" size="1" class="">*** Error 1 in ompi/mca/io/romio/romio (Makefile:3335 'adio/common/ad_fstype.lo')</font></div><div class=""><font face="monospace, monospace" size="1" class="">*** Error 1 in ompi/mca/io/romio/romio (Makefile:4196 'all-recursive')</font></div><div class=""><font face="monospace, monospace" size="1" class="">*** Error 1 in ompi/mca/io/romio (Makefile:1840 'all-recursive')</font></div><div class=""><font face="monospace, monospace" size="1" class="">*** Error 1 in ompi (Makefile:3164 'all-recursive')</font></div><div class=""><font face="monospace, monospace" size="1" class="">*** Error 1 in /home/phargrov/OMPI/openmpi-1.8.6rc1-openbsd5-amd64/BLD (Makefile:1724 'all-recursive')</font></div></div><div class=""><br class=""></div><div class="">This was NOT present in my testing of 1.8.5rc3.</div><div class="">HOWEVER the host has been updated from OpenBSD-5.6 to 5.7.</div><div class="">So, I don't yet know if the problem is due to a change in OMPI or in the host.</div><div class="">I will report again when I know more.</div><div class=""><br class=""></div><div class="">-Paul</div></div><div class="gmail_extra"><div class=""><div class="h5"><br class=""><div class="gmail_quote">On Sat, May 23, 2015 at 1:28 PM, Ralph Castain<span class="Apple-converted-space">&nbsp;</span><span dir="ltr" class="">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt;</span><span class="Apple-converted-space">&nbsp;</span>wrote:<br class=""><blockquote class="gmail_quote" style="margin: 0px 0px 0px 0.8ex; border-left-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; padding-left: 1ex;">Usual place:<br class=""><br class=""><a href="http://www.open-mpi.org/software/ompi/v1.8/" target="_blank" class="">http://www.open-mpi.org/software/ompi/v1.8/</a><br class=""><br class="">1.8.6<br class="">-----<br class=""><br class="">- Fixed memory leak on Mac OS-X exposed by TCP keepalive<br class="">- Fixed keepalive support to ensure that daemon/node failure<br class="">&nbsp;<span class="Apple-converted-space">&nbsp;</span>results in complete job cleanup<br class="">- Update Java binding support<br class="">- Fixed MPI_THREAD_MULTIPLE bug in vader shared memory BTL<br class="">- Fixed issue during shutdown when CUDA initialization wasn't complete<br class="">- Fixed orted environment when no prefix given<br class="">- Fixed trivial typo in MPI_Neighbor_allgather manpage<br class="">- Fixed tree-spawn support for sh and ksh shells<br class="">- Several data type fixes<br class=""><br class="">_______________________________________________<br class="">devel mailing list<br class=""><a href="mailto:devel@open-mpi.org" target="_blank" class="">devel@open-mpi.org</a><br class="">Subscription:<span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">Link to this post:<span class="Apple-converted-space">&nbsp;</span><a href="http://www.open-mpi.org/community/lists/devel/2015/05/17447.php" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2015/05/17447.php</a><br class=""></blockquote></div><br class=""><br clear="all" class=""><div class=""><br class=""></div></div></div><span class=""><font color="#888888" class="">--<span class="Apple-converted-space">&nbsp;</span><br class=""><div class=""><div dir="ltr" class=""><div class=""><font face="courier new, monospace" class=""><div class="">Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank" class="">PHHargrove@lbl.gov</a></div><div class="">Computer Languages &amp; Systems Software (CLaSS) Group</div><div class="">Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel:<span class="Apple-converted-space">&nbsp;</span><a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank" class="">+1-510-495-2352</a></div><div class="">Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax:<span class="Apple-converted-space">&nbsp;</span><a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank" class="">+1-510-486-6900</a></div></font></div></div></div></font></span></div></blockquote></div><br class=""><br clear="all" class=""><div class=""><br class=""></div>--<span class="Apple-converted-space">&nbsp;</span><br class=""><div class="gmail_signature"><div dir="ltr" class=""><div class=""><font face="courier new, monospace" class=""><div class="">Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank" class="">PHHargrove@lbl.gov</a></div><div class="">Computer Languages &amp; Systems Software (CLaSS) Group</div><div class="">Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: +1-510-495-2352</div><div class="">Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font></div></div></div></div></div></div></div><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">_______________________________________________</span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">devel mailing list</span><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><a href="mailto:devel@open-mpi.org" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">devel@open-mpi.org</a><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Subscription:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=""><span style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important;" class="">Link to this post:<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.open-mpi.org/community/lists/devel/2015/05/17452.php" style="font-family: Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class="">http://www.open-mpi.org/community/lists/devel/2015/05/17452.php</a></div></blockquote></div><br class=""></div></body></html>
