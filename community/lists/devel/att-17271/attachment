<div dir="ltr">Folks,<div><br></div><div>i (sometimes) get some failure with the c_accumulate test from the ibm test suite on one host with 4 mpi tasks</div><div><br></div><div>so far, i was only able to observe this on linux/sparc with the vader btl</div><div><br></div><div>here is a snippet of the test :</div><div><br></div><div><pre style="color:rgb(0,0,0)">MPI_Win_create(&amp;RecvBuff, sizeOfInt, 1, MPI_INFO_NULL,
		  MPI_COMM_WORLD, &amp;Win);

  SendBuff = rank + 100;
  RecvBuff = 0;

  /* Accumulate to everyone, just for the heck of it */

  MPI_Win_fence(MPI_MODE_NOPRECEDE, Win);
  for (i = 0; i &lt; size; ++i)
    MPI_Accumulate(&amp;SendBuff, 1, MPI_INT, i, 0, 1, MPI_INT, MPI_SUM, Win);
  MPI_Win_fence((MPI_MODE_NOPUT | MPI_MODE_NOSUCCEED), Win);</pre></div><div><br></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">when the test fails, RecvBuff in (rank+100) instead of the accumulated value (100 * nprocs + (nprocs -1)*nprocs/2</span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px"><br></span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">i am not familiar with onesided operations nor MPI_Win_fence.</span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">that being said, i found suspicious RecvBuff is initialized *after* MPI_Win_create ...<br></span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px"><br></span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">does MPI_Win_fence implies MPI_Barrier ?</span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px"><br></span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">if not, i guess RecvBuff should be initialized *before* MPI_Win_create.</span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px"><br></span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">makes sense ?</span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px"><br></span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">(and if it does make sense, then this issue is not related to sparc, and vader is not the root cause)</span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px"><br></span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">Cheers,</span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px"><br></span></font></div><div><font color="#333333" face="Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, Segoe UI Emoji, Segoe UI Symbol"><span style="line-height:18.2000007629395px">Gilles</span></font></div></div>

