<div dir="ltr"><br><div class="gmail_extra"><br><div class="gmail_quote">On Fri, Dec 12, 2014 at 2:58 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div style="word-wrap:break-word">Aha! You are the first to fall thru the timeout. How interesting.</div></blockquote><div><br></div><div>When it comes to the release candidates, I seem to own a lot of &quot;firsts&quot;.</div><div>It is not as fun as one might imagine :-).</div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div style="word-wrap:break-word"><div>Can you please try adding &ldquo;-mca&nbsp;<span style="background-color:rgb(254,244,156)"><font face="Menlo"><span style="font-size:11px">oob_tcp_connect_timeout 5:0&rdquo;?</span></font></span></div></div></blockquote><div><br></div><div><div>That appeared to produce a timeout of about 5 SECONDS (&quot;time mpirun&quot; reports 5.8s elapsed).&nbsp; Was that really the intent? &nbsp; No difference if I change &quot;5:0&quot; to &quot;5:00&quot;.&nbsp; So, you might have an &quot;extra&quot; bug lurking there.</div></div><div><br></div><div><br></div><div>New stderr attached for</div><div><font face="monospace">&nbsp; $&nbsp;mpirun -mca oob_tcp_if_include bge0 -mca oob_tcp_connect_timeout 5:0 -mca oob_base_verbose 20 -mca btl sm,self,openib -np 2 -host pcp-j-19,pcp-j-20 examples/ring_c</font></div><div><br></div><div>Assuming &quot;5:0&quot; was intended to get a 5 MINUTE timeout, I also tried &quot;-mca oob_tcp_connect_timeout <span style="background-color:rgb(255,255,0)">300</span>&quot;, and have also attached the resulting stderr.</div><div><br></div><div><div>No joy for either timeout value.</div></div><div><br></div><div>-Paul</div><div><br></div><div>&nbsp;</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div style="word-wrap:break-word"><div><br></div><div><div><div class="h5">On Dec 12, 2014, at 8:53 AM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt; wrote:</div></div><div><blockquote type="cite"><br><div><div><div class="h5"><div dir="ltr"><div><br></div><div>First, I want to ask what became of the issue discussed in this thread?</div><div>&nbsp; &nbsp;<a href="http://www.open-mpi.org/community/lists/devel/2014/11/16160.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/11/16160.php</a></div><div>I though we had concluded that one just needed -D_REENTRANT.</div><div>I mention that only for completeness, because I think my current problem is different.</div><div><br></div><div>The following works fine with 1.8.3, making the current behavior a regression.</div><div><br></div><div>I am still on the same system as that previous report, and still/again see a message like the following:</div><div><br></div><div><div><font face="monospace">------------------------------------------------------------</font></div><div><font face="monospace">A process or daemon was unable to complete a TCP connection</font></div><div><font face="monospace">to another process:</font></div><div><font face="monospace">&nbsp; Local host: &nbsp; &nbsp;pcp-j-19</font></div><div><font face="monospace">&nbsp; Remote host: &nbsp; 172.18.0.120</font></div><div><font face="monospace">This is usually caused by a firewall on the remote host. Please</font></div><div><font face="monospace">check that any firewall (e.g., iptables) has been disabled and</font></div><div><font face="monospace">try again.</font></div><div><font face="monospace">------------------------------------------------------------</font></div></div><div><div><font face="monospace">--------------------------------------------------------------------------</font></div><div><font face="monospace">ORTE was unable to reliably start one or more daemons.</font></div><div><font face="monospace">This usually is caused by:</font></div></div><div><font face="monospace">[...etc...]</font></div><div><br></div><div>It may be worth noting that the hostname pcp-j-19 (172.16.0.119) and the address 172.18.0.120 are on different subnets.</div><div><br></div><div>I CANNOT resolve the issue this time by adding -D_REENTRANT to CFLAGS at configure time (I didn&#39;t bother to check if it there by default now or not).<br></div><div><br></div><div>NOR can I resolve it by using &quot;-mca oob_tcp_if_include bge0&quot; to allow only the 172.16.0.120 subnet.</div><div>IN FACT, the message is the same with that option, other than &quot;172.18&quot; changing to &quot;172.16&quot;.</div><div><br></div><div>I&#39;ve attached the output generated by &quot;-mca&nbsp;oob_base_verbose 20&quot; both with and without the oob_tcp_if_include.</div><div><br></div><div>I should also note that that the following is my full mpirun command, which excludes the tcp BTL.</div><div><font face="monospace">pcp-j-20$&nbsp;mpirun -mca oob_tcp_if_include bge0 -mca oob_base_verbose 20 -mca btl sm,self,openib -np 2 -host pcp-j-19,pcp-j-20 examples/ring_c</font></div><div><br></div><div><br></div><div>-Paul<br clear="all"><div><br></div>-- <br><div><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font></div></div></div>
</div></div>
</div></div><span>&lt;stdout-inc.txt&gt;</span><span>&lt;stderr-2if.txt&gt;</span>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/12/16551.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/12/16551.php</a></div></blockquote></div><br></div></div><br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/12/16561.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/12/16561.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font></div></div></div>
</div></div>

