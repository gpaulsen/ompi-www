<div dir="ltr">Ralph,<div><br></div><div>It doesn&#39;t look to me like there is a lack of a dl component.</div><div>It looks to me like libinfinipath is doing something bad when dl_open()ed by mtl_ofi.</div><div>Regardless, the requested verbose output is attached.</div><div><br></div><div>As for cores, I cannot get any because somebody is catching SIGABRT.</div><div>What I do see is files like</div><div>   ring_c.80s-19092,sl7x.localdomain.btr</div><div>which contain the same backtrace as in the attachment.</div><div><br></div><div>So, I tried &quot;mpirun -mca btl sm,self -np 1 gdb examples/ring_c&quot; and was able to get the backtrace given below.</div><div><br></div><div>It is worth noting that this is apparently *not* a regression.</div><div><div>I find that I get the same error with the released 1.10.0 built just now.</div><div>I know that I did *NOT* see this problem with my original testing of 1.10.0rc7 (still have the build and its logs)</div><div>However, trying today to run ring_c from my 1.10.0rc7 build fails in the same manner.</div><div>So, something has changed on this system since my last testing there.</div><div><br></div><div>Thanks to /var/log/yum.log I can tell you exactly the 143 changes since I tested 1.10.0rc7 if you care.</div><div>The main change appears to be a switch from a MOFED-based install to the OFED packaged with RHEL7.</div><div>So, I am currently willing to bet that I&#39;ve got a broken MOFED/OFED hybrid installation.</div><div>If that is the case (and I am looking into it now) then this is NOT an Open MPI problem.</div><div>I will try to let you know what I discover.</div><div><br></div><div>-Paul</div></div><div><br></div><div><br></div><div><div><font face="monospace, monospace" size="1">ring_c: route/tc.c:973: rtnl_tc_register: Assertion `0&#39; failed.</font></div><div><font face="monospace, monospace" size="1"><br></font></div><div><font face="monospace, monospace" size="1">Program received signal SIGABRT, Aborted.</font></div><div><font face="monospace, monospace" size="1">0x00007ffff74905e9 in __GI_raise (sig=sig@entry=6)</font></div><div><font face="monospace, monospace" size="1">    at ../nptl/sysdeps/unix/sysv/linux/raise.c:56</font></div><div><font face="monospace, monospace" size="1">56        return INLINE_SYSCALL (tgkill, 3, pid, selftid, sig);</font></div><div><font face="monospace, monospace" size="1">(gdb) where</font></div><div><font face="monospace, monospace" size="1">#0  0x00007ffff74905e9 in __GI_raise (sig=sig@entry=6)</font></div><div><font face="monospace, monospace" size="1">    at ../nptl/sysdeps/unix/sysv/linux/raise.c:56</font></div><div><font face="monospace, monospace" size="1">#1  0x00007ffff7491cf8 in __GI_abort () at abort.c:90</font></div><div><font face="monospace, monospace" size="1">#2  0x00007ffff7489556 in __assert_fail_base (</font></div><div><font face="monospace, monospace" size="1">    fmt=0x7ffff75d9168 &quot;%s%s%s:%u: %s%sAssertion `%s&#39; failed.\n%n&quot;, </font></div><div><font face="monospace, monospace" size="1">    assertion=assertion@entry=0x7ffff16d3230 &quot;0&quot;, </font></div><div><font face="monospace, monospace" size="1">    file=file@entry=0x7ffff16d2a50 &quot;route/tc.c&quot;, line=line@entry=973, </font></div></div><div><div><font face="monospace, monospace" size="1">    function=function@entry=0x7ffff16d2b90 &lt;__PRETTY_FUNCTION__.13204&gt; &quot;rtnl_tc_register&quot;) at assert.c:92</font></div><div><font face="monospace, monospace" size="1">#3  0x00007ffff7489602 in __GI___assert_fail (</font></div><div><font face="monospace, monospace" size="1">    assertion=assertion@entry=0x7ffff16d3230 &quot;0&quot;, </font></div><div><font face="monospace, monospace" size="1">    file=file@entry=0x7ffff16d2a50 &quot;route/tc.c&quot;, line=line@entry=973, </font></div><div><font face="monospace, monospace" size="1">    function=function@entry=0x7ffff16d2b90 &lt;__PRETTY_FUNCTION__.13204&gt; &quot;rtnl_tc_register&quot;) at assert.c:101</font></div><div><font face="monospace, monospace" size="1">#4  0x00007ffff16be3d9 in rtnl_tc_register (ops=0x7ffff18e86c0 &lt;blackhole_ops&gt;)</font></div><div><font face="monospace, monospace" size="1">    at route/tc.c:973</font></div><div><font face="monospace, monospace" size="1">#5  0x00007ffff7dea503 in call_init (env=0x7fffffffdc58, argv=0x7fffffffdc48, </font></div><div><font face="monospace, monospace" size="1">    argc=1, l=&lt;optimized out&gt;) at dl-init.c:82</font></div><div><font face="monospace, monospace" size="1">#6  _dl_init (main_map=main_map@entry=0x6ae5f0, argc=1, argv=0x7fffffffdc48, </font></div><div><font face="monospace, monospace" size="1">    env=0x7fffffffdc58) at dl-init.c:131</font></div><div><font face="monospace, monospace" size="1">#7  0x00007ffff7deeb44 in dl_open_worker (a=a@entry=0x7fffffffd168)</font></div><div><font face="monospace, monospace" size="1">    at dl-open.c:566</font></div><div><font face="monospace, monospace" size="1">#8  0x00007ffff7dea314 in _dl_catch_error (</font></div><div><font face="monospace, monospace" size="1">    objname=objname@entry=0x7fffffffd158, </font></div><div><font face="monospace, monospace" size="1">    errstring=errstring@entry=0x7fffffffd160, </font></div><div><font face="monospace, monospace" size="1">    mallocedp=mallocedp@entry=0x7fffffffd150, </font></div><div><font face="monospace, monospace" size="1">    operate=operate@entry=0x7ffff7dee7b0 &lt;dl_open_worker&gt;, </font></div><div><font face="monospace, monospace" size="1">    args=args@entry=0x7fffffffd168) at dl-error.c:177</font></div><div><font face="monospace, monospace" size="1">#9  0x00007ffff7dee25b in _dl_open (</font></div><div><font face="monospace, monospace" size="1">    file=0x6ae520 &quot;/home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/INST/lib/openmpi/mca_mtl_ofi.so&quot;, mode=-2147483391, caller_dlopen=&lt;optimized out&gt;, </font></div></div><div><font face="monospace, monospace" size="1">    nsid=-2, argc=1, argv=0x7fffffffdc48, env=0x7fffffffdc58) at dl-open.c:656</font></div><div><font face="monospace, monospace" size="1">#10 0x00007ffff6c7402b in dlopen_doit (a=a@entry=0x7fffffffd370) at dlopen.c:66</font></div><div><font face="monospace, monospace" size="1">#11 0x00007ffff7dea314 in _dl_catch_error (objname=0x641600, </font></div><div><font face="monospace, monospace" size="1">    errstring=0x641608, mallocedp=0x6415f8, </font></div><div><font face="monospace, monospace" size="1">    operate=0x7ffff6c73fd0 &lt;dlopen_doit&gt;, args=0x7fffffffd370)</font></div><div><font face="monospace, monospace" size="1">    at dl-error.c:177</font></div><div><font face="monospace, monospace" size="1">#12 0x00007ffff6c7462d in _dlerror_run (</font></div><div><font face="monospace, monospace" size="1">    operate=operate@entry=0x7ffff6c73fd0 &lt;dlopen_doit&gt;, </font></div><div><font face="monospace, monospace" size="1">    args=args@entry=0x7fffffffd370) at dlerror.c:163</font></div><div><font face="monospace, monospace" size="1">#13 0x00007ffff6c740c1 in __dlopen (file=&lt;optimized out&gt;, mode=&lt;optimized out&gt;)</font></div><div><font face="monospace, monospace" size="1">    at dlopen.c:87</font></div><div><font face="monospace, monospace" size="1">#14 0x00007ffff6ef8ec4 in do_dlopen (</font></div><div><font face="monospace, monospace" size="1">    fname=0x6ae520 &quot;/home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/INST/lib/openmpi/mca_mtl_ofi.so&quot;, flags=257, handle=0x7fffffffd488, </font></div><div><font face="monospace, monospace" size="1">    err_msg=0x7fffffffd538)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/dl/dlopen/dl_dlopen_module.c:38</font></div><div><font face="monospace, monospace" size="1">#15 0x00007ffff6ef909c in dlopen_open (</font></div><div><font face="monospace, monospace" size="1">    fname=0x6ac0ba &quot;/home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/INST/lib/openmpi/mca_mtl_ofi&quot;, use_ext=true, private_namespace=false, </font></div><div><font face="monospace, monospace" size="1">    handle=0x7fffffffd5c8, err_msg=0x7fffffffd538)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/dl/dlopen/dl_dlopen_module.c:95</font></div><div><div><font face="monospace, monospace" size="1">#16 0x00007ffff6ef8bfa in opal_dl_open (</font></div><div><font face="monospace, monospace" size="1">    fname=0x6ac0ba &quot;/home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/INST/lib/openmpi/mca_mtl_ofi&quot;, use_ext=true, private_namespace=false, </font></div><div><font face="monospace, monospace" size="1">    handle=0x7fffffffd5c8, err_msg=0x7fffffffd538)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/dl/base/dl_base_fns.c:32</font></div><div><font face="monospace, monospace" size="1">#17 0x00007ffff6ed0265 in open_component (target_file=0x6ab010, </font></div><div><font face="monospace, monospace" size="1">    found_components=0x7fffffffd7a0)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_component_find.c:558</font></div><div><font face="monospace, monospace" size="1">#18 0x00007ffff6ecfd45 in find_dyn_components (path=0x0, </font></div><div><font face="monospace, monospace" size="1">    type_name=0x7ffff7b891e0 &quot;mtl&quot;, names=0x0, include_mode=true, </font></div><div><font face="monospace, monospace" size="1">    found_components=0x7fffffffd7a0)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_component_find.c:446</font></div><div><font face="monospace, monospace" size="1">#19 0x00007ffff6ecf444 in mca_base_component_find (directory=0x0, </font></div><div><font face="monospace, monospace" size="1">    type=0x7ffff7b891e0 &quot;mtl&quot;, </font></div><div><font face="monospace, monospace" size="1">    static_components=0x7ffff7dc73a8 &lt;mca_mtl_base_static_components&gt;, </font></div><div><font face="monospace, monospace" size="1">    requested_components=0x0, found_components=0x7fffffffd7a0, </font></div><div><font face="monospace, monospace" size="1">    open_dso_components=true)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_component_find.c:190</font></div></div><div><div><font face="monospace, monospace" size="1">#20 0x00007ffff6ee157a in mca_base_framework_components_register (</font></div><div><font face="monospace, monospace" size="1">    framework=0x7ffff7dc2560 &lt;ompi_mtl_base_framework&gt;, </font></div><div><font face="monospace, monospace" size="1">    flags=MCA_BASE_REGISTER_DEFAULT)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_components_register.c:57</font></div><div><font face="monospace, monospace" size="1">#21 0x00007ffff6ee1edd in mca_base_framework_register (</font></div><div><font face="monospace, monospace" size="1">    framework=0x7ffff7dc2560 &lt;ompi_mtl_base_framework&gt;, </font></div><div><font face="monospace, monospace" size="1">    flags=MCA_BASE_REGISTER_DEFAULT)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_framework.c:115</font></div><div><font face="monospace, monospace" size="1">#22 0x00007ffff6ee1f4b in mca_base_framework_open (</font></div><div><font face="monospace, monospace" size="1">    framework=0x7ffff7dc2560 &lt;ompi_mtl_base_framework&gt;, </font></div><div><font face="monospace, monospace" size="1">    flags=MCA_BASE_OPEN_DEFAULT)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_framework.c:134</font></div><div><font face="monospace, monospace" size="1">#23 0x00007ffff30cabf5 in mca_pml_cm_component_open ()</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/ompi/mca/pml/cm/pml_cm_component.c:120</font></div><div><font face="monospace, monospace" size="1">#24 0x00007ffff6ed2e58 in open_components (</font></div><div><font face="monospace, monospace" size="1">    framework=0x7ffff7dc4e60 &lt;ompi_pml_base_framework&gt;)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_components_open.c:173</font></div><div><font face="monospace, monospace" size="1">#25 0x00007ffff6ed2b4b in mca_base_framework_components_open (</font></div></div><div><div><font face="monospace, monospace" size="1">    framework=0x7ffff7dc4e60 &lt;ompi_pml_base_framework&gt;, </font></div><div><font face="monospace, monospace" size="1">    flags=MCA_BASE_OPEN_DEFAULT)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_components_open.c:66</font></div><div><font face="monospace, monospace" size="1">#26 0x00007ffff7b3efa7 in mca_pml_base_open (flags=MCA_BASE_OPEN_DEFAULT)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/ompi/mca/pml/base/pml_base_frame.c:187</font></div><div><font face="monospace, monospace" size="1">#27 0x00007ffff6ee1fe6 in mca_base_framework_open (</font></div><div><font face="monospace, monospace" size="1">    framework=0x7ffff7dc4e60 &lt;ompi_pml_base_framework&gt;, </font></div><div><font face="monospace, monospace" size="1">    flags=MCA_BASE_OPEN_DEFAULT)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/opal/mca/base/mca_base_framework.c:158</font></div><div><font face="monospace, monospace" size="1">#28 0x00007ffff7a90755 in ompi_mpi_init (argc=1, argv=0x7fffffffdc48, </font></div><div><font face="monospace, monospace" size="1">    requested=0, provided=0x7fffffffdafc)</font></div><div><font face="monospace, monospace" size="1">    at /home/phargrov/OMPI/openmpi-1.10.1rc1-linux-x86_64-sl7x/openmpi-1.10.1rc1/ompi/runtime/ompi_mpi_init.c:578</font></div><div><font face="monospace, monospace" size="1">#29 0x00007ffff7ad00b6 in PMPI_Init (argc=0x7fffffffdb3c, argv=0x7fffffffdb30)</font></div><div><font face="monospace, monospace" size="1">    at pinit.c:84</font></div><div><font face="monospace, monospace" size="1">#30 0x0000000000400969 in main (argc=1, argv=0x7fffffffdc48) at ring_c.c:19</font></div></div><div><font face="monospace, monospace" size="1"><br></font></div><div><br></div><div><br></div><div>I</div><div class="gmail_extra"><br><div class="gmail_quote">On Sat, Oct 3, 2015 at 4:07 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div style="word-wrap:break-word">Paul<div><br></div><div>At a glance, it looks to me like no opal_dl component was selected. Any chance you could add -mca dl_base_verbose 100 and get a line number for us from one of those core files?</div><div><br></div><div><br><div><blockquote type="cite"><div><div class="h5"><div>On Oct 3, 2015, at 10:41 AM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt; wrote:</div><br></div></div><div><div><div class="h5"><div dir="ltr"><div class="gmail_extra"><br><div class="gmail_quote">On Sat, Oct 3, 2015 at 3:13 AM, Jeff Squyres (jsquyres) <span dir="ltr">&lt;<a href="mailto:jsquyres@cisco.com" target="_blank">jsquyres@cisco.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><div style="overflow:hidden">v1.10.1 is primarily a bug-fix release.  rc1 has been released; it&#39;s in the usual place:<br>
<br>
    <a href="http://www.open-mpi.org/software/ompi/v1.10/" rel="noreferrer" target="_blank">http://www.open-mpi.org/software/ompi/v1.10/</a><br>
<br>
Please test!<br></div></blockquote></div><br><br>My tests experienced a failure (SEGV) on a fairly vanilla Linux VM running Scientific Linux 7 (RHEL7 clone).</div><div class="gmail_extra">See attached output.</div><div class="gmail_extra"><br></div><div class="gmail_extra">-Paul</div><div class="gmail_extra"><br></div><div class="gmail_extra">-- <br><div><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory     Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font></div></div></div>
</div></div>
</div></div><span>&lt;ring_c.txt&gt;</span>_______________________________________________<span class=""><br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></span>Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2015/10/18131.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2015/10/18131.php</a></div></blockquote></div><br></div></div><br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" rel="noreferrer" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2015/10/18134.php" rel="noreferrer" target="_blank">http://www.open-mpi.org/community/lists/devel/2015/10/18134.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div></div>

