<div dir="ltr"><br><div class="gmail_extra"><br><div class="gmail_quote">On Wed, Mar 4, 2015 at 1:04 PM, Dave Goodell (dgoodell) <span dir="ltr">&lt;<a href="mailto:dgoodell@cisco.com" target="_blank">dgoodell@cisco.com</a>&gt;</span> wrote:</div><div class="gmail_quote">[...]<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex"><span class="">
&gt; libibverbs: Warning: couldn&#39;t open config directory &#39;/etc/libibverbs.d&#39;.<br>
&gt; libibverbs: Warning: no userspace device-specific driver found for /sys/class/infiniband_verbs/uverbs0<br>
<br>
</span>I think that warning is printed by libibverbs itself.  Are you 100% sure there are no IB HCAs sitting in the head node?  If there are IB HCAs but you don&#39;t want them to be used, you might want to ensure that the various verbs kernel modules don&#39;t get loaded, which is one half of the mismatch which confuses libibverbs.<br></blockquote><div>[...]</div><div> </div><div>FWIW, I can confirm that these two lines are from libibverbs itself:</div></div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">$ strings /usr/lib64/libibverbs.a | grep -e &#39;no userspace&#39; -e &#39;open config directory&#39;</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">libibverbs: Warning: no userspace device-specific driver found for %s</font></div></div></div></div><div class="gmail_extra"><div class="gmail_quote"><div><div><font face="monospace, monospace" size="1">libibverbs: Warning: couldn&#39;t open config directory &#39;%s&#39;.</font></div></div></div></div></blockquote><div class="gmail_extra"><div class="gmail_quote"><div><br></div><div>As it happens, the login node *does* have an HCA installed and the kernel modules appears to be loaded.  However, as the &quot;17th node&quot; in the cluster it was never cabled to the 16-port switch and the package(s) that should have created/populated /etc/libibverbs.d are *not* present (specifically the login node has libipathverbs-devel installed but not libipathverbs).</div><div><br></div><div>So, Dave, are you saying that what I describe in the previous paragraph would be considered &quot;misconfiguration&quot;?  I am fine with dropping the discussion of those first two lines if there is agreement that Open MPI shouldn&#39;t be responsible for handling this case.</div><div><br></div><div>Now the ibv_fork_init() warnings are another issue entirely.  Since btl:verbs and mtl:psm both work (at least separately) perfectly fine on the compute nodes, I don&#39;t believe that there are any configuration issues there.</div><div><br></div><div>-Paul</div></div><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div></div>

