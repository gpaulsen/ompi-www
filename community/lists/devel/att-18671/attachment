<div dir="ltr"><div><br></div><div>     My understanding is that OpenMPI built with either Intel or</div><div>GNU compilers should be able to use the other compilers using the</div><div>OMPI_CC and OMPI_FC environmental variables.</div><div>     For OpenMPI-1.8.8 built with Intel compilers, if you try to</div><div>compile any code that includes mpif.h using OMPI_FC=gfortran it</div><div>fails.  The Intel build creates mpi-sizeof.h that dimensions</div><div>arrays to more than 6 dimensions which gfortran cannot handle.</div><div>The example below illustrates this.</div><div>     I wasn&#39;t able to find any other reports like this on the</div><div>web, and I don&#39;t see any way of specifying a path to an alternate</div><div>mpif.h include file.  This looks to be a bug to me, but please let</div><div>me know if I missed a config flag somewhere.</div><div><br></div><div>               Dave Turner</div><div><br></div><div><br></div><div><br></div><div>Selene cat bugtest.F</div><div>! Program to illustrate bug when OpenMPI is compiled with Intel</div><div>!    compilers but run using OMPI_FC=gfortran.</div><div><br></div><div>      PROGRAM BUGTEST</div><div><br></div><div>      INCLUDE &quot;mpif.h&quot;</div><div><br></div><div>      END</div><div>Selene cat go</div><div>#!/bin/bash</div><div><br></div><div><br></div><div>echo &quot;Compile test using default ifort&quot;</div><div><br></div><div>mpifort --version</div><div>mpifort bugtest.F -o bugtest_ifort</div><div><br></div><div><br></div><div>echo &quot;Compile test using gfortan when OpenMPI was compiled with ifort/icc&quot;</div><div><br></div><div>export OMPI_FC=gfortran</div><div><br></div><div>mpifort --version</div><div>mpifort bugtest.F -o bugtest_gfortran</div><div><br></div><div><br></div><div>Selene ./go</div><div>Compile test using default ifort</div><div>ifort (IFORT) 15.0.3 20150407</div><div>Copyright (C) 1985-2015 Intel Corporation.  All rights reserved.</div><div><br></div><div>Compile test using gfortan when OpenMPI was compiled with ifort/icc</div><div>GNU Fortran (Gentoo 4.9.3 p1.4, pie-0.6.4) 4.9.3</div><div>Copyright (C) 2015 Free Software Foundation, Inc.</div><div><br></div><div>GNU Fortran comes with NO WARRANTY, to the extent permitted by law.</div><div>You may redistribute copies of GNU Fortran</div><div>under the terms of the GNU General Public License.</div><div>For more information about these matters, see the file named COPYING</div><div><br></div><div>mpif-sizeof.h:75.48:</div><div>    Included at mpif.h:61:</div><div>    Included at bugtest.F:6:</div><div><br></div><div>      COMPLEX(REAL128), DIMENSION(1,1,1,1,1,1,1,*)::x</div><div>                                                1</div><div>Error: Array specification at (1) has more than 7 dimensions</div><div>mpif-sizeof.h:82.48:</div><div>    Included at mpif.h:61:</div><div>    Included at bugtest.F:6:</div><div><br></div><div>      COMPLEX(REAL128), DIMENSION(1,1,1,1,1,1,1,1,*)::x</div><div>                                                1</div><div>Error: Array specification at (1) has more than 7 dimensions</div><div>mpif-sizeof.h:89.48:</div><div>    Included at mpif.h:61:</div><div>    Included at bugtest.F:6:</div><div><br></div><div>      COMPLEX(REAL128), DIMENSION(1,1,1,1,1,1,1,1,1,*)::x</div><div>                                                1</div><div>Error: Array specification at (1) has more than 7 dimensions</div><div><br></div><div>[ More of the same errors have been clipped ]</div><div><br></div><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><div dir="ltr">Work:     <a href="mailto:DaveTurner@ksu.edu" target="_blank">DaveTurner@ksu.edu</a>     (785) 532-7791<div>             2219 Durland, Manhattan KS  66502<br>Home:    <a href="mailto:DrDaveTurner@gmail.com" target="_blank">DrDaveTurner@gmail.com</a><br>              cell: (785) 770-5929<br></div></div></div></div></div>
</div>

