<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br><div><div>On Apr 24, 2014, at 9:41 PM, Mike Dubman &lt;<a href="mailto:miked@dev.mellanox.co.il">miked@dev.mellanox.co.il</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div dir="ltr">not a requirement of course, but warm recommendation. Like you mentioned:<div><div style="font-family:arial,sans-serif;font-size:13px">"component developers who choose to expose such information do so using the suggested syntax, then that is a different proposal."</div>
</div><div style="font-family:arial,sans-serif;font-size:13px"><br></div><div style="font-family:arial,sans-serif;font-size:13px">&gt;&gt;&gt;FWIW: we do not (and cannot, for licensing reasons) link against Slurm, so please don't include it in such lists to avoid giving anyone even a passing thought that we do so.<br>
</div><div><br></div><div>I don`t understand, today we have "--with-slurm --with-pmi" for dynamic link with slurm and others where we call slurm functions from OMPI code. how calling slurm.getVersion() is different?</div></div></blockquote><div><br></div>We do *not* dynamically link with libslurm, Mike. All --with-slurm does is tell us to build the Slurm-related RAS and PLM components. Those components do *not* link against libslurm - they (a) read the environment for slurm envars to get the allocation and (b) fork/exec srun commands to launch our daemons. Under no conditions do we ever call a slurm function.</div><div><br></div><div>The PMI functions are specifically licensed differently to allow apps to use them without this unfortunate side effect.</div><div><br></div><div><blockquote type="cite"><div dir="ltr">
<div><br></div><div>afaik, dynamic linking (as we do it today) does not violate current licensing model.</div></div></blockquote><div><br></div>This is *not* true. If you include a slurm header, which you must do in order to call a slurm function, then the GPL license pulls all of OMPI into GPL.&nbsp;</div><div><br><blockquote type="cite"><div dir="ltr"><div><br></div></div><div class="gmail_extra"><br><br><div class="gmail_quote">On Fri, Apr 25, 2014 at 5:39 AM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">Just for clarification: are you proposing that we *require* every component that links against an external library to include these parameters? If so, that seems a significant requirement as quite a few of our components do so.<div>
<br></div><div>On the other hand, if you are proposing that those component developers who choose to expose such information do so using the suggested syntax, then that is a different proposal.</div><div><br></div><div>Just want to understand what you are proposing - a requirement on components, or a syntax for those who choose to support this capability?</div>
<div><br></div><div>FWIW: we do not (and cannot, for licensing reasons) link against Slurm, so please don't include it in such lists to avoid giving anyone even a passing thought that we do so.</div><div><br></div><div>
<br></div><div><br></div><div><div><div><div class="h5"><div>On Apr 23, 2014, at 10:38 PM, Mike Dubman &lt;<a href="mailto:miked@dev.mellanox.co.il" target="_blank">miked@dev.mellanox.co.il</a>&gt; wrote:</div><br></div></div>
<blockquote type="cite"><div><div class="h5"><div dir="ltr"><br><div>WHAT:</div><div>* Formalize well-known MCA parameters that can be used by any component to represent external dependencies for this component.&nbsp;</div><div>
<br></div><div>* Component can set that well-known MCA r/o parameters to expose to the end-users different setup related traits of the OMPI installation.</div>
<div><br></div><div>Example:</div><div><br></div><div>ompi_info can print for every component which depends on external library:</div><div>- ext lib runtime version used by component</div><div>- ext lib compiletime version used by component</div>

<div><br></div><div>slurm: v2.6.6</div><div>mtl/mxm: v2.5</div><div>btl/verbs: v3.2</div><div>btl/usnic: v1.1</div><div>coll/fca: v2.5</div><div>...</div><div><br></div><div>End-user or site admin or OMPI vendor can aggregate this information by some script and generate report if given installation compiles with site/vendor rules.</div>

<div><br></div><div>* The "well-known" mca parameters can be easily extracted from ALL components by grep-like utilities.</div><div><br></div><div>* Current proposal:</div><div><br></div><div>** prefix each well-known MCA param with "print_":</div>

<div>** Define two well-known mca parameters indicating external library runtime and compiletime versions, i.e.:</div><div>&nbsp;</div><div>print_compiletime_version</div><div>print_runtime_version</div><div><br></div><div>The following command will show all exposed well-known mca params from all components:</div>

<div>ompi_info --parsable -l 9 |grep ":print_"</div><div><br></div><div><br></div><div>WHY:</div><div><br></div><div>* Better support-ability: site/vendor can provide script which will check if OMPI installation complies to release notes or support matrix.</div>

<div><br></div><div><br></div><div>WHEN:</div><div><br></div><div>- Next teleconf</div><div>- code can be observed here: <a href="https://svn.open-mpi.org/trac/ompi/ticket/4556" target="_blank">https://svn.open-mpi.org/trac/ompi/ticket/4556</a></div>

<div>&nbsp;&nbsp;</div><div><br></div><div>Comments?</div></div></div></div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/04/14590.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/04/14590.php</a></blockquote></div><br></div></div><br>_______________________________________________<br>

devel mailing list<br>
<a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/04/14601.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/04/14601.php</a><br></blockquote></div><br></div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/devel<br>Link to this post: http://www.open-mpi.org/community/lists/devel/2014/04/14604.php</blockquote></div><br></body></html>
