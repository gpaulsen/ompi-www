<div dir="ltr"><div>You can disregard this thread... the problem was pilot error.</div><div><br></div>I understand now why the &quot;compile&quot; wrapper was getting used.<div>The probe &quot;checking whether $CC and cc understand -c and -o together... &quot;  is run WITHOUT $CFLAGS.</div>
<div><br></div><div>In my case CFLAGS included an argument required to locate the compiler&#39;s config files and consequently the probe failed.  I consider that &quot;pilot error&quot; on my part and have moved the config option to the definition of CC instead (and the problem goes away)</div>
<div><br></div><div>So, while there *may* exist some valid set of conditions under which the current configure/build could produce the reported failure, my test did NOT represent a valid set of conditions.</div><div><br></div>
<div>-Paul</div></div><div class="gmail_extra"><br><br><div class="gmail_quote">On Sat, Aug 9, 2014 at 1:29 PM, Paul Hargrove <span dir="ltr">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">One note regarding my report below:<div><br><div>I have noticed that autoconf has chosen to use &quot;$srcdir/config/compile xlc&quot; instead of just &quot;xlc&quot; (I set CC=xlc).  I strongly suspect this is related, and am investigating why the compile wrapper is used.  However, independent of that there does seem to be some flaw in how the atomics are getting built on this configuration.</div>

</div><div><br></div><div>-Paul</div></div><div class="gmail_extra"><br><br><div class="gmail_quote">On Sat, Aug 9, 2014 at 1:22 PM, Paul Hargrove <span dir="ltr">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt;</span> wrote:<br>

<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Building v1.8 nightly tarball with xlc-11.1 on a ppc64/linux platform:<div><br></div><div><div>Making all in asm</div>

<div>make[2]: Entering directory `/home/hargrov1/OMPI/openmpi-1.8-latest-bluedrop-64-xlc/BLD/opal/asm&#39;</div>
<div>  CC       asm.lo</div><div>rm -f atomic-asm.S</div><div>ln -s &quot;../../opal/asm/generated/atomic-local.s&quot; atomic-asm.S</div><div>  CPPAS    atomic-asm.lo</div><div>  CCLD     <a href="http://libasm.la" target="_blank">libasm.la</a></div>


<div>ar: .libs/atomic-asm.o: No such file or directory</div><div><br></div><div>The related portion of the configure output:</div><div><br></div><div><div>*** Assembler</div><div>checking dependency style of /home/hargrov1/OMPI/openmpi-1.8-latest-bluedrop-64-xlc/openmpi-1.8.2rc4r32480/config/compile xlc... none</div>


<div>checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B</div><div>checking the name lister (/usr/bin/nm -B) interface... BSD nm</div><div>checking for fgrep... /bin/grep -F</div><div>checking if need to remove -g from CCASFLAGS... no</div>


<div>checking whether to enable smp locks... yes</div><div>checking if .proc/endp is needed... no</div><div>checking directive for setting text section... .text</div><div>checking directive for exporting symbols... .globl</div>


<div>checking for objdump... objdump</div><div>checking if .note.GNU-stack is needed... no</div><div>checking suffix for labels... :</div><div>checking prefix for global symbol labels...</div><div>checking prefix for lsym labels... .L</div>


<div>checking prefix for function in .type... @</div><div>checking if .size is needed... yes</div><div>checking if .align directive takes logarithmic value... yes</div><div>checking if PowerPC registers have r prefix... no</div>


<div>checking if /home/hargrov1/OMPI/openmpi-1.8-latest-bluedrop-64-xlc/openmpi-1.8.2rc4r32480/config/compile xlc supports GCC inline assembly... yes</div><div>checking if /home/hargrov1/OMPI/openmpi-1.8-latest-bluedrop-64-xlc/openmpi-1.8.2rc4r32480/config/compile xlc supports DEC inline assembly... no</div>


<div>checking if /home/hargrov1/OMPI/openmpi-1.8-latest-bluedrop-64-xlc/openmpi-1.8.2rc4r32480/config/compile xlc supports XLC inline assembly... no</div><div>checking for assembly format... default-.text-.globl-:--.L-@-1-1-0-1-0</div>


<div>checking for asssembly architecture... POWERPC64</div><div>checking for builtin atomics... BUILTIN_NO</div><div>checking for perl... perl</div><div>checking for pre-built assembly file... no (not in asm-data)</div><div>


checking whether possible to generate assembly file... yes</div><div>checking for atomic assembly filename... atomic-local.s</div></div><span><font color="#888888"><div><br></div><div>-Paul</div><span class="HOEnZb"><font color="#888888"><div>
<br></div>
-- <br><font face="courier new, monospace"><div>
Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Future Technologies Group</div><div>Computer and Data Sciences Department     Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div>


<div>Lawrence Berkeley National Laboratory     Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font>
</font></span></font></span></div></div><span class="HOEnZb"><font color="#888888">
</font></span></blockquote></div><span class="HOEnZb"><font color="#888888"><br><br clear="all"><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div>

<div>Future Technologies Group</div><div>Computer and Data Sciences Department     Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory     Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div>
</font>
</font></span></div>
</blockquote></div><br><br clear="all"><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div>
<div>Future Technologies Group</div><div>Computer and Data Sciences Department     Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font>
</div>

