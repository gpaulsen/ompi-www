<div dir="ltr">Building the trunk on FreeBSD-9/x86-64, and using gmake to work around the non-portable examples/Makefile, I *still* encounter issues with shmemfort when running &quot;gmake&quot; in the examples subdirectory:<div>
<br></div><div><div><font face="courier new, monospace">$ gmake</font></div><div><font face="courier new, monospace">mpicc -g    hello_c.c   -o hello_c</font></div><div><font face="courier new, monospace">mpicc -g    ring_c.c   -o ring_c</font></div>
<div><font face="courier new, monospace">mpicc -g    connectivity_c.c   -o connectivity_c</font></div><div><font face="courier new, monospace">gmake[1]: Entering directory `/usr/home/phargrov/OMPI/openmpi-trunk-freebsd9-amd64/BLD/examples&#39;</font></div>
<div><font face="courier new, monospace">shmemcc -g hello_oshmem_c.c -o hello_oshmem</font></div><div><font face="courier new, monospace">gmake[1]: Leaving directory `/usr/home/phargrov/OMPI/openmpi-trunk-freebsd9-amd64/BLD/examples&#39;</font></div>
<div><font face="courier new, monospace">gmake[1]: Entering directory `/usr/home/phargrov/OMPI/openmpi-trunk-freebsd9-amd64/BLD/examples&#39;</font></div><div><font face="courier new, monospace">shmemcc -g ring_oshmem_c.c -o ring_oshmem</font></div>
<div><font face="courier new, monospace">gmake[1]: Leaving directory `/usr/home/phargrov/OMPI/openmpi-trunk-freebsd9-amd64/BLD/examples&#39;</font></div><div><font face="courier new, monospace">gmake[1]: Entering directory `/usr/home/phargrov/OMPI/openmpi-trunk-freebsd9-amd64/BLD/examples&#39;</font></div>
<div><font face="courier new, monospace">shmemfort -g hello_oshmemfh.f90 -o hello_oshmemfh</font></div><div><font face="courier new, monospace">--------------------------------------------------------------------------</font></div>
<div><font face="courier new, monospace">No underlying compiler was specified in the wrapper compiler data file</font></div><div><font face="courier new, monospace">(e.g., mpicc-wrapper-data.txt)</font></div><div><font face="courier new, monospace">--------------------------------------------------------------------------</font></div>
<div><font face="courier new, monospace">gmake[1]: *** [hello_oshmemfh] Error 1</font></div><div><font face="courier new, monospace">gmake[1]: Leaving directory `/usr/home/phargrov/OMPI/openmpi-trunk-freebsd9-amd64/BLD/examples&#39;</font></div>
<div><font face="courier new, monospace">gmake[1]: Entering directory `/usr/home/phargrov/OMPI/openmpi-trunk-freebsd9-amd64/BLD/examples&#39;</font></div><div><font face="courier new, monospace">shmemfort -g ring_oshmemfh.f90 -o ring_oshmemfh</font></div>
<div><font face="courier new, monospace">--------------------------------------------------------------------------</font></div><div><font face="courier new, monospace">No underlying compiler was specified in the wrapper compiler data file</font></div>
<div><font face="courier new, monospace">(e.g., mpicc-wrapper-data.txt)</font></div><div><font face="courier new, monospace">--------------------------------------------------------------------------</font></div><div><font face="courier new, monospace">gmake[1]: *** [ring_oshmemfh] Error 1</font></div>
<div><font face="courier new, monospace">gmake[1]: Leaving directory `/usr/home/phargrov/OMPI/openmpi-trunk-freebsd9-amd64/BLD/examples&#39;</font></div><div><font face="courier new, monospace">gmake: *** [mpi] Error 2</font></div>
</div><div><br></div><div>If one looks at the logic in the Makefile, one sees use of shmem_info to determine if the fortran bindings are available.  Running that utility manually I see:</div><div><div><font face="courier new, monospace">$ oshmem_info --parsable | grep bindings</font></div>
<div><font face="courier new, monospace">bindings:c:yes</font></div><div><font face="courier new, monospace">bindings:cxx:no</font></div><div><font face="courier new, monospace">bindings:mpif.h:no</font></div><div><font face="courier new, monospace">bindings:use_mpi:no</font></div>
<div><font face="courier new, monospace">bindings:use_mpi:size:deprecated-ompi-info-value</font></div><div><font face="courier new, monospace">bindings:use_mpi_f08:no</font></div><div><font face="courier new, monospace">bindings:use_mpi_f08:compliance:The mpi_f08 module was not built</font></div>
<div><font face="courier new, monospace">bindings:use_mpi_f08:subarrays-supported:no</font></div><div><font face="courier new, monospace">bindings:java:no</font></div><div><font face="courier new, monospace">oshmem:bindings:c:yes</font></div>
<div><font face="courier new, monospace">oshmem:bindings:fort:yes</font></div><div><br></div><div>This already looks suspicious because it reports fortran bindings for oshmem but not for MPI.</div><div>Well, there is *no* fortran compiler on this system.  Quoting from the configure output:</div>
<div><div><font face="courier new, monospace">*** Fortran compiler</font></div><div><font face="courier new, monospace">checking for gfortran... no</font></div><div><font face="courier new, monospace">checking for f95... no</font></div>
<div><font face="courier new, monospace">checking for fort... no</font></div><div><font face="courier new, monospace">checking for xlf95... no</font></div><div><font face="courier new, monospace">checking for ifort... no</font></div>
<div><font face="courier new, monospace">checking for ifc... no</font></div><div><font face="courier new, monospace">checking for efc... no</font></div><div><font face="courier new, monospace">checking for pgfortran... no</font></div>
<div><font face="courier new, monospace">checking for pgf95... no</font></div><div><font face="courier new, monospace">checking for lf95... no</font></div><div><font face="courier new, monospace">checking for f90... no</font></div>
<div><font face="courier new, monospace">checking for xlf90... no</font></div><div><font face="courier new, monospace">checking for pgf90... no</font></div><div><font face="courier new, monospace">checking for epcf90... no</font></div>
<div><font face="courier new, monospace">checking whether we are using the GNU Fortran compiler... no</font></div><div><font face="courier new, monospace">checking whether  accepts -g... no</font></div><div><font face="courier new, monospace">checking whether ln -s works... yes</font></div>
<div><font face="courier new, monospace">configure: WARNING: *** All Fortran MPI bindings disabled (could not find compiler)</font></div></div><div><br></div><div>So, why &quot;<span style="font-family:&#39;courier new&#39;,monospace">oshmem:bindings:fort:yes</span><font face="arial, helvetica, sans-serif">&quot;?</font></div>
<div><font face="arial, helvetica, sans-serif">The AM_CONDITIONAL &quot;OSHMEM_WANT_FORTRAN_BINDINGS&quot; is somehow &quot;true&quot; despite the lack of a fortran compiler.  So, I assume something is busted in config/oshmem_configure_options.m4.</font></div>
<div><br></div><div>-Paul</div><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>
Future Technologies Group</div><div>Computer and Data Sciences Department     Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font>
</div></div>

