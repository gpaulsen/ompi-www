<html><head><meta http-equiv="Content-Type" content="text/html charset=windows-1252"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">On Dec 15, 2013, at 15:40 , Ralph Castain &lt;<a href="mailto:rhc@open-mpi.org">rhc@open-mpi.org</a>&gt; wrote:<br><div><br class="Apple-interchange-newline"><blockquote type="cite"><div>Not true, George - look more closely at the code. We only retrieve the hostname if the number of procs is low. Otherwise, we do *not* retrieve it until we do a modex_recv, and thus the debug is now broken at scale. This was required for scalable launch, which is something I know is important to you as well.</div></blockquote><div><br></div><div>Sure, if you trust the comment in the file. Unfortunately the comment is wrong, nobody is setting the hostnam of prods we’re talking about.</div><div><br></div><div>Moreover the real meaning of the cutoff parameters is clearly defined in the snippet below:</div><div><br></div><div></div><blockquote type="cite"><div><span style="font-family: Monaco; font-size: 11px;">r29052 [[BR]]</span><br style="font-family: Monaco; font-size: 11px;"><span style="font-family: Monaco; font-size: 11px;">As per the email discussion, revise the sparse handling of hostnames so</span><br style="font-family: Monaco; font-size: 11px;"><span style="font-family: Monaco; font-size: 11px;">that we avoid potential infinite loops while allowing large-scale users to</span><br style="font-family: Monaco; font-size: 11px;"><span style="font-family: Monaco; font-size: 11px;">improve their startup time:</span><br style="font-family: Monaco; font-size: 11px;"><br style="font-family: Monaco; font-size: 11px;"><span style="font-family: Monaco; font-size: 11px;">* add a new MCA param orte_hostname_cutoff to specify the number of nodes</span><br style="font-family: Monaco; font-size: 11px;"><span style="font-family: Monaco; font-size: 11px;">at which we stop including hostnames. This defaults to INT_MAX =&gt; always</span><br style="font-family: Monaco; font-size: 11px;"><span style="font-family: Monaco; font-size: 11px;">include hostnames. If a value is given, then we will include hostnames for</span><br style="font-family: Monaco; font-size: 11px;"><span style="font-family: Monaco; font-size: 11px;">any allocation smaller than the given limit.</span><br style="font-family: Monaco; font-size: 11px;"><br style="font-family: Monaco; font-size: 11px;"><span style="font-family: Monaco; font-size: 11px;">* remove ompi_proc_get_hostname. Replace all occurrences with a direct</span><br style="font-family: Monaco; font-size: 11px;"><font face="Monaco"><span style="font-size: 11px;">link to ompi_proc_t’s proc_hostname, protected by appropriate "if NULL"</span></font><br style="font-family: Monaco; font-size: 11px;"></div></blockquote><div><br></div>The comment above is about scalability.</div><div><br></div><div><blockquote type="cite"><div>Modifying the API isn't a big deal, so why the fuss? Let's just change it and get the debug working again.</div></blockquote></div><div><br></div><div>Here is how I see the thing. I made a change to remove a deadlock and maintain the scalability of the codebase, a change that does not affect the normal use of the OMPI debug facility for most of the users. From here on, feel free to improve on the existing code as much as you feel necessary as long as you maintain the above properties. Enough has been said about this topic, I will now pursue my other interests.</div><div><br></div><div>Thanks,</div><div>&nbsp; George.</div><div><br></div></body></html>
