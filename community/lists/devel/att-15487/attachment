<div dir="ltr"><div><br></div>I&#39;ve configured the 1.8.2rc3 tarball with &quot;--enable-static --disable-shared&quot; on a fairly standard Linux/x86-64 platform.  While there are no problems on the same platform w/o these configure flags, with them I cannot link any application codes.<div>
<br></div><div><div>$ mpicc -g    hello_c.c   -o hello_c</div><div>/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.2rc3-linux-x86_64-static/INST/lib/libopen-pal.a(opal_pty.o): In function `opal_openpty&#39;:</div><div>
opal_pty.c:(.text+0x1): undefined reference to `openpty&#39;</div><div><br></div><div>I checked &quot;make openpty&quot; and the manpage says to link with &#39;-lutil&#39;.</div><div>The &#39;-showme&#39; does not show libutil:</div>
<div><br></div><div><div>$ mpicc -showme hello_c.c</div><div>gcc hello_c.c -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.2rc3-linux-x86_64-static/INST/include -pthread -L/usr/syscom/opt/torque/4.1.4/lib -Wl,-rpath -Wl,/usr/syscom/opt/torque/4.1.4/lib -Wl,-rpath -Wl,/usr/syscom/opt/torque/4.1.4/lib -Wl,-rpath -Wl,/usr/syscom/opt/torque/4.1.4/lib -Wl,-rpath -Wl,/usr/syscom/opt/torque/4.1.4/lib -Wl,-rpath -Wl,/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.2rc3-linux-x86_64-static/INST/lib -Wl,--enable-new-dtags -L/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.2rc3-linux-x86_64-static/INST/lib -lmpi -lopen-rte -lopen-pal -lm -ldl -ltorque -libverbs -lrdmacm</div>
</div><div><br></div><div><br></div><div>It looks like configure is doing the right thing on some level, but failing to add &#39;-lutil&#39; to the appropriate list of libs (OPAL_WRAPPER_EXTRA_LIBS?):</div><div><br></div>
<div><div>============================================================================</div><div>== Library and Function tests</div><div>============================================================================</div><div>
checking if we need -lutil for openpty... yes</div><div>checking for openpty... yes</div></div><div><br></div><div><br></div><div>-Paul</div><div><br></div>-- <br><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div>
<div>Future Technologies Group</div><div>Computer and Data Sciences Department     Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font>
</div></div>

