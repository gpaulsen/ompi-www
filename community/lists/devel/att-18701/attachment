<html>
  <head>
    <meta content="text/html; charset=windows-1252"
      http-equiv="Content-Type">
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    Dominic,<br>
    <br>
    at first, you might try to add<br>
    call MPI_Barrier(comm,ierr)<br>
    between<br>
    <br>
      if (file_is_there .and. irank.eq.iroot) call
    MPI_FILE_DELETE(file,MPI_INFO_NULL,ierr)<br>
    <br>
    and<br>
    <br>
      call
MPI_FILE_OPEN(comm,file,IOR(MPI_MODE_WRONLY,MPI_MODE_CREATE),MPI_INFO_NULL,iunit,ierr)<br>
    <br>
    /* there might me a race condition, i am not sure about that */<br>
    <br>
    <br>
    fwiw, the<br>
    <p class=""><span class="">STOP A configuration file is required<br>
      </span></p>
    <p class=""><span class="">error message is not coming from OpenMPI.<br>
        it might be indirectly triggered by an ompio bug/limitation, or
        even a bug in your application.<br>
      </span></p>
    did you get your application work with an other flavor of OpenMPI ?<br>
    e.g. are you reporting an OpenMPI bug ?<br>
    or are you asking some help with your application (the bug could
    either be in your code or in OpenMPI, and you do not know for sure)<br>
    <br>
    i am a bit surprised you are using the same fileview_node type with
    both MPI_INTEGER and MPI_REAL_SP, but since they should be the same
    size, that might not be an issue.<br>
    <br>
    the subroutine depends on too many external parameters<br>
    (nnodes_, fileview_node, ncells_hexa, ncells_hexa_, unstr2str, ...)<br>
    so writing a simple reproducer might not be trivial.<br>
    <br>
    i recommend you first write a self contained program that can be
    evidenced to reproduce the issue,<br>
    and then i will investigate that. for that, you might want to dump
    the array sizes and the description of fileview_node in your
    application, and then hard code them into your self contained
    program.<br>
    also how many nodes/tasks are you running and what filesystem are
    you running on ?<br>
    <br>
    Cheers,<br>
    <br>
    Gilles<br>
    <br>
    <div class="moz-cite-prefix">On 3/16/2016 3:05 PM, Dominic Kedelty
      wrote:<br>
    </div>
    <blockquote
cite="mid:CALimjmUkLdbnVm2p+-fp7SAMJ1=pM6s+P6a0UFG=SG21CtLudA@mail.gmail.com"
      type="cite">
      <div dir="ltr">Gilles,
        <div><br>
        </div>
        <div>I do not have the latest mpich available. I tested using
          openmpi version 1.8.7 as well as mvapich2 version 1.9. both
          produced similar errors. I tried the mca flag that you had
          provided and it is telling me that a configuration file is
          needed.</div>
        <div><br>
        </div>
        <div>all processes return:</div>
        <div>
          <p class=""><span class="">STOP A configuration file is
              required</span></p>
          <p class="">I am attaching the subroutine of the code that I
            believe is where the problem is occuring.</p>
          <p class=""><br>
          </p>
        </div>
      </div>
      <div class="gmail_extra"><br>
        <div class="gmail_quote">On Mon, Mar 14, 2016 at 6:25 PM, Gilles
          Gouaillardet <span dir="ltr">&lt;<a moz-do-not-send="true"
              href="mailto:gilles.gouaillardet@gmail.com"
              target="_blank">gilles.gouaillardet@gmail.com</a>&gt;</span>
          wrote:<br>
          <blockquote class="gmail_quote" style="margin:0 0 0
            .8ex;border-left:1px #ccc solid;padding-left:1ex">Dominic,
            <div><br>
            </div>
            <div>this is a ROMIO error message, and ROMIO is from MPICH
              project.</div>
            <div>at first, I recommend you try the same test with the
              latest mpich, in order to check</div>
            <div>whether the bug is indeed from romio, and has been
              fixed in the latest release.</div>
            <div>(ompi is a few version behind the latest romio)</div>
            <div><br>
            </div>
            <div>would you be able to post a trimmed version of your
              application that evidences the test ?</div>
            <div>that will be helpful to understand what is going on.</div>
            <div><br>
            </div>
            <div>you might also want to give a try to</div>
            <div>mpirun --mca io ompio ...</div>
            <div>and see whether this helps. </div>
            <div>that being said, I think ompio is not considered as
              production ready on the v1.10 series of ompi</div>
            <div><br>
            </div>
            <div>Cheers,</div>
            <div><br>
            </div>
            <div>Gilles
              <div>
                <div class="h5"><br>
                  <div><br>
                    On Tuesday, March 15, 2016, Dominic Kedelty &lt;<a
                      moz-do-not-send="true"
                      href="mailto:dkedelty@asu.edu" target="_blank"><a class="moz-txt-link-abbreviated" href="mailto:dkedelty@asu.edu">dkedelty@asu.edu</a></a>&gt;
                    wrote:<br>
                    <blockquote class="gmail_quote" style="margin:0 0 0
                      .8ex;border-left:1px #ccc solid;padding-left:1ex">
                      <div dir="ltr">
                        <div>I am getting the following error using
                          openmpi and I am wondering if anyone would
                          have clue as to why it is happening. It is an
                          error coming from openmpi.<br>
                          <br>
                          Error in ADIOI_Calc_aggregator():
                          rank_index(40) &gt;= fd-&gt;hints-&gt;cb_nodes
                          (40) fd_size=213909504 off=8617247540<br>
                          Error in ADIOI_Calc_aggregator():
                          rank_index(40) &gt;= fd-&gt;hints-&gt;cb_nodes
                          (40) fd_size=213909504 off=8617247540<br>
                          application called MPI_Abort(MPI_COMM_WORLD,
                          1) - process 157<br>
                          application called MPI_Abort(MPI_COMM_WORLD,
                          1) - process 477<br>
                          <br>
                        </div>
                        <div>Any help would be appreciated. Thanks.<br>
                        </div>
                      </div>
                    </blockquote>
                  </div>
                </div>
              </div>
            </div>
            <br>
            _______________________________________________<br>
            devel mailing list<br>
            <a moz-do-not-send="true" href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
            Subscription: <a moz-do-not-send="true"
              href="http://www.open-mpi.org/mailman/listinfo.cgi/devel"
              rel="noreferrer" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
            Link to this post: <a moz-do-not-send="true"
              href="http://www.open-mpi.org/community/lists/devel/2016/03/18697.php"
              rel="noreferrer" target="_blank">http://www.open-mpi.org/community/lists/devel/2016/03/18697.php</a><br>
          </blockquote>
        </div>
        <br>
      </div>
      <br>
      <fieldset class="mimeAttachmentHeader"></fieldset>
      <br>
      <pre wrap="">_______________________________________________
devel mailing list
<a class="moz-txt-link-abbreviated" href="mailto:devel@open-mpi.org">devel@open-mpi.org</a>
Subscription: <a class="moz-txt-link-freetext" href="http://www.open-mpi.org/mailman/listinfo.cgi/devel">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a>
Link to this post: <a class="moz-txt-link-freetext" href="http://www.open-mpi.org/community/lists/devel/2016/03/18700.php">http://www.open-mpi.org/community/lists/devel/2016/03/18700.php</a></pre>
    </blockquote>
    <br>
  </body>
</html>

