<div dir="ltr">Backtrace for the Solaris-10/SPARC SEGV appears below.<div>I&#39;ve changed the subject line to distinguish this from the earlier report.</div><div><br><div>-Paul<br><div><br></div><div><div><font face="monospace">program terminated by signal SEGV (no mapping at the fault address)</font></div><div><font face="monospace">0xffffffff7d93b634: strlen+0x0014: &nbsp; &nbsp; &nbsp;lduh &nbsp; &nbsp; [%o2], %o1</font></div><div><font face="monospace">Current function is guess_strlen</font></div><div><font face="monospace">&nbsp; &nbsp;71 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; len += (int)strlen(sarg);</font></div><div><font face="monospace">(dbx) where</font></div><div><font face="monospace">&nbsp; [1] strlen(0x2, 0x73000000, 0x2, 0x80808080, 0x2, 0x80808080), at 0xffffffff7d93b634&nbsp;</font></div><div><font face="monospace">=&gt;[2] guess_strlen(fmt = 0xffffffff7eeada98 &quot;%uN:%uS:%uL3:%uL2:%uL1:%uC:%uH:%s&quot;, ap = 0xffffffff7ffff058), line 71 in &quot;printf.c&quot;</font></div><div><font face="monospace">&nbsp; [3] opal_vasprintf(ptr = 0xffffffff7ffff0b8, fmt = 0xffffffff7eeada98 &quot;%uN:%uS:%uL3:%uL2:%uL1:%uC:%uH:%s&quot;, ap = 0xffffffff7ffff050), line 218 in &quot;printf.c&quot;</font></div><div><font face="monospace">&nbsp; [4] opal_asprintf(ptr = 0xffffffff7ffff0b8, fmt = 0xffffffff7eeada98 &quot;%uN:%uS:%uL3:%uL2:%uL1:%uC:%uH:%s&quot;, ... = 0x807ede0103, ...), line 194 in &quot;printf.c&quot;</font></div><div><font face="monospace">&nbsp; [5] opal_hwloc_base_get_topo_signature(topo = 0x100128ea0), line 2134 in &quot;hwloc_base_util.c&quot;</font></div><div><font face="monospace">&nbsp; [6] rte_init(), line 205 in &quot;ess_hnp_module.c&quot;</font></div><div><font face="monospace">&nbsp; [7] orte_init(pargc = 0xffffffff7ffff61c, pargv = 0xffffffff7ffff610, flags = 4U), line 148 in &quot;orte_init.c&quot;</font></div><div><font face="monospace">&nbsp; [8] orterun(argc = 7, argv = 0xffffffff7ffff7a8), line 856 in &quot;orterun.c&quot;</font></div><div><font face="monospace">&nbsp; [9] main(argc = 7, argv = 0xffffffff7ffff7a8), line 13 in &quot;main.c&quot;</font></div></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Thu, Dec 11, 2014 at 7:17 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">No, that looks different - it&rsquo;s failing in mpirun itself. Can you get a line number on it?<div><br></div><div>Sorry for delay - I&rsquo;m generating rc3 now</div><div><br></div><div><br><div><blockquote type="cite"><div><div class="h5"><div>On Dec 11, 2014, at 6:59 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt; wrote:</div><br></div></div><div><div><div class="h5"><div dir="ltr">Don&#39;t see an rc3 yet.<div><br></div><div>My Solaris-10/SPARC runs fail slightly differently (see below).</div><div>It looks sufficiently similar that it MIGHT be the same root cause.</div><div>However, lacking an rc3 to test I figured it would be better to report this than to ignore it.</div><div><br></div><div>The problem is present with both V8+ and V9 ABIs, and with both Gnu and Sun compilers.</div><div><br></div><div>-Paul</div><div><br></div><div><div><font face="monospace">[niagara1:29881] *** Process received signal ***</font></div><div><font face="monospace">[niagara1:29881] Signal: Segmentation Fault (11)</font></div><div><font face="monospace">[niagara1:29881] Signal code: Address not mapped (1)</font></div><div><font face="monospace">[niagara1:29881] Failing at address: 2</font></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/lib/libopen-pal.so.6.2.1:opal_bac</font><span style="font-family:monospace">ktrace_print+0x24</span></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/lib/libopen-pal.so.6.2.1:0xaa160</font></div><div><font face="monospace">/lib/libc.so.1:0xc5364</font></div><div><font face="monospace">/lib/libc.so.1:0xb9e64</font></div><div><font face="monospace">/lib/libc.so.1:strlen+0x14 [ Signal 11 (SEGV)]</font></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/lib/libopen-pal.so.6.2.1:opal_vas</font><span style="font-family:monospace">printf+0x20</span></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/lib/libopen-pal.so.6.2.1:opal_asp</font><span style="font-family:monospace">rintf+0x30</span></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/lib/libopen-pal.so.6.2.1:opal_hwl</font><span style="font-family:monospace">oc_base_get_topo_signature+0x24c</span></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/lib/openmpi/mca_ess_hnp.so:0x2d90</font></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/lib/libopen-rte.so.7.0.5:orte_ini</font><span style="font-family:monospace">t+0x2f8</span></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/bin/orterun:orterun+0xaa8</font></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/bin/orterun:main+0x14</font></div><div><font face="monospace">/sandbox/hargrove/OMPI/openmpi-1.8.4rc2-solaris10-sparcT2-gcc346-v8plus/INST/bin/orterun:_start+0x5c</font></div><div><font face="monospace">[niagara1:29881] *** End of error message ***</font></div><div><font face="monospace">Segmentation Fault - core dumped</font></div></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Thu, Dec 11, 2014 at 3:29 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">Ah crud - incomplete commit means we didn&rsquo;t send the topo string. Will roll rc3 in a few minutes.<div><br></div><div>Thanks, Paul</div><div>Ralph</div><div><br></div><div><div><blockquote type="cite"><div><div><div>On Dec 11, 2014, at 3:08 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt; wrote:</div><br></div></div><div><div><div><div dir="ltr">Testing the 1.8.4rc2 tarball on my x86-64 Solaris-11 systems I am getting the following crash for both &quot;-m32&quot; and &quot;-m64&quot; builds:<div><br></div><div><div><font face="monospace">$ mpirun -mca btl sm,self,openib -np 2 -host pcp-j-19,pcp-j-20 examples/ring_c&#39;</font></div><div><font face="monospace">[pcp-j-19:18762] *** Process received signal ***</font></div><div><font face="monospace">[pcp-j-19:18762] Signal: Segmentation Fault (11)</font></div><div><font face="monospace">[pcp-j-19:18762] Signal code: Address not mapped (1)</font></div><div><font face="monospace">[pcp-j-19:18762] Failing at address: 0</font></div><div><font face="monospace">/shared/OMPI/openmpi-1.8.4rc2-solaris11-x64-ib-gcc452/INST/lib/libopen-pal.so.6.2.1&#39;opal_backtrace_print+0x26 [0xfffffd7ffaf237ba]</font></div><div><font face="monospace">/shared/OMPI/openmpi-1.8.4rc2-solaris11-x64-ib-gcc452/INST/lib/libopen-pal.so.6.2.1&#39;show_stackframe+0x833 [0xfffffd7ffaf20ba1]</font></div><div><font face="monospace">/lib/amd64/libc.so.1&#39;__sighndlr+0x6 [0xfffffd7fff202cc6]</font></div><div><font face="monospace">/lib/amd64/libc.so.1&#39;call_user_handler+0x2aa [0xfffffd7fff1f648e]</font></div><div><font face="monospace">/lib/amd64/libc.so.1&#39;strcmp+0x1a [0xfffffd7fff170fda] [Signal 11 (SEGV)]</font></div><div><font face="monospace">/shared/OMPI/openmpi-1.8.4rc2-solaris11-x64-ib-gcc452/INST/bin/orted&#39;main+0x90 [0x4010b7]</font></div><div><font face="monospace">/shared/OMPI/openmpi-1.8.4rc2-solaris11-x64-ib-gcc452/INST/bin/orted&#39;_start+0x6c [0x400f2c]</font></div><div><font face="monospace">[pcp-j-19:18762] *** End of error message ***</font></div><div><font face="monospace">bash: line 1: 18762 Segmentation Fault &nbsp; &nbsp; &nbsp;(core dumped) /shared/OMPI/openmpi-1.8.4rc2-solaris11-x64-ib-gcc452/INST/bin/orted -mca ess &quot;env&quot; -mca orte_ess_jobid &quot;911343616&quot; -mca orte_ess_vpid 1 -mca orte_ess_num_procs &quot;2&quot; -mca orte_hnp_uri &quot;911343616.0;tcp://<a href="http://172.16.0.120/" target="_blank">172.16.0.120</a>,<a href="http://172.18.0.120:50362/" target="_blank">172.18.0.120:50362</a>&quot; --tree-spawn -mca btl &quot;sm,self,openib&quot; -mca plm &quot;rsh&quot; -mca shmem_mmap_enable_nfs_warning &quot;0&quot;</font></div><div><font face="monospace"><br></font></div><div>Running gdb against a core generated by the 32-bit build gives line numbers:</div><div><div><font face="monospace">#0 &nbsp;0xfea1cb45 in strcmp () from /lib/libc.so.1</font></div><div><font face="monospace">#1 &nbsp;0xfeef4900 in orte_daemon (argc=26, argv=0x80479b0)</font></div><div><font face="monospace">&nbsp; &nbsp; at /shared/OMPI/openmpi-1.8.4rc2-solaris11-x86-ib-gcc452/openmpi-1.8.4rc2/orte/orted/orted_main.c:789</font></div><div><font face="monospace">#2 &nbsp;0x08050fb1 in main (argc=26, argv=0x80479b0)</font></div><div><font face="monospace">&nbsp; &nbsp; at /shared/OMPI/openmpi-1.8.4rc2-solaris11-x86-ib-gcc452/openmpi-1.8.4rc2/orte/tools/orted/orted.c:62</font></div></div><div><br></div><div>-Paul</div><div><br></div>-- <br><div><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font></div></div></div>
</div></div></div></div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/12/16514.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/12/16514.php</a></div></blockquote></div><br></div></div><br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/12/16515.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/12/16515.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font></div></div></div>
</div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></div></div>Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/12/16521.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/12/16521.php</a></div></blockquote></div><br></div></div><br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/12/16522.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/12/16522.php</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font></div></div></div>
</div></div></div>

