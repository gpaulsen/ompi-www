<html><head></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><br><div><div>On Mar 23, 2011, at 6:12 AM, Hugo Meyer wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">Hello @ll.<div><br></div><div>I need to store extra information into the orte_proc_t struct, i have added into that struct another field with a default value, but now i need to update that value with a value that i'm storint into the&nbsp;orte_process_info. My question is how i can do this?</div>
<div><br></div></blockquote><div><br></div>You have an error in your code - you aren't pointing to a proc object at all. See below.</div><div><br><blockquote type="cite"><div>I am actually doing this:&nbsp;</div><blockquote class="webkit-indent-blockquote" style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>jdata = orte_get_job_data_object(proc.jobid);</div><div>procs = (orte_proc_t**)jdata-&gt;procs-&gt;addr;</div></blockquote></blockquote></div><div><blockquote type="cite"><blockquote class="webkit-indent-blockquote" style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>procs_rec = (orte_proc_t**)procs[proc.vpid]-&gt;node-&gt;procs-&gt;addr;</div></blockquote></blockquote><br><div>Don't do the above - this is what is getting you into trouble. Instead, do this:</div><div><br></div><div>orte_proc_t *procptr1, *procptr2;</div><div>orte_node_t *node;</div><div><br></div><div>if (NULL == (procptr1 = (orte_proc_t*)opal_pointer_array_get_item(jdata-&gt;procs, proc.vpid))) {<br><blockquote type="cite"><blockquote class="webkit-indent-blockquote" style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 40px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; "></blockquote></blockquote></div><div>&nbsp;&nbsp; &nbsp; &nbsp;ORTE_ERROR_LOG(ORTE_ERR_NOT_FOUND);</div><div>&nbsp;&nbsp; &nbsp; &nbsp;return; &nbsp;/* or whatever */</div><div>}</div><div>node = procptr1-&gt;node;</div><div><br></div><div>for (i=0; i &lt; node-&gt;procs-&gt;size; i++) {</div><div>&nbsp;&nbsp; &nbsp;if (NULL == (procptr2 = (orte_proc_t*)opal_pointer_array_get_item(node-&gt;procs, i))) {<br><blockquote type="cite"><blockquote class="webkit-indent-blockquote" style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 40px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; "></blockquote></blockquote></div><div>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ORTE_ERROR_LOG(ORTE_ERR_NOT_FOUND);</div><div>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return; &nbsp;/* or whatever */</div><div>&nbsp;&nbsp; &nbsp;}</div><div>&nbsp;&nbsp; &nbsp; if (procptr2-&gt;name.jobid == procptr1-&gt;name.jobid &amp;&amp;</div><div>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; procptr2-&gt;name.vpid == procptr1-&gt;name.vpid) {</div><div>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* procptr2 now points at your proc struct, so set your value */</div><div>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; procptr2-&gt;my_value = foo;</div><div>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</div><div>&nbsp;&nbsp; &nbsp; }</div><div>}</div><div><br></div><div>Remember, the proc objects are -not- stored in vpid order in the node-&gt;procs array, so you have to search that array to find the one you want.</div><div><br></div><div><br></div><blockquote type="cite"><blockquote class="webkit-indent-blockquote" style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>ORTE_NAME_PRINT(&amp;(procs_rec[x]-&gt;my_value));</div><div><br></div></blockquote></blockquote><div><br></div><br><blockquote type="cite">But i don't know how to set my value, and where because i'm only getting now my default initial value.<div>
<br></div><div>Thanks in advance.</div><div><br></div><div>Best Regards.</div><div><br></div><div>Hugo Meyer<br><div><br></div><div><br></div></div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel</blockquote></div><br></body></html>
