<html><head></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Chris,<div><br></div><div>.mod files are compiler-specific, and may even be version-specific. &nbsp;You may, however, be lucky enough to compile the Fortran interface definitions with ifort and supply that mpi.mod to ifort, even though the actual code was compiled with gfortran. &nbsp;I have never tried that -- we build separate development trees for each OpenMPI version/compiler product/compiler version.</div><div><br><div>
<span class="Apple-style-span" style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 'Helvetica Neue'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium; ">Larry Baker<br>US Geological Survey<br>650-329-5608<br><a href="mailto:baker@usgs.gov">baker@usgs.gov</a><br><br><br></span>
</div>
<br><div><div>On 22 Aug 2013, at 6:50 AM, Jeff Squyres (jsquyres) wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div>Sadly, probably not. :(. You'll prbably have the same problem with c++, too. <br><br>There *may* be compatibility command line options for ifort/icpc to make them link compatible w gfortran/g++, but I've never had much faith in them. <br><br>Sent from my phone. No type good. <br><br>On Aug 22, 2013, at 2:24 AM, "Christopher Samuel" &lt;<a href="mailto:samuel@unimelb.edu.au">samuel@unimelb.edu.au</a>&gt; wrote:<br><br><blockquote type="cite">-----BEGIN PGP SIGNED MESSAGE-----<br></blockquote><blockquote type="cite">Hash: SHA1<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">Hi folks,<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">We've got what we thought would be a fairly standard OMPI (1.6.5)<br></blockquote><blockquote type="cite">install which is a single install built with GCC and then setting the<br></blockquote><blockquote type="cite">appropriate variables to use the Intel compilers when someone loads<br></blockquote><blockquote type="cite">our "intel" module:<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">$ module show intel<br></blockquote><blockquote type="cite">[...]<br></blockquote><blockquote type="cite">setenv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OMPI_CC icc<br></blockquote><blockquote type="cite">setenv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OMPI_CXX icpc<br></blockquote><blockquote type="cite">setenv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OMPI_F77 ifort<br></blockquote><blockquote type="cite">setenv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OMPI_FC ifort<br></blockquote><blockquote type="cite">setenv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OMPI_CFLAGS -xHOST -O3 -mkl=sequential<br></blockquote><blockquote type="cite">setenv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OMPI_FFLAGS -xHOST -O3 -mkl=sequential<br></blockquote><blockquote type="cite">setenv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OMPI_FCFLAGS -xHOST -O3 -mkl=sequential<br></blockquote><blockquote type="cite">setenv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OMPI_CXXFLAGS -xHOST -O3 -mkl=sequential<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">This works wonderfully, *except* when our director attempted to build<br></blockquote><blockquote type="cite">an F90 program with the Intel compilers that fails to build because<br></blockquote><blockquote type="cite">the mpi.mod F90 module was produced with gfortran rather than the<br></blockquote><blockquote type="cite">Intel compilers. :-(<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">Is there any way to avoid having to do parallel installs of OMPI with<br></blockquote><blockquote type="cite">GCC and Intel compilers just to have two different versions of these<br></blockquote><blockquote type="cite">files?<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">My brief googling hasn't indicated anything, and I don't see anything<br></blockquote><blockquote type="cite">in the mpif90 manual page (though I have to admit I've had to rush to<br></blockquote><blockquote type="cite">try and get this done before I need to leave for the day). :-(<br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">cheers,<br></blockquote><blockquote type="cite">Chris<br></blockquote><blockquote type="cite">- -- <br></blockquote><blockquote type="cite">Christopher Samuel &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Senior Systems Administrator<br></blockquote><blockquote type="cite">VLSCI - Victorian Life Sciences Computation Initiative<br></blockquote><blockquote type="cite">Email: <a href="mailto:samuel@unimelb.edu.au">samuel@unimelb.edu.au</a> Phone: +61 (0)3 903 55545<br></blockquote><blockquote type="cite"><a href="http://www.vlsci.org.au/">http://www.vlsci.org.au/</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://twitter.com/vlsci">http://twitter.com/vlsci</a><br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">-----BEGIN PGP SIGNATURE-----<br></blockquote><blockquote type="cite">Version: GnuPG v1.4.11 (GNU/Linux)<br></blockquote><blockquote type="cite">Comment: Using GnuPG with Thunderbird - <a href="http://www.enigmail.net/">http://www.enigmail.net/</a><br></blockquote><blockquote type="cite"><br></blockquote><blockquote type="cite">iEYEARECAAYFAlIVrpIACgkQO2KABBYQAh/GAQCggQGnc18kSfMcGle3a3pWZGgD<br></blockquote><blockquote type="cite">UQ8AoIz61uuOPj+TFJwSYMTaAtUBLk3J<br></blockquote><blockquote type="cite">=yJ6J<br></blockquote><blockquote type="cite">-----END PGP SIGNATURE-----<br></blockquote><blockquote type="cite">_______________________________________________<br></blockquote><blockquote type="cite">devel mailing list<br></blockquote><blockquote type="cite"><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br></blockquote><blockquote type="cite"><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></blockquote>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel<br></div></blockquote></div><br></div></body></html>
