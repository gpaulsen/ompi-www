<div dir="ltr">Following Larry&#39;s suggestion to use /proc/config.gz, Allan sent me kernel configs for the old (3.8) and new (3.15) kernels.<div>While there were more changes than I expected, none relates to removing an API/feature that Open MPI is likely to be using.</div><div><br></div><div>-Paul</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Nov 25, 2014 at 11:28 AM, Larry Baker <span dir="ltr">&lt;<a href="mailto:baker@usgs.gov" target="_blank">baker@usgs.gov</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word">Allan,<div><br></div><div>If you can still boot the old embedded system, a lot of times the config parameters are saved as /proc/config.gz.  You can at least them compare the two configs.</div><div><br><div>
<span style="border-collapse:separate;color:rgb(0,0,0);font-family:&#39;Helvetica Neue&#39;;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:-webkit-auto;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;font-size:medium">Larry Baker<br>US Geological Survey<br><a href="tel:650-329-5608" value="+16503295608" target="_blank">650-329-5608</a><br><a href="mailto:baker@usgs.gov" target="_blank">baker@usgs.gov</a><br><br><br></span>
</div>
<br><div><div><div class="h5"><div>On 25 Nov 2014, at 11:11 AM, Allan Wu wrote:</div><br></div></div><blockquote type="cite"><div><div class="h5"><div dir="ltr"><div class="gmail_default" style="font-family:trebuchet ms,sans-serif;font-size:small">Thanks Paul! Unfortunately &#39;/boot&#39; is not available in my embedded linux, and I do not have the configuration file for the old kernel since it is provided as is. However, I have the new kernel configuration since I compiled it myself. Would it be helpful if I provide you the .config file when I compile the kernel? It maybe quite painful to look through that file though. Is there any other way that I can obtain the configuration? </div><div class="gmail_default" style="font-family:trebuchet ms,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-family:trebuchet ms,sans-serif;font-size:small">I checked my config for the new kernel, and UNIX-domain sockets and Sys V IPC are both enabled in the build. Are there any other possibilities I can check?</div><div class="gmail_default" style="font-family:trebuchet ms,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-family:trebuchet ms,sans-serif;font-size:small">Thanks,</div><div class="gmail_default" style="font-family:trebuchet ms,sans-serif;font-size:small">Di</div></div><div class="gmail_extra"><br clear="all"><div><div><div dir="ltr">--<br>Di Wu (Allan)<br>PhD student, <a href="http://vast.cs.ucla.edu/" target="_blank">VAST Laboratory</a>,<br>Department of Computer Science, UC Los Angeles<br>Email: <a href="mailto:allwu@cs.ucla.edu" target="_blank">allwu@cs.ucla.edu</a><br></div></div></div>
<br><div class="gmail_quote">On Tue, Nov 25, 2014 at 10:45 AM, Paul Hargrove <span dir="ltr">&lt;<a href="mailto:phhargrove@lbl.gov" target="_blank">phhargrove@lbl.gov</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Allan,<div><br></div><div>A likely possibility is that some important kernel feature (that Open MPI assumes is present) is missing.</div><div>That includes not only &quot;kernel modules&quot; as you mention, but also features configure in (or out) of the base kernel.</div><div>For instance, some embedded kernels omit UNIX-domain sockets and SysV IPC support.</div><div><br></div><div>If you can send me (preferably off-list) the kernel config files for the old an new kernels I may be able to spot something.</div><div>If present, you are looking for /boot/config-[VERSION]</div><div><br></div><div>-Paul</div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>On Tue, Nov 25, 2014 at 10:25 AM, Allan Wu <span dir="ltr">&lt;<a href="mailto:allwu@cs.ucla.edu" target="_blank">allwu@cs.ucla.edu</a>&gt;</span> wrote:<br></div></div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div><div><div dir="ltr"><div class="gmail_default" style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small">I&#39;m sorry I forgot to change the subject when I reply to the digest issue. Please find my original email below. </div><div class="gmail_default" style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small">Regards,</div><div class="gmail_default" style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small">Di</div><div class="gmail_extra"><div><div><div dir="ltr"><br></div></div></div><div class="gmail_quote">On Tue, Nov 25, 2014 at 10:19 AM, Allan Wu <span dir="ltr">&lt;<a href="mailto:allwu@cs.ucla.edu" target="_blank">allwu@cs.ucla.edu</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><div style="font-size:small"><font face="arial, helvetica, sans-serif">Thanks Ralph for the reply. Sorry about the log file, I think I forgot to put an extension to the file. Please find a new one attached with this email. </font></div><div class="gmail_extra"><font face="arial, helvetica, sans-serif"><br></font></div><div class="gmail_extra"><div style="font-size:small"><font face="arial, helvetica, sans-serif">I&#39;m sorry for not enough debugging information, but &#39;omp_info&#39; and &#39;--debug-devel&#39; are the only ways I know for collecting information, are there any other things I can try to provide more info?</font></div><div style="font-size:small"><font face="arial, helvetica, sans-serif"><br></font></div><div style="font-size:small"><font face="arial, helvetica, sans-serif">When I execute &#39;mpirun --debug-devel -np 1 ./helloworld&#39;, all the output is the logging information in my last email. It got stuck at <div style="display:inline"></div><span style="font-size:12.7272720336914px"> &quot;[fpga1:00718] tmp: /tmp&quot;, and nothing from my helloworld program is printed out to the screen. So I think it is mpirun failing to start my executable, not failing to terminate.</span></font></div><div style="font-size:small"><span style="font-size:12.7272720336914px"><font face="arial, helvetica, sans-serif"><br></font></span></div><div style="font-size:small"><span style="font-size:12.7272720336914px"><font face="arial, helvetica, sans-serif">I was wondering if this has anything to do with my newer kernel version, since it works well in the old case. </font></span></div><div style="font-size:small"><span style="font-size:12.7272720336914px"><font face="arial, helvetica, sans-serif"><br></font></span></div><div style="font-size:small"><span style="font-size:12.7272720336914px"><font face="arial, helvetica, sans-serif">Thanks,</font></span></div><span><div><div><div dir="ltr">--<br>Di Wu (Allan)<br>PhD student, <a href="http://vast.cs.ucla.edu/" target="_blank">VAST Laboratory</a>,<span><br>Department of Computer Science, UC Los Angeles<br>Email: <a href="mailto:allwu@cs.ucla.edu" target="_blank">allwu@cs.ucla.edu</a><br></span></div></div></div>
<div class="gmail_extra"><br></div></span><div><div><br><div class="gmail_quote"><div style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">Date: Tue, 25 Nov 2014 07:29:51 -0800</span></div><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">From: <div style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small;display:inline"></div><div class="gmail_default" style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small;display:inline"></div>Ralph Castain &lt;</span><a href="mailto:rhc@open-mpi.org" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">rhc@open-mpi.org</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">To: Open MPI Developers &lt;</span><a href="mailto:devel@open-mpi.org" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">devel@open-mpi.org</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">Subject: Re: [OMPI devel] OpenMPI v1.8 and v1.8.3 mpirun hangs at</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">        execution       on an embedded ARM Linux kernel version 3.15.0</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">Message-ID: &lt;</span><a href="mailto:898CB117-F6A6-4569-89C3-49B75D65B314@open-mpi.org" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">898CB117-F6A6-4569-89C3-49B75D65B314@open-mpi.org</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">Content-Type: text/plain; charset=&quot;utf-8&quot;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">I don?t know what you put in that log file, but it was an executable and I?m not feeling that trusting :-)</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">I?m afraid there isn?t enough debug output there to really tell anything. From what little I can see, I?m guessing that the application ran fine and you got the usual ?hello? output and the helloworld process exited safely - is that correct? And so it is solely mpirun that is failing to cleanly terminate?</span><span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; On Nov 24, 2014, at 11:24 PM, Allan Wu &lt;</span><a href="mailto:allwu@cs.ucla.edu" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">allwu@cs.ucla.edu</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; wrote:</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; Hello everyone,</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"></span><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; I have cross-compiled OpenMPI for an embedded ARM Linux. Everything works fine for my system based on Linux 3.8.0. I have previously submitted a post related to my compilation, which can be found here: </span><a href="http://www.open-mpi.org/community/lists/devel/2014/04/14440.php" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/04/14440.php</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px"> &lt;</span><a href="http://www.open-mpi.org/community/lists/devel/2014/04/14440.php" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/04/14440.php</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;. When I recently upgraded my Linux kernel to 3.15.0, mpirun begins to stuck at even the helloworld program. The program consists only simple APIs: MPI_Init, MPI_Comm_size, MPI_Comm_rank, MPI_Finalize. The problem occurs even at &#39;mpirun -np 1 ./helloworld&#39;, and below are the output with --debug-devel (before it got stuck):</span><span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; [fpga1:00716] sess_dir_finalize: job session dir not empty - leaving</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; [fpga1:00716] procdir: /tmp/openmpi-sessions-root@</span><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">fpga1_0/63813/0/0</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; [fpga1:00716] jobdir: /tmp/openmpi-sessions-root@</span><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">fpga1_0/63813/0</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; [fpga1:00716] top: openmpi-sessions-root@fpga1_0</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; [fpga1:00716] tmp: /tmp</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; [fpga1:00718] procdir: /tmp/openmpi-sessions-root@</span><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">fpga1_0/63813/1/0</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; [fpga1:00718] jobdir: /tmp/openmpi-sessions-root@</span><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">fpga1_0/63813/1</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; [fpga1:00718] top: openmpi-sessions-root@fpga1_0</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;<div style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small;display:inline"></div> [fpga1:00718] tmp: /tmp</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; I suspect maybe it is due to incompatible kernel version or some missing kernel modules. I tried also with the latest version 1.8.3, and had the same problem. Does anyone have any thoughts? I have attached the output of &#39;ompi-info --all&#39; with this email.</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; Please let me know if I need to provide more information. Thanks in advance!</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; Regards,</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; --</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; Di Wu (Allan)</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"></span><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; PhD student, VAST?Laboratory &lt;</span><a href="http://vast.cs.ucla.edu/" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">http://vast.cs.ucla.edu/</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;,</span><span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; Department of Computer Science, UC Los Angeles</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"></span><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; Email: </span><a href="mailto:allwu@cs.ucla.edu" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">allwu@cs.ucla.edu</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px"> &lt;mailto:</span><a href="mailto:allwu@cs.ucla.edu" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">allwu@cs.ucla.edu</a><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt;</span><span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; &lt;log.tar.gz&gt;__________________</span><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">_____________________________</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; devel mailing list</span><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; </span><a href="mailto:devel@open-mpi.org" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">devel@open-mpi.org</a><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><span style="font-family:arial,sans-serif;font-size:12.7272720336914px">&gt; Subscription: </span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" style="font-family:arial,sans-serif;font-size:12.7272720336914px" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br style="font-family:arial,sans-serif;font-size:12.7272720336914px"><div style="font-family:&#39;trebuchet ms&#39;,sans-serif;font-size:small"><span style="font-size:12.7272720336914px;font-family:arial,sans-serif">&gt; Link to this post: </span><a href="http://www.open-mpi.org/community/lists/devel/2014/11/16330.php" style="font-size:12.7272720336914px;font-family:arial,sans-serif" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/11/16330.php</a></div><br></span></div></div></div></div></div>
</blockquote></div><br></div></div>
<br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></div></div>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/11/16341.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/11/16341.php</a><span><font color="#888888"><br></font></span></blockquote></div><span><font color="#888888"><br><br clear="all"><div><br></div>-- <br><div><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank">+1-510-495-2352</a></div><div>Lawrence Berkeley National Laboratory     Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank">+1-510-486-6900</a></div></font></div></div></div>
</font></span></div>
</blockquote></div><br></div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org" target="_blank">devel@open-mpi.org</a><br>Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></div></div>Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/11/16343.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/11/16343.php</a></blockquote></div><br></div></div></blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div>

