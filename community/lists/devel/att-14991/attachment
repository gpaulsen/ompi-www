<html><head><meta http-equiv="Content-Type" content="text/html charset=us-ascii"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Works fine for me:<div><br></div><div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[rhc@bend001 mpi]$ mpirun -n 3 --host bend001 ./simple_spawn</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[pid 22777] starting up!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[pid 22778] starting up!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[pid 22779] starting up!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">1 completed MPI_Init</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent [pid 22778] about to spawn!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">2 completed MPI_Init</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent [pid 22779] about to spawn!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">0 completed MPI_Init</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent [pid 22777] about to spawn!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[pid 22783] starting up!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[pid 22784] starting up!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent done with spawn</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent sending message to child</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent done with spawn</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent done with spawn</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">0 completed MPI_Init</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Hello from the child 0 of 2 on host bend001 pid 22783</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Child 0 received msg: 38</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">1 completed MPI_Init</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Hello from the child 1 of 2 on host bend001 pid 22784</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Child 1 disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Child 0 disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">22784: exiting</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">22778: exiting</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">22779: exiting</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">22777: exiting</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">22783: exiting</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[rhc@bend001 mpi]$ make spawn_multiple</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">mpicc -g --openmpi:linkall&nbsp; &nbsp; spawn_multiple.c &nbsp; -o spawn_multiple</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[rhc@bend001 mpi]$ mpirun -n 3 --host bend001 ./spawn_multiple</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent [pid 22797] about to spawn!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent [pid 22798] about to spawn!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent [pid 22799] about to spawn!</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent done with spawn</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent done with spawn</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent sending message to children</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent done with spawn</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Hello from the child 0 of 2 on host bend001 pid 22803: argv[1] = foo</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Child 0 received msg: 38</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Hello from the child 1 of 2 on host bend001 pid 22804: argv[1] = bar</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Child 1 disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Parent disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">Child 0 disconnected</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[rhc@bend001 mpi]$ mpirun -n 3 --host bend001 -mca coll ^ml ./intercomm_create</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: MPI_Intercomm_create( intra, 0, intra, MPI_COMM_NULL, 201, &amp;inter) [rank 3]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: MPI_Intercomm_create( intra, 0, intra, MPI_COMM_NULL, 201, &amp;inter) [rank 4]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: MPI_Intercomm_create( intra, 0, intra, MPI_COMM_NULL, 201, &amp;inter) [rank 5]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: MPI_Intercomm_create( MPI_COMM_WORLD, 0, intra, 0, 201, &amp;inter) [rank 3]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: MPI_Intercomm_create( MPI_COMM_WORLD, 0, intra, 0, 201, &amp;inter) [rank 4]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: MPI_Intercomm_create( MPI_COMM_WORLD, 0, intra, 0, 201, &amp;inter) [rank 5]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: MPI_Intercomm_create( ab_intra, 0, ac_intra, 3, 201, &amp;inter) (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: MPI_Intercomm_create( ab_intra, 0, ac_intra, 3, 201, &amp;inter) (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: MPI_Intercomm_create( ab_intra, 0, ac_intra, 3, 201, &amp;inter) (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: intercomm_create (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier on inter-comm - before</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier on inter-comm - after</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: intercomm_merge(0) (0) [rank 2]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: intercomm_merge(0) (0) [rank 8]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: intercomm_merge(0) (0) [rank 0]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: intercomm_merge(0) (0) [rank 1]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: intercomm_merge(0) (0) [rank 7]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: intercomm_merge(1) (0) [rank 4]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: intercomm_merge(1) (0) [rank 5]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: intercomm_merge(0) (0) [rank 6]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: intercomm_merge(1) (0) [rank 3]</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">a: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">c: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">b: barrier (0)</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 0</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 0</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 1</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">dpm_base_disconnect_init: error -12 in isend to process 3</div><div style="margin: 0px; font-size: 11px; font-family: Menlo; background-color: rgb(254, 244, 156);">[rhc@bend001 mpi]$&nbsp;</div><div><br></div><div><br></div><div><br></div><div><div>On Jun 6, 2014, at 11:26 AM, Rolf vandeVaart &lt;<a href="mailto:rvandevaart@nvidia.com">rvandevaart@nvidia.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">I am seeing an interesting failure on trunk. &nbsp;intercomm_create, spawn, and spawn_multiple from the IBM tests hang if I explicitly list the hostnames to run on. &nbsp;For example:<br><br>Good:<br>$ mpirun -np 2 --mca btl self,sm,tcp spawn_multiple<br>Parent: 0 of 2, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (0 in init)<br>Parent: 1 of 2, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (0 in init)<br>Child: 0 of 4, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (this is job 1) (1 in init)<br>Child: 1 of 4, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (this is job 1) (1 in init)<br>Child: 2 of 4, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (this is job 2) (1 in init)<br>Child: 3 of 4, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (this is job 2) (1 in init)<br>$ <br><br>Bad:<br>$ mpirun -np 2 --mca btl self,sm,tcp -host drossetti-ivy0,drossetti-ivy0 spawn_multiple<br>Parent: 0 of 2, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (1 in init)<br>Parent: 1 of 2, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (1 in init)<br>Child: 0 of 4, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (this is job 1) (1 in init)<br>Child: 1 of 4, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (this is job 1) (1 in init)<br>Child: 2 of 4, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (this is job 2) (1 in init)<br>Child: 3 of 4, <a href="http://drossetti-ivy0.nvidia.com">drossetti-ivy0.nvidia.com</a> (this is job 2) (1 in init)<br>[..and we are hung here...]<br><br>I see the exact same behavior for spawn and spawn_multiple. &nbsp;Ralph, any thoughts? &nbsp;Open MPI 1.8 is fine. &nbsp;I can provide more information if needed, but I assume this is reproducible. <br><br>Thanks,<br>Rolf<br>-----------------------------------------------------------------------------------<br>This email message is for the sole use of the intended recipient(s) and may contain<br>confidential information. &nbsp;Any unauthorized review, use, disclosure or distribution<br>is prohibited. &nbsp;If you are not the intended recipient, please contact the sender by<br>reply email and destroy all copies of the original message.<br>-----------------------------------------------------------------------------------<br>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/devel<br>Link to this post: http://www.open-mpi.org/community/lists/devel/2014/06/14990.php<br></blockquote></div><br></div></body></html>
