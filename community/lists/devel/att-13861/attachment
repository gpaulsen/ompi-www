<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Here is the offending code:<div><br></div><div><div>&nbsp; &nbsp; &nbsp;/* get the name of the user */</div><div>&nbsp; &nbsp; uid = getuid();</div><div>#ifdef HAVE_GETPWUID</div><div>&nbsp; &nbsp; pwdent = getpwuid(uid);</div><div>#else</div><div>&nbsp; &nbsp; pwdent = NULL;</div><div>#endif</div><div>&nbsp; &nbsp; if (NULL != pwdent) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; user = strdup(pwdent-&gt;pw_name);</div><div>&nbsp; &nbsp; } else {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; orte_show_help("help-orte-runtime.txt",</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"orte:session:dir:nopwname", true);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return ORTE_ERR_OUT_OF_RESOURCE;</div><div>&nbsp; &nbsp; }</div><div><br></div><div>Is it possible on this platform that you don't have getpwuid? I'm surprised at the code as we could just use the uid instead - not sure why this more stringent test was applied</div><div><br></div><div><br></div><div><br></div><div><div>On Jan 22, 2014, at 7:02 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov">phhargrove@lbl.gov</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div dir="ltr">On yet another test platform I see the following:<div><br></div><div><div><font face="courier new, monospace">$ mpirun -mca btl sm,self -np 1 examples/ring_c</font></div><div><font face="courier new, monospace">--------------------------------------------------------------------------</font></div>
<div><font face="courier new, monospace">Open MPI was unable to obtain the username in order to create a path</font></div><div><font face="courier new, monospace">for its required temporary directories. &nbsp;This type of error is usually</font></div>
<div><font face="courier new, monospace">caused by a transient failure of network-based authentication services</font></div><div><font face="courier new, monospace">(e.g., LDAP or NIS failure due to network congestion), but can also be</font></div>
<div><font face="courier new, monospace">an indication of system misconfiguration.</font></div><div><font face="courier new, monospace"><br></font></div><div><font face="courier new, monospace">Please consult your system administrator about these issues and try</font></div>
<div><font face="courier new, monospace">again.</font></div><div><font face="courier new, monospace">--------------------------------------------------------------------------</font></div><div><font face="courier new, monospace">[<a href="http://biou2.rice.edu:30021/">biou2.rice.edu:30021</a>] [[40214,0],0] ORTE_ERROR_LOG: Out of resource in file /home/phh1/SCRATCH/OMPI/openmpi-1.7-latest-linux-ppc32-xlc-11.1/openmpi-1.7.4rc2r30361/orte/util/session_dir.c at line 380</font></div>
<div><font face="courier new, monospace">[<a href="http://biou2.rice.edu:30021/">biou2.rice.edu:30021</a>] [[40214,0],0] ORTE_ERROR_LOG: Out of resource in file /home/phh1/SCRATCH/OMPI/openmpi-1.7-latest-linux-ppc32-xlc-11.1/openmpi-1.7.4rc2r30361/orte/mca/ess/hnp/ess_hnp_module.c at line 599</font></div>
<div><font face="courier new, monospace">--------------------------------------------------------------------------</font></div><div><font face="courier new, monospace">It looks like orte_init failed for some reason; your parallel process is</font></div>
<div><font face="courier new, monospace">likely to abort. &nbsp;There are many reasons that a parallel process can</font></div><div><font face="courier new, monospace">fail during orte_init; some of which are due to configuration or</font></div>
<div><font face="courier new, monospace">environment problems. &nbsp;This failure appears to be an internal failure;</font></div><div><font face="courier new, monospace">here's some additional information (which may only be relevant to an</font></div>
<div><font face="courier new, monospace">Open MPI developer):</font></div><div><font face="courier new, monospace"><br></font></div><div><font face="courier new, monospace">&nbsp; orte_session_dir failed</font></div><div><font face="courier new, monospace">&nbsp; --&gt; Returned value Out of resource (-2) instead of ORTE_SUCCESS</font></div>
<div><font face="courier new, monospace">--------------------------------------------------------------------------</font></div><div><br></div><div><br></div><div>An "-np 2" run fails in the same manner.</div><div>
This is a production system and there is no problem with "whoami" or "id", leaving me doubting the explanation provided by the error message.</div><div><br></div><div><font face="courier new, monospace">[phh1@biou2 ~]$ whoami</font></div>
<div><font face="courier new, monospace">phh1</font></div><div><font face="courier new, monospace">[phh1@biou2 ~]$ id</font></div><div><font face="courier new, monospace">uid=44154(phh1) gid=2016(hpc) groups=2016(hpc),3803(hpcusers),3805(sshgw),3808(biou)</font></div>
</div><div><br></div><div>The "ompi_info --all" output is attached.</div><div>Please let me know what additional info is needed.</div><div><br></div><div>-Paul<br clear="all"><div><br></div>-- <br><font face="courier new, monospace"><div>
Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Future Technologies Group</div><div>Computer and Data Sciences Department &nbsp; &nbsp; Tel: +1-510-495-2352</div>
<div>Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font>
</div></div>
<span>&lt;biou2_info.txt.bz2&gt;</span>_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel</blockquote></div><br></div></body></html>
