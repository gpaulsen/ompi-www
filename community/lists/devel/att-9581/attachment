<html><body bgcolor="#FFFFFF"><div>Rolf -</div><div><br></div><div>Can you send a cumulative SVN diff against the SVN HEAD?<br><br>Sent from my phone.<span class="Apple-style-span" style="-webkit-tap-highlight-color: rgba(26, 26, 26, 0.292969); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); ">&nbsp;No type good.&nbsp;</span></div><div><br>On Jul 28, 2011, at 5:52 PM, "Rolf vandeVaart" &lt;<a href="mailto:rvandevaart@nvidia.com">rvandevaart@nvidia.com</a>&gt; wrote:<br><br></div><div></div><blockquote type="cite"><div><div class="WordSection1"><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">WHAT: Add CUDA registration of host memory in sm and openib BTLs.<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">TIMEOUT: 8/4/2011<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">DETAILS: In order to improve performance of sending GPU device memory,<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">we need to register the host memory with the CUDA framework.&nbsp; These<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">changes allow that to happen.&nbsp; These changes are somewhat different<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">from what I proposed a while ago and I think a lot cleaner.&nbsp; There is<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">a new memory pool flag that indicates whether a piece of memory<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">should be registered.&nbsp; This allows us to register the sm memory and<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">the pre-posted openib memory.<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">The CUDA specific code is in the ompi/mca/common/cuda directory.<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">Do not look at the configure.m4 code, as that is still not done.<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">Here a link to the proposed changes:<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><a href="https://bitbucket.org/rolfv/ompi-cuda-register">https://bitbucket.org/rolfv/ompi-cuda-register</a><o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">Here is a list of files that would change.<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VERSION<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; configure.ac<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/btl/openib/btl_openib_component.c<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/btl/openib/Makefile.am<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/mpool/sm/Makefile.am<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/mpool/sm/mpool_sm_module.c<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/mpool/mpool.h<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/pml/ob1/pml_ob1_sendreq.h<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/common/cuda<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/common/cuda/configure.m4<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/common/cuda/common_cuda.c<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/common/cuda/help-mpi-common-cuda.txt<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/common/cuda/Makefile.am<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/mca/common/cuda/common_cuda.h<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;">M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ompi/class/ompi_free_list.c<o:p></o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" style="text-autospace:none"><span style="font-family:&quot;Courier New&quot;"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal"><o:p>&nbsp;</o:p></p></div>
<div>
<hr>
</div>
<div>This email message is for the sole use of the intended recipient(s) and may 
contain confidential information.&nbsp; Any unauthorized review, use, disclosure 
or distribution is prohibited.&nbsp; If you are not the intended recipient, 
please contact the sender by reply email and destroy all copies of the original 
message. </div>
<div>
<hr>
</div>
<p></p>

</div></blockquote><blockquote type="cite"><div><span>_______________________________________________</span><br><span>devel mailing list</span><br><span><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a></span><br><span><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a></span></div></blockquote></body></html>