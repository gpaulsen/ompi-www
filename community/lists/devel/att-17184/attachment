<div dir="ltr">On MacOS X 10.8 (where cc and c++ are clang and clang++, and the default ABI is LP64) I&#39;ve configured the release candidate with<blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><font face="monospace, monospace">--prefix=.... --enable-debug CC=cc CXX=c++</font></div></blockquote><div><br></div><div><br></div><div>The build fails linking opal_wrapper as shown in the &quot;make V=1&quot; output below.</div><div><br></div><div>Based on the undefined symbol (_lt_libltdlc_LTX_preloaded_symbols) I am guessing this is a libltdl issue.  If relevant, note that configure picks the embedded libltdl:</div><div><div><br></div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><font face="monospace, monospace">*** GNU libltdl setup</font></div><div><font face="monospace, monospace">checking location of libltdl... internal copy</font></div><div><font face="monospace, monospace">configure: OMPI configuring in opal/libltdl</font></div><div><font face="monospace, monospace"><br></font></div></blockquote></div><div>Oddly enough, I have no problems with a build configured for the ILP32 ABI as follows:</div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div><font face="monospace, monospace">--prefix=.... --enable-debug CC=cc CXX=c++ \</font></div></div><div><font face="monospace, monospace">CFLAGS=-m32 --with-wrapper-cflags=-m32 \</font></div><div><font face="monospace, monospace">CXXFLAGS=-m32 --with-wrapper-cxxflags=-m32 \</font></div><div><font face="monospace, monospace">FCFLAGS=-m32 --with-wrapper-fcflags=-m32</font></div></blockquote><div><br></div><div>I can send (off-list) the config.log and configure&#39;s complete stdout for both the LP64 and ILP32 builds if requested.</div><div><br></div><div>-Paul</div><div><br><div><br clear="all"><div><div><font face="monospace, monospace">/bin/sh ../../../libtool  --tag=CC   --mode=link cc  -g -finline-functions -fno-strict-aliasing   -export-dynamic  -Wl,-flat_namespace  -o opal_wrapper opal_wrapper.o ../../../opal/<a href="http://libopen-pal.la">libopen-pal.la</a> </font></div><div><font face="monospace, monospace">libtool: link: cc -g -finline-functions -fno-strict-aliasing -Wl,-flat_namespace -o .libs/opal_wrapper opal_wrapper.o  ../../../opal/.libs/libopen-pal.dylib -lm</font></div><div><font face="monospace, monospace">Undefined symbols for architecture x86_64:</font></div><div><font face="monospace, monospace">  &quot;_lt_libltdlc_LTX_preloaded_symbols&quot;, referenced from:</font></div><div><font face="monospace, monospace">      import-atom in libopen-pal.dylib</font></div><div><font face="monospace, monospace">ld: symbol(s) not found for architecture x86_64</font></div><div><font face="monospace, monospace">clang: error: linker command failed with exit code 1 (use -v to see invocation)</font></div><div><font face="monospace, monospace">make[2]: *** [opal_wrapper] Error 1</font></div><div><font face="monospace, monospace">make[1]: *** [all-recursive] Error 1</font></div><div><font face="monospace, monospace">make: *** [all-recursive] Error 1</font></div></div><div><br></div><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div></div></div>

