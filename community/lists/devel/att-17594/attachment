<div dir="ltr"><div>On OS X the generating the MPI library fails with the following error message:</div><div><br></div><div>duplicate symbol _ompi_buffer_detach_f08 in:<br></div><div>    .libs/buffer_detach_f.o</div><div>    profile/.libs/libmpi_mpifh_pmpi.a(pbuffer_detach_f.o)</div><div>ld: 1 duplicate symbol for architecture x86_64</div><div><br></div><div>I came up with the following patch, but I&#39;m not sure this is the real fix. It does fix the issue in my particular configuration.</div><div><br></div><div>diff --git a/ompi/mpi/fortran/mpif-h/buffer_detach_f.c b/ompi/mpi/fortran/mpif-h/buffer_detach_f.c</div><div>index e2114d7..5d2c530 100644</div><div>--- a/ompi/mpi/fortran/mpif-h/buffer_detach_f.c</div><div>+++ b/ompi/mpi/fortran/mpif-h/buffer_detach_f.c</div><div>@@ -88,6 +88,7 @@ void ompi_buffer_detach_f(char *buffer, MPI_Fint *size, MPI_Fint *ierr)</div><div>     }</div><div> }</div><div><br></div><div>+#if !OMPI_PROFILE_LAYER</div><div> /*</div><div>  * Per above, this is the mpi_f08 module implementation of</div><div>  * MPI_BUFFER_DETACH.  It handles the buffer arugment just like the C</div><div>@@ -107,3 +108,4 @@ void ompi_buffer_detach_f08(char *buffer, MPI_Fint *size, MPI_Fint *ierr)</div><div>         OMPI_SINGLE_INT_2_FINT(size);</div><div>     }</div><div> }</div><div>+#endif  /* !OMPI_PROFILE_LAYER */ </div><div><br></div><div>George.</div><div><br></div></div>

