<div dir="ltr">Jeff,<div><br></div><div>See below for some failure details.</div><div>The look like different symptoms of the same issue.</div><div><br></div><div>-Paul<br><div><br></div><div>Open64 link failure:</div><div><br></div><div><div><font face="monospace">$ mpifort -g hello_mpifh.f -o hello_mpifh</font></div><div><font face="monospace">/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-open64/INST/lib/libmpi_mpifh.so: undefined reference to `_Iso_c_binding&#39;</font></div><div><font face="monospace">collect2: ld returned 1 exit status</font></div><div><font face="monospace">make[2]: *** [hello_mpifh] Error 1</font></div></div><div><br></div><div>Gcc build failure:</div><div><font face="monospace"><br></font></div><div><div><font face="monospace">libtool: compile:  gfortran -DHAVE_CONFIG_H -I. -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h -I../../../../opal/include -I../../../../orte/include -I../../../../ompi/include -I../../../../oshmem/include -I../../../../opal/mca/hwloc/hwloc191/hwloc/include/private/autogen -I../../../../opal/mca/hwloc/hwloc191/hwloc/include/hwloc/autogen -DOMPI_PROFILE_LAYER=0 -DOMPI_COMPILING_FORTRAN_WRAPPERS=1 -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5 -I../../../.. -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/opal/include -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/orte/include -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/include -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/oshmem/include -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/opal/mca/hwloc/hwloc191/hwloc/include -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/BLD/opal/mca/hwloc/hwloc191/hwloc/include -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/opal/mca/event/libevent2021/libevent -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/opal/mca/event/libevent2021/libevent/include -I/global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/BLD/opal/mca/event/libevent2021/libevent/include -I../../../../ompi/mpi/fortran/use-mpi-tkr -g -c /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90  -fPIC -o .libs/libmpi_mpifh_sizeof_la-sizeof-mpif08-pre-1.8.4_f.o</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:32</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">   use, intrinsic :: ISO_C_BINDING</font></div><div><font face="monospace">  1</font></div><div><font face="monospace">Error: Unclassifiable statement at (1)</font></div></div><div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/omp</font></div><div><font face="monospace">i/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:38</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      use, intrinsic :: ISO_C_BINDING</font></div><div><font face="monospace">     1</font></div><div><font face="monospace">Error: Unclassifiable statement at (1)</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/omp</font></div><div><font face="monospace">i/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:40</font></div></div><div><font face="monospace"><br></font></div></div><div><div><font face="monospace"><br></font></div><div><font face="monospace">      INTEGER(KIND=C_SIGNED_CHAR), INTENT(IN) :: x</font></div><div><font face="monospace">                               1</font></div><div><font face="monospace">Error: Symbol &#39;c_signed_char&#39; at (1) has no IMPLICIT type</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:50</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      use, intrinsic :: ISO_C_BINDING</font></div><div><font face="monospace">     1</font></div><div><font face="monospace">Error: Unclassifiable statement at (1)</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:52</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      INTEGER(KIND=C_SIGNED_CHAR), INTENT(IN) :: x(*)</font></div><div><font face="monospace">                               1</font></div><div><font face="monospace">Error: Symbol &#39;c_signed_char&#39; at (1) has no IMPLICIT type</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:64</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      use, intrinsic :: ISO_C_BINDING</font></div><div><font face="monospace">     1</font></div><div><font face="monospace">Error: Unclassifiable statement at (1)</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:66</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      INTEGER(KIND=C_SHORT), INTENT(IN) :: x</font></div><div><font face="monospace">                         1</font></div><div><font face="monospace">Error: Symbol &#39;c_short&#39; at (1) has no IMPLICIT type</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:76</font></div></div><div><div><font face="monospace"><br></font></div><div><font face="monospace">      use, intrinsic :: ISO_C_BINDING</font></div><div><font face="monospace">     1</font></div><div><font face="monospace">Error: Unclassifiable statement at (1)</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:78</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      INTEGER(KIND=C_SHORT), INTENT(IN) :: x(*)</font></div><div><font face="monospace">                         1</font></div><div><font face="monospace">Error: Symbol &#39;c_short&#39; at (1) has no IMPLICIT type</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:90</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      use, intrinsic :: ISO_C_BINDING</font></div><div><font face="monospace">     1</font></div><div><font face="monospace">Error: Unclassifiable statement at (1)</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:92</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      INTEGER(KIND=C_INT), INTENT(IN) :: x</font></div><div><font face="monospace">                       1</font></div><div><font face="monospace">Error: Symbol &#39;c_int&#39; at (1) has no IMPLICIT type</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:102</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">      use, intrinsic :: ISO_C_BINDING</font></div><div><font face="monospace">     1</font></div><div><font face="monospace">Error: Unclassifiable statement at (1)</font></div><div><font face="monospace"> In file /global/homes/h/hargrove/GSCRATCH/OMPI/openmpi-1.8.4rc5-linux-x86_64-gcc-atomics/openmpi-1.8.4rc5/ompi/mpi/fortran/mpif-h/sizeof-mpif08-pre-1.8.4_f.F90:104</font></div></div><div><font face="monospace"><br></font></div><div><font face="monospace">[...about 180 more lines of similar output...]</font></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Thu, Dec 18, 2014 at 9:30 AM, Jeff Squyres (jsquyres) <span dir="ltr">&lt;<a href="mailto:jsquyres@cisco.com" target="_blank">jsquyres@cisco.com</a>&gt;</span> wrote:<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><span class="">On Dec 18, 2014, at 11:55 AM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov">phhargrove@lbl.gov</a>&gt; wrote:<br>
<br>
&gt; + NEW: I see Fortran bindings failing to compile w/ gfortran<br>
&gt; + NEW: I see Fortran bindings fail to link with Open64<br>
<br>
</span>Paul -- you make me sad.  Sigh.<br>
<br>
Send some details of these failures when you can.<br>
<br>
Thanks!<br>
<span class="HOEnZb"><font color="#888888"><br>
--<br>
Jeff Squyres<br>
<a href="mailto:jsquyres@cisco.com">jsquyres@cisco.com</a><br>
For corporate legal information go to: <a href="http://www.cisco.com/web/about/doing_business/legal/cri/" target="_blank">http://www.cisco.com/web/about/doing_business/legal/cri/</a><br>
<br>
_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br>
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2014/12/16671.php" target="_blank">http://www.open-mpi.org/community/lists/devel/2014/12/16671.php</a><br>
</font></span></blockquote></div><br clear="all"><div><br></div>-- <br><div class="gmail_signature"><div dir="ltr"><div><font face="courier new, monospace"><div>Paul H. Hargrove                          <a href="mailto:PHHargrove@lbl.gov" target="_blank">PHHargrove@lbl.gov</a></div><div>Computer Languages &amp; Systems Software (CLaSS) Group</div><div>Computer Science Department               Tel: +1-510-495-2352</div><div>Lawrence Berkeley National Laboratory     Fax: +1-510-486-6900</div></font></div></div></div>
</div>

