<html><head><meta http-equiv="Content-Type" content="text/html charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" class="">I see - yes, that would be true. It would not build without hwloc. An alternative would be to have hwloc return a neutral response that we check and ignore if hwloc isn’t “active”. Would that suffice?<div class=""><br class=""></div><div class="">I’m just looking to remove all that #if cruft all over the place.</div><div class=""><br class=""><div><blockquote type="cite" class=""><div class="">On Sep 3, 2015, at 4:02 PM, Paul Hargrove &lt;<a href="mailto:phhargrove@lbl.gov" class="">phhargrove@lbl.gov</a>&gt; wrote:</div><br class="Apple-interchange-newline"><div class=""><div dir="ltr" class="">Gilles,<div class=""><br class=""></div><div class="">You have the nature of my question correct.</div><div class="">To restate:</div><div class=""><br class=""></div><div class="">Imagine somebody is developing an experimental platform (such as a research OS) and they want an MPI for it.</div><div class="">Additionally assume that hwloc (the embedded one or otherwise) doesn't build at all for this platform.</div><div class="">It is my understanding (please correct if I've got it wrong) that currently they can configure using --without-hwloc.</div><div class="">My concern is that if --without-hwloc is dropped then they cannot build Open MPI at all without first porting hwloc.</div><div class=""><br class=""></div><div class="">-Paul</div></div><div class="gmail_extra"><br class=""><div class="gmail_quote">On Thu, Sep 3, 2015 at 3:36 PM, Gilles Gouaillardet <span dir="ltr" class="">&lt;<a href="mailto:gilles.gouaillardet@gmail.com" target="_blank" class="">gilles.gouaillardet@gmail.com</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Ralph,<div class=""><br class=""></div><div class="">just to&nbsp;be clear, your proposal is to abort if openmpi is configured with --without-hwloc, right ?</div><div class="">( the --with-hwloc option is not removed because we want to keep the option of using an external hwloc library )</div><div class=""><br class=""></div><div class="">if I understand correctly, Paul's point is that if openmpi is ported to a new architecture for which hwloc has not been ported yet (embedded hwloc or external hwloc), then the very first step is to port hwloc before ompi can be built.</div><div class=""><br class=""></div><div class="">did I get it right Paul ?</div><div class=""><br class=""></div><div class="">Brice, what would happen in such a case ?</div><div class="">embedded hwloc cannot be built ?</div><div class="">hwloc returns little or no information ?</div><div class=""><br class=""></div><div class="">for example, on Fujitsu FX10 node (single socket, 16 cores), hwloc reports 16 sockets with one core each and no cache. though this is not correct, that can be seen as equivalent to the real config by ompi, so this is not really an issue for ompi.</div><div class=""><br class=""></div><div class="">Cheers,</div><div class=""><br class=""></div><div class="">Gilles<br class=""><br class="">On Friday, September 4, 2015, Ralph Castain &lt;<a href="mailto:rhc@open-mpi.org" target="_blank" class="">rhc@open-mpi.org</a>&gt; wrote:<br class=""><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word" class="">No - hwloc is embedded in OMPI anyway.<div class=""><br class=""><div class=""><blockquote type="cite" class=""><div class="">On Sep 3, 2015, at 11:09 AM, Paul Hargrove &lt;<a class="">phhargrove@lbl.gov</a>&gt; wrote:</div><br class=""><div class=""><div dir="ltr" class=""><div class="gmail_extra"><br class=""><div class="gmail_quote">On Thu, Sep 3, 2015 at 8:03 AM, Ralph Castain <span dir="ltr" class="">&lt;<a class="">rhc@open-mpi.org</a>&gt;</span> wrote:<br class=""><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="overflow:hidden" class="">Does anyone know of a reason why we shouldn’t do this?<br class=""></div></blockquote></div><br class=""><br class="">Would doing this mean that a port to a new system would require that one first perform a full hwloc port?<br class=""><br class="">-Paul<span class="HOEnZb"><font color="#888888" class=""><br clear="all" class=""><div class=""><br class=""></div>-- <br class=""><div class=""><div dir="ltr" class=""><div class=""><font face="courier new, monospace" class=""><div class="">Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="">PHHargrove@lbl.gov</a></div><div class="">Computer Languages &amp; Systems Software (CLaSS) Group</div><div class="">Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: <a href="tel:%2B1-510-495-2352" value="+15104952352" target="_blank" class="">+1-510-495-2352</a></div><div class="">Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: <a href="tel:%2B1-510-486-6900" value="+15104866900" target="_blank" class="">+1-510-486-6900</a></div></font></div></div></div>
</font></span></div></div><span class="HOEnZb"><font color="#888888" class="">
_______________________________________________<br class="">devel mailing list<br class=""><a class="">devel@open-mpi.org</a><br class="">Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2015/09/17942.php" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2015/09/17942.php</a></font></span></div></blockquote></div><span class="HOEnZb"><font color="#888888" class=""><br class=""></font></span></div></div></blockquote></div>
<br class="">_______________________________________________<br class="">
devel mailing list<br class="">
<a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">
Subscription: <a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" rel="noreferrer" target="_blank" class="">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br class="">
Link to this post: <a href="http://www.open-mpi.org/community/lists/devel/2015/09/17952.php" rel="noreferrer" target="_blank" class="">http://www.open-mpi.org/community/lists/devel/2015/09/17952.php</a><br class=""></blockquote></div><br class=""><br clear="all" class=""><div class=""><br class=""></div>-- <br class=""><div class="gmail_signature"><div dir="ltr" class=""><div class=""><font face="courier new, monospace" class=""><div class="">Paul H. Hargrove &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:PHHargrove@lbl.gov" target="_blank" class="">PHHargrove@lbl.gov</a></div><div class="">Computer Languages &amp; Systems Software (CLaSS) Group</div><div class="">Computer Science Department &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: +1-510-495-2352</div><div class="">Lawrence Berkeley National Laboratory &nbsp; &nbsp; Fax: +1-510-486-6900</div></font></div></div></div>
</div>
_______________________________________________<br class="">devel mailing list<br class=""><a href="mailto:devel@open-mpi.org" class="">devel@open-mpi.org</a><br class="">Subscription: http://www.open-mpi.org/mailman/listinfo.cgi/devel<br class="">Link to this post: http://www.open-mpi.org/community/lists/devel/2015/09/17954.php</div></blockquote></div><br class=""></div></body></html>
