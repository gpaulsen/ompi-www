<html><head><style type="text/css"><!-- DIV {margin:0px;} --></style></head><body><div style="font-family:times new roman, new york, times, serif;font-size:10pt">Thanks.... Seems, adding the callback magic is better option. Will bug u guys in near future after some research on the issue. <br><br><div>&nbsp;</div>Best Regards,<br>Muhammad Atif<div style="font-family: times new roman,new york,times,serif; font-size: 10pt;"><br><br><div style="font-family: times new roman,new york,times,serif; font-size: 12pt;">----- Original Message ----<br>From: Brian W. Barrett &lt;brbarret@open-mpi.org&gt;<br>To: Open MPI Developers &lt;devel@open-mpi.org&gt;<br>Sent: Wednesday, February 6, 2008 2:57:31 AM<br>Subject: Re: [OMPI devel] xensocket - callbacks through OPAL/libevent<br><br>
On 
Mon, 
4 
Feb 
2008, 
Muhammad 
Atif 
wrote:<br><br>&gt; 
I 
am 
trying 
to 
port 
xensockets 
to 
openmpi. 
In 
principle, 
I 
have 
the <br>&gt; 
framework 
and 
everything, 
but 
there 
seems 
to 
be 
a 
small 
issue, 
I 
cannot <br>&gt; 
get 
libevent 
(or 
OPAL) 
to 
give 
callbacks 
for 
receive 
(or 
send) 
for <br>&gt; 
xensockets. 
I 
have 
tried 
to 
implement 
native 
code 
for 
xensockets 
with <br>&gt; 
libevent 
library, 
again 
the 
same 
issue.&nbsp; 
No 
call 
backs! 
. 
With 
normal <br>&gt; 
sockets, 
callbacks 
do 
come 
easily.<br>&gt;<br>&gt; 
So 
question 
is, 
do 
the 
socket/file 
descriptors 
have 
to 
have 
some 
special <br>&gt; 
mechanism 
attached 
to 
them 
to 
support 
callbacks 
for 
libevent/opal? 
i.e <br>&gt; 
some 
structure/magic?. 
i.e. 
maybe 
the 
developers 
of 
xensockets 
did 
not <br>&gt; 
add 
that 
callback/interrupt 
thing 
at 
the 
time 
of 
creation. 
Xensockets 
is <br>&gt; 
open 
source, 
but 
my 
knowledge 
about 
these 
issues 
is 
limited. 
So 
I 
though <br>&gt; 
some 
pointer 
in 
right 
direction 
might 
be 
useful.<br><br>Yes 
and 
no 
:).&nbsp; 
As 
you 
discovered, 
the 
OPAL 
interface 
just 
repackages 
a <br>library 
called 
libevent 
to 
handle 
its 
socket 
multiplexing.&nbsp; 
Libevent 
can <br>use 
a 
number 
of 
different 
mechanisms 
to 
look 
for 
activity 
on 
sockets, <br>including 
select() 
and 
poll() 
calls.&nbsp; 
On 
Linux, 
it 
will 
generally 
use <br>poll().&nbsp; 
poll() 
requires 
some 
kernel 
support 
to 
do 
its 
thing, 
so 
if <br>Xensockets 
doesn't 
implement 
the 
right 
magic 
to 
trigger 
poll() 
events, <br>then 
libevent 
won't 
work 
for 
Xensockets.&nbsp; 
There's 
really 
nothing 
you 
can <br>do 
from 
the 
Open 
MPI 
front 
to 
work 
around 
this 
issue 
-- 
it 
would 
have 
to <br>be 
fixed 
as 
part 
of 
Xensockets.<br><br>&gt; 
Second 
question 
is, 
what 
if 
we 
cannot 
have 
the 
callbacks. 
What 
is 
the <br>&gt; 
recommended 
way 
to 
implement 
the 
btl 
component 
for 
such 
a 
device? 
Do 
we <br>&gt; 
need 
to 
do 
this 
with 
event 
timers?<br><br>Have 
a 
look 
at 
any 
of 
the 
BTLs 
that 
isn't 
TCP 
-- 
none 
of 
them 
use 
libevent <br>callbacks 
for 
progress.&nbsp; 
Instead, 
they 
provide 
a 
progress 
function 
as 
part <br>of 
the 
BTL 
interface, 
which 
is 
called 
on 
a 
regular 
basis 
whenever 
progress <br>needs 
to 
be 
made.<br><br>Brian<br>_______________________________________________<br>devel 
mailing 
list<br><a ymailto="mailto:devel@open-mpi.org" href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></div><br></div></div><br>



      <hr size=1>Never miss a thing.  <a href="http://us.rd.yahoo.com/evt=51438/*http://www.yahoo.com/r/hs"> Make Yahoo your homepage.</a>

</body></html>
