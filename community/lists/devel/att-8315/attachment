<html><head></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Per the discussion on today's telecon, I've started working with Jeff on refactoring the opal/util/if.c code into something more understandable without changing the discovery logic. We are creating a framework that solely performs interface discovery, leaving all of the interface wrapper functions untouched. The various components are now configured in/out instead of being buried in multiple layers of #if.<div><br></div><div>Jeff will be working on the configure logic in the near future. Meantime, the layout of the system is complete and everything builds as it should.</div><div><br></div><div>Operation of the framework is straightforward. When framework open is called, it iterates through all available components and calls their open function. At that time, each component adds to the list of interfaces whatever it finds. The IPv4 interface discovery that was common across posix-based systems is located in a single component. The IPv6 discovery code, which tended to be highly system specific, is in separate components.</div><div><br></div><div>As a result, there may be a change in the order in which interfaces are found on the list from where they appear today. However, this order was never guaranteed anyway, so any code that relied on it is incorrect and should be fixed.</div><div><br></div><div>You are welcome to look at what is being done:</div><div><br></div><div><meta charset="utf-8"><span class="Apple-style-span" style="color: rgb(82, 82, 82); font-family: 'Lucida Grande', Verdana, Arial, sans-serif; font-size: 13px; line-height: 18px; "><pre id="clone-url-https" style="font: normal normal normal 11px/normal 'Bitstream Vera Sans Mono', Monaco, 'Courier New', Courier, monospace; padding-top: 0px !important; padding-right: 0px !important; padding-bottom: 0px !important; padding-left: 0px !important; margin-top: 3px !important; margin-right: 0px !important; margin-bottom: 3px !important; margin-left: 0px !important; ">hg clone <a href="https://rhc@bitbucket.org/rhc/ompi-if" style="color: rgb(43, 84, 125); text-decoration: none; ">https://rhc@bitbucket.org/rhc/ompi-if</a></pre></span><div><br></div></div><div>Ralph</div><div><br></div></body></html>
