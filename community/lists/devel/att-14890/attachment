<div dir="ltr">Ralph,<br><div class="gmail_extra"><br><br><div class="gmail_quote">On Wed, May 28, 2014 at 9:33 PM, Ralph Castain <span dir="ltr">&lt;<a href="mailto:rhc@open-mpi.org" target="_blank">rhc@open-mpi.org</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="word-wrap:break-word"><div><div class=""><blockquote type="cite"><div dir="ltr"><div class="gmail_extra"><div class="gmail_quote">
<div>This is definetly what happens : only some tasks call MPI_Comm_free()</div></div></div></div></blockquote><div><br></div></div>Really? I don&#39;t see how that can happen in loop_spawn - every process is clearly calling comm_free. Or are you referring to the intercomm_create test?</div>
<div><div class=""><br></div></div></div></blockquote><div>yes, i am referring intercomm_create test</div><div><br></div><div>about loop_spawn, i could not get any error on my single host single socket VM.</div><div>(i tried --mca btl tcp,sm,self and --mca btl tcp,self)</div>
<div><br></div><div>MPI_Finalize will end up calling ompi_dpm_dyn_finalize which causes the error message on the parent of intercomm_create.</div><div>a necessary condition is ompi_comm_num_dyncomm &gt; 1</div><div>/* which by the way sounds odd to me, should it be 0 ? */</div>
<div>which imho cannot happen if all communicators have been freed</div><div><br></div><div>can you detail your full mpirun command line, the number of servers you are using, the btl involved and the ompi release that can be used to reproduce the issue ?</div>
<div><br></div><div>i will try to reproduce this myself</div><div><br></div><div>Cheers,</div><div><br></div><div>Gilles</div><div><br></div><div><br></div></div></div></div>

