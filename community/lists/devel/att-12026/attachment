<html><head><meta http-equiv="Content-Type" content="text/html charset=iso-8859-1"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">I don't see anything in the config script that checks for gcc - you might take a look at it to check. It's in config/orte_check_tm.m4 on our developer's trunk<div><br><div><div>On Jan 28, 2013, at 10:54 AM, David Beer &lt;<a href="mailto:dbeer@adaptivecomputing.com">dbeer@adaptivecomputing.com</a>&gt; wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div><br></div><div class="gmail_quote">On Mon, Jan 28, 2013 at 10:54 AM, Barrett, Brian W <span dir="ltr">&lt;<a href="mailto:bwbarre@sandia.gov" target="_blank">bwbarre@sandia.gov</a>&gt;</span> wrote:<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<div style="font-size:14px;font-family:Calibri,sans-serif;word-wrap:break-word"><div class="im"><br></div><div>We assume that we can link lib torque into a C application (if this is a problem for you, it's a huge deal breaker for us, since OMPI is a C library). &nbsp;What does config.log say when checking for tm_init?</div>
<div><br></div><div>Brian</div><div><br></div></div></blockquote><div><br></div><div>Brian,<div><br></div><div>libtorque can still be linked in to C applications. In testing with a simple C program, we did have to add&nbsp;</div>
<div><br></div><div>void *__gxx_personality_v0;</div><div><br></div><div>to the C program. Here is the error reported by the configure script:</div><div><br></div><div><div>checking for pbs-config... /usr/local/bin/pbs-config</div>
<div>checking tm.h usability... yes</div><div>checking tm.h presence... yes</div><div>checking for tm.h... yes</div><div>checking for tm_finalize... no</div><div>looking for header without includes</div><div>checking tm.h usability... yes</div>
<div>checking tm.h presence... yes</div><div>checking for tm.h... yes</div><div>looking for library without search path</div><div>checking for tm_init in -lpbs... no</div><div>looking for library in lib</div><div>checking for tm_init in -lpbs... no</div>
<div>looking for library in lib64</div><div>checking for tm_init in -lpbs... no</div><div>looking for library without search path</div><div>checking for tm_init in -ltorque... no</div><div>looking for library in lib</div>
<div>checking for tm_init in -ltorque... no</div><div>looking for library in lib64</div><div>checking for tm_init in -ltorque... no</div><div>configure: error: TM support requested but not found. &nbsp;Aborting</div></div></div>
<div><br></div><div>Oddly enough, if you have already configured with an older version of TORQUE, you can build open-mpi with TORQUE 4.2 installed, so it can find the function definitions when compiling, its just for some reason it doesn't find them in the configure script. This is why I think that something in the configure script is assuming that libtorque was compiled with gcc.</div>
<div><br></div><div>David</div><div>&nbsp;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div style="font-size:14px;font-family:Calibri,sans-serif;word-wrap:break-word">
<div><div></div><div><div style="font-family:Consolas;font-size:medium">--</div><div style="font-family:Consolas;font-size:medium">&nbsp;&nbsp;Brian W. Barrett</div><div style="font-family:Consolas;font-size:medium">
&nbsp;&nbsp;Scalable System Software Group</div><div style="font-family:Consolas;font-size:medium">&nbsp;&nbsp;Sandia National Laboratories</div></div></div></div>
<br>_______________________________________________<br>
devel mailing list<br>
<a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>
<a href="http://www.open-mpi.org/mailman/listinfo.cgi/devel" target="_blank">http://www.open-mpi.org/mailman/listinfo.cgi/devel</a><br></blockquote></div><br><br clear="all"><div><br></div>-- <br><div>David Beer | Senior Software Engineer</div>
<div>Adaptive Computing</div>
_______________________________________________<br>devel mailing list<br><a href="mailto:devel@open-mpi.org">devel@open-mpi.org</a><br>http://www.open-mpi.org/mailman/listinfo.cgi/devel</blockquote></div><br></div></body></html>
